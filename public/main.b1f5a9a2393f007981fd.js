(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{"/6Yf":function(t,e,n){"use strict";n.d(e,"a",function(){return o}),n.d(e,"b",function(){return u}),n.d(e,"c",function(){return a});var r=n("uXP2"),i=n("qOnz"),o=function(){function t(t,e,n){this.name=t,this.instanceFactory=e,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY"}return t.prototype.setInstantiationMode=function(t){return this.instantiationMode=t,this},t.prototype.setMultipleInstances=function(t){return this.multipleInstances=t,this},t.prototype.setServiceProps=function(t){return this.serviceProps=t,this},t}(),s="[DEFAULT]",a=function(){function t(t,e){this.name=t,this.container=e,this.component=null,this.instances=new Map,this.instancesDeferred=new Map}return t.prototype.get=function(t){void 0===t&&(t=s);var e=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(e)){var n=new i.a;this.instancesDeferred.set(e,n);try{var r=this.getOrInitializeService(e);r&&n.resolve(r)}catch(o){}}return this.instancesDeferred.get(e).promise},t.prototype.getImmediate=function(t){var e=Object(r.a)({identifier:s,optional:!1},t),n=e.optional,i=this.normalizeInstanceIdentifier(e.identifier);try{var o=this.getOrInitializeService(i);if(!o){if(n)return null;throw Error("Service "+this.name+" is not available")}return o}catch(a){if(n)return null;throw a}},t.prototype.getComponent=function(){return this.component},t.prototype.setComponent=function(t){var e,n;if(t.name!==this.name)throw Error("Mismatching Component "+t.name+" for Provider "+this.name+".");if(this.component)throw Error("Component for "+this.name+" has already been provided");if(this.component=t,function(t){return"EAGER"===t.instantiationMode}(t))try{this.getOrInitializeService(s)}catch(h){}try{for(var i=Object(r.h)(this.instancesDeferred.entries()),o=i.next();!o.done;o=i.next()){var a=Object(r.e)(o.value,2),u=a[1],c=this.normalizeInstanceIdentifier(a[0]);try{var l=this.getOrInitializeService(c);u.resolve(l)}catch(h){}}}catch(d){e={error:d}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}},t.prototype.clearInstance=function(t){void 0===t&&(t=s),this.instancesDeferred.delete(t),this.instances.delete(t)},t.prototype.delete=function(){return Object(r.b)(this,void 0,void 0,function(){var t;return Object(r.d)(this,function(e){switch(e.label){case 0:return t=Array.from(this.instances.values()),[4,Promise.all(Object(r.f)(t.filter(function(t){return"INTERNAL"in t}).map(function(t){return t.INTERNAL.delete()}),t.filter(function(t){return"_delete"in t}).map(function(t){return t._delete()})))];case 1:return e.sent(),[2]}})})},t.prototype.isComponentSet=function(){return null!=this.component},t.prototype.getOrInitializeService=function(t){var e=this.instances.get(t);return!e&&this.component&&(e=this.component.instanceFactory(this.container,function(t){return t===s?void 0:t}(t)),this.instances.set(t,e)),e||null},t.prototype.normalizeInstanceIdentifier=function(t){return this.component?this.component.multipleInstances?t:s:t},t}(),u=function(){function t(t){this.name=t,this.providers=new Map}return t.prototype.addComponent=function(t){var e=this.getProvider(t.name);if(e.isComponentSet())throw new Error("Component "+t.name+" has already been registered with "+this.name);e.setComponent(t)},t.prototype.addOrOverwriteComponent=function(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)},t.prototype.getProvider=function(t){if(this.providers.has(t))return this.providers.get(t);var e=new a(t,this);return this.providers.set(t,e),e},t.prototype.getProviders=function(){return Array.from(this.providers.values())},t}()},0:function(t,e,n){t.exports=n("zUnb")},"2QA8":function(t,e,n){"use strict";n.d(e,"a",function(){return r});const r=(()=>"function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random())()},"2fFW":function(t,e,n){"use strict";n.d(e,"a",function(){return i});let r=!1;const i={Promise:void 0,set useDeprecatedSynchronousErrorHandling(t){if(t){const t=new Error;console.warn("DEPRECATED! RxJS was set to use deprecated synchronous error handling behavior by code at: \n"+t.stack)}else r&&console.log("RxJS: Back to a better error behavior. Thank you. <3");r=t},get useDeprecatedSynchronousErrorHandling(){return r}}},"3N8a":function(t,e,n){"use strict";n.d(e,"a",function(){return o});var r=n("quSY");class i extends r.a{constructor(t,e){super()}schedule(t,e=0){return this}}class o extends i{constructor(t,e){super(t,e),this.scheduler=t,this.work=e,this.pending=!1}schedule(t,e=0){if(this.closed)return this;this.state=t;const n=this.id,r=this.scheduler;return null!=n&&(this.id=this.recycleAsyncId(r,n,e)),this.pending=!0,this.delay=e,this.id=this.id||this.requestAsyncId(r,this.id,e),this}requestAsyncId(t,e,n=0){return setInterval(t.flush.bind(t,this),n)}recycleAsyncId(t,e,n=0){if(null!==n&&this.delay===n&&!1===this.pending)return e;clearInterval(e)}execute(t,e){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const n=this._execute(t,e);if(n)return n;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(t,e){let n,r=!1;try{this.work(t)}catch(i){r=!0,n=!!i&&i||new Error(i)}if(r)return this.unsubscribe(),n}_unsubscribe(){const t=this.id,e=this.scheduler,n=e.actions,r=n.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==r&&n.splice(r,1),null!=t&&(this.id=this.recycleAsyncId(e,t,null)),this.delay=null}}},"3UD+":function(t,e){t.exports=function(t){if(!t.webpackPolyfill){var e=Object.create(t);e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),Object.defineProperty(e,"exports",{enumerable:!0}),e.webpackPolyfill=1}return e}},"5+tZ":function(t,e,n){"use strict";n.d(e,"a",function(){return s});var r=n("lJxs"),i=n("Cfvw"),o=n("zx2A");function s(t,e,n=Number.POSITIVE_INFINITY){return"function"==typeof e?o=>o.pipe(s((n,o)=>Object(i.a)(t(n,o)).pipe(Object(r.a)((t,r)=>e(n,t,o,r))),n)):("number"==typeof e&&(n=e),e=>e.lift(new a(t,n)))}class a{constructor(t,e=Number.POSITIVE_INFINITY){this.project=t,this.concurrent=e}call(t,e){return e.subscribe(new u(t,this.project,this.concurrent))}}class u extends o.b{constructor(t,e,n=Number.POSITIVE_INFINITY){super(t),this.project=e,this.concurrent=n,this.hasCompleted=!1,this.buffer=[],this.active=0,this.index=0}_next(t){this.active<this.concurrent?this._tryNext(t):this.buffer.push(t)}_tryNext(t){let e;const n=this.index++;try{e=this.project(t,n)}catch(r){return void this.destination.error(r)}this.active++,this._innerSub(e)}_innerSub(t){const e=new o.a(this),n=this.destination;n.add(e);const r=Object(o.c)(t,e);r!==e&&n.add(r)}_complete(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete(),this.unsubscribe()}notifyNext(t){this.destination.next(t)}notifyComplete(){const t=this.buffer;this.active--,t.length>0?this._next(t.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()}}},"6Uf2":function(t,e,n){"use strict";(function(t){var e,r=n("zIRd"),i=n("uXP2"),o=n("qOnz"),s=n("q/0M"),a=n("/6Yf"),u=function(){function t(t){this.domStorage_=t,this.prefix_="firebase:"}return t.prototype.set=function(t,e){null==e?this.domStorage_.removeItem(this.prefixedName_(t)):this.domStorage_.setItem(this.prefixedName_(t),Object(o.G)(e))},t.prototype.get=function(t){var e=this.domStorage_.getItem(this.prefixedName_(t));return null==e?null:Object(o.A)(e)},t.prototype.remove=function(t){this.domStorage_.removeItem(this.prefixedName_(t))},t.prototype.prefixedName_=function(t){return this.prefix_+t},t.prototype.toString=function(){return this.domStorage_.toString()},t}(),c=function(){function t(){this.cache_={},this.isInMemoryStorage=!0}return t.prototype.set=function(t,e){null==e?delete this.cache_[t]:this.cache_[t]=e},t.prototype.get=function(t){return Object(o.i)(this.cache_,t)?this.cache_[t]:null},t.prototype.remove=function(t){delete this.cache_[t]},t}(),l=function(t){try{if("undefined"!=typeof window&&void 0!==window[t]){var e=window[t];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new u(e)}}catch(n){}return new c},h=l("localStorage"),d=l("sessionStorage"),f=new s.b("@firebase/database"),p=(e=1,function(){return e++}),g=function(t){var e=Object(o.F)(t),n=new o.d;n.update(e);var r=n.digest();return o.g.encodeByteArray(r)},m=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n="",r=0;r<t.length;r++){var i=t[r];Array.isArray(i)||i&&"object"==typeof i&&"number"==typeof i.length?n+=m.apply(null,i):n+="object"==typeof i?Object(o.G)(i):i,n+=" "}return n},y=null,b=!0,v=function(t,e){Object(o.e)(!e||!0===t||!1===t,"Can't turn on custom loggers persistently."),!0===t?(f.logLevel=s.a.VERBOSE,y=f.log.bind(f),e&&d.set("logging_enabled",!0)):"function"==typeof t?y=t:(y=null,d.remove("logging_enabled"))},_=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(!0===b&&(b=!1,null===y&&!0===d.get("logging_enabled")&&v(!0)),y){var n=m.apply(null,t);y(n)}},w=function(t){return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];_.apply(void 0,Object(i.f)([t],e))}},C=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="FIREBASE INTERNAL ERROR: "+m.apply(void 0,Object(i.f)(t));f.error(n)},O=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="FIREBASE FATAL ERROR: "+m.apply(void 0,Object(i.f)(t));throw f.error(n),new Error(n)},E=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="FIREBASE WARNING: "+m.apply(void 0,Object(i.f)(t));f.warn(n)},x=function(t){return"number"==typeof t&&(t!=t||t===Number.POSITIVE_INFINITY||t===Number.NEGATIVE_INFINITY)},I="[MIN_NAME]",S="[MAX_NAME]",T=function(t,e){if(t===e)return 0;if(t===I||e===S)return-1;if(e===I||t===S)return 1;var n=z(t),r=z(e);return null!==n?null!==r?n-r==0?t.length-e.length:n-r:-1:null!==r?1:t<e?-1:1},P=function(t,e){return t===e?0:t<e?-1:1},R=function(t,e){if(e&&t in e)return e[t];throw new Error("Missing required key ("+t+") in object: "+Object(o.G)(e))},A=function(t){if("object"!=typeof t||null===t)return Object(o.G)(t);var e=[];for(var n in t)e.push(n);e.sort();for(var r="{",i=0;i<e.length;i++)0!==i&&(r+=","),r+=Object(o.G)(e[i]),r+=":",r+=A(t[e[i]]);return r+"}"},k=function(t,e){var n=t.length;if(n<=e)return[t];for(var r=[],i=0;i<n;i+=e)r.push(t.substring(i,i+e>n?n:i+e));return r};function j(t,e){for(var n in t)t.hasOwnProperty(n)&&e(n,t[n])}var N,D,M,L,F,U,V,Q,H,q=function(t){var e,n,r,i,s;Object(o.e)(!x(t),"Invalid JSON number"),0===t?(n=0,r=0,e=1/t==-1/0?1:0):(e=t<0,(t=Math.abs(t))>=Math.pow(2,-1022)?(n=(i=Math.min(Math.floor(Math.log(t)/Math.LN2),1023))+1023,r=Math.round(t*Math.pow(2,52-i)-Math.pow(2,52))):(n=0,r=Math.round(t/Math.pow(2,-1074))));var a=[];for(s=52;s;s-=1)a.push(r%2?1:0),r=Math.floor(r/2);for(s=11;s;s-=1)a.push(n%2?1:0),n=Math.floor(n/2);a.push(e?1:0),a.reverse();var u=a.join(""),c="";for(s=0;s<64;s+=8){var l=parseInt(u.substr(s,8),2).toString(16);1===l.length&&(l="0"+l),c+=l}return c.toLowerCase()},B=new RegExp("^-?(0*)\\d{1,10}$"),z=function(t){if(B.test(t)){var e=Number(t);if(e>=-2147483648&&e<=2147483647)return e}return null},G=function(t){try{t()}catch(e){setTimeout(function(){throw E("Exception was thrown by user callback.",e.stack||""),e},Math.floor(0))}},W=function(t,e){var n=setTimeout(t,e);return"object"==typeof n&&n.unref&&n.unref(),n},Y=function(){function t(t,e){if(void 0===e){this.pieces_=t.split("/");for(var n=0,r=0;r<this.pieces_.length;r++)this.pieces_[r].length>0&&(this.pieces_[n]=this.pieces_[r],n++);this.pieces_.length=n,this.pieceNum_=0}else this.pieces_=t,this.pieceNum_=e}return Object.defineProperty(t,"Empty",{get:function(){return new t("")},enumerable:!1,configurable:!0}),t.prototype.getFront=function(){return this.pieceNum_>=this.pieces_.length?null:this.pieces_[this.pieceNum_]},t.prototype.getLength=function(){return this.pieces_.length-this.pieceNum_},t.prototype.popFront=function(){var e=this.pieceNum_;return e<this.pieces_.length&&e++,new t(this.pieces_,e)},t.prototype.getBack=function(){return this.pieceNum_<this.pieces_.length?this.pieces_[this.pieces_.length-1]:null},t.prototype.toString=function(){for(var t="",e=this.pieceNum_;e<this.pieces_.length;e++)""!==this.pieces_[e]&&(t+="/"+this.pieces_[e]);return t||"/"},t.prototype.toUrlEncodedString=function(){for(var t="",e=this.pieceNum_;e<this.pieces_.length;e++)""!==this.pieces_[e]&&(t+="/"+encodeURIComponent(String(this.pieces_[e])));return t||"/"},t.prototype.slice=function(t){return void 0===t&&(t=0),this.pieces_.slice(this.pieceNum_+t)},t.prototype.parent=function(){if(this.pieceNum_>=this.pieces_.length)return null;for(var e=[],n=this.pieceNum_;n<this.pieces_.length-1;n++)e.push(this.pieces_[n]);return new t(e,0)},t.prototype.child=function(e){for(var n=[],r=this.pieceNum_;r<this.pieces_.length;r++)n.push(this.pieces_[r]);if(e instanceof t)for(r=e.pieceNum_;r<e.pieces_.length;r++)n.push(e.pieces_[r]);else{var i=e.split("/");for(r=0;r<i.length;r++)i[r].length>0&&n.push(i[r])}return new t(n,0)},t.prototype.isEmpty=function(){return this.pieceNum_>=this.pieces_.length},t.relativePath=function(e,n){var r=e.getFront(),i=n.getFront();if(null===r)return n;if(r===i)return t.relativePath(e.popFront(),n.popFront());throw new Error("INTERNAL ERROR: innerPath ("+n+") is not within outerPath ("+e+")")},t.comparePaths=function(t,e){for(var n=t.slice(),r=e.slice(),i=0;i<n.length&&i<r.length;i++){var o=T(n[i],r[i]);if(0!==o)return o}return n.length===r.length?0:n.length<r.length?-1:1},t.prototype.equals=function(t){if(this.getLength()!==t.getLength())return!1;for(var e=this.pieceNum_,n=t.pieceNum_;e<=this.pieces_.length;e++,n++)if(this.pieces_[e]!==t.pieces_[n])return!1;return!0},t.prototype.contains=function(t){var e=this.pieceNum_,n=t.pieceNum_;if(this.getLength()>t.getLength())return!1;for(;e<this.pieces_.length;){if(this.pieces_[e]!==t.pieces_[n])return!1;++e,++n}return!0},t}(),$=function(){function t(t,e){this.errorPrefix_=e,this.parts_=t.slice(),this.byteLength_=Math.max(1,this.parts_.length);for(var n=0;n<this.parts_.length;n++)this.byteLength_+=Object(o.E)(this.parts_[n]);this.checkValid_()}return Object.defineProperty(t,"MAX_PATH_DEPTH",{get:function(){return 32},enumerable:!1,configurable:!0}),Object.defineProperty(t,"MAX_PATH_LENGTH_BYTES",{get:function(){return 768},enumerable:!1,configurable:!0}),t.prototype.push=function(t){this.parts_.length>0&&(this.byteLength_+=1),this.parts_.push(t),this.byteLength_+=Object(o.E)(t),this.checkValid_()},t.prototype.pop=function(){var t=this.parts_.pop();this.byteLength_-=Object(o.E)(t),this.parts_.length>0&&(this.byteLength_-=1)},t.prototype.checkValid_=function(){if(this.byteLength_>t.MAX_PATH_LENGTH_BYTES)throw new Error(this.errorPrefix_+"has a key path longer than "+t.MAX_PATH_LENGTH_BYTES+" bytes ("+this.byteLength_+").");if(this.parts_.length>t.MAX_PATH_DEPTH)throw new Error(this.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+t.MAX_PATH_DEPTH+") or object contains a cycle "+this.toErrorString())},t.prototype.toErrorString=function(){return 0===this.parts_.length?"":"in property '"+this.parts_.join(".")+"'"},t}(),K=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,X="websocket",Z="long_polling",J=function(){function t(t,e,n,r,i,o,s){void 0===i&&(i=!1),void 0===o&&(o=""),void 0===s&&(s=!1),this.secure=e,this.namespace=n,this.webSocketOnly=r,this.nodeAdmin=i,this.persistenceKey=o,this.includeNamespaceInQueryParams=s,this.host=t.toLowerCase(),this.domain=this.host.substr(this.host.indexOf(".")+1),this.internalHost=h.get("host:"+t)||this.host}return t.prototype.needsQueryParam=function(){return this.host!==this.internalHost||this.isCustomHost()||this.includeNamespaceInQueryParams},t.prototype.isCacheableHost=function(){return"s-"===this.internalHost.substr(0,2)},t.prototype.isDemoHost=function(){return"firebaseio-demo.com"===this.domain},t.prototype.isCustomHost=function(){return"firebaseio.com"!==this.domain&&"firebaseio-demo.com"!==this.domain},t.prototype.updateHost=function(t){t!==this.internalHost&&(this.internalHost=t,this.isCacheableHost()&&h.set("host:"+this.host,this.internalHost))},t.prototype.connectionURL=function(t,e){var n;if(Object(o.e)("string"==typeof t,"typeof type must == string"),Object(o.e)("object"==typeof e,"typeof params must == object"),t===X)n=(this.secure?"wss://":"ws://")+this.internalHost+"/.ws?";else{if(t!==Z)throw new Error("Unknown connection type: "+t);n=(this.secure?"https://":"http://")+this.internalHost+"/.lp?"}this.needsQueryParam()&&(e.ns=this.namespace);var r=[];return j(e,function(t,e){r.push(t+"="+e)}),n+r.join("&")},t.prototype.toString=function(){var t=this.toURLString();return this.persistenceKey&&(t+="<"+this.persistenceKey+">"),t},t.prototype.toURLString=function(){return(this.secure?"https://":"http://")+this.host+"/"+(this.includeNamespaceInQueryParams?"?ns="+this.namespace:"")},t}(),tt=function(t,e){var n=et(t),r=n.namespace;return"firebase.com"===n.domain&&O(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),r&&"undefined"!==r||"localhost"===n.domain||O("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||"undefined"!=typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&E("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),{repoInfo:new J(n.host,n.secure,r,e,"ws"===n.scheme||"wss"===n.scheme,"",r!==n.subdomain),path:new Y(n.pathString)}},et=function(t){var e="",n="",r="",o="",s="",a=!0,u="https",c=443;if("string"==typeof t){var l=t.indexOf("//");l>=0&&(u=t.substring(0,l-1),t=t.substring(l+2));var h=t.indexOf("/");-1===h&&(h=t.length);var d=t.indexOf("?");-1===d&&(d=t.length),e=t.substring(0,Math.min(h,d)),h<d&&(o=function(t){for(var e="",n=t.split("/"),r=0;r<n.length;r++)if(n[r].length>0){var i=n[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch(o){}e+="/"+i}return e}(t.substring(h,d)));var f=function(t){var e,n,r={};"?"===t.charAt(0)&&(t=t.substring(1));try{for(var o=Object(i.h)(t.split("&")),s=o.next();!s.done;s=o.next()){var a=s.value;if(0!==a.length){var u=a.split("=");2===u.length?r[decodeURIComponent(u[0])]=decodeURIComponent(u[1]):E("Invalid query segment '"+a+"' in query '"+t+"'")}}}catch(c){e={error:c}}finally{try{s&&!s.done&&(n=o.return)&&n.call(o)}finally{if(e)throw e.error}}return r}(t.substring(Math.min(t.length,d)));(l=e.indexOf(":"))>=0?(a="https"===u||"wss"===u,c=parseInt(e.substring(l+1),10)):l=e.length;var p=e.slice(0,l);if("localhost"===p.toLowerCase())n="localhost";else if(p.split(".").length<=2)n=p;else{var g=e.indexOf(".");r=e.substring(0,g).toLowerCase(),n=e.substring(g+1),s=r}"ns"in f&&(s=f.ns)}return{host:e,port:c,domain:n,subdomain:r,secure:a,scheme:u,pathString:o,namespace:s}},nt=/[\[\].#$\/\u0000-\u001F\u007F]/,rt=/[\[\].#$\u0000-\u001F\u007F]/,it=10485760,ot=function(t){return"string"==typeof t&&0!==t.length&&!nt.test(t)},st=function(t){return"string"==typeof t&&0!==t.length&&!rt.test(t)},at=function(t){return null===t||"string"==typeof t||"number"==typeof t&&!x(t)||t&&"object"==typeof t&&Object(o.i)(t,".sv")},ut=function(t,e,n,r,i){i&&void 0===n||ct(Object(o.m)(t,e,i),n,r)},ct=function(t,e,n){var r=n instanceof Y?new $(n,t):n;if(void 0===e)throw new Error(t+"contains undefined "+r.toErrorString());if("function"==typeof e)throw new Error(t+"contains a function "+r.toErrorString()+" with contents = "+e.toString());if(x(e))throw new Error(t+"contains "+e.toString()+" "+r.toErrorString());if("string"==typeof e&&e.length>it/3&&Object(o.E)(e)>it)throw new Error(t+"contains a string greater than 10485760 utf8 bytes "+r.toErrorString()+" ('"+e.substring(0,50)+"...')");if(e&&"object"==typeof e){var i=!1,s=!1;if(j(e,function(e,n){if(".value"===e)i=!0;else if(".priority"!==e&&".sv"!==e&&(s=!0,!ot(e)))throw new Error(t+" contains an invalid key ("+e+") "+r.toErrorString()+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');r.push(e),ct(t,n,r),r.pop()}),i&&s)throw new Error(t+' contains ".value" child '+r.toErrorString()+" in addition to actual children.")}},lt=function(t,e,n,r,i){if(!i||void 0!==n){var s=Object(o.m)(t,e,i);if(!n||"object"!=typeof n||Array.isArray(n))throw new Error(s+" must be an object containing the children to replace.");var a=[];j(n,function(t,e){var n=new Y(t);if(ct(s,e,r.child(n)),".priority"===n.getBack()&&!at(e))throw new Error(s+"contains an invalid value for '"+n.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");a.push(n)}),function(t,e){var n,r;for(n=0;n<e.length;n++)for(var i=(r=e[n]).slice(),o=0;o<i.length;o++)if(".priority"===i[o]&&o===i.length-1);else if(!ot(i[o]))throw new Error(t+"contains an invalid key ("+i[o]+") in path "+r.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');e.sort(Y.comparePaths);var s=null;for(n=0;n<e.length;n++){if(r=e[n],null!==s&&s.contains(r))throw new Error(t+"contains a path "+s.toString()+" that is ancestor of another path "+r.toString());s=r}}(s,a)}},ht=function(t,e,n,r){if(!r||void 0!==n){if(x(n))throw new Error(Object(o.m)(t,e,r)+"is "+n.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!at(n))throw new Error(Object(o.m)(t,e,r)+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},dt=function(t,e,n,r){if(!r||void 0!==n)switch(n){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error(Object(o.m)(t,e,r)+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}},ft=function(t,e,n,r){if(!(r&&void 0===n||ot(n)))throw new Error(Object(o.m)(t,e,r)+'was an invalid key = "'+n+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},pt=function(t,e,n,r){if(!(r&&void 0===n||st(n)))throw new Error(Object(o.m)(t,e,r)+'was an invalid path = "'+n+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},gt=function(t,e,n,r){n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),pt(t,e,n,r)},mt=function(t,e){if(".info"===e.getFront())throw new Error(t+" failed = Can't modify data under /.info/")},yt=function(t,e,n){var r=n.path.toString();if("string"!=typeof n.repoInfo.host||0===n.repoInfo.host.length||!ot(n.repoInfo.namespace)&&"localhost"!==n.repoInfo.host.split(":")[0]||0!==r.length&&!function(t){return t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),st(t)}(r))throw new Error(Object(o.m)(t,e,!1)+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')},bt=function(t,e,n,r){if((!r||void 0!==n)&&"boolean"!=typeof n)throw new Error(Object(o.m)(t,e,r)+"must be a boolean.")},vt=function(){function t(t,e){this.repo_=t,this.path_=e}return t.prototype.cancel=function(t){Object(o.H)("OnDisconnect.cancel",0,1,arguments.length),Object(o.I)("OnDisconnect.cancel",1,t,!0);var e=new o.a;return this.repo_.onDisconnectCancel(this.path_,e.wrapCallback(t)),e.promise},t.prototype.remove=function(t){Object(o.H)("OnDisconnect.remove",0,1,arguments.length),mt("OnDisconnect.remove",this.path_),Object(o.I)("OnDisconnect.remove",1,t,!0);var e=new o.a;return this.repo_.onDisconnectSet(this.path_,null,e.wrapCallback(t)),e.promise},t.prototype.set=function(t,e){Object(o.H)("OnDisconnect.set",1,2,arguments.length),mt("OnDisconnect.set",this.path_),ut("OnDisconnect.set",1,t,this.path_,!1),Object(o.I)("OnDisconnect.set",2,e,!0);var n=new o.a;return this.repo_.onDisconnectSet(this.path_,t,n.wrapCallback(e)),n.promise},t.prototype.setWithPriority=function(t,e,n){Object(o.H)("OnDisconnect.setWithPriority",2,3,arguments.length),mt("OnDisconnect.setWithPriority",this.path_),ut("OnDisconnect.setWithPriority",1,t,this.path_,!1),ht("OnDisconnect.setWithPriority",2,e,!1),Object(o.I)("OnDisconnect.setWithPriority",3,n,!0);var r=new o.a;return this.repo_.onDisconnectSetWithPriority(this.path_,t,e,r.wrapCallback(n)),r.promise},t.prototype.update=function(t,e){if(Object(o.H)("OnDisconnect.update",1,2,arguments.length),mt("OnDisconnect.update",this.path_),Array.isArray(t)){for(var n={},r=0;r<t.length;++r)n[""+r]=t[r];t=n,E("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}lt("OnDisconnect.update",1,t,this.path_,!1),Object(o.I)("OnDisconnect.update",2,e,!0);var i=new o.a;return this.repo_.onDisconnectUpdate(this.path_,t,i.wrapCallback(e)),i.promise},t}(),_t=function(){function t(t,e){this.committed=t,this.snapshot=e}return t.prototype.toJSON=function(){return Object(o.H)("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}},t}(),wt="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",Ct=(N=0,D=[],function(t){var e,n=t===N;N=t;var r=new Array(8);for(e=7;e>=0;e--)r[e]=wt.charAt(t%64),t=Math.floor(t/64);Object(o.e)(0===t,"Cannot push at time == 0");var i=r.join("");if(n){for(e=11;e>=0&&63===D[e];e--)D[e]=0;D[e]++}else for(e=0;e<12;e++)D[e]=Math.floor(64*Math.random());for(e=0;e<12;e++)i+=wt.charAt(D[e]);return Object(o.e)(20===i.length,"nextPushId: Length should be 20."),i}),Ot=function(t){if("2147483647"===t)return"-";var e=z(t);if(null!=e)return""+(e+1);for(var n=new Array(t.length),r=0;r<n.length;r++)n[r]=t.charAt(r);if(n.length<786)return n.push("-"),n.join("");for(var i=n.length-1;i>=0&&"z"===n[i];)i--;if(-1===i)return S;var o=wt.charAt(wt.indexOf(n[i])+1);return n[i]=o,n.slice(0,i+1).join("")},Et=function(t){if("-2147483648"===t)return I;var e=z(t);if(null!=e)return""+(e-1);for(var n=new Array(t.length),r=0;r<n.length;r++)n[r]=t.charAt(r);return"-"===n[n.length-1]?1===n.length?"2147483647":(delete n[n.length-1],n.join("")):(n[n.length-1]=wt.charAt(wt.indexOf(n[n.length-1])-1),n.join("")+"z".repeat(786-n.length))},xt=function(){function t(t,e){this.name=t,this.node=e}return t.Wrap=function(e,n){return new t(e,n)},t}(),It=function(){function t(){}return t.prototype.getCompare=function(){return this.compare.bind(this)},t.prototype.indexedValueChanged=function(t,e){var n=new xt(I,t),r=new xt(I,e);return 0!==this.compare(n,r)},t.prototype.minPost=function(){return xt.MIN},t}(),St=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(i.c)(e,t),Object.defineProperty(e,"__EMPTY_NODE",{get:function(){return M},set:function(t){M=t},enumerable:!1,configurable:!0}),e.prototype.compare=function(t,e){return T(t.name,e.name)},e.prototype.isDefinedOn=function(t){throw Object(o.f)("KeyIndex.isDefinedOn not expected to be called.")},e.prototype.indexedValueChanged=function(t,e){return!1},e.prototype.minPost=function(){return xt.MIN},e.prototype.maxPost=function(){return new xt(S,M)},e.prototype.makePost=function(t,e){return Object(o.e)("string"==typeof t,"KeyIndex indexValue must always be a string."),new xt(t,M)},e.prototype.toString=function(){return".key"},e}(It),Tt=new St,Pt=function(t){return"number"==typeof t?"number:"+q(t):"string:"+t},Rt=function(t){if(t.isLeafNode()){var e=t.val();Object(o.e)("string"==typeof e||"number"==typeof e||"object"==typeof e&&Object(o.i)(e,".sv"),"Priority must be a string or number.")}else Object(o.e)(t===L||t.isEmpty(),"priority of unexpected type.");Object(o.e)(t===L||t.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")},At=function(){function t(e,n){void 0===n&&(n=t.__childrenNodeConstructor.EMPTY_NODE),this.value_=e,this.priorityNode_=n,this.lazyHash_=null,Object(o.e)(null!=this.value_,"LeafNode shouldn't be created with null/undefined value."),Rt(this.priorityNode_)}return Object.defineProperty(t,"__childrenNodeConstructor",{get:function(){return F},set:function(t){F=t},enumerable:!1,configurable:!0}),t.prototype.isLeafNode=function(){return!0},t.prototype.getPriority=function(){return this.priorityNode_},t.prototype.updatePriority=function(e){return new t(this.value_,e)},t.prototype.getImmediateChild=function(e){return".priority"===e?this.priorityNode_:t.__childrenNodeConstructor.EMPTY_NODE},t.prototype.getChild=function(e){return e.isEmpty()?this:".priority"===e.getFront()?this.priorityNode_:t.__childrenNodeConstructor.EMPTY_NODE},t.prototype.hasChild=function(){return!1},t.prototype.getPredecessorChildName=function(t,e){return null},t.prototype.updateImmediateChild=function(e,n){return".priority"===e?this.updatePriority(n):n.isEmpty()&&".priority"!==e?this:t.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,n).updatePriority(this.priorityNode_)},t.prototype.updateChild=function(e,n){var r=e.getFront();return null===r?n:n.isEmpty()&&".priority"!==r?this:(Object(o.e)(".priority"!==r||1===e.getLength(),".priority must be the last token in a path"),this.updateImmediateChild(r,t.__childrenNodeConstructor.EMPTY_NODE.updateChild(e.popFront(),n)))},t.prototype.isEmpty=function(){return!1},t.prototype.numChildren=function(){return 0},t.prototype.forEachChild=function(t,e){return!1},t.prototype.val=function(t){return t&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()},t.prototype.hash=function(){if(null===this.lazyHash_){var t="";this.priorityNode_.isEmpty()||(t+="priority:"+Pt(this.priorityNode_.val())+":");var e=typeof this.value_;t+=e+":",t+="number"===e?q(this.value_):this.value_,this.lazyHash_=g(t)}return this.lazyHash_},t.prototype.getValue=function(){return this.value_},t.prototype.compareTo=function(e){return e===t.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof t.__childrenNodeConstructor?-1:(Object(o.e)(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))},t.prototype.compareToLeafNode_=function(e){var n=typeof e.value_,r=typeof this.value_,i=t.VALUE_TYPE_ORDER.indexOf(n),s=t.VALUE_TYPE_ORDER.indexOf(r);return Object(o.e)(i>=0,"Unknown leaf type: "+n),Object(o.e)(s>=0,"Unknown leaf type: "+r),i===s?"object"===r?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:s-i},t.prototype.withIndex=function(){return this},t.prototype.isIndexed=function(){return!0},t.prototype.equals=function(t){return t===this||!!t.isLeafNode()&&this.value_===t.value_&&this.priorityNode_.equals(t.priorityNode_)},t.VALUE_TYPE_ORDER=["object","boolean","number","string"],t}(),kt=new(function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(i.c)(e,t),e.prototype.compare=function(t,e){var n=t.node.getPriority(),r=e.node.getPriority(),i=n.compareTo(r);return 0===i?T(t.name,e.name):i},e.prototype.isDefinedOn=function(t){return!t.getPriority().isEmpty()},e.prototype.indexedValueChanged=function(t,e){return!t.getPriority().equals(e.getPriority())},e.prototype.minPost=function(){return xt.MIN},e.prototype.maxPost=function(){return new xt(S,new At("[PRIORITY-POST]",V))},e.prototype.makePost=function(t,e){var n=U(t);return new xt(e,new At("[PRIORITY-POST]",n))},e.prototype.toString=function(){return".priority"},e}(It)),jt=function(){function t(t,e,n,r,i){void 0===i&&(i=null),this.isReverse_=r,this.resultGenerator_=i,this.nodeStack_=[];for(var o=1;!t.isEmpty();)if(t=t,o=e?n(t.key,e):1,r&&(o*=-1),o<0)t=this.isReverse_?t.left:t.right;else{if(0===o){this.nodeStack_.push(t);break}this.nodeStack_.push(t),t=this.isReverse_?t.right:t.left}}return t.prototype.getNext=function(){if(0===this.nodeStack_.length)return null;var t,e=this.nodeStack_.pop();if(t=this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return t},t.prototype.hasNext=function(){return this.nodeStack_.length>0},t.prototype.peek=function(){if(0===this.nodeStack_.length)return null;var t=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value}},t}(),Nt=function(){function t(e,n,r,i,o){this.key=e,this.value=n,this.color=null!=r?r:t.RED,this.left=null!=i?i:Mt.EMPTY_NODE,this.right=null!=o?o:Mt.EMPTY_NODE}return t.prototype.copy=function(e,n,r,i,o){return new t(null!=e?e:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=o?o:this.right)},t.prototype.count=function(){return this.left.count()+1+this.right.count()},t.prototype.isEmpty=function(){return!1},t.prototype.inorderTraversal=function(t){return this.left.inorderTraversal(t)||!!t(this.key,this.value)||this.right.inorderTraversal(t)},t.prototype.reverseTraversal=function(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)},t.prototype.min_=function(){return this.left.isEmpty()?this:this.left.min_()},t.prototype.minKey=function(){return this.min_().key},t.prototype.maxKey=function(){return this.right.isEmpty()?this.key:this.right.maxKey()},t.prototype.insert=function(t,e,n){var r=this,i=n(t,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(t,e,n),null):0===i?r.copy(null,e,null,null,null):r.copy(null,null,null,null,r.right.insert(t,e,n))).fixUp_()},t.prototype.removeMin_=function(){if(this.left.isEmpty())return Mt.EMPTY_NODE;var t=this;return t.left.isRed_()||t.left.left.isRed_()||(t=t.moveRedLeft_()),(t=t.copy(null,null,null,t.left.removeMin_(),null)).fixUp_()},t.prototype.remove=function(t,e){var n,r;if(e(t,(n=this).key)<0)n.left.isEmpty()||n.left.isRed_()||n.left.left.isRed_()||(n=n.moveRedLeft_()),n=n.copy(null,null,null,n.left.remove(t,e),null);else{if(n.left.isRed_()&&(n=n.rotateRight_()),n.right.isEmpty()||n.right.isRed_()||n.right.left.isRed_()||(n=n.moveRedRight_()),0===e(t,n.key)){if(n.right.isEmpty())return Mt.EMPTY_NODE;r=n.right.min_(),n=n.copy(r.key,r.value,null,null,n.right.removeMin_())}n=n.copy(null,null,null,null,n.right.remove(t,e))}return n.fixUp_()},t.prototype.isRed_=function(){return this.color},t.prototype.fixUp_=function(){var t=this;return t.right.isRed_()&&!t.left.isRed_()&&(t=t.rotateLeft_()),t.left.isRed_()&&t.left.left.isRed_()&&(t=t.rotateRight_()),t.left.isRed_()&&t.right.isRed_()&&(t=t.colorFlip_()),t},t.prototype.moveRedLeft_=function(){var t=this.colorFlip_();return t.right.left.isRed_()&&(t=(t=(t=t.copy(null,null,null,null,t.right.rotateRight_())).rotateLeft_()).colorFlip_()),t},t.prototype.moveRedRight_=function(){var t=this.colorFlip_();return t.left.left.isRed_()&&(t=(t=t.rotateRight_()).colorFlip_()),t},t.prototype.rotateLeft_=function(){var e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)},t.prototype.rotateRight_=function(){var e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)},t.prototype.colorFlip_=function(){var t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)},t.prototype.checkMaxDepth_=function(){var t=this.check_();return Math.pow(2,t)<=this.count()+1},t.prototype.check_=function(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");var t=this.left.check_();if(t!==this.right.check_())throw new Error("Black depths differ");return t+(this.isRed_()?0:1)},t.RED=!0,t.BLACK=!1,t}(),Dt=function(){function t(){}return t.prototype.copy=function(t,e,n,r,i){return this},t.prototype.insert=function(t,e,n){return new Nt(t,e,null)},t.prototype.remove=function(t,e){return this},t.prototype.count=function(){return 0},t.prototype.isEmpty=function(){return!0},t.prototype.inorderTraversal=function(t){return!1},t.prototype.reverseTraversal=function(t){return!1},t.prototype.minKey=function(){return null},t.prototype.maxKey=function(){return null},t.prototype.check_=function(){return 0},t.prototype.isRed_=function(){return!1},t}(),Mt=function(){function t(e,n){void 0===n&&(n=t.EMPTY_NODE),this.comparator_=e,this.root_=n}return t.prototype.insert=function(e,n){return new t(this.comparator_,this.root_.insert(e,n,this.comparator_).copy(null,null,Nt.BLACK,null,null))},t.prototype.remove=function(e){return new t(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,Nt.BLACK,null,null))},t.prototype.get=function(t){for(var e,n=this.root_;!n.isEmpty();){if(0===(e=this.comparator_(t,n.key)))return n.value;e<0?n=n.left:e>0&&(n=n.right)}return null},t.prototype.getPredecessorKey=function(t){for(var e,n=this.root_,r=null;!n.isEmpty();){if(0===(e=this.comparator_(t,n.key))){if(n.left.isEmpty())return r?r.key:null;for(n=n.left;!n.right.isEmpty();)n=n.right;return n.key}e<0?n=n.left:e>0&&(r=n,n=n.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")},t.prototype.isEmpty=function(){return this.root_.isEmpty()},t.prototype.count=function(){return this.root_.count()},t.prototype.minKey=function(){return this.root_.minKey()},t.prototype.maxKey=function(){return this.root_.maxKey()},t.prototype.inorderTraversal=function(t){return this.root_.inorderTraversal(t)},t.prototype.reverseTraversal=function(t){return this.root_.reverseTraversal(t)},t.prototype.getIterator=function(t){return new jt(this.root_,null,this.comparator_,!1,t)},t.prototype.getIteratorFrom=function(t,e){return new jt(this.root_,t,this.comparator_,!1,e)},t.prototype.getReverseIteratorFrom=function(t,e){return new jt(this.root_,t,this.comparator_,!0,e)},t.prototype.getReverseIterator=function(t){return new jt(this.root_,null,this.comparator_,!0,t)},t.EMPTY_NODE=new Dt,t}(),Lt=Math.log(2),Ft=function(){function t(t){this.count=parseInt(Math.log(t+1)/Lt,10),this.current_=this.count-1;var e=parseInt(Array(this.count+1).join("1"),2);this.bits_=t+1&e}return t.prototype.nextBitIsOne=function(){var t=!(this.bits_&1<<this.current_);return this.current_--,t},t}(),Ut=function(t,e,n,r){t.sort(e);var i=function(e,r){var o,s,a=r-e;if(0===a)return null;if(1===a)return o=t[e],s=n?n(o):o,new Nt(s,o.node,Nt.BLACK,null,null);var u=parseInt(a/2,10)+e,c=i(e,u),l=i(u+1,r);return o=t[u],s=n?n(o):o,new Nt(s,o.node,Nt.BLACK,c,l)},o=function(e){for(var r=null,o=null,s=t.length,a=function(e,r){var o=s-e,a=s;s-=e;var c=i(o+1,a),l=t[o],h=n?n(l):l;u(new Nt(h,l.node,r,null,c))},u=function(t){r?(r.left=t,r=t):(o=t,r=t)},c=0;c<e.count;++c){var l=e.nextBitIsOne(),h=Math.pow(2,e.count-(c+1));l?a(h,Nt.BLACK):(a(h,Nt.BLACK),a(h,Nt.RED))}return o}(new Ft(t.length));return new Mt(r||e,o)},Vt={},Qt=function(){function t(t,e){this.indexes_=t,this.indexSet_=e}return Object.defineProperty(t,"Default",{get:function(){return Object(o.e)(Vt&&kt,"ChildrenNode.ts has not been loaded"),Q=Q||new t({".priority":Vt},{".priority":kt})},enumerable:!1,configurable:!0}),t.prototype.get=function(t){var e=Object(o.D)(this.indexes_,t);if(!e)throw new Error("No index defined for "+t);return e instanceof Mt?e:null},t.prototype.hasIndex=function(t){return Object(o.i)(this.indexSet_,t.toString())},t.prototype.addIndex=function(e,n){Object(o.e)(e!==Tt,"KeyIndex always exists and isn't meant to be added to the IndexMap.");for(var r,s=[],a=!1,u=n.getIterator(xt.Wrap),c=u.getNext();c;)a=a||e.isDefinedOn(c.node),s.push(c),c=u.getNext();r=a?Ut(s,e.getCompare()):Vt;var l=e.toString(),h=Object(i.a)({},this.indexSet_);h[l]=e;var d=Object(i.a)({},this.indexes_);return d[l]=r,new t(d,h)},t.prototype.addToIndexes=function(e,n){var r=this;return new t(Object(o.B)(this.indexes_,function(t,i){var s=Object(o.D)(r.indexSet_,i);if(Object(o.e)(s,"Missing index implementation for "+i),t===Vt){if(s.isDefinedOn(e.node)){for(var a=[],u=n.getIterator(xt.Wrap),c=u.getNext();c;)c.name!==e.name&&a.push(c),c=u.getNext();return a.push(e),Ut(a,s.getCompare())}return Vt}var l=n.get(e.name),h=t;return l&&(h=h.remove(new xt(e.name,l))),h.insert(e,e.node)}),this.indexSet_)},t.prototype.removeFromIndexes=function(e,n){return new t(Object(o.B)(this.indexes_,function(t){if(t===Vt)return t;var r=n.get(e.name);return r?t.remove(new xt(e.name,r)):t}),this.indexSet_)},t}();function Ht(t,e){return T(t.name,e.name)}function qt(t,e){return T(t,e)}var Bt=function(){function t(t,e,n){this.children_=t,this.priorityNode_=e,this.indexMap_=n,this.lazyHash_=null,this.priorityNode_&&Rt(this.priorityNode_),this.children_.isEmpty()&&Object(o.e)(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}return Object.defineProperty(t,"EMPTY_NODE",{get:function(){return H||(H=new t(new Mt(qt),null,Qt.Default))},enumerable:!1,configurable:!0}),t.prototype.isLeafNode=function(){return!1},t.prototype.getPriority=function(){return this.priorityNode_||H},t.prototype.updatePriority=function(e){return this.children_.isEmpty()?this:new t(this.children_,e,this.indexMap_)},t.prototype.getImmediateChild=function(t){if(".priority"===t)return this.getPriority();var e=this.children_.get(t);return null===e?H:e},t.prototype.getChild=function(t){var e=t.getFront();return null===e?this:this.getImmediateChild(e).getChild(t.popFront())},t.prototype.hasChild=function(t){return null!==this.children_.get(t)},t.prototype.updateImmediateChild=function(e,n){if(Object(o.e)(n,"We should always be passing snapshot nodes"),".priority"===e)return this.updatePriority(n);var r=new xt(e,n),i=void 0,s=void 0;n.isEmpty()?(i=this.children_.remove(e),s=this.indexMap_.removeFromIndexes(r,this.children_)):(i=this.children_.insert(e,n),s=this.indexMap_.addToIndexes(r,this.children_));var a=i.isEmpty()?H:this.priorityNode_;return new t(i,a,s)},t.prototype.updateChild=function(t,e){var n=t.getFront();if(null===n)return e;Object(o.e)(".priority"!==t.getFront()||1===t.getLength(),".priority must be the last token in a path");var r=this.getImmediateChild(n).updateChild(t.popFront(),e);return this.updateImmediateChild(n,r)},t.prototype.isEmpty=function(){return this.children_.isEmpty()},t.prototype.numChildren=function(){return this.children_.count()},t.prototype.val=function(e){if(this.isEmpty())return null;var n={},r=0,i=0,o=!0;if(this.forEachChild(kt,function(s,a){n[s]=a.val(e),r++,o&&t.INTEGER_REGEXP_.test(s)?i=Math.max(i,Number(s)):o=!1}),!e&&o&&i<2*r){var s=[];for(var a in n)s[a]=n[a];return s}return e&&!this.getPriority().isEmpty()&&(n[".priority"]=this.getPriority().val()),n},t.prototype.hash=function(){if(null===this.lazyHash_){var t="";this.getPriority().isEmpty()||(t+="priority:"+Pt(this.getPriority().val())+":"),this.forEachChild(kt,function(e,n){var r=n.hash();""!==r&&(t+=":"+e+":"+r)}),this.lazyHash_=""===t?"":g(t)}return this.lazyHash_},t.prototype.getPredecessorChildName=function(t,e,n){var r=this.resolveIndex_(n);if(r){var i=r.getPredecessorKey(new xt(t,e));return i?i.name:null}return this.children_.getPredecessorKey(t)},t.prototype.getFirstChildName=function(t){var e=this.resolveIndex_(t);if(e){var n=e.minKey();return n&&n.name}return this.children_.minKey()},t.prototype.getFirstChild=function(t){var e=this.getFirstChildName(t);return e?new xt(e,this.children_.get(e)):null},t.prototype.getLastChildName=function(t){var e=this.resolveIndex_(t);if(e){var n=e.maxKey();return n&&n.name}return this.children_.maxKey()},t.prototype.getLastChild=function(t){var e=this.getLastChildName(t);return e?new xt(e,this.children_.get(e)):null},t.prototype.forEachChild=function(t,e){var n=this.resolveIndex_(t);return n?n.inorderTraversal(function(t){return e(t.name,t.node)}):this.children_.inorderTraversal(e)},t.prototype.getIterator=function(t){return this.getIteratorFrom(t.minPost(),t)},t.prototype.getIteratorFrom=function(t,e){var n=this.resolveIndex_(e);if(n)return n.getIteratorFrom(t,function(t){return t});for(var r=this.children_.getIteratorFrom(t.name,xt.Wrap),i=r.peek();null!=i&&e.compare(i,t)<0;)r.getNext(),i=r.peek();return r},t.prototype.getReverseIterator=function(t){return this.getReverseIteratorFrom(t.maxPost(),t)},t.prototype.getReverseIteratorFrom=function(t,e){var n=this.resolveIndex_(e);if(n)return n.getReverseIteratorFrom(t,function(t){return t});for(var r=this.children_.getReverseIteratorFrom(t.name,xt.Wrap),i=r.peek();null!=i&&e.compare(i,t)>0;)r.getNext(),i=r.peek();return r},t.prototype.compareTo=function(t){return this.isEmpty()?t.isEmpty()?0:-1:t.isLeafNode()||t.isEmpty()?1:t===zt?-1:0},t.prototype.withIndex=function(e){if(e===Tt||this.indexMap_.hasIndex(e))return this;var n=this.indexMap_.addIndex(e,this.children_);return new t(this.children_,this.priorityNode_,n)},t.prototype.isIndexed=function(t){return t===Tt||this.indexMap_.hasIndex(t)},t.prototype.equals=function(t){if(t===this)return!0;if(t.isLeafNode())return!1;var e=t;if(this.getPriority().equals(e.getPriority())){if(this.children_.count()===e.children_.count()){for(var n=this.getIterator(kt),r=e.getIterator(kt),i=n.getNext(),o=r.getNext();i&&o;){if(i.name!==o.name||!i.node.equals(o.node))return!1;i=n.getNext(),o=r.getNext()}return null===i&&null===o}return!1}return!1},t.prototype.resolveIndex_=function(t){return t===Tt?null:this.indexMap_.get(t.toString())},t.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,t}(),zt=new(function(t){function e(){return t.call(this,new Mt(qt),Bt.EMPTY_NODE,Qt.Default)||this}return Object(i.c)(e,t),e.prototype.compareTo=function(t){return t===this?0:1},e.prototype.equals=function(t){return t===this},e.prototype.getPriority=function(){return this},e.prototype.getImmediateChild=function(t){return Bt.EMPTY_NODE},e.prototype.isEmpty=function(){return!1},e}(Bt));function Gt(t,e){if(void 0===e&&(e=null),null===t)return Bt.EMPTY_NODE;if("object"==typeof t&&".priority"in t&&(e=t[".priority"]),Object(o.e)(null===e||"string"==typeof e||"number"==typeof e||"object"==typeof e&&".sv"in e,"Invalid priority type found: "+typeof e),"object"==typeof t&&".value"in t&&null!==t[".value"]&&(t=t[".value"]),"object"!=typeof t||".sv"in t)return new At(t,Gt(e));if(t instanceof Array){var n=Bt.EMPTY_NODE;return j(t,function(e,r){if(Object(o.i)(t,e)&&"."!==e.substring(0,1)){var i=Gt(r);!i.isLeafNode()&&i.isEmpty()||(n=n.updateImmediateChild(e,i))}}),n.updatePriority(Gt(e))}var r=[],i=!1;if(j(t,function(t,e){if("."!==t.substring(0,1)){var n=Gt(e);n.isEmpty()||(i=i||!n.getPriority().isEmpty(),r.push(new xt(t,n)))}}),0===r.length)return Bt.EMPTY_NODE;var s=Ut(r,Ht,function(t){return t.name},qt);if(i){var a=Ut(r,kt.getCompare());return new Bt(s,Gt(e),new Qt({".priority":a},{".priority":kt}))}return new Bt(s,Gt(e),Qt.Default)}Object.defineProperties(xt,{MIN:{value:new xt(I,Bt.EMPTY_NODE)},MAX:{value:new xt(S,zt)}}),St.__EMPTY_NODE=Bt.EMPTY_NODE,At.__childrenNodeConstructor=Bt,L=zt,V=zt,U=Gt;var Wt,Yt=new(function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(i.c)(e,t),e.prototype.compare=function(t,e){var n=t.node.compareTo(e.node);return 0===n?T(t.name,e.name):n},e.prototype.isDefinedOn=function(t){return!0},e.prototype.indexedValueChanged=function(t,e){return!t.equals(e)},e.prototype.minPost=function(){return xt.MIN},e.prototype.maxPost=function(){return xt.MAX},e.prototype.makePost=function(t,e){var n=Gt(t);return new xt(e,n)},e.prototype.toString=function(){return".value"},e}(It)),$t=function(t){function e(e){var n=t.call(this)||this;return n.indexPath_=e,Object(o.e)(!e.isEmpty()&&".priority"!==e.getFront(),"Can't create PathIndex with empty path or .priority key"),n}return Object(i.c)(e,t),e.prototype.extractChild=function(t){return t.getChild(this.indexPath_)},e.prototype.isDefinedOn=function(t){return!t.getChild(this.indexPath_).isEmpty()},e.prototype.compare=function(t,e){var n=this.extractChild(t.node),r=this.extractChild(e.node),i=n.compareTo(r);return 0===i?T(t.name,e.name):i},e.prototype.makePost=function(t,e){var n=Gt(t),r=Bt.EMPTY_NODE.updateChild(this.indexPath_,n);return new xt(e,r)},e.prototype.maxPost=function(){var t=Bt.EMPTY_NODE.updateChild(this.indexPath_,zt);return new xt(S,t)},e.prototype.toString=function(){return this.indexPath_.slice().join("/")},e}(It),Kt=function(){function t(t,e,n){this.node_=t,this.ref_=e,this.index_=n}return t.prototype.val=function(){return Object(o.H)("DataSnapshot.val",0,0,arguments.length),this.node_.val()},t.prototype.exportVal=function(){return Object(o.H)("DataSnapshot.exportVal",0,0,arguments.length),this.node_.val(!0)},t.prototype.toJSON=function(){return Object(o.H)("DataSnapshot.toJSON",0,1,arguments.length),this.exportVal()},t.prototype.exists=function(){return Object(o.H)("DataSnapshot.exists",0,0,arguments.length),!this.node_.isEmpty()},t.prototype.child=function(e){Object(o.H)("DataSnapshot.child",0,1,arguments.length),e=String(e),pt("DataSnapshot.child",1,e,!1);var n=new Y(e),r=this.ref_.child(n);return new t(this.node_.getChild(n),r,kt)},t.prototype.hasChild=function(t){Object(o.H)("DataSnapshot.hasChild",1,1,arguments.length),pt("DataSnapshot.hasChild",1,t,!1);var e=new Y(t);return!this.node_.getChild(e).isEmpty()},t.prototype.getPriority=function(){return Object(o.H)("DataSnapshot.getPriority",0,0,arguments.length),this.node_.getPriority().val()},t.prototype.forEach=function(e){var n=this;if(Object(o.H)("DataSnapshot.forEach",1,1,arguments.length),Object(o.I)("DataSnapshot.forEach",1,e,!1),this.node_.isLeafNode())return!1;var r=this.node_;return!!r.forEachChild(this.index_,function(r,i){return e(new t(i,n.ref_.child(r),kt))})},t.prototype.hasChildren=function(){return Object(o.H)("DataSnapshot.hasChildren",0,0,arguments.length),!this.node_.isLeafNode()&&!this.node_.isEmpty()},Object.defineProperty(t.prototype,"key",{get:function(){return this.ref_.getKey()},enumerable:!1,configurable:!0}),t.prototype.numChildren=function(){return Object(o.H)("DataSnapshot.numChildren",0,0,arguments.length),this.node_.numChildren()},t.prototype.getRef=function(){return Object(o.H)("DataSnapshot.ref",0,0,arguments.length),this.ref_},Object.defineProperty(t.prototype,"ref",{get:function(){return this.getRef()},enumerable:!1,configurable:!0}),t}(),Xt=function(){function t(t,e,n,r){this.eventType=t,this.eventRegistration=e,this.snapshot=n,this.prevName=r}return t.prototype.getPath=function(){var t=this.snapshot.getRef();return"value"===this.eventType?t.path:t.getParent().path},t.prototype.getEventType=function(){return this.eventType},t.prototype.getEventRunner=function(){return this.eventRegistration.getEventRunner(this)},t.prototype.toString=function(){return this.getPath().toString()+":"+this.eventType+":"+Object(o.G)(this.snapshot.exportVal())},t}(),Zt=function(){function t(t,e,n){this.eventRegistration=t,this.error=e,this.path=n}return t.prototype.getPath=function(){return this.path},t.prototype.getEventType=function(){return"cancel"},t.prototype.getEventRunner=function(){return this.eventRegistration.getEventRunner(this)},t.prototype.toString=function(){return this.path.toString()+":cancel"},t}(),Jt=function(){function t(t,e,n){this.callback_=t,this.cancelCallback_=e,this.context_=n}return t.prototype.respondsTo=function(t){return"value"===t},t.prototype.createEvent=function(t,e){var n=e.getQueryParams().getIndex();return new Xt("value",this,new Kt(t.snapshotNode,e.getRef(),n))},t.prototype.getEventRunner=function(t){var e=this.context_;if("cancel"===t.getEventType()){Object(o.e)(this.cancelCallback_,"Raising a cancel event on a listener with no cancel callback");var n=this.cancelCallback_;return function(){n.call(e,t.error)}}var r=this.callback_;return function(){r.call(e,t.snapshot)}},t.prototype.createCancelEvent=function(t,e){return this.cancelCallback_?new Zt(this,t,e):null},t.prototype.matches=function(e){return e instanceof t&&(!e.callback_||!this.callback_||e.callback_===this.callback_&&e.context_===this.context_)},t.prototype.hasAnyCallback=function(){return null!==this.callback_},t}(),te=function(){function t(t,e,n){this.callbacks_=t,this.cancelCallback_=e,this.context_=n}return t.prototype.respondsTo=function(t){var e="children_added"===t?"child_added":t;return e="children_removed"===e?"child_removed":e,Object(o.i)(this.callbacks_,e)},t.prototype.createCancelEvent=function(t,e){return this.cancelCallback_?new Zt(this,t,e):null},t.prototype.createEvent=function(t,e){Object(o.e)(null!=t.childName,"Child events should have a childName.");var n=e.getRef().child(t.childName),r=e.getQueryParams().getIndex();return new Xt(t.type,this,new Kt(t.snapshotNode,n,r),t.prevName)},t.prototype.getEventRunner=function(t){var e=this.context_;if("cancel"===t.getEventType()){Object(o.e)(this.cancelCallback_,"Raising a cancel event on a listener with no cancel callback");var n=this.cancelCallback_;return function(){n.call(e,t.error)}}var r=this.callbacks_[t.eventType];return function(){r.call(e,t.snapshot,t.prevName)}},t.prototype.matches=function(e){var n=this;if(e instanceof t){if(!this.callbacks_||!e.callbacks_)return!0;if(this.context_===e.context_){var r=Object.keys(e.callbacks_),i=Object.keys(this.callbacks_),o=r.length;if(o===i.length){if(1===o){var s=r[0],a=i[0];return!(a!==s||e.callbacks_[s]&&this.callbacks_[a]&&e.callbacks_[s]!==this.callbacks_[a])}return i.every(function(t){return e.callbacks_[t]===n.callbacks_[t]})}}}return!1},t.prototype.hasAnyCallback=function(){return null!==this.callbacks_},t}(),ee=function(){function t(t,e,n,r){this.repo=t,this.path=e,this.queryParams_=n,this.orderByCalled_=r}return Object.defineProperty(t,"__referenceConstructor",{get:function(){return Object(o.e)(Wt,"Reference.ts has not been loaded"),Wt},set:function(t){Wt=t},enumerable:!1,configurable:!0}),t.validateQueryEndpoints_=function(t){var e=null,n=null;if(t.hasStart()&&(e=t.getIndexStartValue()),t.hasEnd()&&(n=t.getIndexEndValue()),t.getIndex()===Tt){var r="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",i="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(t.hasStart()){if(t.getIndexStartName()!==I)throw new Error(r);if("string"!=typeof e)throw new Error(i)}if(t.hasEnd()){if(t.getIndexEndName()!==S)throw new Error(r);if("string"!=typeof n)throw new Error(i)}}else if(t.getIndex()===kt){if(null!=e&&!at(e)||null!=n&&!at(n))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if(Object(o.e)(t.getIndex()instanceof $t||t.getIndex()===Yt,"unknown index type."),null!=e&&"object"==typeof e||null!=n&&"object"==typeof n)throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")},t.validateLimit_=function(t){if(t.hasStart()&&t.hasEnd()&&t.hasLimit()&&!t.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")},t.prototype.validateNoPreviousOrderByCall_=function(t){if(!0===this.orderByCalled_)throw new Error(t+": You can't combine multiple orderBy calls.")},t.prototype.getQueryParams=function(){return this.queryParams_},t.prototype.getRef=function(){return Object(o.H)("Query.ref",0,0,arguments.length),new t.__referenceConstructor(this.repo,this.path)},t.prototype.on=function(e,n,r,i){Object(o.H)("Query.on",2,4,arguments.length),dt("Query.on",1,e,!1),Object(o.I)("Query.on",2,n,!1);var s=t.getCancelAndContextArgs_("Query.on",r,i);if("value"===e)this.onValueEvent(n,s.cancel,s.context);else{var a={};a[e]=n,this.onChildEvent(a,s.cancel,s.context)}return n},t.prototype.onValueEvent=function(t,e,n){var r=new Jt(t,e||null,n||null);this.repo.addEventCallbackForQuery(this,r)},t.prototype.onChildEvent=function(t,e,n){var r=new te(t,e,n);this.repo.addEventCallbackForQuery(this,r)},t.prototype.off=function(t,e,n){Object(o.H)("Query.off",0,3,arguments.length),dt("Query.off",1,t,!0),Object(o.I)("Query.off",2,e,!0),Object(o.J)("Query.off",3,n,!0);var r=null,i=null;if("value"===t){var s=e||null;r=new Jt(s,null,n||null)}else t&&(e&&((i={})[t]=e),r=new te(i,null,n||null));this.repo.removeEventCallbackForQuery(this,r)},t.prototype.get=function(){return this.repo.getValue(this)},t.prototype.once=function(e,n,r,i){var s=this;Object(o.H)("Query.once",1,4,arguments.length),dt("Query.once",1,e,!1),Object(o.I)("Query.once",2,n,!0);var a=t.getCancelAndContextArgs_("Query.once",r,i),u=!0,c=new o.a;c.promise.catch(function(){});var l=function(t){u&&(u=!1,s.off(e,l),n&&n.bind(a.context)(t),c.resolve(t))};return this.on(e,l,function(t){s.off(e,l),a.cancel&&a.cancel.bind(a.context)(t),c.reject(t)}),c.promise},t.prototype.limitToFirst=function(e){if(Object(o.H)("Query.limitToFirst",1,1,arguments.length),"number"!=typeof e||Math.floor(e)!==e||e<=0)throw new Error("Query.limitToFirst: First argument must be a positive integer.");if(this.queryParams_.hasLimit())throw new Error("Query.limitToFirst: Limit was already set (by another call to limit, limitToFirst, or limitToLast).");return new t(this.repo,this.path,this.queryParams_.limitToFirst(e),this.orderByCalled_)},t.prototype.limitToLast=function(e){if(Object(o.H)("Query.limitToLast",1,1,arguments.length),"number"!=typeof e||Math.floor(e)!==e||e<=0)throw new Error("Query.limitToLast: First argument must be a positive integer.");if(this.queryParams_.hasLimit())throw new Error("Query.limitToLast: Limit was already set (by another call to limit, limitToFirst, or limitToLast).");return new t(this.repo,this.path,this.queryParams_.limitToLast(e),this.orderByCalled_)},t.prototype.orderByChild=function(e){if(Object(o.H)("Query.orderByChild",1,1,arguments.length),"$key"===e)throw new Error('Query.orderByChild: "$key" is invalid.  Use Query.orderByKey() instead.');if("$priority"===e)throw new Error('Query.orderByChild: "$priority" is invalid.  Use Query.orderByPriority() instead.');if("$value"===e)throw new Error('Query.orderByChild: "$value" is invalid.  Use Query.orderByValue() instead.');pt("Query.orderByChild",1,e,!1),this.validateNoPreviousOrderByCall_("Query.orderByChild");var n=new Y(e);if(n.isEmpty())throw new Error("Query.orderByChild: cannot pass in empty path.  Use Query.orderByValue() instead.");var r=new $t(n),i=this.queryParams_.orderBy(r);return t.validateQueryEndpoints_(i),new t(this.repo,this.path,i,!0)},t.prototype.orderByKey=function(){Object(o.H)("Query.orderByKey",0,0,arguments.length),this.validateNoPreviousOrderByCall_("Query.orderByKey");var e=this.queryParams_.orderBy(Tt);return t.validateQueryEndpoints_(e),new t(this.repo,this.path,e,!0)},t.prototype.orderByPriority=function(){Object(o.H)("Query.orderByPriority",0,0,arguments.length),this.validateNoPreviousOrderByCall_("Query.orderByPriority");var e=this.queryParams_.orderBy(kt);return t.validateQueryEndpoints_(e),new t(this.repo,this.path,e,!0)},t.prototype.orderByValue=function(){Object(o.H)("Query.orderByValue",0,0,arguments.length),this.validateNoPreviousOrderByCall_("Query.orderByValue");var e=this.queryParams_.orderBy(Yt);return t.validateQueryEndpoints_(e),new t(this.repo,this.path,e,!0)},t.prototype.startAt=function(e,n){void 0===e&&(e=null),Object(o.H)("Query.startAt",0,2,arguments.length),ut("Query.startAt",1,e,this.path,!0),ft("Query.startAt",2,n,!0);var r=this.queryParams_.startAt(e,n);if(t.validateLimit_(r),t.validateQueryEndpoints_(r),this.queryParams_.hasStart())throw new Error("Query.startAt: Starting point was already set (by another call to startAt or equalTo).");return void 0===e&&(e=null,n=null),new t(this.repo,this.path,r,this.orderByCalled_)},t.prototype.startAfter=function(e,n){void 0===e&&(e=null),Object(o.H)("Query.startAfter",0,2,arguments.length),ut("Query.startAfter",1,e,this.path,!1),ft("Query.startAfter",2,n,!0);var r=this.queryParams_.startAfter(e,n);if(t.validateLimit_(r),t.validateQueryEndpoints_(r),this.queryParams_.hasStart())throw new Error("Query.startAfter: Starting point was already set (by another call to startAt, startAfter or equalTo).");return new t(this.repo,this.path,r,this.orderByCalled_)},t.prototype.endAt=function(e,n){void 0===e&&(e=null),Object(o.H)("Query.endAt",0,2,arguments.length),ut("Query.endAt",1,e,this.path,!0),ft("Query.endAt",2,n,!0);var r=this.queryParams_.endAt(e,n);if(t.validateLimit_(r),t.validateQueryEndpoints_(r),this.queryParams_.hasEnd())throw new Error("Query.endAt: Ending point was already set (by another call to endAt, endBefore, or equalTo).");return new t(this.repo,this.path,r,this.orderByCalled_)},t.prototype.endBefore=function(e,n){void 0===e&&(e=null),Object(o.H)("Query.endBefore",0,2,arguments.length),ut("Query.endBefore",1,e,this.path,!1),ft("Query.endBefore",2,n,!0);var r=this.queryParams_.endBefore(e,n);if(t.validateLimit_(r),t.validateQueryEndpoints_(r),this.queryParams_.hasEnd())throw new Error("Query.endBefore: Ending point was already set (by another call to endAt, endBefore, or equalTo).");return new t(this.repo,this.path,r,this.orderByCalled_)},t.prototype.equalTo=function(t,e){if(Object(o.H)("Query.equalTo",1,2,arguments.length),ut("Query.equalTo",1,t,this.path,!1),ft("Query.equalTo",2,e,!0),this.queryParams_.hasStart())throw new Error("Query.equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(this.queryParams_.hasEnd())throw new Error("Query.equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return this.startAt(t,e).endAt(t,e)},t.prototype.toString=function(){return Object(o.H)("Query.toString",0,0,arguments.length),this.repo.toString()+this.path.toUrlEncodedString()},t.prototype.toJSON=function(){return Object(o.H)("Query.toJSON",0,1,arguments.length),this.toString()},t.prototype.queryObject=function(){return this.queryParams_.getQueryObject()},t.prototype.queryIdentifier=function(){var t=this.queryObject(),e=A(t);return"{}"===e?"default":e},t.prototype.isEqual=function(e){if(Object(o.H)("Query.isEqual",1,1,arguments.length),!(e instanceof t)){var n="Query.isEqual failed: First argument must be an instance of firebase.database.Query.";throw new Error(n)}var r=this.repo===e.repo,i=this.path.equals(e.path),s=this.queryIdentifier()===e.queryIdentifier();return r&&i&&s},t.getCancelAndContextArgs_=function(t,e,n){var r={cancel:null,context:null};if(e&&n)r.cancel=e,Object(o.I)(t,3,r.cancel,!0),r.context=n,Object(o.J)(t,4,r.context,!0);else if(e)if("object"==typeof e&&null!==e)r.context=e;else{if("function"!=typeof e)throw new Error(Object(o.m)(t,3,!0)+" must either be a cancel callback or a context object.");r.cancel=e}return r},Object.defineProperty(t.prototype,"ref",{get:function(){return this.getRef()},enumerable:!1,configurable:!0}),t}(),ne=function(){function t(t){this.node_=t}return t.prototype.getImmediateChild=function(e){return new t(this.node_.getImmediateChild(e))},t.prototype.node=function(){return this.node_},t}(),re=function(){function t(t,e){this.syncTree_=t,this.path_=e}return t.prototype.getImmediateChild=function(e){var n=this.path_.child(e);return new t(this.syncTree_,n)},t.prototype.node=function(){return this.syncTree_.calcCompleteEventCache(this.path_)},t}(),ie=function(t,e,n){return t&&"object"==typeof t?(Object(o.e)(".sv"in t,"Unexpected leaf node or priority contents"),"string"==typeof t[".sv"]?oe(t[".sv"],e,n):"object"==typeof t[".sv"]?se(t[".sv"],e):void Object(o.e)(!1,"Unexpected server value: "+JSON.stringify(t,null,2))):t},oe=function(t,e,n){switch(t){case"timestamp":return n.timestamp;default:Object(o.e)(!1,"Unexpected server value: "+t)}},se=function(t,e,n){t.hasOwnProperty("increment")||Object(o.e)(!1,"Unexpected server value: "+JSON.stringify(t,null,2));var r=t.increment;"number"!=typeof r&&Object(o.e)(!1,"Unexpected increment value: "+r);var i=e.node();if(Object(o.e)(null!=i,"Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;var s=i.getValue();return"number"!=typeof s?r:s+r},ae=function(t,e,n,r){return ce(e,new re(n,t),r)},ue=function(t,e,n){return ce(t,new ne(e),n)};function ce(t,e,n){var r,i=t.getPriority().val(),o=ie(i,e.getImmediateChild(".priority"),n);if(t.isLeafNode()){var s=t,a=ie(s.getValue(),e,n);return a!==s.getValue()||o!==s.getPriority().val()?new At(a,Gt(o)):t}var u=t;return r=u,o!==u.getPriority().val()&&(r=r.updatePriority(new At(o))),u.forEachChild(kt,function(t,i){var o=ce(i,e.getImmediateChild(t),n);o!==i&&(r=r.updateImmediateChild(t,o))}),r}var le,he=function(){function t(){this.value=null,this.children=new Map}return t.prototype.find=function(t){if(null!=this.value)return this.value.getChild(t);if(!t.isEmpty()&&this.children.size>0){var e=t.getFront();return t=t.popFront(),this.children.has(e)?this.children.get(e).find(t):null}return null},t.prototype.remember=function(e,n){if(e.isEmpty())this.value=n,this.children.clear();else if(null!==this.value)this.value=this.value.updateChild(e,n);else{var r=e.getFront();this.children.has(r)||this.children.set(r,new t);var i=this.children.get(r);e=e.popFront(),i.remember(e,n)}},t.prototype.forget=function(t){if(t.isEmpty())return this.value=null,this.children.clear(),!0;if(null!==this.value){if(this.value.isLeafNode())return!1;var e=this.value;this.value=null;var n=this;return e.forEachChild(kt,function(t,e){n.remember(new Y(t),e)}),this.forget(t)}if(this.children.size>0){var r=t.getFront();return t=t.popFront(),this.children.has(r)&&this.children.get(r).forget(t)&&this.children.delete(r),0===this.children.size}return!0},t.prototype.forEachTree=function(t,e){null!==this.value?e(t,this.value):this.forEachChild(function(n,r){var i=new Y(t.toString()+"/"+n);r.forEachTree(i,e)})},t.prototype.forEachChild=function(t){this.children.forEach(function(e,n){t(n,e)})},t}(),de=function(t){return t[t.OVERWRITE=0]="OVERWRITE",t[t.MERGE=1]="MERGE",t[t.ACK_USER_WRITE=2]="ACK_USER_WRITE",t[t.LISTEN_COMPLETE=3]="LISTEN_COMPLETE",t}({}),fe=function(){function t(t,e,n,r){this.fromUser=t,this.fromServer=e,this.queryId=n,this.tagged=r,Object(o.e)(!r||e,"Tagged queries must be from server.")}return t.user=function(){return new t(!0,!1,null,!1)},t.server=function(){return new t(!1,!0,null,!1)},t.forServerTaggedQuery=function(e){return new t(!1,!0,e,!0)},t}(),pe=function(){function t(t,e,n){this.path=t,this.affectedTree=e,this.revert=n,this.type=de.ACK_USER_WRITE,this.source=fe.user()}return t.prototype.operationForChild=function(e){if(this.path.isEmpty()){if(null!=this.affectedTree.value)return Object(o.e)(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;var n=this.affectedTree.subtree(new Y(e));return new t(Y.Empty,n,this.revert)}return Object(o.e)(this.path.getFront()===e,"operationForChild called for unrelated child."),new t(this.path.popFront(),this.affectedTree,this.revert)},t}(),ge=function(){function t(t,e){void 0===e&&(le||(le=new Mt(P)),e=le),this.value=t,this.children=e}return t.fromObject=function(e){var n=new t(null);return j(e,function(t,e){n=n.set(new Y(t),e)}),n},t.prototype.isEmpty=function(){return null===this.value&&this.children.isEmpty()},t.prototype.findRootMostMatchingPathAndValue=function(t,e){if(null!=this.value&&e(this.value))return{path:Y.Empty,value:this.value};if(t.isEmpty())return null;var n=t.getFront(),r=this.children.get(n);if(null!==r){var i=r.findRootMostMatchingPathAndValue(t.popFront(),e);return null!=i?{path:new Y(n).child(i.path),value:i.value}:null}return null},t.prototype.findRootMostValueAndPath=function(t){return this.findRootMostMatchingPathAndValue(t,function(){return!0})},t.prototype.subtree=function(e){if(e.isEmpty())return this;var n=e.getFront(),r=this.children.get(n);return null!==r?r.subtree(e.popFront()):new t(null)},t.prototype.set=function(e,n){if(e.isEmpty())return new t(n,this.children);var r=e.getFront(),i=(this.children.get(r)||new t(null)).set(e.popFront(),n),o=this.children.insert(r,i);return new t(this.value,o)},t.prototype.remove=function(e){if(e.isEmpty())return this.children.isEmpty()?new t(null):new t(null,this.children);var n=e.getFront(),r=this.children.get(n);if(r){var i=r.remove(e.popFront()),o=void 0;return o=i.isEmpty()?this.children.remove(n):this.children.insert(n,i),null===this.value&&o.isEmpty()?new t(null):new t(this.value,o)}return this},t.prototype.get=function(t){if(t.isEmpty())return this.value;var e=t.getFront(),n=this.children.get(e);return n?n.get(t.popFront()):null},t.prototype.setTree=function(e,n){if(e.isEmpty())return n;var r,i=e.getFront(),o=(this.children.get(i)||new t(null)).setTree(e.popFront(),n);return r=o.isEmpty()?this.children.remove(i):this.children.insert(i,o),new t(this.value,r)},t.prototype.fold=function(t){return this.fold_(Y.Empty,t)},t.prototype.fold_=function(t,e){var n={};return this.children.inorderTraversal(function(r,i){n[r]=i.fold_(t.child(r),e)}),e(t,this.value,n)},t.prototype.findOnPath=function(t,e){return this.findOnPath_(t,Y.Empty,e)},t.prototype.findOnPath_=function(t,e,n){var r=!!this.value&&n(e,this.value);if(r)return r;if(t.isEmpty())return null;var i=t.getFront(),o=this.children.get(i);return o?o.findOnPath_(t.popFront(),e.child(i),n):null},t.prototype.foreachOnPath=function(t,e){return this.foreachOnPath_(t,Y.Empty,e)},t.prototype.foreachOnPath_=function(e,n,r){if(e.isEmpty())return this;this.value&&r(n,this.value);var i=e.getFront(),o=this.children.get(i);return o?o.foreachOnPath_(e.popFront(),n.child(i),r):new t(null)},t.prototype.foreach=function(t){this.foreach_(Y.Empty,t)},t.prototype.foreach_=function(t,e){this.children.inorderTraversal(function(n,r){r.foreach_(t.child(n),e)}),this.value&&e(t,this.value)},t.prototype.foreachChild=function(t){this.children.inorderTraversal(function(e,n){n.value&&t(e,n.value)})},t}(),me=function(){function t(t,e){this.source=t,this.path=e,this.type=de.LISTEN_COMPLETE}return t.prototype.operationForChild=function(e){return this.path.isEmpty()?new t(this.source,Y.Empty):new t(this.source,this.path.popFront())},t}(),ye=function(){function t(t,e,n){this.source=t,this.path=e,this.snap=n,this.type=de.OVERWRITE}return t.prototype.operationForChild=function(e){return this.path.isEmpty()?new t(this.source,Y.Empty,this.snap.getImmediateChild(e)):new t(this.source,this.path.popFront(),this.snap)},t}(),be=function(){function t(t,e,n){this.source=t,this.path=e,this.children=n,this.type=de.MERGE}return t.prototype.operationForChild=function(e){if(this.path.isEmpty()){var n=this.children.subtree(new Y(e));return n.isEmpty()?null:n.value?new ye(this.source,Y.Empty,n.value):new t(this.source,Y.Empty,n)}return Object(o.e)(this.path.getFront()===e,"Can't get a merge for a child not on the path of the operation"),new t(this.source,this.path.popFront(),this.children)},t.prototype.toString=function(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"},t}(),ve=function(){function t(t,e,n){this.node_=t,this.fullyInitialized_=e,this.filtered_=n}return t.prototype.isFullyInitialized=function(){return this.fullyInitialized_},t.prototype.isFiltered=function(){return this.filtered_},t.prototype.isCompleteForPath=function(t){if(t.isEmpty())return this.isFullyInitialized()&&!this.filtered_;var e=t.getFront();return this.isCompleteForChild(e)},t.prototype.isCompleteForChild=function(t){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(t)},t.prototype.getNode=function(){return this.node_},t}(),_e=function(){function t(t,e){this.eventCache_=t,this.serverCache_=e}return t.prototype.updateEventSnap=function(e,n,r){return new t(new ve(e,n,r),this.serverCache_)},t.prototype.updateServerSnap=function(e,n,r){return new t(this.eventCache_,new ve(e,n,r))},t.prototype.getEventCache=function(){return this.eventCache_},t.prototype.getCompleteEventSnap=function(){return this.eventCache_.isFullyInitialized()?this.eventCache_.getNode():null},t.prototype.getServerCache=function(){return this.serverCache_},t.prototype.getCompleteServerSnap=function(){return this.serverCache_.isFullyInitialized()?this.serverCache_.getNode():null},t}();function we(t){return{type:"value",snapshotNode:t}}function Ce(t,e){return{type:"child_added",snapshotNode:e,childName:t}}function Oe(t,e){return{type:"child_removed",snapshotNode:e,childName:t}}function Ee(t,e,n){return{type:"child_changed",snapshotNode:e,childName:t,oldSnap:n}}var xe,Ie=function(){function t(t){this.index_=t}return t.prototype.updateChild=function(t,e,n,r,i,s){Object(o.e)(t.isIndexed(this.index_),"A node must be indexed if only a child is updated");var a=t.getImmediateChild(e);return a.getChild(r).equals(n.getChild(r))&&a.isEmpty()===n.isEmpty()?t:(null!=s&&(n.isEmpty()?t.hasChild(e)?s.trackChildChange(Oe(e,a)):Object(o.e)(t.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):a.isEmpty()?s.trackChildChange(Ce(e,n)):s.trackChildChange(Ee(e,n,a))),t.isLeafNode()&&n.isEmpty()?t:t.updateImmediateChild(e,n).withIndex(this.index_))},t.prototype.updateFullNode=function(t,e,n){return null!=n&&(t.isLeafNode()||t.forEachChild(kt,function(t,r){e.hasChild(t)||n.trackChildChange(Oe(t,r))}),e.isLeafNode()||e.forEachChild(kt,function(e,r){if(t.hasChild(e)){var i=t.getImmediateChild(e);i.equals(r)||n.trackChildChange(Ee(e,r,i))}else n.trackChildChange(Ce(e,r))})),e.withIndex(this.index_)},t.prototype.updatePriority=function(t,e){return t.isEmpty()?Bt.EMPTY_NODE:t.updatePriority(e)},t.prototype.filtersNodes=function(){return!1},t.prototype.getIndexedFilter=function(){return this},t.prototype.getIndex=function(){return this.index_},t}(),Se=function(){function t(){this.changeMap=new Map}return t.prototype.trackChildChange=function(t){var e=t.type,n=t.childName;Object(o.e)("child_added"===e||"child_changed"===e||"child_removed"===e,"Only child changes supported for tracking"),Object(o.e)(".priority"!==n,"Only non-priority child changes can be tracked.");var r=this.changeMap.get(n);if(r){var i=r.type;if("child_added"===e&&"child_removed"===i)this.changeMap.set(n,Ee(n,t.snapshotNode,r.snapshotNode));else if("child_removed"===e&&"child_added"===i)this.changeMap.delete(n);else if("child_removed"===e&&"child_changed"===i)this.changeMap.set(n,Oe(n,r.oldSnap));else if("child_changed"===e&&"child_added"===i)this.changeMap.set(n,Ce(n,t.snapshotNode));else{if("child_changed"!==e||"child_changed"!==i)throw Object(o.f)("Illegal combination of changes: "+t+" occurred after "+r);this.changeMap.set(n,Ee(n,t.snapshotNode,r.oldSnap))}}else this.changeMap.set(n,t)},t.prototype.getChanges=function(){return Array.from(this.changeMap.values())},t}(),Te=new(function(){function t(){}return t.prototype.getCompleteChild=function(t){return null},t.prototype.getChildAfterChild=function(t,e,n){return null},t}()),Pe=function(){function t(t,e,n){void 0===n&&(n=null),this.writes_=t,this.viewCache_=e,this.optCompleteServerCache_=n}return t.prototype.getCompleteChild=function(t){var e=this.viewCache_.getEventCache();if(e.isCompleteForChild(t))return e.getNode().getImmediateChild(t);var n=null!=this.optCompleteServerCache_?new ve(this.optCompleteServerCache_,!0,!1):this.viewCache_.getServerCache();return this.writes_.calcCompleteChild(t,n)},t.prototype.getChildAfterChild=function(t,e,n){var r=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:this.viewCache_.getCompleteServerSnap(),i=this.writes_.calcIndexedSlice(r,e,1,n,t);return 0===i.length?null:i[0]},t}(),Re=function(){return function(t,e){this.viewCache=t,this.changes=e}}(),Ae=function(){function t(t){this.filter_=t}return t.prototype.assertIndexed=function(t){Object(o.e)(t.getEventCache().getNode().isIndexed(this.filter_.getIndex()),"Event snap not indexed"),Object(o.e)(t.getServerCache().getNode().isIndexed(this.filter_.getIndex()),"Server snap not indexed")},t.prototype.applyOperation=function(e,n,r,i){var s,a,u=new Se;if(n.type===de.OVERWRITE){var c=n;c.source.fromUser?s=this.applyUserOverwrite_(e,c.path,c.snap,r,i,u):(Object(o.e)(c.source.fromServer,"Unknown source."),a=c.source.tagged||e.getServerCache().isFiltered()&&!c.path.isEmpty(),s=this.applyServerOverwrite_(e,c.path,c.snap,r,i,a,u))}else if(n.type===de.MERGE){var l=n;l.source.fromUser?s=this.applyUserMerge_(e,l.path,l.children,r,i,u):(Object(o.e)(l.source.fromServer,"Unknown source."),a=l.source.tagged||e.getServerCache().isFiltered(),s=this.applyServerMerge_(e,l.path,l.children,r,i,a,u))}else if(n.type===de.ACK_USER_WRITE){var h=n;s=h.revert?this.revertUserWrite_(e,h.path,r,i,u):this.ackUserWrite_(e,h.path,h.affectedTree,r,i,u)}else{if(n.type!==de.LISTEN_COMPLETE)throw Object(o.f)("Unknown operation type: "+n.type);s=this.listenComplete_(e,n.path,r,u)}var d=u.getChanges();return t.maybeAddValueEvent_(e,s,d),new Re(s,d)},t.maybeAddValueEvent_=function(t,e,n){var r=e.getEventCache();if(r.isFullyInitialized()){var i=r.getNode().isLeafNode()||r.getNode().isEmpty(),o=t.getCompleteEventSnap();(n.length>0||!t.getEventCache().isFullyInitialized()||i&&!r.getNode().equals(o)||!r.getNode().getPriority().equals(o.getPriority()))&&n.push(we(e.getCompleteEventSnap()))}},t.prototype.generateEventCacheAfterServerEvent_=function(t,e,n,r,i){var s=t.getEventCache();if(null!=n.shadowingWrite(e))return t;var a=void 0,u=void 0;if(e.isEmpty())if(Object(o.e)(t.getServerCache().isFullyInitialized(),"If change path is empty, we must have complete server data"),t.getServerCache().isFiltered()){var c=t.getCompleteServerSnap(),l=n.calcCompleteEventChildren(c instanceof Bt?c:Bt.EMPTY_NODE);a=this.filter_.updateFullNode(t.getEventCache().getNode(),l,i)}else{var h=n.calcCompleteEventCache(t.getCompleteServerSnap());a=this.filter_.updateFullNode(t.getEventCache().getNode(),h,i)}else{var d=e.getFront();if(".priority"===d){Object(o.e)(1===e.getLength(),"Can't have a priority with additional path components");var f=s.getNode();u=t.getServerCache().getNode();var p=n.calcEventCacheAfterServerOverwrite(e,f,u);a=null!=p?this.filter_.updatePriority(f,p):s.getNode()}else{var g=e.popFront(),m=void 0;if(s.isCompleteForChild(d)){u=t.getServerCache().getNode();var y=n.calcEventCacheAfterServerOverwrite(e,s.getNode(),u);m=null!=y?s.getNode().getImmediateChild(d).updateChild(g,y):s.getNode().getImmediateChild(d)}else m=n.calcCompleteChild(d,t.getServerCache());a=null!=m?this.filter_.updateChild(s.getNode(),d,m,g,r,i):s.getNode()}}return t.updateEventSnap(a,s.isFullyInitialized()||e.isEmpty(),this.filter_.filtersNodes())},t.prototype.applyServerOverwrite_=function(t,e,n,r,i,o,s){var a,u=t.getServerCache(),c=o?this.filter_:this.filter_.getIndexedFilter();if(e.isEmpty())a=c.updateFullNode(u.getNode(),n,null);else if(c.filtersNodes()&&!u.isFiltered()){var l=u.getNode().updateChild(e,n);a=c.updateFullNode(u.getNode(),l,null)}else{var h=e.getFront();if(!u.isCompleteForPath(e)&&e.getLength()>1)return t;var d=e.popFront(),f=u.getNode().getImmediateChild(h).updateChild(d,n);a=".priority"===h?c.updatePriority(u.getNode(),f):c.updateChild(u.getNode(),h,f,d,Te,null)}var p=t.updateServerSnap(a,u.isFullyInitialized()||e.isEmpty(),c.filtersNodes()),g=new Pe(r,p,i);return this.generateEventCacheAfterServerEvent_(p,e,r,g,s)},t.prototype.applyUserOverwrite_=function(t,e,n,r,i,o){var s,a,u=t.getEventCache(),c=new Pe(r,t,i);if(e.isEmpty())a=this.filter_.updateFullNode(t.getEventCache().getNode(),n,o),s=t.updateEventSnap(a,!0,this.filter_.filtersNodes());else{var l=e.getFront();if(".priority"===l)a=this.filter_.updatePriority(t.getEventCache().getNode(),n),s=t.updateEventSnap(a,u.isFullyInitialized(),u.isFiltered());else{var h=e.popFront(),d=u.getNode().getImmediateChild(l),f=void 0;if(h.isEmpty())f=n;else{var p=c.getCompleteChild(l);f=null!=p?".priority"===h.getBack()&&p.getChild(h.parent()).isEmpty()?p:p.updateChild(h,n):Bt.EMPTY_NODE}if(d.equals(f))s=t;else{var g=this.filter_.updateChild(u.getNode(),l,f,h,c,o);s=t.updateEventSnap(g,u.isFullyInitialized(),this.filter_.filtersNodes())}}}return s},t.cacheHasChild_=function(t,e){return t.getEventCache().isCompleteForChild(e)},t.prototype.applyUserMerge_=function(e,n,r,i,o,s){var a=this,u=e;return r.foreach(function(r,c){var l=n.child(r);t.cacheHasChild_(e,l.getFront())&&(u=a.applyUserOverwrite_(u,l,c,i,o,s))}),r.foreach(function(r,c){var l=n.child(r);t.cacheHasChild_(e,l.getFront())||(u=a.applyUserOverwrite_(u,l,c,i,o,s))}),u},t.prototype.applyMerge_=function(t,e){return e.foreach(function(e,n){t=t.updateChild(e,n)}),t},t.prototype.applyServerMerge_=function(t,e,n,r,i,o,s){var a=this;if(t.getServerCache().getNode().isEmpty()&&!t.getServerCache().isFullyInitialized())return t;var u,c=t;u=e.isEmpty()?n:new ge(null).setTree(e,n);var l=t.getServerCache().getNode();return u.children.inorderTraversal(function(e,n){if(l.hasChild(e)){var u=t.getServerCache().getNode().getImmediateChild(e),h=a.applyMerge_(u,n);c=a.applyServerOverwrite_(c,new Y(e),h,r,i,o,s)}}),u.children.inorderTraversal(function(e,n){var u=!t.getServerCache().isCompleteForChild(e)&&null==n.value;if(!l.hasChild(e)&&!u){var h=t.getServerCache().getNode().getImmediateChild(e),d=a.applyMerge_(h,n);c=a.applyServerOverwrite_(c,new Y(e),d,r,i,o,s)}}),c},t.prototype.ackUserWrite_=function(t,e,n,r,i,o){if(null!=r.shadowingWrite(e))return t;var s=t.getServerCache().isFiltered(),a=t.getServerCache();if(null!=n.value){if(e.isEmpty()&&a.isFullyInitialized()||a.isCompleteForPath(e))return this.applyServerOverwrite_(t,e,a.getNode().getChild(e),r,i,s,o);if(e.isEmpty()){var u=new ge(null);return a.getNode().forEachChild(Tt,function(t,e){u=u.set(new Y(t),e)}),this.applyServerMerge_(t,e,u,r,i,s,o)}return t}var c=new ge(null);return n.foreach(function(t,n){var r=e.child(t);a.isCompleteForPath(r)&&(c=c.set(t,a.getNode().getChild(r)))}),this.applyServerMerge_(t,e,c,r,i,s,o)},t.prototype.listenComplete_=function(t,e,n,r){var i=t.getServerCache(),o=t.updateServerSnap(i.getNode(),i.isFullyInitialized()||e.isEmpty(),i.isFiltered());return this.generateEventCacheAfterServerEvent_(o,e,n,Te,r)},t.prototype.revertUserWrite_=function(t,e,n,r,i){var s;if(null!=n.shadowingWrite(e))return t;var a=new Pe(n,t,r),u=t.getEventCache().getNode(),c=void 0;if(e.isEmpty()||".priority"===e.getFront()){var l=void 0;if(t.getServerCache().isFullyInitialized())l=n.calcCompleteEventCache(t.getCompleteServerSnap());else{var h=t.getServerCache().getNode();Object(o.e)(h instanceof Bt,"serverChildren would be complete if leaf node"),l=n.calcCompleteEventChildren(h)}c=this.filter_.updateFullNode(u,l=l,i)}else{var d=e.getFront(),f=n.calcCompleteChild(d,t.getServerCache());null==f&&t.getServerCache().isCompleteForChild(d)&&(f=u.getImmediateChild(d)),(c=null!=f?this.filter_.updateChild(u,d,f,e.popFront(),a,i):t.getEventCache().getNode().hasChild(d)?this.filter_.updateChild(u,d,Bt.EMPTY_NODE,e.popFront(),a,i):u).isEmpty()&&t.getServerCache().isFullyInitialized()&&(s=n.calcCompleteEventCache(t.getCompleteServerSnap())).isLeafNode()&&(c=this.filter_.updateFullNode(c,s,i))}return s=t.getServerCache().isFullyInitialized()||null!=n.shadowingWrite(Y.Empty),t.updateEventSnap(c,s,this.filter_.filtersNodes())},t}(),ke=function(){function t(t){this.query_=t,this.index_=this.query_.getQueryParams().getIndex()}return t.prototype.generateEventsForChanges=function(t,e,n){var r=this,i=[],o=[];return t.forEach(function(t){"child_changed"===t.type&&r.index_.indexedValueChanged(t.oldSnap,t.snapshotNode)&&o.push({type:"child_moved",snapshotNode:t.snapshotNode,childName:t.childName})}),this.generateEventsForType_(i,"child_removed",t,n,e),this.generateEventsForType_(i,"child_added",t,n,e),this.generateEventsForType_(i,"child_moved",o,n,e),this.generateEventsForType_(i,"child_changed",t,n,e),this.generateEventsForType_(i,"value",t,n,e),i},t.prototype.generateEventsForType_=function(t,e,n,r,i){var o=this,s=n.filter(function(t){return t.type===e});s.sort(this.compareChanges_.bind(this)),s.forEach(function(e){var n=o.materializeSingleChange_(e,i);r.forEach(function(r){r.respondsTo(e.type)&&t.push(r.createEvent(n,o.query_))})})},t.prototype.materializeSingleChange_=function(t,e){return"value"===t.type||"child_removed"===t.type||(t.prevName=e.getPredecessorChildName(t.childName,t.snapshotNode,this.index_)),t},t.prototype.compareChanges_=function(t,e){if(null==t.childName||null==e.childName)throw Object(o.f)("Should only compare child_ events.");var n=new xt(t.childName,t.snapshotNode),r=new xt(e.childName,e.snapshotNode);return this.index_.compare(n,r)},t}(),je=function(){function t(t,e){this.query_=t,this.eventRegistrations_=[];var n=this.query_.getQueryParams(),r=new Ie(n.getIndex()),i=n.getNodeFilter();this.processor_=new Ae(i);var o=e.getServerCache(),s=e.getEventCache(),a=r.updateFullNode(Bt.EMPTY_NODE,o.getNode(),null),u=i.updateFullNode(Bt.EMPTY_NODE,s.getNode(),null),c=new ve(a,o.isFullyInitialized(),r.filtersNodes()),l=new ve(u,s.isFullyInitialized(),i.filtersNodes());this.viewCache_=new _e(l,c),this.eventGenerator_=new ke(this.query_)}return t.prototype.getQuery=function(){return this.query_},t.prototype.getServerCache=function(){return this.viewCache_.getServerCache().getNode()},t.prototype.getCompleteNode=function(){return this.viewCache_.getCompleteEventSnap()},t.prototype.getCompleteServerCache=function(t){var e=this.viewCache_.getCompleteServerSnap();return e&&(this.query_.getQueryParams().loadsAllData()||!t.isEmpty()&&!e.getImmediateChild(t.getFront()).isEmpty())?e.getChild(t):null},t.prototype.isEmpty=function(){return 0===this.eventRegistrations_.length},t.prototype.addEventRegistration=function(t){this.eventRegistrations_.push(t)},t.prototype.removeEventRegistration=function(t,e){var n=[];if(e){Object(o.e)(null==t,"A cancel should cancel all event registrations.");var r=this.query_.path;this.eventRegistrations_.forEach(function(t){var i=t.createCancelEvent(e,r);i&&n.push(i)})}if(t){for(var i=[],s=0;s<this.eventRegistrations_.length;++s){var a=this.eventRegistrations_[s];if(a.matches(t)){if(t.hasAnyCallback()){i=i.concat(this.eventRegistrations_.slice(s+1));break}}else i.push(a)}this.eventRegistrations_=i}else this.eventRegistrations_=[];return n},t.prototype.applyOperation=function(t,e,n){t.type===de.MERGE&&null!==t.source.queryId&&(Object(o.e)(this.viewCache_.getCompleteServerSnap(),"We should always have a full cache before handling merges"),Object(o.e)(this.viewCache_.getCompleteEventSnap(),"Missing event cache, even though we have a server cache"));var r=this.viewCache_,i=this.processor_.applyOperation(r,t,e,n);return this.processor_.assertIndexed(i.viewCache),Object(o.e)(i.viewCache.getServerCache().isFullyInitialized()||!r.getServerCache().isFullyInitialized(),"Once a server snap is complete, it should never go back"),this.viewCache_=i.viewCache,this.generateEventsForChanges_(i.changes,i.viewCache.getEventCache().getNode(),null)},t.prototype.getInitialEvents=function(t){var e=this.viewCache_.getEventCache(),n=[];return e.getNode().isLeafNode()||e.getNode().forEachChild(kt,function(t,e){n.push(Ce(t,e))}),e.isFullyInitialized()&&n.push(we(e.getNode())),this.generateEventsForChanges_(n,e.getNode(),t)},t.prototype.generateEventsForChanges_=function(t,e,n){return this.eventGenerator_.generateEventsForChanges(t,e,n?[n]:this.eventRegistrations_)},t}(),Ne=function(){function t(){this.views=new Map}return Object.defineProperty(t,"__referenceConstructor",{get:function(){return Object(o.e)(xe,"Reference.ts has not been loaded"),xe},set:function(t){Object(o.e)(!xe,"__referenceConstructor has already been defined"),xe=t},enumerable:!1,configurable:!0}),t.prototype.isEmpty=function(){return 0===this.views.size},t.prototype.applyOperation=function(t,e,n){var r,s,a=t.source.queryId;if(null!==a){var u=this.views.get(a);return Object(o.e)(null!=u,"SyncTree gave us an op for an invalid query."),u.applyOperation(t,e,n)}var c=[];try{for(var l=Object(i.h)(this.views.values()),h=l.next();!h.done;h=l.next())c=c.concat((u=h.value).applyOperation(t,e,n))}catch(d){r={error:d}}finally{try{h&&!h.done&&(s=l.return)&&s.call(l)}finally{if(r)throw r.error}}return c},t.prototype.getView=function(t,e,n,r){var i=t.queryIdentifier(),o=this.views.get(i);if(!o){var s=e.calcCompleteEventCache(r?n:null),a=!1;s?a=!0:n instanceof Bt?(s=e.calcCompleteEventChildren(n),a=!1):(s=Bt.EMPTY_NODE,a=!1);var u=new _e(new ve(s,a,!1),new ve(n,r,!1));return new je(t,u)}return o},t.prototype.addEventRegistration=function(t,e,n,r,i){var o=this.getView(t,n,r,i);return this.views.has(t.queryIdentifier())||this.views.set(t.queryIdentifier(),o),o.addEventRegistration(e),o.getInitialEvents(e)},t.prototype.removeEventRegistration=function(e,n,r){var o,s,a=e.queryIdentifier(),u=[],c=[],l=this.hasCompleteView();if("default"===a)try{for(var h=Object(i.h)(this.views.entries()),d=h.next();!d.done;d=h.next()){var f,p=Object(i.e)(d.value,2),g=p[0];c=c.concat((f=p[1]).removeEventRegistration(n,r)),f.isEmpty()&&(this.views.delete(g),f.getQuery().getQueryParams().loadsAllData()||u.push(f.getQuery()))}}catch(m){o={error:m}}finally{try{d&&!d.done&&(s=h.return)&&s.call(h)}finally{if(o)throw o.error}}else(f=this.views.get(a))&&(c=c.concat(f.removeEventRegistration(n,r)),f.isEmpty()&&(this.views.delete(a),f.getQuery().getQueryParams().loadsAllData()||u.push(f.getQuery())));return l&&!this.hasCompleteView()&&u.push(new t.__referenceConstructor(e.repo,e.path)),{removed:u,events:c}},t.prototype.getQueryViews=function(){var t,e,n=[];try{for(var r=Object(i.h)(this.views.values()),o=r.next();!o.done;o=r.next()){var s=o.value;s.getQuery().getQueryParams().loadsAllData()||n.push(s)}}catch(a){t={error:a}}finally{try{o&&!o.done&&(e=r.return)&&e.call(r)}finally{if(t)throw t.error}}return n},t.prototype.getCompleteServerCache=function(t){var e,n,r=null;try{for(var o=Object(i.h)(this.views.values()),s=o.next();!s.done;s=o.next())r=r||s.value.getCompleteServerCache(t)}catch(a){e={error:a}}finally{try{s&&!s.done&&(n=o.return)&&n.call(o)}finally{if(e)throw e.error}}return r},t.prototype.viewForQuery=function(t){if(t.getQueryParams().loadsAllData())return this.getCompleteView();var e=t.queryIdentifier();return this.views.get(e)},t.prototype.viewExistsForQuery=function(t){return null!=this.viewForQuery(t)},t.prototype.hasCompleteView=function(){return null!=this.getCompleteView()},t.prototype.getCompleteView=function(){var t,e;try{for(var n=Object(i.h)(this.views.values()),r=n.next();!r.done;r=n.next()){var o=r.value;if(o.getQuery().getQueryParams().loadsAllData())return o}}catch(s){t={error:s}}finally{try{r&&!r.done&&(e=n.return)&&e.call(n)}finally{if(t)throw t.error}}return null},t}(),De=function(){function t(t){this.writeTree_=t}return t.empty=function(){return new t(new ge(null))},t}();function Me(t,e,n){if(e.isEmpty())return new De(new ge(n));var r=t.writeTree_.findRootMostValueAndPath(e);if(null!=r){var i=r.path,o=r.value,s=Y.relativePath(i,e);return o=o.updateChild(s,n),new De(t.writeTree_.set(i,o))}var a=new ge(n),u=t.writeTree_.setTree(e,a);return new De(u)}function Le(t,e,n){var r=t;return j(n,function(t,n){r=Me(r,e.child(t),n)}),r}function Fe(t,e){if(e.isEmpty())return De.empty();var n=t.writeTree_.setTree(e,new ge(null));return new De(n)}function Ue(t,e){return null!=Ve(t,e)}function Ve(t,e){var n=t.writeTree_.findRootMostValueAndPath(e);return null!=n?t.writeTree_.get(n.path).getChild(Y.relativePath(n.path,e)):null}function Qe(t){var e=[],n=t.writeTree_.value;return null!=n?n.isLeafNode()||n.forEachChild(kt,function(t,n){e.push(new xt(t,n))}):t.writeTree_.children.inorderTraversal(function(t,n){null!=n.value&&e.push(new xt(t,n.value))}),e}function He(t,e){if(e.isEmpty())return t;var n=Ve(t,e);return new De(null!=n?new ge(n):t.writeTree_.subtree(e))}function qe(t){return t.writeTree_.isEmpty()}function Be(t,e){return ze(Y.Empty,t.writeTree_,e)}function ze(t,e,n){if(null!=e.value)return n.updateChild(t,e.value);var r=null;return e.children.inorderTraversal(function(e,i){".priority"===e?(Object(o.e)(null!==i.value,"Priority writes must always be leaf nodes"),r=i.value):n=ze(t.child(e),i,n)}),n.getChild(t).isEmpty()||null===r||(n=n.updateChild(t.child(".priority"),r)),n}var Ge=function(){function t(){this.visibleWrites_=De.empty(),this.allWrites_=[],this.lastWriteId_=-1}return t.prototype.childWrites=function(t){return new We(t,this)},t.prototype.addOverwrite=function(t,e,n,r){Object(o.e)(n>this.lastWriteId_,"Stacking an older write on top of newer ones"),void 0===r&&(r=!0),this.allWrites_.push({path:t,snap:e,writeId:n,visible:r}),r&&(this.visibleWrites_=Me(this.visibleWrites_,t,e)),this.lastWriteId_=n},t.prototype.addMerge=function(t,e,n){Object(o.e)(n>this.lastWriteId_,"Stacking an older merge on top of newer ones"),this.allWrites_.push({path:t,children:e,writeId:n,visible:!0}),this.visibleWrites_=Le(this.visibleWrites_,t,e),this.lastWriteId_=n},t.prototype.getWrite=function(t){for(var e=0;e<this.allWrites_.length;e++){var n=this.allWrites_[e];if(n.writeId===t)return n}return null},t.prototype.removeWrite=function(t){var e=this,n=this.allWrites_.findIndex(function(e){return e.writeId===t});Object(o.e)(n>=0,"removeWrite called with nonexistent writeId.");var r=this.allWrites_[n];this.allWrites_.splice(n,1);for(var i=r.visible,s=!1,a=this.allWrites_.length-1;i&&a>=0;){var u=this.allWrites_[a];u.visible&&(a>=n&&this.recordContainsPath_(u,r.path)?i=!1:r.path.contains(u.path)&&(s=!0)),a--}return!!i&&(s?(this.resetTree_(),!0):(r.snap?this.visibleWrites_=Fe(this.visibleWrites_,r.path):j(r.children,function(t){e.visibleWrites_=Fe(e.visibleWrites_,r.path.child(t))}),!0))},t.prototype.getCompleteWriteData=function(t){return Ve(this.visibleWrites_,t)},t.prototype.calcCompleteEventCache=function(e,n,r,i){if(r||i){var o=He(this.visibleWrites_,e);return!i&&qe(o)?n:i||null!=n||Ue(o,Y.Empty)?Be(t.layerTree_(this.allWrites_,function(t){return(t.visible||i)&&(!r||!~r.indexOf(t.writeId))&&(t.path.contains(e)||e.contains(t.path))},e),n||Bt.EMPTY_NODE):null}var s=Ve(this.visibleWrites_,e);if(null!=s)return s;var a=He(this.visibleWrites_,e);return qe(a)?n:null!=n||Ue(a,Y.Empty)?Be(a,n||Bt.EMPTY_NODE):null},t.prototype.calcCompleteEventChildren=function(t,e){var n=Bt.EMPTY_NODE,r=Ve(this.visibleWrites_,t);if(r)return r.isLeafNode()||r.forEachChild(kt,function(t,e){n=n.updateImmediateChild(t,e)}),n;if(e){var i=He(this.visibleWrites_,t);return e.forEachChild(kt,function(t,e){var r=Be(He(i,new Y(t)),e);n=n.updateImmediateChild(t,r)}),Qe(i).forEach(function(t){n=n.updateImmediateChild(t.name,t.node)}),n}return Qe(He(this.visibleWrites_,t)).forEach(function(t){n=n.updateImmediateChild(t.name,t.node)}),n},t.prototype.calcEventCacheAfterServerOverwrite=function(t,e,n,r){Object(o.e)(n||r,"Either existingEventSnap or existingServerSnap must exist");var i=t.child(e);if(Ue(this.visibleWrites_,i))return null;var s=He(this.visibleWrites_,i);return qe(s)?r.getChild(e):Be(s,r.getChild(e))},t.prototype.calcCompleteChild=function(t,e,n){var r=t.child(e),i=Ve(this.visibleWrites_,r);return null!=i?i:n.isCompleteForChild(e)?Be(He(this.visibleWrites_,r),n.getNode().getImmediateChild(e)):null},t.prototype.shadowingWrite=function(t){return Ve(this.visibleWrites_,t)},t.prototype.calcIndexedSlice=function(t,e,n,r,i,o){var s,a=He(this.visibleWrites_,t),u=Ve(a,Y.Empty);if(null!=u)s=u;else{if(null==e)return[];s=Be(a,e)}if((s=s.withIndex(o)).isEmpty()||s.isLeafNode())return[];for(var c=[],l=o.getCompare(),h=i?s.getReverseIteratorFrom(n,o):s.getIteratorFrom(n,o),d=h.getNext();d&&c.length<r;)0!==l(d,n)&&c.push(d),d=h.getNext();return c},t.prototype.recordContainsPath_=function(t,e){if(t.snap)return t.path.contains(e);for(var n in t.children)if(t.children.hasOwnProperty(n)&&t.path.child(n).contains(e))return!0;return!1},t.prototype.resetTree_=function(){this.visibleWrites_=t.layerTree_(this.allWrites_,t.DefaultFilter_,Y.Empty),this.lastWriteId_=this.allWrites_.length>0?this.allWrites_[this.allWrites_.length-1].writeId:-1},t.DefaultFilter_=function(t){return t.visible},t.layerTree_=function(t,e,n){for(var r=De.empty(),i=0;i<t.length;++i){var s=t[i];if(e(s)){var a=s.path,u=void 0;if(s.snap)n.contains(a)?r=Me(r,u=Y.relativePath(n,a),s.snap):a.contains(n)&&(u=Y.relativePath(a,n),r=Me(r,Y.Empty,s.snap.getChild(u)));else{if(!s.children)throw Object(o.f)("WriteRecord should have .snap or .children");if(n.contains(a))r=Le(r,u=Y.relativePath(n,a),s.children);else if(a.contains(n))if((u=Y.relativePath(a,n)).isEmpty())r=Le(r,Y.Empty,s.children);else{var c=Object(o.D)(s.children,u.getFront());if(c){var l=c.getChild(u.popFront());r=Me(r,Y.Empty,l)}}}}}return r},t}(),We=function(){function t(t,e){this.treePath_=t,this.writeTree_=e}return t.prototype.calcCompleteEventCache=function(t,e,n){return this.writeTree_.calcCompleteEventCache(this.treePath_,t,e,n)},t.prototype.calcCompleteEventChildren=function(t){return this.writeTree_.calcCompleteEventChildren(this.treePath_,t)},t.prototype.calcEventCacheAfterServerOverwrite=function(t,e,n){return this.writeTree_.calcEventCacheAfterServerOverwrite(this.treePath_,t,e,n)},t.prototype.shadowingWrite=function(t){return this.writeTree_.shadowingWrite(this.treePath_.child(t))},t.prototype.calcIndexedSlice=function(t,e,n,r,i){return this.writeTree_.calcIndexedSlice(this.treePath_,t,e,n,r,i)},t.prototype.calcCompleteChild=function(t,e){return this.writeTree_.calcCompleteChild(this.treePath_,t,e)},t.prototype.child=function(e){return new t(this.treePath_.child(e),this.writeTree_)},t}(),Ye=function(){function t(t){this.listenProvider_=t,this.syncPointTree_=new ge(null),this.pendingWriteTree_=new Ge,this.tagToQueryMap=new Map,this.queryToTagMap=new Map}return t.prototype.applyUserOverwrite=function(t,e,n,r){return this.pendingWriteTree_.addOverwrite(t,e,n,r),r?this.applyOperationToSyncPoints_(new ye(fe.user(),t,e)):[]},t.prototype.applyUserMerge=function(t,e,n){this.pendingWriteTree_.addMerge(t,e,n);var r=ge.fromObject(e);return this.applyOperationToSyncPoints_(new be(fe.user(),t,r))},t.prototype.ackUserWrite=function(t,e){void 0===e&&(e=!1);var n=this.pendingWriteTree_.getWrite(t);if(this.pendingWriteTree_.removeWrite(t)){var r=new ge(null);return null!=n.snap?r=r.set(Y.Empty,!0):j(n.children,function(t){r=r.set(new Y(t),!0)}),this.applyOperationToSyncPoints_(new pe(n.path,r,e))}return[]},t.prototype.applyServerOverwrite=function(t,e){return this.applyOperationToSyncPoints_(new ye(fe.server(),t,e))},t.prototype.applyServerMerge=function(t,e){var n=ge.fromObject(e);return this.applyOperationToSyncPoints_(new be(fe.server(),t,n))},t.prototype.applyListenComplete=function(t){return this.applyOperationToSyncPoints_(new me(fe.server(),t))},t.prototype.applyTaggedQueryOverwrite=function(e,n,r){var i=this.queryKeyForTag_(r);if(null!=i){var o=t.parseQueryKey_(i),s=o.path,a=o.queryId,u=Y.relativePath(s,e),c=new ye(fe.forServerTaggedQuery(a),u,n);return this.applyTaggedOperation_(s,c)}return[]},t.prototype.applyTaggedQueryMerge=function(e,n,r){var i=this.queryKeyForTag_(r);if(i){var o=t.parseQueryKey_(i),s=o.path,a=o.queryId,u=Y.relativePath(s,e),c=ge.fromObject(n),l=new be(fe.forServerTaggedQuery(a),u,c);return this.applyTaggedOperation_(s,l)}return[]},t.prototype.applyTaggedListenComplete=function(e,n){var r=this.queryKeyForTag_(n);if(r){var i=t.parseQueryKey_(r),o=i.path,s=i.queryId,a=Y.relativePath(o,e),u=new me(fe.forServerTaggedQuery(s),a);return this.applyTaggedOperation_(o,u)}return[]},t.prototype.addEventRegistration=function(e,n){var r=e.path,i=null,s=!1;this.syncPointTree_.foreachOnPath(r,function(t,e){var n=Y.relativePath(t,r);i=i||e.getCompleteServerCache(n),s=s||e.hasCompleteView()});var a,u=this.syncPointTree_.get(r);u?(s=s||u.hasCompleteView(),i=i||u.getCompleteServerCache(Y.Empty)):(u=new Ne,this.syncPointTree_=this.syncPointTree_.set(r,u)),null!=i?a=!0:(a=!1,i=Bt.EMPTY_NODE,this.syncPointTree_.subtree(r).foreachChild(function(t,e){var n=e.getCompleteServerCache(Y.Empty);n&&(i=i.updateImmediateChild(t,n))}));var c=u.viewExistsForQuery(e);if(!c&&!e.getQueryParams().loadsAllData()){var l=t.makeQueryKey_(e);Object(o.e)(!this.queryToTagMap.has(l),"View does not exist, but we have a tag");var h=t.getNextQueryTag_();this.queryToTagMap.set(l,h),this.tagToQueryMap.set(h,l)}var d=this.pendingWriteTree_.childWrites(r),f=u.addEventRegistration(e,n,d,i,a);if(!c&&!s){var p=u.viewForQuery(e);f=f.concat(this.setupListener_(e,p))}return f},t.prototype.removeEventRegistration=function(e,n,r){var i=this,o=e.path,s=this.syncPointTree_.get(o),a=[];if(s&&("default"===e.queryIdentifier()||s.viewExistsForQuery(e))){var u=s.removeEventRegistration(e,n,r);s.isEmpty()&&(this.syncPointTree_=this.syncPointTree_.remove(o));var c=u.removed;a=u.events;var l=-1!==c.findIndex(function(t){return t.getQueryParams().loadsAllData()}),h=this.syncPointTree_.findOnPath(o,function(t,e){return e.hasCompleteView()});if(l&&!h){var d=this.syncPointTree_.subtree(o);if(!d.isEmpty())for(var f=this.collectDistinctViewsForSubTree_(d),p=0;p<f.length;++p){var g=f[p],m=g.getQuery(),y=this.createListenerForView_(g);this.listenProvider_.startListening(t.queryForListening_(m),this.tagForQuery_(m),y.hashFn,y.onComplete)}}!h&&c.length>0&&!r&&(l?this.listenProvider_.stopListening(t.queryForListening_(e),null):c.forEach(function(e){var n=i.queryToTagMap.get(t.makeQueryKey_(e));i.listenProvider_.stopListening(t.queryForListening_(e),n)})),this.removeTags_(c)}return a},t.prototype.calcCompleteEventCache=function(t,e){var n=this.pendingWriteTree_,r=this.syncPointTree_.findOnPath(t,function(e,n){var r=Y.relativePath(e,t),i=n.getCompleteServerCache(r);if(i)return i});return n.calcCompleteEventCache(t,r,e,!0)},t.prototype.getServerValue=function(t){var e=t.path,n=null;this.syncPointTree_.foreachOnPath(e,function(t,r){var i=Y.relativePath(t,e);n=n||r.getCompleteServerCache(i)});var r=this.syncPointTree_.get(e);r?n=n||r.getCompleteServerCache(Y.Empty):(r=new Ne,this.syncPointTree_=this.syncPointTree_.set(e,r));var i=null!=n,o=i?new ve(n,!0,!1):null,s=this.pendingWriteTree_.childWrites(t.path);return r.getView(t,s,i?o.getNode():Bt.EMPTY_NODE,i).getCompleteNode()},t.prototype.collectDistinctViewsForSubTree_=function(t){return t.fold(function(t,e,n){if(e&&e.hasCompleteView())return[e.getCompleteView()];var r=[];return e&&(r=e.getQueryViews()),j(n,function(t,e){r=r.concat(e)}),r})},t.prototype.removeTags_=function(e){for(var n=0;n<e.length;++n){var r=e[n];if(!r.getQueryParams().loadsAllData()){var i=t.makeQueryKey_(r),o=this.queryToTagMap.get(i);this.queryToTagMap.delete(i),this.tagToQueryMap.delete(o)}}},t.queryForListening_=function(t){return t.getQueryParams().loadsAllData()&&!t.getQueryParams().isDefault()?t.getRef():t},t.prototype.setupListener_=function(e,n){var r=e.path,i=this.tagForQuery_(e),s=this.createListenerForView_(n),a=this.listenProvider_.startListening(t.queryForListening_(e),i,s.hashFn,s.onComplete),u=this.syncPointTree_.subtree(r);if(i)Object(o.e)(!u.value.hasCompleteView(),"If we're adding a query, it shouldn't be shadowed");else for(var c=u.fold(function(t,e,n){if(!t.isEmpty()&&e&&e.hasCompleteView())return[e.getCompleteView().getQuery()];var r=[];return e&&(r=r.concat(e.getQueryViews().map(function(t){return t.getQuery()}))),j(n,function(t,e){r=r.concat(e)}),r}),l=0;l<c.length;++l){var h=c[l];this.listenProvider_.stopListening(t.queryForListening_(h),this.tagForQuery_(h))}return a},t.prototype.createListenerForView_=function(t){var e=this,n=t.getQuery(),r=this.tagForQuery_(n);return{hashFn:function(){return(t.getServerCache()||Bt.EMPTY_NODE).hash()},onComplete:function(t){if("ok"===t)return r?e.applyTaggedListenComplete(n.path,r):e.applyListenComplete(n.path);var i=function(t,e){var n="Unknown Error";"too_big"===t?n="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===t?n="Client doesn't have permission to access the desired data.":"unavailable"===t&&(n="The service is unavailable");var r=new Error(t+" at "+e.path.toString()+": "+n);return r.code=t.toUpperCase(),r}(t,n);return e.removeEventRegistration(n,null,i)}}},t.makeQueryKey_=function(t){return t.path.toString()+"$"+t.queryIdentifier()},t.parseQueryKey_=function(t){var e=t.indexOf("$");return Object(o.e)(-1!==e&&e<t.length-1,"Bad queryKey."),{queryId:t.substr(e+1),path:new Y(t.substr(0,e))}},t.prototype.queryKeyForTag_=function(t){return this.tagToQueryMap.get(t)},t.prototype.tagForQuery_=function(e){var n=t.makeQueryKey_(e);return this.queryToTagMap.get(n)},t.getNextQueryTag_=function(){return t.nextQueryTag_++},t.prototype.applyTaggedOperation_=function(t,e){var n=this.syncPointTree_.get(t);Object(o.e)(n,"Missing sync point for query tag that we're tracking");var r=this.pendingWriteTree_.childWrites(t);return n.applyOperation(e,r,null)},t.prototype.applyOperationToSyncPoints_=function(t){return this.applyOperationHelper_(t,this.syncPointTree_,null,this.pendingWriteTree_.childWrites(Y.Empty))},t.prototype.applyOperationHelper_=function(t,e,n,r){if(t.path.isEmpty())return this.applyOperationDescendantsHelper_(t,e,n,r);var i=e.get(Y.Empty);null==n&&null!=i&&(n=i.getCompleteServerCache(Y.Empty));var o=[],s=t.path.getFront(),a=t.operationForChild(s),u=e.children.get(s);if(u&&a){var c=n?n.getImmediateChild(s):null,l=r.child(s);o=o.concat(this.applyOperationHelper_(a,u,c,l))}return i&&(o=o.concat(i.applyOperation(t,r,n))),o},t.prototype.applyOperationDescendantsHelper_=function(t,e,n,r){var i=this,o=e.get(Y.Empty);null==n&&null!=o&&(n=o.getCompleteServerCache(Y.Empty));var s=[];return e.children.inorderTraversal(function(e,o){var a=n?n.getImmediateChild(e):null,u=r.child(e),c=t.operationForChild(e);c&&(s=s.concat(i.applyOperationDescendantsHelper_(c,o,a,u)))}),o&&(s=s.concat(o.applyOperation(t,r,n))),s},t.nextQueryTag_=1,t}(),$e=function(){function t(){this.rootNode_=Bt.EMPTY_NODE}return t.prototype.getNode=function(t){return this.rootNode_.getChild(t)},t.prototype.updateSnapshot=function(t,e){this.rootNode_=this.rootNode_.updateChild(t,e)},t}(),Ke=function(){function t(){this.counters_={}}return t.prototype.incrementCounter=function(t,e){void 0===e&&(e=1),Object(o.i)(this.counters_,t)||(this.counters_[t]=0),this.counters_[t]+=e},t.prototype.get=function(){return Object(o.k)(this.counters_)},t}(),Xe=function(){function t(){}return t.getCollection=function(t){var e=t.toString();return this.collections_[e]||(this.collections_[e]=new Ke),this.collections_[e]},t.getOrCreateReporter=function(t,e){var n=t.toString();return this.reporters_[n]||(this.reporters_[n]=e()),this.reporters_[n]},t.collections_={},t.reporters_={},t}(),Ze=function(){function t(t){this.collection_=t,this.last_=null}return t.prototype.get=function(){var t=this.collection_.get(),e=Object(i.a)({},t);return this.last_&&j(this.last_,function(t,n){e[t]=e[t]-n}),this.last_=t,e},t}(),Je=function(){function t(t,e){this.server_=e,this.statsToReport_={},this.statsListener_=new Ze(t);var n=1e4+2e4*Math.random();W(this.reportStats_.bind(this),Math.floor(n))}return t.prototype.includeStat=function(t){this.statsToReport_[t]=!0},t.prototype.reportStats_=function(){var t=this,e=this.statsListener_.get(),n={},r=!1;j(e,function(e,i){i>0&&Object(o.i)(t.statsToReport_,e)&&(n[e]=i,r=!0)}),r&&this.server_.reportStats(n),W(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))},t}(),tn=function(){function t(){this.eventLists_=[],this.recursionDepth_=0}return t.prototype.queueEvents=function(t){for(var e=null,n=0;n<t.length;n++){var r=t[n],i=r.getPath();null===e||i.equals(e.getPath())||(this.eventLists_.push(e),e=null),null===e&&(e=new en(i)),e.add(r)}e&&this.eventLists_.push(e)},t.prototype.raiseEventsAtPath=function(t,e){this.queueEvents(e),this.raiseQueuedEventsMatchingPredicate_(function(e){return e.equals(t)})},t.prototype.raiseEventsForChangedPath=function(t,e){this.queueEvents(e),this.raiseQueuedEventsMatchingPredicate_(function(e){return e.contains(t)||t.contains(e)})},t.prototype.raiseQueuedEventsMatchingPredicate_=function(t){this.recursionDepth_++;for(var e=!0,n=0;n<this.eventLists_.length;n++){var r=this.eventLists_[n];r&&(t(r.getPath())?(this.eventLists_[n].raise(),this.eventLists_[n]=null):e=!1)}e&&(this.eventLists_=[]),this.recursionDepth_--},t}(),en=function(){function t(t){this.path_=t,this.events_=[]}return t.prototype.add=function(t){this.events_.push(t)},t.prototype.raise=function(){for(var t=0;t<this.events_.length;t++){var e=this.events_[t];if(null!==e){this.events_[t]=null;var n=e.getEventRunner();y&&_("event: "+e.toString()),G(n)}}},t.prototype.getPath=function(){return this.path_},t}(),nn=function(){function t(t){this.allowedEvents_=t,this.listeners_={},Object(o.e)(Array.isArray(t)&&t.length>0,"Requires a non-empty array")}return t.prototype.trigger=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(Array.isArray(this.listeners_[t]))for(var r=Object(i.f)(this.listeners_[t]),o=0;o<r.length;o++)r[o].callback.apply(r[o].context,e)},t.prototype.on=function(t,e,n){this.validateEventType_(t),this.listeners_[t]=this.listeners_[t]||[],this.listeners_[t].push({callback:e,context:n});var r=this.getInitialEvent(t);r&&e.apply(n,r)},t.prototype.off=function(t,e,n){this.validateEventType_(t);for(var r=this.listeners_[t]||[],i=0;i<r.length;i++)if(r[i].callback===e&&(!n||n===r[i].context))return void r.splice(i,1)},t.prototype.validateEventType_=function(t){Object(o.e)(this.allowedEvents_.find(function(e){return e===t}),"Unknown event: "+t)},t}(),rn=function(t){function e(){var e,n,r=t.call(this,["visible"])||this;return"undefined"!=typeof document&&void 0!==document.addEventListener&&(void 0!==document.hidden?(n="visibilitychange",e="hidden"):void 0!==document.mozHidden?(n="mozvisibilitychange",e="mozHidden"):void 0!==document.msHidden?(n="msvisibilitychange",e="msHidden"):void 0!==document.webkitHidden&&(n="webkitvisibilitychange",e="webkitHidden")),r.visible_=!0,n&&document.addEventListener(n,function(){var t=!document[e];t!==r.visible_&&(r.visible_=t,r.trigger("visible",t))},!1),r}return Object(i.c)(e,t),e.getInstance=function(){return new e},e.prototype.getInitialEvent=function(t){return Object(o.e)("visible"===t,"Unknown event type: "+t),[this.visible_]},e}(nn),on=function(t){function e(){var e=t.call(this,["online"])||this;return e.online_=!0,"undefined"==typeof window||void 0===window.addEventListener||Object(o.u)()||(window.addEventListener("online",function(){e.online_||(e.online_=!0,e.trigger("online",!0))},!1),window.addEventListener("offline",function(){e.online_&&(e.online_=!1,e.trigger("online",!1))},!1)),e}return Object(i.c)(e,t),e.getInstance=function(){return new e},e.prototype.getInitialEvent=function(t){return Object(o.e)("online"===t,"Unknown event type: "+t),[this.online_]},e.prototype.currentlyOnline=function(){return this.online_},e}(nn),sn=function(){function t(t){this.onMessage_=t,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}return t.prototype.closeAfter=function(t,e){this.closeAfterResponse=t,this.onClose=e,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)},t.prototype.handleResponse=function(t,e){var n=this;this.pendingResponses[t]=e;for(var r=function(){var t=i.pendingResponses[i.currentResponseNum];delete i.pendingResponses[i.currentResponseNum];for(var e=function(e){t[e]&&G(function(){n.onMessage_(t[e])})},r=0;r<t.length;++r)e(r);if(i.currentResponseNum===i.closeAfterResponse)return i.onClose&&(i.onClose(),i.onClose=null),"break";i.currentResponseNum++},i=this;this.pendingResponses[this.currentResponseNum]&&"break"!==r(););},t}(),an="start",un="close",cn=function(){function t(t,e,n,r,i){this.connId=t,this.repoInfo=e,this.applicationId=n,this.transportSessionId=r,this.lastSessionId=i,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=w(t),this.stats_=Xe.getCollection(e),this.urlFn=function(t){return e.connectionURL(Z,t)}}return t.prototype.open=function(t,e){var n=this;this.curSegmentNum=0,this.onDisconnect_=e,this.myPacketOrderer=new sn(t),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(function(){n.log_("Timed out trying to connect."),n.onClosed_(),n.connectTimeoutTimer_=null},Math.floor(3e4)),function(t){if(Object(o.w)()||"complete"===document.readyState)t();else{var e=!1,n=function(){document.body?e||(e=!0,t()):setTimeout(n,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",function(){"complete"===document.readyState&&n()}),window.attachEvent("onload",n))}}(function(){if(!n.isClosed_){n.scriptTagHolder=new ln(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=Object(i.e)(t,5),o=r[0],s=r[1],a=r[2];if(n.incrementIncomingBytes_(t),n.scriptTagHolder)if(n.connectTimeoutTimer_&&(clearTimeout(n.connectTimeoutTimer_),n.connectTimeoutTimer_=null),n.everConnected_=!0,o===an)n.id=s,n.password=a;else{if(o!==un)throw new Error("Unrecognized command received: "+o);s?(n.scriptTagHolder.sendNewPolls=!1,n.myPacketOrderer.closeAfter(s,function(){n.onClosed_()})):n.onClosed_()}},function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=Object(i.e)(t,2),o=r[0],s=r[1];n.incrementIncomingBytes_(t),n.myPacketOrderer.handleResponse(o,s)},function(){n.onClosed_()},n.urlFn);var t={start:"t"};t.ser=Math.floor(1e8*Math.random()),n.scriptTagHolder.uniqueCallbackIdentifier&&(t.cb=n.scriptTagHolder.uniqueCallbackIdentifier),t.v="5",n.transportSessionId&&(t.s=n.transportSessionId),n.lastSessionId&&(t.ls=n.lastSessionId),n.applicationId&&(t.p=n.applicationId),"undefined"!=typeof location&&location.hostname&&K.test(location.hostname)&&(t.r="f");var e=n.urlFn(t);n.log_("Connecting via long-poll to "+e),n.scriptTagHolder.addTag(e,function(){})}})},t.prototype.start=function(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)},t.forceAllow=function(){t.forceAllow_=!0},t.forceDisallow=function(){t.forceDisallow_=!0},t.isAvailable=function(){return!(Object(o.w)()||!t.forceAllow_&&(t.forceDisallow_||"undefined"==typeof document||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))},t.prototype.markConnectionHealthy=function(){},t.prototype.shutdown_=function(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)},t.prototype.onClosed_=function(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))},t.prototype.close=function(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())},t.prototype.send=function(t){var e=Object(o.G)(t);this.bytesSent+=e.length,this.stats_.incrementCounter("bytes_sent",e.length);for(var n=Object(o.h)(e),r=k(n,1840),i=0;i<r.length;i++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,r.length,r[i]),this.curSegmentNum++},t.prototype.addDisconnectPingFrame=function(t,e){if(!Object(o.w)()){this.myDisconnFrame=document.createElement("iframe");var n={dframe:"t"};n.id=t,n.pw=e,this.myDisconnFrame.src=this.urlFn(n),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}},t.prototype.incrementIncomingBytes_=function(t){var e=Object(o.G)(t).length;this.bytesReceived+=e,this.stats_.incrementCounter("bytes_received",e)},t}(),ln=function(){function t(e,n,r,i){if(this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,Object(o.w)())this.commandCB=e,this.onMessageCB=n;else{this.uniqueCallbackIdentifier=p(),window["pLPCommand"+this.uniqueCallbackIdentifier]=e,window["pRTLPCB"+this.uniqueCallbackIdentifier]=n,this.myIFrame=t.createIFrame_();var s="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,"javascript:".length)&&(s='<script>document.domain="'+document.domain+'";<\/script>');var a="<html><body>"+s+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(a),this.myIFrame.doc.close()}catch(u){_("frame writing exception"),u.stack&&_(u.stack),_(u)}}}return t.createIFrame_=function(){var t=document.createElement("iframe");if(t.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(t);try{t.contentWindow.document||_("No IE domain setting required")}catch(n){var e=document.domain;t.src="javascript:void((function(){document.open();document.domain='"+e+"';document.close();})())"}return t.contentDocument?t.doc=t.contentDocument:t.contentWindow?t.doc=t.contentWindow.document:t.document&&(t.doc=t.document),t},t.prototype.close=function(){var t=this;this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout(function(){null!==t.myIFrame&&(document.body.removeChild(t.myIFrame),t.myIFrame=null)},Math.floor(0)));var e=this.onDisconnect;e&&(this.onDisconnect=null,e())},t.prototype.startLongPoll=function(t,e){for(this.myID=t,this.myPW=e,this.alive=!0;this.newRequest_(););},t.prototype.newRequest_=function(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;var t={};t.id=this.myID,t.pw=this.myPW,t.ser=this.currentSerial;for(var e=this.urlFn(t),n="",r=0;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+n.length<=1870;){var i=this.pendingSegs.shift();n=n+"&seg"+r+"="+i.seg+"&ts"+r+"="+i.ts+"&d"+r+"="+i.d,r++}return this.addLongPollTag_(e+=n,this.currentSerial),!0}return!1},t.prototype.enqueueSegment=function(t,e,n){this.pendingSegs.push({seg:t,ts:e,d:n}),this.alive&&this.newRequest_()},t.prototype.addLongPollTag_=function(t,e){var n=this;this.outstandingRequests.add(e);var r=function(){n.outstandingRequests.delete(e),n.newRequest_()},i=setTimeout(r,Math.floor(25e3));this.addTag(t,function(){clearTimeout(i),r()})},t.prototype.addTag=function(t,e){var n=this;Object(o.w)()?this.doNodeLongPoll(t,e):setTimeout(function(){try{if(!n.sendNewPolls)return;var r=n.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=t,r.onload=r.onreadystatechange=function(){var t=r.readyState;t&&"loaded"!==t&&"complete"!==t||(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),e())},r.onerror=function(){_("Long-poll script failed to load: "+t),n.sendNewPolls=!1,n.close()},n.myIFrame.doc.body.appendChild(r)}catch(i){}},Math.floor(1))},t}(),hn="";function dn(t){hn=t}var fn=null;"undefined"!=typeof MozWebSocket?fn=MozWebSocket:"undefined"!=typeof WebSocket&&(fn=WebSocket);var pn=function(){function t(e,n,r,i,o){this.connId=e,this.applicationId=r,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=w(this.connId),this.stats_=Xe.getCollection(n),this.connURL=t.connectionURL_(n,i,o),this.nodeAdmin=n.nodeAdmin}return t.connectionURL_=function(t,e,n){var r={v:"5"};return!Object(o.w)()&&"undefined"!=typeof location&&location.hostname&&K.test(location.hostname)&&(r.r="f"),e&&(r.s=e),n&&(r.ls=n),t.connectionURL(X,r)},t.prototype.open=function(t,e){var n=this;this.onDisconnect=e,this.onMessage=t,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,h.set("previous_websocket_failure",!0);try{if(Object(o.w)()){var r={headers:{"User-Agent":"Firebase/5/"+hn+"/"+process.platform+"/"+(this.nodeAdmin?"AdminNode":"Node"),"X-Firebase-GMPID":this.applicationId||""}},i=process.env,s=0===this.connURL.indexOf("wss://")?i.HTTPS_PROXY||i.https_proxy:i.HTTP_PROXY||i.http_proxy;s&&(r.proxy={origin:s}),this.mySock=new fn(this.connURL,[],r)}else this.mySock=new fn(this.connURL,[],r={headers:{"X-Firebase-GMPID":this.applicationId||""}})}catch(u){this.log_("Error instantiating WebSocket.");var a=u.message||u.data;return a&&this.log_(a),void this.onClosed_()}this.mySock.onopen=function(){n.log_("Websocket connected."),n.everConnected_=!0},this.mySock.onclose=function(){n.log_("Websocket connection was disconnected."),n.mySock=null,n.onClosed_()},this.mySock.onmessage=function(t){n.handleIncomingFrame(t)},this.mySock.onerror=function(t){n.log_("WebSocket error.  Closing connection.");var e=t.message||t.data;e&&n.log_(e),n.onClosed_()}},t.prototype.start=function(){},t.forceDisallow=function(){t.forceDisallow_=!0},t.isAvailable=function(){var e=!1;if("undefined"!=typeof navigator&&navigator.userAgent){var n=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);n&&n.length>1&&parseFloat(n[1])<4.4&&(e=!0)}return!e&&null!==fn&&!t.forceDisallow_},t.previouslyFailed=function(){return h.isInMemoryStorage||!0===h.get("previous_websocket_failure")},t.prototype.markConnectionHealthy=function(){h.remove("previous_websocket_failure")},t.prototype.appendFrame_=function(t){if(this.frames.push(t),this.frames.length===this.totalFrames){var e=this.frames.join("");this.frames=null;var n=Object(o.A)(e);this.onMessage(n)}},t.prototype.handleNewFrameCount_=function(t){this.totalFrames=t,this.frames=[]},t.prototype.extractFrameCount_=function(t){if(Object(o.e)(null===this.frames,"We already have a frame buffer"),t.length<=6){var e=Number(t);if(!isNaN(e))return this.handleNewFrameCount_(e),null}return this.handleNewFrameCount_(1),t},t.prototype.handleIncomingFrame=function(t){if(null!==this.mySock){var e=t.data;if(this.bytesReceived+=e.length,this.stats_.incrementCounter("bytes_received",e.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(e);else{var n=this.extractFrameCount_(e);null!==n&&this.appendFrame_(n)}}},t.prototype.send=function(t){this.resetKeepAlive();var e=Object(o.G)(t);this.bytesSent+=e.length,this.stats_.incrementCounter("bytes_sent",e.length);var n=k(e,16384);n.length>1&&this.sendString_(String(n.length));for(var r=0;r<n.length;r++)this.sendString_(n[r])},t.prototype.shutdown_=function(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)},t.prototype.onClosed_=function(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))},t.prototype.close=function(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())},t.prototype.resetKeepAlive=function(){var t=this;clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(function(){t.mySock&&t.sendString_("0"),t.resetKeepAlive()},Math.floor(45e3))},t.prototype.sendString_=function(t){try{this.mySock.send(t)}catch(e){this.log_("Exception thrown from WebSocket.send():",e.message||e.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}},t.responsesRequiredToBeHealthy=2,t.healthyTimeout=3e4,t}(),gn=function(){function t(t){this.initTransports_(t)}return Object.defineProperty(t,"ALL_TRANSPORTS",{get:function(){return[cn,pn]},enumerable:!1,configurable:!0}),t.prototype.initTransports_=function(e){var n,r,o=pn&&pn.isAvailable(),s=o&&!pn.previouslyFailed();if(e.webSocketOnly&&(o||E("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),s=!0),s)this.transports_=[pn];else{var a=this.transports_=[];try{for(var u=Object(i.h)(t.ALL_TRANSPORTS),c=u.next();!c.done;c=u.next()){var l=c.value;l&&l.isAvailable()&&a.push(l)}}catch(h){n={error:h}}finally{try{c&&!c.done&&(r=u.return)&&r.call(u)}finally{if(n)throw n.error}}}},t.prototype.initialTransport=function(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")},t.prototype.upgradeTransport=function(){return this.transports_.length>1?this.transports_[1]:null},t}(),mn=function(){function t(t,e,n,r,i,o,s,a){this.id=t,this.repoInfo_=e,this.applicationId_=n,this.onMessage_=r,this.onReady_=i,this.onDisconnect_=o,this.onKill_=s,this.lastSessionId=a,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=w("c:"+this.id+":"),this.transportManager_=new gn(e),this.log_("Connection created"),this.start_()}return t.prototype.start_=function(){var t=this,e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,void 0,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;var n=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(function(){t.conn_&&t.conn_.open(n,r)},Math.floor(0));var i=e.healthyTimeout||0;i>0&&(this.healthyTimeout_=W(function(){t.healthyTimeout_=null,t.isHealthy_||(t.conn_&&t.conn_.bytesReceived>102400?(t.log_("Connection exceeded healthy timeout but has received "+t.conn_.bytesReceived+" bytes.  Marking connection healthy."),t.isHealthy_=!0,t.conn_.markConnectionHealthy()):t.conn_&&t.conn_.bytesSent>10240?t.log_("Connection exceeded healthy timeout but has sent "+t.conn_.bytesSent+" bytes.  Leaving connection alive."):(t.log_("Closing unhealthy connection after timeout."),t.close()))},Math.floor(i)))},t.prototype.nextTransportId_=function(){return"c:"+this.id+":"+this.connectionCount++},t.prototype.disconnReceiver_=function(t){var e=this;return function(n){t===e.conn_?e.onConnectionLost_(n):t===e.secondaryConn_?(e.log_("Secondary connection lost."),e.onSecondaryConnectionLost_()):e.log_("closing an old connection")}},t.prototype.connReceiver_=function(t){var e=this;return function(n){2!==e.state_&&(t===e.rx_?e.onPrimaryMessageReceived_(n):t===e.secondaryConn_?e.onSecondaryMessageReceived_(n):e.log_("message on old connection"))}},t.prototype.sendRequest=function(t){this.sendData_({t:"d",d:t})},t.prototype.tryCleanupConnection=function(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)},t.prototype.onSecondaryControl_=function(t){if("t"in t){var e=t.t;"a"===e?this.upgradeIfSecondaryHealthy_():"r"===e?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),this.tx_!==this.secondaryConn_&&this.rx_!==this.secondaryConn_||this.close()):"o"===e&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}},t.prototype.onSecondaryMessageReceived_=function(t){var e=R("t",t),n=R("d",t);if("c"===e)this.onSecondaryControl_(n);else{if("d"!==e)throw new Error("Unknown protocol layer: "+e);this.pendingDataMessages.push(n)}},t.prototype.upgradeIfSecondaryHealthy_=function(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))},t.prototype.proceedWithUpgrade_=function(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()},t.prototype.onPrimaryMessageReceived_=function(t){var e=R("t",t),n=R("d",t);"c"===e?this.onControl_(n):"d"===e&&this.onDataMessage_(n)},t.prototype.onDataMessage_=function(t){this.onPrimaryResponse_(),this.onMessage_(t)},t.prototype.onPrimaryResponse_=function(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))},t.prototype.onControl_=function(t){var e=R("t",t);if("d"in t){var n=t.d;if("h"===e)this.onHandshake_(n);else if("n"===e){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(var r=0;r<this.pendingDataMessages.length;++r)this.onDataMessage_(this.pendingDataMessages[r]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===e?this.onConnectionShutdown_(n):"r"===e?this.onReset_(n):"e"===e?C("Server Error: "+n):"o"===e?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):C("Unknown control packet command: "+e)}},t.prototype.onHandshake_=function(t){var e=t.ts,n=t.v,r=t.h;this.sessionId=t.s,this.repoInfo_.updateHost(r),0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,e),"5"!==n&&E("Protocol version mismatch detected"),this.tryStartUpgrade_())},t.prototype.tryStartUpgrade_=function(){var t=this.transportManager_.upgradeTransport();t&&this.startUpgrade_(t)},t.prototype.startUpgrade_=function(t){var e=this;this.secondaryConn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.sessionId),this.secondaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;var n=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,r),W(function(){e.secondaryConn_&&(e.log_("Timed out trying to upgrade."),e.secondaryConn_.close())},Math.floor(6e4))},t.prototype.onReset_=function(t){this.log_("Reset packet received.  New host: "+t),this.repoInfo_.updateHost(t),1===this.state_?this.close():(this.closeConnections_(),this.start_())},t.prototype.onConnectionEstablished_=function(t,e){var n=this;this.log_("Realtime connection established."),this.conn_=t,this.state_=1,this.onReady_&&(this.onReady_(e,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):W(function(){n.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))},t.prototype.sendPingOnPrimaryIfNecessary_=function(){this.isHealthy_||1!==this.state_||(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))},t.prototype.onSecondaryConnectionLost_=function(){var t=this.secondaryConn_;this.secondaryConn_=null,this.tx_!==t&&this.rx_!==t||this.close()},t.prototype.onConnectionLost_=function(t){this.conn_=null,t||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(h.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()},t.prototype.onConnectionShutdown_=function(t){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(t),this.onKill_=null),this.onDisconnect_=null,this.close()},t.prototype.sendData_=function(t){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(t)},t.prototype.close=function(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))},t.prototype.closeConnections_=function(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)},t}(),yn=function(){function t(){}return t.prototype.put=function(t,e,n,r){},t.prototype.merge=function(t,e,n,r){},t.prototype.refreshAuthToken=function(t){},t.prototype.onDisconnectPut=function(t,e,n){},t.prototype.onDisconnectMerge=function(t,e,n){},t.prototype.onDisconnectCancel=function(t,e){},t.prototype.reportStats=function(t){},t}(),bn=1e3,vn=function(t){function e(n,r,i,s,a,u,c){var l=t.call(this)||this;if(l.repoInfo_=n,l.applicationId_=r,l.onDataUpdate_=i,l.onConnectStatus_=s,l.onServerInfoUpdate_=a,l.authTokenProvider_=u,l.authOverride_=c,l.id=e.nextPersistentConnectionId_++,l.log_=w("p:"+l.id+":"),l.interruptReasons_={},l.listens=new Map,l.outstandingPuts_=[],l.outstandingGets_=[],l.outstandingPutCount_=0,l.outstandingGetCount_=0,l.onDisconnectRequestQueue_=[],l.connected_=!1,l.reconnectDelay_=bn,l.maxReconnectDelay_=3e5,l.securityDebugCallback_=null,l.lastSessionId=null,l.establishConnectionTimer_=null,l.visible_=!1,l.requestCBHash_={},l.requestNumber_=0,l.realtime_=null,l.authToken_=null,l.forceTokenRefresh_=!1,l.invalidAuthTokenCount_=0,l.firstConnection_=!0,l.lastConnectionAttemptTime_=null,l.lastConnectionEstablishedTime_=null,c&&!Object(o.w)())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");return l.scheduleConnect_(0),rn.getInstance().on("visible",l.onVisible_,l),-1===n.host.indexOf("fblocal")&&on.getInstance().on("online",l.onOnline_,l),l}return Object(i.c)(e,t),e.prototype.sendRequest=function(t,e,n){var r=++this.requestNumber_,i={r:r,a:t,b:e};this.log_(Object(o.G)(i)),Object(o.e)(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(i),n&&(this.requestCBHash_[r]=n)},e.prototype.get=function(t){var e=this,n=new o.a,r={p:t.path.toString(),q:t.queryObject()},i={action:"g",request:r,onComplete:function(t){var i=t.d;"ok"===t.s?(e.onDataUpdate_(r.p,i,!1,null),n.resolve(i)):n.reject(i)}};this.outstandingGets_.push(i),this.outstandingGetCount_++;var s=this.outstandingGets_.length-1;return this.connected_||setTimeout(function(){var t=e.outstandingGets_[s];void 0!==t&&i===t&&(delete e.outstandingGets_[s],e.outstandingGetCount_--,0===e.outstandingGetCount_&&(e.outstandingGets_=[]),e.log_("get "+s+" timed out on connection"),n.reject(new Error("Client is offline.")))},3e3),this.connected_&&this.sendGet_(s),n.promise},e.prototype.listen=function(t,e,n,r){var i=t.queryIdentifier(),s=t.path.toString();this.log_("Listen called for "+s+" "+i),this.listens.has(s)||this.listens.set(s,new Map),Object(o.e)(t.getQueryParams().isDefault()||!t.getQueryParams().loadsAllData(),"listen() called for non-default but complete query"),Object(o.e)(!this.listens.get(s).has(i),"listen() called twice for same path/queryId.");var a={onComplete:r,hashFn:e,query:t,tag:n};this.listens.get(s).set(i,a),this.connected_&&this.sendListen_(a)},e.prototype.sendGet_=function(t){var e=this,n=this.outstandingGets_[t];this.sendRequest("g",n.request,function(r){delete e.outstandingGets_[t],e.outstandingGetCount_--,0===e.outstandingGetCount_&&(e.outstandingGets_=[]),n.onComplete&&n.onComplete(r)})},e.prototype.sendListen_=function(t){var n=this,r=t.query,i=r.path.toString(),o=r.queryIdentifier();this.log_("Listen on "+i+" for "+o);var s={p:i};t.tag&&(s.q=r.queryObject(),s.t=t.tag),s.h=t.hashFn(),this.sendRequest("q",s,function(s){var a=s.d,u=s.s;e.warnOnListenWarnings_(a,r),(n.listens.get(i)&&n.listens.get(i).get(o))===t&&(n.log_("listen response",s),"ok"!==u&&n.removeListen_(i,o),t.onComplete&&t.onComplete(u,a))})},e.warnOnListenWarnings_=function(t,e){if(t&&"object"==typeof t&&Object(o.i)(t,"w")){var n=Object(o.D)(t,"w");if(Array.isArray(n)&&~n.indexOf("no_index")){var r='".indexOn": "'+e.getQueryParams().getIndex().toString()+'"',i=e.path.toString();E("Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding "+r+" at "+i+" to your security rules for better performance.")}}},e.prototype.refreshAuthToken=function(t){this.authToken_=t,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},function(){}),this.reduceReconnectDelayIfAdminCredential_(t)},e.prototype.reduceReconnectDelayIfAdminCredential_=function(t){(t&&40===t.length||Object(o.o)(t))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)},e.prototype.tryAuth=function(){var t=this;if(this.connected_&&this.authToken_){var e=this.authToken_,n=Object(o.z)(e)?"auth":"gauth",r={cred:e};null===this.authOverride_?r.noauth=!0:"object"==typeof this.authOverride_&&(r.authvar=this.authOverride_),this.sendRequest(n,r,function(n){var r=n.s,i=n.d||"error";t.authToken_===e&&("ok"===r?t.invalidAuthTokenCount_=0:t.onAuthRevoked_(r,i))})}},e.prototype.unlisten=function(t,e){var n=t.path.toString(),r=t.queryIdentifier();this.log_("Unlisten called for "+n+" "+r),Object(o.e)(t.getQueryParams().isDefault()||!t.getQueryParams().loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(n,r)&&this.connected_&&this.sendUnlisten_(n,r,t.queryObject(),e)},e.prototype.sendUnlisten_=function(t,e,n,r){this.log_("Unlisten on "+t+" for "+e);var i={p:t};r&&(i.q=n,i.t=r),this.sendRequest("n",i)},e.prototype.onDisconnectPut=function(t,e,n){this.connected_?this.sendOnDisconnect_("o",t,e,n):this.onDisconnectRequestQueue_.push({pathString:t,action:"o",data:e,onComplete:n})},e.prototype.onDisconnectMerge=function(t,e,n){this.connected_?this.sendOnDisconnect_("om",t,e,n):this.onDisconnectRequestQueue_.push({pathString:t,action:"om",data:e,onComplete:n})},e.prototype.onDisconnectCancel=function(t,e){this.connected_?this.sendOnDisconnect_("oc",t,null,e):this.onDisconnectRequestQueue_.push({pathString:t,action:"oc",data:null,onComplete:e})},e.prototype.sendOnDisconnect_=function(t,e,n,r){var i={p:e,d:n};this.log_("onDisconnect "+t,i),this.sendRequest(t,i,function(t){r&&setTimeout(function(){r(t.s,t.d)},Math.floor(0))})},e.prototype.put=function(t,e,n,r){this.putInternal("p",t,e,n,r)},e.prototype.merge=function(t,e,n,r){this.putInternal("m",t,e,n,r)},e.prototype.putInternal=function(t,e,n,r,i){var o={p:e,d:n};void 0!==i&&(o.h=i),this.outstandingPuts_.push({action:t,request:o,onComplete:r}),this.outstandingPutCount_++,this.connected_?this.sendPut_(this.outstandingPuts_.length-1):this.log_("Buffering put: "+e)},e.prototype.sendPut_=function(t){var e=this,n=this.outstandingPuts_[t].action,r=this.outstandingPuts_[t].request,i=this.outstandingPuts_[t].onComplete;this.outstandingPuts_[t].queued=this.connected_,this.sendRequest(n,r,function(r){e.log_(n+" response",r),delete e.outstandingPuts_[t],e.outstandingPutCount_--,0===e.outstandingPutCount_&&(e.outstandingPuts_=[]),i&&i(r.s,r.d)})},e.prototype.reportStats=function(t){var e=this;if(this.connected_){var n={c:t};this.log_("reportStats",n),this.sendRequest("s",n,function(t){"ok"!==t.s&&e.log_("reportStats","Error sending stats: "+t.d)})}},e.prototype.onDataMessage_=function(t){if("r"in t){this.log_("from server: "+Object(o.G)(t));var e=t.r,n=this.requestCBHash_[e];n&&(delete this.requestCBHash_[e],n(t.b))}else{if("error"in t)throw"A server-side error has occurred: "+t.error;"a"in t&&this.onDataPush_(t.a,t.b)}},e.prototype.onDataPush_=function(t,e){this.log_("handleServerMessage",t,e),"d"===t?this.onDataUpdate_(e.p,e.d,!1,e.t):"m"===t?this.onDataUpdate_(e.p,e.d,!0,e.t):"c"===t?this.onListenRevoked_(e.p,e.q):"ac"===t?this.onAuthRevoked_(e.s,e.d):"sd"===t?this.onSecurityDebugPacket_(e):C("Unrecognized action received from server: "+Object(o.G)(t)+"\nAre you using the latest client?")},e.prototype.onReady_=function(t,e){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(t),this.lastSessionId=e,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)},e.prototype.scheduleConnect_=function(t){var e=this;Object(o.e)(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(function(){e.establishConnectionTimer_=null,e.establishConnection_()},Math.floor(t))},e.prototype.onVisible_=function(t){t&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=bn,this.realtime_||this.scheduleConnect_(0)),this.visible_=t},e.prototype.onOnline_=function(t){t?(this.log_("Browser went online."),this.reconnectDelay_=bn,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())},e.prototype.onRealtimeDisconnect_=function(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=bn),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());var t=(new Date).getTime()-this.lastConnectionAttemptTime_,e=Math.max(0,this.reconnectDelay_-t);e=Math.random()*e,this.log_("Trying to reconnect in "+e+"ms"),this.scheduleConnect_(e),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)},e.prototype.establishConnection_=function(){var t=this;if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=(new Date).getTime(),this.lastConnectionEstablishedTime_=null;var n=this.onDataMessage_.bind(this),r=this.onReady_.bind(this),i=this.onRealtimeDisconnect_.bind(this),s=this.id+":"+e.nextConnectionId_++,a=this,u=this.lastSessionId,c=!1,l=null,h=function(){l?l.close():(c=!0,i())};this.realtime_={close:h,sendRequest:function(t){Object(o.e)(l,"sendRequest call when we're not connected not allowed."),l.sendRequest(t)}};var d=this.forceTokenRefresh_;this.forceTokenRefresh_=!1,this.authTokenProvider_.getToken(d).then(function(t){c?_("getToken() completed but was canceled"):(_("getToken() completed. Creating connection."),a.authToken_=t&&t.accessToken,l=new mn(s,a.repoInfo_,a.applicationId_,n,r,i,function(t){E(t+" ("+a.repoInfo_.toString()+")"),a.interrupt("server_kill")},u))}).then(null,function(e){a.log_("Failed to get token: "+e),c||(t.repoInfo_.nodeAdmin&&E(e),h())})}},e.prototype.interrupt=function(t){_("Interrupting connection for reason: "+t),this.interruptReasons_[t]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())},e.prototype.resume=function(t){_("Resuming connection for reason: "+t),delete this.interruptReasons_[t],Object(o.s)(this.interruptReasons_)&&(this.reconnectDelay_=bn,this.realtime_||this.scheduleConnect_(0))},e.prototype.handleTimestamp_=function(t){var e=t-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:e})},e.prototype.cancelSentTransactions_=function(){for(var t=0;t<this.outstandingPuts_.length;t++){var e=this.outstandingPuts_[t];e&&"h"in e.request&&e.queued&&(e.onComplete&&e.onComplete("disconnect"),delete this.outstandingPuts_[t],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])},e.prototype.onListenRevoked_=function(t,e){var n;n=e?e.map(function(t){return A(t)}).join("$"):"default";var r=this.removeListen_(t,n);r&&r.onComplete&&r.onComplete("permission_denied")},e.prototype.removeListen_=function(t,e){var n,r=new Y(t).toString();if(this.listens.has(r)){var i=this.listens.get(r);n=i.get(e),i.delete(e),0===i.size&&this.listens.delete(r)}else n=void 0;return n},e.prototype.onAuthRevoked_=function(t,e){_("Auth token revoked: "+t+"/"+e),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),"invalid_token"!==t&&"permission_denied"!==t||(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))},e.prototype.onSecurityDebugPacket_=function(t){this.securityDebugCallback_?this.securityDebugCallback_(t):"msg"in t&&console.log("FIREBASE: "+t.msg.replace("\n","\nFIREBASE: "))},e.prototype.restoreState_=function(){var t,e,n,r;this.tryAuth();try{for(var o=Object(i.h)(this.listens.values()),s=o.next();!s.done;s=o.next()){var a=s.value;try{for(var u=(n=void 0,Object(i.h)(a.values())),c=u.next();!c.done;c=u.next())this.sendListen_(c.value)}catch(d){n={error:d}}finally{try{c&&!c.done&&(r=u.return)&&r.call(u)}finally{if(n)throw n.error}}}}catch(f){t={error:f}}finally{try{s&&!s.done&&(e=o.return)&&e.call(o)}finally{if(t)throw t.error}}for(var l=0;l<this.outstandingPuts_.length;l++)this.outstandingPuts_[l]&&this.sendPut_(l);for(;this.onDisconnectRequestQueue_.length;){var h=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(h.action,h.pathString,h.data,h.onComplete)}for(l=0;l<this.outstandingGets_.length;l++)this.outstandingGets_[l]&&this.sendGet_(l)},e.prototype.sendConnectStats_=function(){var t={},e="js";Object(o.w)()&&(e=this.repoInfo_.nodeAdmin?"admin_node":"node"),t["sdk."+e+"."+hn.replace(/\./g,"-")]=1,Object(o.u)()?t["framework.cordova"]=1:Object(o.x)()&&(t["framework.reactnative"]=1),this.reportStats(t)},e.prototype.shouldReconnect_=function(){var t=on.getInstance().currentlyOnline();return Object(o.s)(this.interruptReasons_)&&t},e.nextPersistentConnectionId_=0,e.nextConnectionId_=0,e}(yn),_n=function(t){function e(e,n,r){var i=t.call(this)||this;return i.repoInfo_=e,i.onDataUpdate_=n,i.authTokenProvider_=r,i.log_=w("p:rest:"),i.listens_={},i}return Object(i.c)(e,t),e.prototype.reportStats=function(t){throw new Error("Method not implemented.")},e.getListenId_=function(t,e){return void 0!==e?"tag$"+e:(Object(o.e)(t.getQueryParams().isDefault(),"should have a tag if it's not a default query."),t.path.toString())},e.prototype.listen=function(t,n,r,i){var s=this,a=t.path.toString();this.log_("Listen called for "+a+" "+t.queryIdentifier());var u=e.getListenId_(t,r),c={};this.listens_[u]=c;var l=t.getQueryParams().toRestQueryStringParameters();this.restRequest_(a+".json",l,function(t,e){var n=e;404===t&&(n=null,t=null),null===t&&s.onDataUpdate_(a,n,!1,r),Object(o.D)(s.listens_,u)===c&&i(t?401===t?"permission_denied":"rest_error:"+t:"ok",null)})},e.prototype.unlisten=function(t,n){var r=e.getListenId_(t,n);delete this.listens_[r]},e.prototype.get=function(t){var e=this,n=t.getQueryParams().toRestQueryStringParameters(),r=t.path.toString(),i=new o.a;return this.restRequest_(r+".json",n,function(t,n){var o=n;404===t&&(o=null,t=null),null===t?(e.onDataUpdate_(r,o,!1,null),i.resolve(o)):i.reject(new Error(o))}),i.promise},e.prototype.refreshAuthToken=function(t){},e.prototype.restRequest_=function(t,e,n){var r=this;void 0===e&&(e={}),e.format="export",this.authTokenProvider_.getToken(!1).then(function(i){var s=i&&i.accessToken;s&&(e.auth=s);var a=(r.repoInfo_.secure?"https://":"http://")+r.repoInfo_.host+t+"?ns="+r.repoInfo_.namespace+Object(o.C)(e);r.log_("Sending REST request for "+a);var u=new XMLHttpRequest;u.onreadystatechange=function(){if(n&&4===u.readyState){r.log_("REST Response for "+a+" received. status:",u.status,"response:",u.responseText);var t=null;if(u.status>=200&&u.status<300){try{t=Object(o.A)(u.responseText)}catch(e){E("Failed to parse JSON response for "+a+": "+u.responseText)}n(null,t)}else 401!==u.status&&404!==u.status&&E("Got unsuccessful REST response for "+a+" Status: "+u.status),n(u.status);n=null}},u.open("GET",a,!0),u.send()})},e}(yn),wn=function(){return function(){this.children={},this.childCount=0,this.value=null}}(),Cn=function(){function t(t,e,n){void 0===t&&(t=""),void 0===e&&(e=null),void 0===n&&(n=new wn),this.name_=t,this.parent_=e,this.node_=n}return t.prototype.subTree=function(e){for(var n=e instanceof Y?e:new Y(e),r=this,i=n.getFront();null!==i;)r=new t(i,r,Object(o.D)(r.node_.children,i)||new wn),i=(n=n.popFront()).getFront();return r},t.prototype.getValue=function(){return this.node_.value},t.prototype.setValue=function(t){Object(o.e)(void 0!==t,"Cannot set value to undefined"),this.node_.value=t,this.updateParents_()},t.prototype.clear=function(){this.node_.value=null,this.node_.children={},this.node_.childCount=0,this.updateParents_()},t.prototype.hasChildren=function(){return this.node_.childCount>0},t.prototype.isEmpty=function(){return null===this.getValue()&&!this.hasChildren()},t.prototype.forEachChild=function(e){var n=this;j(this.node_.children,function(r,i){e(new t(r,n,i))})},t.prototype.forEachDescendant=function(t,e,n){e&&!n&&t(this),this.forEachChild(function(e){e.forEachDescendant(t,!0,n)}),e&&n&&t(this)},t.prototype.forEachAncestor=function(t,e){for(var n=e?this:this.parent();null!==n;){if(t(n))return!0;n=n.parent()}return!1},t.prototype.forEachImmediateDescendantWithValue=function(t){this.forEachChild(function(e){null!==e.getValue()?t(e):e.forEachImmediateDescendantWithValue(t)})},t.prototype.path=function(){return new Y(null===this.parent_?this.name_:this.parent_.path()+"/"+this.name_)},t.prototype.name=function(){return this.name_},t.prototype.parent=function(){return this.parent_},t.prototype.updateParents_=function(){null!==this.parent_&&this.parent_.updateChild_(this.name_,this)},t.prototype.updateChild_=function(t,e){var n=e.isEmpty(),r=Object(o.i)(this.node_.children,t);n&&r?(delete this.node_.children[t],this.node_.childCount--,this.updateParents_()):n||r||(this.node_.children[t]=e.node_,this.node_.childCount++,this.updateParents_())},t}(),On="repo_interrupt",En=function(t){return t[t.RUN=0]="RUN",t[t.SENT=1]="SENT",t[t.COMPLETED=2]="COMPLETED",t[t.SENT_NEEDS_ABORT=3]="SENT_NEEDS_ABORT",t[t.NEEDS_ABORT=4]="NEEDS_ABORT",t}({}),xn=function(){function t(t,e,n,r){this.repoInfo_=t,this.forceRestClient_=e,this.app=n,this.authTokenProvider_=r,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new tn,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=new he,this.transactionQueueTree_=new Cn,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}return t.prototype.start=function(){var t=this;if(this.stats_=Xe.getCollection(this.repoInfo_),this.forceRestClient_||("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)this.server_=new _n(this.repoInfo_,this.onDataUpdate_.bind(this),this.authTokenProvider_),setTimeout(this.onConnectStatus_.bind(this,!0),0);else{var e=this.app.options.databaseAuthVariableOverride;if(null!=e){if("object"!=typeof e)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{Object(o.G)(e)}catch(n){throw new Error("Invalid authOverride provided: "+n)}}this.persistentConnection_=new vn(this.repoInfo_,this.app.options.appId,this.onDataUpdate_.bind(this),this.onConnectStatus_.bind(this),this.onServerInfoUpdate_.bind(this),this.authTokenProvider_,e),this.server_=this.persistentConnection_}this.authTokenProvider_.addTokenChangeListener(function(e){t.server_.refreshAuthToken(e)}),this.statsReporter_=Xe.getOrCreateReporter(this.repoInfo_,function(){return new Je(t.stats_,t.server_)}),this.infoData_=new $e,this.infoSyncTree_=new Ye({startListening:function(e,n,r,i){var o=[],s=t.infoData_.getNode(e.path);return s.isEmpty()||(o=t.infoSyncTree_.applyServerOverwrite(e.path,s),setTimeout(function(){i("ok")},0)),o},stopListening:function(){}}),this.updateInfo_("connected",!1),this.serverSyncTree_=new Ye({startListening:function(e,n,r,i){return t.server_.listen(e,r,n,function(n,r){var o=i(n,r);t.eventQueue_.raiseEventsForChangedPath(e.path,o)}),[]},stopListening:function(e,n){t.server_.unlisten(e,n)}})},t.prototype.toString=function(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host},t.prototype.name=function(){return this.repoInfo_.namespace},t.prototype.serverTime=function(){var t=this.infoData_.getNode(new Y(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+t},t.prototype.generateServerValues=function(){return(t=(t={timestamp:this.serverTime()})||{}).timestamp=t.timestamp||(new Date).getTime(),t;var t},t.prototype.onDataUpdate_=function(t,e,n,r){this.dataUpdateCount++;var i=new Y(t);e=this.interceptServerDataCallback_?this.interceptServerDataCallback_(t,e):e;var s=[];if(r)if(n){var a=Object(o.B)(e,function(t){return Gt(t)});s=this.serverSyncTree_.applyTaggedQueryMerge(i,a,r)}else{var u=Gt(e);s=this.serverSyncTree_.applyTaggedQueryOverwrite(i,u,r)}else if(n){var c=Object(o.B)(e,function(t){return Gt(t)});s=this.serverSyncTree_.applyServerMerge(i,c)}else{var l=Gt(e);s=this.serverSyncTree_.applyServerOverwrite(i,l)}var h=i;s.length>0&&(h=this.rerunTransactions_(i)),this.eventQueue_.raiseEventsForChangedPath(h,s)},t.prototype.interceptServerData_=function(t){this.interceptServerDataCallback_=t},t.prototype.onConnectStatus_=function(t){this.updateInfo_("connected",t),!1===t&&this.runOnDisconnectEvents_()},t.prototype.onServerInfoUpdate_=function(t){var e=this;j(t,function(t,n){e.updateInfo_(t,n)})},t.prototype.updateInfo_=function(t,e){var n=new Y("/.info/"+t),r=Gt(e);this.infoData_.updateSnapshot(n,r);var i=this.infoSyncTree_.applyServerOverwrite(n,r);this.eventQueue_.raiseEventsForChangedPath(n,i)},t.prototype.getNextWriteId_=function(){return this.nextWriteId_++},t.prototype.getValue=function(t){var e=this,n=this.serverSyncTree_.getServerValue(t);return null!=n?Promise.resolve(new Kt(n,t.getRef(),t.getQueryParams().getIndex())):this.server_.get(t).then(function(n){var r=Gt(n),i=e.serverSyncTree_.applyServerOverwrite(t.path,r);return e.eventQueue_.raiseEventsAtPath(t.path,i),Promise.resolve(new Kt(r,t.getRef(),t.getQueryParams().getIndex()))},function(n){return e.log_("get for query "+Object(o.G)(t)+" failed: "+n),Promise.reject(new Error(n))})},t.prototype.setWithPriority=function(t,e,n,r){var i=this;this.log_("set",{path:t.toString(),value:e,priority:n});var o=this.generateServerValues(),s=Gt(e,n),a=this.serverSyncTree_.calcCompleteEventCache(t),u=ue(s,a,o),c=this.getNextWriteId_(),l=this.serverSyncTree_.applyUserOverwrite(t,u,c,!0);this.eventQueue_.queueEvents(l),this.server_.put(t.toString(),s.val(!0),function(e,n){var o="ok"===e;o||E("set at "+t+" failed: "+e);var s=i.serverSyncTree_.ackUserWrite(c,!o);i.eventQueue_.raiseEventsForChangedPath(t,s),i.callOnCompleteCallback(r,e,n)});var h=this.abortTransactions_(t);this.rerunTransactions_(h),this.eventQueue_.raiseEventsForChangedPath(h,[])},t.prototype.update=function(t,e,n){var r=this;this.log_("update",{path:t.toString(),value:e});var i=!0,o=this.generateServerValues(),s={};if(j(e,function(e,n){i=!1,s[e]=ae(t.child(e),Gt(n),r.serverSyncTree_,o)}),i)_("update() called with empty data.  Don't do anything."),this.callOnCompleteCallback(n,"ok");else{var a=this.getNextWriteId_(),u=this.serverSyncTree_.applyUserMerge(t,s,a);this.eventQueue_.queueEvents(u),this.server_.merge(t.toString(),e,function(e,i){var o="ok"===e;o||E("update at "+t+" failed: "+e);var s=r.serverSyncTree_.ackUserWrite(a,!o),u=s.length>0?r.rerunTransactions_(t):t;r.eventQueue_.raiseEventsForChangedPath(u,s),r.callOnCompleteCallback(n,e,i)}),j(e,function(e){var n=r.abortTransactions_(t.child(e));r.rerunTransactions_(n)}),this.eventQueue_.raiseEventsForChangedPath(t,[])}},t.prototype.runOnDisconnectEvents_=function(){var t=this;this.log_("onDisconnectEvents");var e=this.generateServerValues(),n=new he;this.onDisconnect_.forEachTree(Y.Empty,function(r,i){var o=ae(r,i,t.serverSyncTree_,e);n.remember(r,o)});var r=[];n.forEachTree(Y.Empty,function(e,n){r=r.concat(t.serverSyncTree_.applyServerOverwrite(e,n));var i=t.abortTransactions_(e);t.rerunTransactions_(i)}),this.onDisconnect_=new he,this.eventQueue_.raiseEventsForChangedPath(Y.Empty,r)},t.prototype.onDisconnectCancel=function(t,e){var n=this;this.server_.onDisconnectCancel(t.toString(),function(r,i){"ok"===r&&n.onDisconnect_.forget(t),n.callOnCompleteCallback(e,r,i)})},t.prototype.onDisconnectSet=function(t,e,n){var r=this,i=Gt(e);this.server_.onDisconnectPut(t.toString(),i.val(!0),function(e,o){"ok"===e&&r.onDisconnect_.remember(t,i),r.callOnCompleteCallback(n,e,o)})},t.prototype.onDisconnectSetWithPriority=function(t,e,n,r){var i=this,o=Gt(e,n);this.server_.onDisconnectPut(t.toString(),o.val(!0),function(e,n){"ok"===e&&i.onDisconnect_.remember(t,o),i.callOnCompleteCallback(r,e,n)})},t.prototype.onDisconnectUpdate=function(t,e,n){var r=this;if(Object(o.s)(e))return _("onDisconnect().update() called with empty data.  Don't do anything."),void this.callOnCompleteCallback(n,"ok");this.server_.onDisconnectMerge(t.toString(),e,function(i,o){"ok"===i&&j(e,function(e,n){var i=Gt(n);r.onDisconnect_.remember(t.child(e),i)}),r.callOnCompleteCallback(n,i,o)})},t.prototype.addEventCallbackForQuery=function(t,e){var n;n=".info"===t.path.getFront()?this.infoSyncTree_.addEventRegistration(t,e):this.serverSyncTree_.addEventRegistration(t,e),this.eventQueue_.raiseEventsAtPath(t.path,n)},t.prototype.removeEventCallbackForQuery=function(t,e){var n;n=".info"===t.path.getFront()?this.infoSyncTree_.removeEventRegistration(t,e):this.serverSyncTree_.removeEventRegistration(t,e),this.eventQueue_.raiseEventsAtPath(t.path,n)},t.prototype.interrupt=function(){this.persistentConnection_&&this.persistentConnection_.interrupt(On)},t.prototype.resume=function(){this.persistentConnection_&&this.persistentConnection_.resume(On)},t.prototype.stats=function(t){if(void 0===t&&(t=!1),"undefined"!=typeof console){var e;t?(this.statsListener_||(this.statsListener_=new Ze(this.stats_)),e=this.statsListener_.get()):e=this.stats_.get();var n=Object.keys(e).reduce(function(t,e){return Math.max(e.length,t)},0);j(e,function(t,e){for(var r=t,i=t.length;i<n+2;i++)r+=" ";console.log(r+e)})}},t.prototype.statsIncrementCounter=function(t){this.stats_.incrementCounter(t),this.statsReporter_.includeStat(t)},t.prototype.log_=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="";this.persistentConnection_&&(n=this.persistentConnection_.id+":"),_.apply(void 0,Object(i.f)([n],t))},t.prototype.callOnCompleteCallback=function(t,e,n){t&&G(function(){if("ok"===e)t(null);else{var r=(e||"error").toUpperCase(),i=r;n&&(i+=": "+n);var o=new Error(i);o.code=r,t(o)}})},Object.defineProperty(t.prototype,"database",{get:function(){return this.__database||(this.__database=new Nn(this))},enumerable:!1,configurable:!0}),t.prototype.startTransaction=function(t,e,n,r){this.log_("transaction on "+t);var i=function(){},s=new Pn(this,t);s.on("value",i);var a={path:t,update:e,onComplete:n,status:null,order:p(),applyLocally:r,retryCount:0,unwatcher:function(){s.off("value",i)},abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},u=this.getLatestState_(t);a.currentInputSnapshot=u;var c=a.update(u.val());if(void 0===c){if(a.unwatcher(),a.currentOutputSnapshotRaw=null,a.currentOutputSnapshotResolved=null,a.onComplete){var l=new Kt(a.currentInputSnapshot,new Pn(this,a.path),kt);a.onComplete(null,!1,l)}}else{ct("transaction failed: Data returned ",c,a.path),a.status=En.RUN;var h=this.transactionQueueTree_.subTree(t),d=h.getValue()||[];d.push(a),h.setValue(d);var f=void 0;"object"==typeof c&&null!==c&&Object(o.i)(c,".priority")?(f=Object(o.D)(c,".priority"),Object(o.e)(at(f),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):f=(this.serverSyncTree_.calcCompleteEventCache(t)||Bt.EMPTY_NODE).getPriority().val();var g=this.generateServerValues(),m=Gt(c,f),y=ue(m,u,g);a.currentOutputSnapshotRaw=m,a.currentOutputSnapshotResolved=y,a.currentWriteId=this.getNextWriteId_();var b=this.serverSyncTree_.applyUserOverwrite(t,y,a.currentWriteId,a.applyLocally);this.eventQueue_.raiseEventsForChangedPath(t,b),this.sendReadyTransactions_()}},t.prototype.getLatestState_=function(t,e){return this.serverSyncTree_.calcCompleteEventCache(t,e)||Bt.EMPTY_NODE},t.prototype.sendReadyTransactions_=function(t){var e=this;if(void 0===t&&(t=this.transactionQueueTree_),t||this.pruneCompletedTransactionsBelowNode_(t),null!==t.getValue()){var n=this.buildTransactionQueue_(t);Object(o.e)(n.length>0,"Sending zero length transaction queue"),n.every(function(t){return t.status===En.RUN})&&this.sendTransactionQueue_(t.path(),n)}else t.hasChildren()&&t.forEachChild(function(t){e.sendReadyTransactions_(t)})},t.prototype.sendTransactionQueue_=function(t,e){for(var n=this,r=e.map(function(t){return t.currentWriteId}),i=this.getLatestState_(t,r),s=i,a=i.hash(),u=0;u<e.length;u++){var c=e[u];Object(o.e)(c.status===En.RUN,"tryToSendTransactionQueue_: items in queue should all be run."),c.status=En.SENT,c.retryCount++;var l=Y.relativePath(t,c.path);s=s.updateChild(l,c.currentOutputSnapshotRaw)}var h=s.val(!0),d=t;this.server_.put(d.toString(),h,function(r){n.log_("transaction put response",{path:d.toString(),status:r});var i=[];if("ok"===r){for(var o=[],s=0;s<e.length;s++){if(e[s].status=En.COMPLETED,i=i.concat(n.serverSyncTree_.ackUserWrite(e[s].currentWriteId)),e[s].onComplete){var a=e[s].currentOutputSnapshotResolved,u=new Pn(n,e[s].path),c=new Kt(a,u,kt);o.push(e[s].onComplete.bind(null,null,!0,c))}e[s].unwatcher()}for(n.pruneCompletedTransactionsBelowNode_(n.transactionQueueTree_.subTree(t)),n.sendReadyTransactions_(),n.eventQueue_.raiseEventsForChangedPath(t,i),s=0;s<o.length;s++)G(o[s])}else{if("datastale"===r)for(s=0;s<e.length;s++)e[s].status=e[s].status===En.SENT_NEEDS_ABORT?En.NEEDS_ABORT:En.RUN;else for(E("transaction at "+d.toString()+" failed: "+r),s=0;s<e.length;s++)e[s].status=En.NEEDS_ABORT,e[s].abortReason=r;n.rerunTransactions_(t)}},a)},t.prototype.rerunTransactions_=function(t){var e=this.getAncestorTransactionNode_(t),n=e.path(),r=this.buildTransactionQueue_(e);return this.rerunTransactionQueue_(r,n),n},t.prototype.rerunTransactionQueue_=function(t,e){if(0!==t.length){for(var n=[],r=[],i=t.filter(function(t){return t.status===En.RUN}).map(function(t){return t.currentWriteId}),s=0;s<t.length;s++){var a=t[s],u=Y.relativePath(e,a.path),c=!1,l=void 0;if(Object(o.e)(null!==u,"rerunTransactionsUnderNode_: relativePath should not be null."),a.status===En.NEEDS_ABORT)c=!0,l=a.abortReason,r=r.concat(this.serverSyncTree_.ackUserWrite(a.currentWriteId,!0));else if(a.status===En.RUN)if(a.retryCount>=25)c=!0,l="maxretry",r=r.concat(this.serverSyncTree_.ackUserWrite(a.currentWriteId,!0));else{var h=this.getLatestState_(a.path,i);a.currentInputSnapshot=h;var d=t[s].update(h.val());if(void 0!==d){ct("transaction failed: Data returned ",d,a.path);var f=Gt(d);"object"==typeof d&&null!=d&&Object(o.i)(d,".priority")||(f=f.updatePriority(h.getPriority()));var p=a.currentWriteId,g=this.generateServerValues(),m=ue(f,h,g);a.currentOutputSnapshotRaw=f,a.currentOutputSnapshotResolved=m,a.currentWriteId=this.getNextWriteId_(),i.splice(i.indexOf(p),1),r=(r=r.concat(this.serverSyncTree_.applyUserOverwrite(a.path,m,a.currentWriteId,a.applyLocally))).concat(this.serverSyncTree_.ackUserWrite(p,!0))}else c=!0,l="nodata",r=r.concat(this.serverSyncTree_.ackUserWrite(a.currentWriteId,!0))}if(this.eventQueue_.raiseEventsForChangedPath(e,r),r=[],c&&(t[s].status=En.COMPLETED,setTimeout(t[s].unwatcher,Math.floor(0)),t[s].onComplete))if("nodata"===l){var y=new Pn(this,t[s].path),b=new Kt(t[s].currentInputSnapshot,y,kt);n.push(t[s].onComplete.bind(null,null,!1,b))}else n.push(t[s].onComplete.bind(null,new Error(l),!1,null))}for(this.pruneCompletedTransactionsBelowNode_(this.transactionQueueTree_),s=0;s<n.length;s++)G(n[s]);this.sendReadyTransactions_()}},t.prototype.getAncestorTransactionNode_=function(t){var e,n=this.transactionQueueTree_;for(e=t.getFront();null!==e&&null===n.getValue();)n=n.subTree(e),e=(t=t.popFront()).getFront();return n},t.prototype.buildTransactionQueue_=function(t){var e=[];return this.aggregateTransactionQueuesForNode_(t,e),e.sort(function(t,e){return t.order-e.order}),e},t.prototype.aggregateTransactionQueuesForNode_=function(t,e){var n=this,r=t.getValue();if(null!==r)for(var i=0;i<r.length;i++)e.push(r[i]);t.forEachChild(function(t){n.aggregateTransactionQueuesForNode_(t,e)})},t.prototype.pruneCompletedTransactionsBelowNode_=function(t){var e=this,n=t.getValue();if(n){for(var r=0,i=0;i<n.length;i++)n[i].status!==En.COMPLETED&&(n[r]=n[i],r++);n.length=r,t.setValue(n.length>0?n:null)}t.forEachChild(function(t){e.pruneCompletedTransactionsBelowNode_(t)})},t.prototype.abortTransactions_=function(t){var e=this,n=this.getAncestorTransactionNode_(t).path(),r=this.transactionQueueTree_.subTree(t);return r.forEachAncestor(function(t){e.abortTransactionsOnNode_(t)}),this.abortTransactionsOnNode_(r),r.forEachDescendant(function(t){e.abortTransactionsOnNode_(t)}),n},t.prototype.abortTransactionsOnNode_=function(t){var e=t.getValue();if(null!==e){for(var n=[],r=[],i=-1,s=0;s<e.length;s++)e[s].status===En.SENT_NEEDS_ABORT||(e[s].status===En.SENT?(Object(o.e)(i===s-1,"All SENT items should be at beginning of queue."),i=s,e[s].status=En.SENT_NEEDS_ABORT,e[s].abortReason="set"):(Object(o.e)(e[s].status===En.RUN,"Unexpected transaction status in abort"),e[s].unwatcher(),r=r.concat(this.serverSyncTree_.ackUserWrite(e[s].currentWriteId,!0)),e[s].onComplete&&n.push(e[s].onComplete.bind(null,new Error("set"),!1,null))));for(-1===i?t.setValue(null):e.length=i+1,this.eventQueue_.raiseEventsForChangedPath(t.path(),r),s=0;s<n.length;s++)G(n[s])}},t}(),In=function(){function t(e){this.indexedFilter_=new Ie(e.getIndex()),this.index_=e.getIndex(),this.startPost_=t.getStartPost_(e),this.endPost_=t.getEndPost_(e)}return t.prototype.getStartPost=function(){return this.startPost_},t.prototype.getEndPost=function(){return this.endPost_},t.prototype.matches=function(t){return this.index_.compare(this.getStartPost(),t)<=0&&this.index_.compare(t,this.getEndPost())<=0},t.prototype.updateChild=function(t,e,n,r,i,o){return this.matches(new xt(e,n))||(n=Bt.EMPTY_NODE),this.indexedFilter_.updateChild(t,e,n,r,i,o)},t.prototype.updateFullNode=function(t,e,n){e.isLeafNode()&&(e=Bt.EMPTY_NODE);var r=e.withIndex(this.index_);r=r.updatePriority(Bt.EMPTY_NODE);var i=this;return e.forEachChild(kt,function(t,e){i.matches(new xt(t,e))||(r=r.updateImmediateChild(t,Bt.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(t,r,n)},t.prototype.updatePriority=function(t,e){return t},t.prototype.filtersNodes=function(){return!0},t.prototype.getIndexedFilter=function(){return this.indexedFilter_},t.prototype.getIndex=function(){return this.index_},t.getStartPost_=function(t){if(t.hasStart()){var e=t.getIndexStartName();return t.getIndex().makePost(t.getIndexStartValue(),e)}return t.getIndex().minPost()},t.getEndPost_=function(t){if(t.hasEnd()){var e=t.getIndexEndName();return t.getIndex().makePost(t.getIndexEndValue(),e)}return t.getIndex().maxPost()},t}(),Sn=function(){function t(t){this.rangedFilter_=new In(t),this.index_=t.getIndex(),this.limit_=t.getLimit(),this.reverse_=!t.isViewFromLeft()}return t.prototype.updateChild=function(t,e,n,r,i,o){return this.rangedFilter_.matches(new xt(e,n))||(n=Bt.EMPTY_NODE),t.getImmediateChild(e).equals(n)?t:t.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(t,e,n,r,i,o):this.fullLimitUpdateChild_(t,e,n,i,o)},t.prototype.updateFullNode=function(t,e,n){var r;if(e.isLeafNode()||e.isEmpty())r=Bt.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<e.numChildren()&&e.isIndexed(this.index_)){r=Bt.EMPTY_NODE.withIndex(this.index_);var i=void 0;i=this.reverse_?e.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):e.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);for(var o=0;i.hasNext()&&o<this.limit_;){var s=i.getNext();if(!(this.reverse_?this.index_.compare(this.rangedFilter_.getStartPost(),s)<=0:this.index_.compare(s,this.rangedFilter_.getEndPost())<=0))break;r=r.updateImmediateChild(s.name,s.node),o++}}else{r=(r=e.withIndex(this.index_)).updatePriority(Bt.EMPTY_NODE);var a=void 0,u=void 0,c=void 0;if(i=void 0,this.reverse_){i=r.getReverseIterator(this.index_),a=this.rangedFilter_.getEndPost(),u=this.rangedFilter_.getStartPost();var l=this.index_.getCompare();c=function(t,e){return l(e,t)}}else i=r.getIterator(this.index_),a=this.rangedFilter_.getStartPost(),u=this.rangedFilter_.getEndPost(),c=this.index_.getCompare();o=0;for(var h=!1;i.hasNext();)s=i.getNext(),!h&&c(a,s)<=0&&(h=!0),h&&o<this.limit_&&c(s,u)<=0?o++:r=r.updateImmediateChild(s.name,Bt.EMPTY_NODE)}return this.rangedFilter_.getIndexedFilter().updateFullNode(t,r,n)},t.prototype.updatePriority=function(t,e){return t},t.prototype.filtersNodes=function(){return!0},t.prototype.getIndexedFilter=function(){return this.rangedFilter_.getIndexedFilter()},t.prototype.getIndex=function(){return this.index_},t.prototype.fullLimitUpdateChild_=function(t,e,n,r,i){var s;if(this.reverse_){var a=this.index_.getCompare();s=function(t,e){return a(e,t)}}else s=this.index_.getCompare();var u=t;Object(o.e)(u.numChildren()===this.limit_,"");var c=new xt(e,n),l=this.reverse_?u.getFirstChild(this.index_):u.getLastChild(this.index_),h=this.rangedFilter_.matches(c);if(u.hasChild(e)){for(var d=u.getImmediateChild(e),f=r.getChildAfterChild(this.index_,l,this.reverse_);null!=f&&(f.name===e||u.hasChild(f.name));)f=r.getChildAfterChild(this.index_,f,this.reverse_);var p=null==f?1:s(f,c);if(h&&!n.isEmpty()&&p>=0)return null!=i&&i.trackChildChange(Ee(e,n,d)),u.updateImmediateChild(e,n);null!=i&&i.trackChildChange(Oe(e,d));var g=u.updateImmediateChild(e,Bt.EMPTY_NODE);return null!=f&&this.rangedFilter_.matches(f)?(null!=i&&i.trackChildChange(Ce(f.name,f.node)),g.updateImmediateChild(f.name,f.node)):g}return n.isEmpty()?t:h&&s(l,c)>=0?(null!=i&&(i.trackChildChange(Oe(l.name,l.node)),i.trackChildChange(Ce(e,n))),u.updateImmediateChild(e,n).updateImmediateChild(l.name,Bt.EMPTY_NODE)):t},t}(),Tn=function(){function t(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=kt}return t.prototype.hasStart=function(){return this.startSet_},t.prototype.hasStartAfter=function(){return this.startAfterSet_},t.prototype.hasEndBefore=function(){return this.endBeforeSet_},t.prototype.isViewFromLeft=function(){return""===this.viewFrom_?this.startSet_:this.viewFrom_===t.WIRE_PROTOCOL_CONSTANTS_.VIEW_FROM_LEFT},t.prototype.getIndexStartValue=function(){return Object(o.e)(this.startSet_,"Only valid if start has been set"),this.indexStartValue_},t.prototype.getIndexStartName=function(){return Object(o.e)(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:I},t.prototype.hasEnd=function(){return this.endSet_},t.prototype.getIndexEndValue=function(){return Object(o.e)(this.endSet_,"Only valid if end has been set"),this.indexEndValue_},t.prototype.getIndexEndName=function(){return Object(o.e)(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:S},t.prototype.hasLimit=function(){return this.limitSet_},t.prototype.hasAnchoredLimit=function(){return this.limitSet_&&""!==this.viewFrom_},t.prototype.getLimit=function(){return Object(o.e)(this.limitSet_,"Only valid if limit has been set"),this.limit_},t.prototype.getIndex=function(){return this.index_},t.prototype.copy_=function(){var e=new t;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e},t.prototype.limit=function(t){var e=this.copy_();return e.limitSet_=!0,e.limit_=t,e.viewFrom_="",e},t.prototype.limitToFirst=function(e){var n=this.copy_();return n.limitSet_=!0,n.limit_=e,n.viewFrom_=t.WIRE_PROTOCOL_CONSTANTS_.VIEW_FROM_LEFT,n},t.prototype.limitToLast=function(e){var n=this.copy_();return n.limitSet_=!0,n.limit_=e,n.viewFrom_=t.WIRE_PROTOCOL_CONSTANTS_.VIEW_FROM_RIGHT,n},t.prototype.startAt=function(t,e){var n=this.copy_();return n.startSet_=!0,void 0===t&&(t=null),n.indexStartValue_=t,null!=e?(n.startNameSet_=!0,n.indexStartName_=e):(n.startNameSet_=!1,n.indexStartName_=""),n},t.prototype.startAfter=function(t,e){var n,r;this.index_===Tt?("string"==typeof t&&(t=Ot(t)),n=this.startAt(t,e)):(r=null==e?S:Ot(e),n=this.startAt(t,r));return n.startAfterSet_=!0,n},t.prototype.endAt=function(t,e){var n=this.copy_();return n.endSet_=!0,void 0===t&&(t=null),n.indexEndValue_=t,void 0!==e?(n.endNameSet_=!0,n.indexEndName_=e):(n.endNameSet_=!1,n.indexEndName_=""),n},t.prototype.endBefore=function(t,e){var n,r;return this.index_===Tt?("string"==typeof t&&(t=Et(t)),r=this.endAt(t,e)):(n=null==e?I:Et(e),r=this.endAt(t,n)),r.endBeforeSet_=!0,r},t.prototype.orderBy=function(t){var e=this.copy_();return e.index_=t,e},t.prototype.getQueryObject=function(){var e=t.WIRE_PROTOCOL_CONSTANTS_,n={};if(this.startSet_&&(n[e.INDEX_START_VALUE]=this.indexStartValue_,this.startNameSet_&&(n[e.INDEX_START_NAME]=this.indexStartName_)),this.endSet_&&(n[e.INDEX_END_VALUE]=this.indexEndValue_,this.endNameSet_&&(n[e.INDEX_END_NAME]=this.indexEndName_)),this.limitSet_){n[e.LIMIT]=this.limit_;var r=this.viewFrom_;""===r&&(r=this.isViewFromLeft()?e.VIEW_FROM_LEFT:e.VIEW_FROM_RIGHT),n[e.VIEW_FROM]=r}return this.index_!==kt&&(n[e.INDEX]=this.index_.toString()),n},t.prototype.loadsAllData=function(){return!(this.startSet_||this.endSet_||this.limitSet_)},t.prototype.isDefault=function(){return this.loadsAllData()&&this.index_===kt},t.prototype.getNodeFilter=function(){return this.loadsAllData()?new Ie(this.getIndex()):this.hasLimit()?new Sn(this):new In(this)},t.prototype.toRestQueryStringParameters=function(){var e,n=t.REST_QUERY_CONSTANTS_,r={};return this.isDefault()||(this.index_===kt?e=n.PRIORITY_INDEX:this.index_===Yt?e=n.VALUE_INDEX:this.index_===Tt?e=n.KEY_INDEX:(Object(o.e)(this.index_ instanceof $t,"Unrecognized index type!"),e=this.index_.toString()),r[n.ORDER_BY]=Object(o.G)(e),this.startSet_&&(r[n.START_AT]=Object(o.G)(this.indexStartValue_),this.startNameSet_&&(r[n.START_AT]+=","+Object(o.G)(this.indexStartName_))),this.endSet_&&(r[n.END_AT]=Object(o.G)(this.indexEndValue_),this.endNameSet_&&(r[n.END_AT]+=","+Object(o.G)(this.indexEndName_))),this.limitSet_&&(this.isViewFromLeft()?r[n.LIMIT_TO_FIRST]=this.limit_:r[n.LIMIT_TO_LAST]=this.limit_)),r},t.WIRE_PROTOCOL_CONSTANTS_={INDEX_START_VALUE:"sp",INDEX_START_NAME:"sn",INDEX_END_VALUE:"ep",INDEX_END_NAME:"en",LIMIT:"l",VIEW_FROM:"vf",VIEW_FROM_LEFT:"l",VIEW_FROM_RIGHT:"r",INDEX:"i"},t.REST_QUERY_CONSTANTS_={ORDER_BY:"orderBy",PRIORITY_INDEX:"$priority",VALUE_INDEX:"$value",KEY_INDEX:"$key",START_AT:"startAt",END_AT:"endAt",LIMIT_TO_FIRST:"limitToFirst",LIMIT_TO_LAST:"limitToLast"},t}(),Pn=function(t){function e(e,n){if(!(e instanceof xn))throw new Error("new Reference() no longer supported - use app.database().");return t.call(this,e,n,new Tn,!1)||this}return Object(i.c)(e,t),e.prototype.getKey=function(){return Object(o.H)("Reference.key",0,0,arguments.length),this.path.isEmpty()?null:this.path.getBack()},e.prototype.child=function(t){return Object(o.H)("Reference.child",1,1,arguments.length),"number"==typeof t?t=String(t):t instanceof Y||(null===this.path.getFront()?gt("Reference.child",1,t,!1):pt("Reference.child",1,t,!1)),new e(this.repo,this.path.child(t))},e.prototype.getParent=function(){Object(o.H)("Reference.parent",0,0,arguments.length);var t=this.path.parent();return null===t?null:new e(this.repo,t)},e.prototype.getRoot=function(){Object(o.H)("Reference.root",0,0,arguments.length);for(var t=this;null!==t.getParent();)t=t.getParent();return t},e.prototype.databaseProp=function(){return this.repo.database},e.prototype.set=function(t,e){Object(o.H)("Reference.set",1,2,arguments.length),mt("Reference.set",this.path),ut("Reference.set",1,t,this.path,!1),Object(o.I)("Reference.set",2,e,!0);var n=new o.a;return this.repo.setWithPriority(this.path,t,null,n.wrapCallback(e)),n.promise},e.prototype.update=function(t,e){if(Object(o.H)("Reference.update",1,2,arguments.length),mt("Reference.update",this.path),Array.isArray(t)){for(var n={},r=0;r<t.length;++r)n[""+r]=t[r];t=n,E("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}lt("Reference.update",1,t,this.path,!1),Object(o.I)("Reference.update",2,e,!0);var i=new o.a;return this.repo.update(this.path,t,i.wrapCallback(e)),i.promise},e.prototype.setWithPriority=function(t,e,n){if(Object(o.H)("Reference.setWithPriority",2,3,arguments.length),mt("Reference.setWithPriority",this.path),ut("Reference.setWithPriority",1,t,this.path,!1),ht("Reference.setWithPriority",2,e,!1),Object(o.I)("Reference.setWithPriority",3,n,!0),".length"===this.getKey()||".keys"===this.getKey())throw"Reference.setWithPriority failed: "+this.getKey()+" is a read-only object.";var r=new o.a;return this.repo.setWithPriority(this.path,t,e,r.wrapCallback(n)),r.promise},e.prototype.remove=function(t){return Object(o.H)("Reference.remove",0,1,arguments.length),mt("Reference.remove",this.path),Object(o.I)("Reference.remove",1,t,!0),this.set(null,t)},e.prototype.transaction=function(t,e,n){if(Object(o.H)("Reference.transaction",1,3,arguments.length),mt("Reference.transaction",this.path),Object(o.I)("Reference.transaction",1,t,!1),Object(o.I)("Reference.transaction",2,e,!0),bt("Reference.transaction",3,n,!0),".length"===this.getKey()||".keys"===this.getKey())throw"Reference.transaction failed: "+this.getKey()+" is a read-only object.";void 0===n&&(n=!0);var r=new o.a;"function"==typeof e&&r.promise.catch(function(){});var i=function(t,n,i){t?r.reject(t):r.resolve(new _t(n,i)),"function"==typeof e&&e(t,n,i)};return this.repo.startTransaction(this.path,t,i,n),r.promise},e.prototype.setPriority=function(t,e){Object(o.H)("Reference.setPriority",1,2,arguments.length),mt("Reference.setPriority",this.path),ht("Reference.setPriority",1,t,!1),Object(o.I)("Reference.setPriority",2,e,!0);var n=new o.a;return this.repo.setWithPriority(this.path.child(".priority"),t,null,n.wrapCallback(e)),n.promise},e.prototype.push=function(t,e){Object(o.H)("Reference.push",0,2,arguments.length),mt("Reference.push",this.path),ut("Reference.push",1,t,this.path,!0),Object(o.I)("Reference.push",2,e,!0);var n,r=this.repo.serverTime(),i=Ct(r),s=this.child(i),a=this.child(i);return n=null!=t?s.set(t,e).then(function(){return a}):Promise.resolve(a),s.then=n.then.bind(n),s.catch=n.then.bind(n,void 0),"function"==typeof e&&n.catch(function(){}),s},e.prototype.onDisconnect=function(){return mt("Reference.onDisconnect",this.path),new vt(this.repo,this.path)},Object.defineProperty(e.prototype,"database",{get:function(){return this.databaseProp()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"key",{get:function(){return this.getKey()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){return this.getParent()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"root",{get:function(){return this.getRoot()},enumerable:!1,configurable:!0}),e}(ee);ee.__referenceConstructor=Pn,Ne.__referenceConstructor=Pn;var Rn,An=function(){function t(t,e){var n=this;this.app_=t,this.authProvider_=e,this.auth_=null,this.auth_=e.getImmediate({optional:!0}),this.auth_||e.get().then(function(t){return n.auth_=t})}return t.prototype.getToken=function(t){return this.auth_?this.auth_.getToken(t).catch(function(t){return t&&"auth/token-not-initialized"===t.code?(_("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(t)}):Promise.resolve(null)},t.prototype.addTokenChangeListener=function(t){this.auth_?this.auth_.addAuthTokenListener(t):(setTimeout(function(){return t(null)},0),this.authProvider_.get().then(function(e){return e.addAuthTokenListener(t)}))},t.prototype.removeTokenChangeListener=function(t){this.authProvider_.get().then(function(e){return e.removeAuthTokenListener(t)})},t.prototype.notifyForInvalidToken=function(){var t='Provided authentication credentials for the app named "'+this.app_.name+'" are invalid. This usually indicates your app was not initialized correctly. ';E(t+="credential"in this.app_.options?'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.app_.options?'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.')},t}(),kn=function(){function t(){}return t.prototype.getToken=function(e){return Promise.resolve({accessToken:t.EMULATOR_AUTH_TOKEN})},t.prototype.addTokenChangeListener=function(e){e(t.EMULATOR_AUTH_TOKEN)},t.prototype.removeTokenChangeListener=function(t){},t.prototype.notifyForInvalidToken=function(){},t.EMULATOR_AUTH_TOKEN="owner",t}(),jn=function(){function t(){this.repos_={},this.useRestClient_=!1}return t.getInstance=function(){return Rn||(Rn=new t),Rn},t.prototype.interrupt=function(){var t,e,n,r;try{for(var o=Object(i.h)(Object.keys(this.repos_)),s=o.next();!s.done;s=o.next()){var a=s.value;try{for(var u=(n=void 0,Object(i.h)(Object.keys(this.repos_[a]))),c=u.next();!c.done;c=u.next())this.repos_[a][c.value].interrupt()}catch(l){n={error:l}}finally{try{c&&!c.done&&(r=u.return)&&r.call(u)}finally{if(n)throw n.error}}}}catch(h){t={error:h}}finally{try{s&&!s.done&&(e=o.return)&&e.call(o)}finally{if(t)throw t.error}}},t.prototype.resume=function(){var t,e,n,r;try{for(var o=Object(i.h)(Object.keys(this.repos_)),s=o.next();!s.done;s=o.next()){var a=s.value;try{for(var u=(n=void 0,Object(i.h)(Object.keys(this.repos_[a]))),c=u.next();!c.done;c=u.next())this.repos_[a][c.value].resume()}catch(l){n={error:l}}finally{try{c&&!c.done&&(r=u.return)&&r.call(u)}finally{if(n)throw n.error}}}}catch(h){t={error:h}}finally{try{s&&!s.done&&(e=o.return)&&e.call(o)}finally{if(t)throw t.error}}},t.prototype.applyEmulatorSettings=function(t,e,n){t.repoInfo_=new J(e+":"+n,!1,t.repoInfo_.namespace,t.repoInfo_.webSocketOnly,t.repoInfo_.nodeAdmin,t.repoInfo_.persistenceKey,t.repoInfo_.includeNamespaceInQueryParams),t.repoInfo_.nodeAdmin&&(t.authTokenProvider_=new kn)},t.prototype.databaseFromApp=function(t,e,n,r){var i=n||t.options.databaseURL;void 0===i&&(t.options.projectId||O("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),_("Using default host for project ",t.options.projectId),i=t.options.projectId+"-default-rtdb.firebaseio.com");var o,s=tt(i,r),a=s.repoInfo,u=void 0;"undefined"!=typeof process&&(u=process.env.FIREBASE_DATABASE_EMULATOR_HOST),u?(o=!0,a=(s=tt(i="http://"+u+"?ns="+a.namespace,r)).repoInfo):o=!s.repoInfo.secure;var c=r&&o?new kn:new An(t,e);return yt("Invalid Firebase Database URL",1,s),s.path.isEmpty()||O("Database URL must point to the root of a Firebase Database (not including a child path)."),this.createRepo(a,t,c).database},t.prototype.deleteRepo=function(t){var e=Object(o.D)(this.repos_,t.app.name);e&&Object(o.D)(e,t.key)===t||O("Database "+t.app.name+"("+t.repoInfo_+") has already been deleted."),t.interrupt(),delete e[t.key]},t.prototype.createRepo=function(t,e,n){var r=Object(o.D)(this.repos_,e.name);r||(this.repos_[e.name]=r={});var i=Object(o.D)(r,t.toURLString());return i&&O("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),i=new xn(t,this.useRestClient_,e,n),r[t.toURLString()]=i,i},t.prototype.forceRestClient=function(t){this.useRestClient_=t},t}(),Nn=function(){function t(t){var e=this;this.repoInternal_=t,this.instanceStarted_=!1,this.INTERNAL={delete:function(){return Object(i.b)(e,void 0,void 0,function(){return Object(i.d)(this,function(t){return this.checkDeleted_("delete"),jn.getInstance().deleteRepo(this.repo_),this.repoInternal_=null,this.rootInternal_=null,[2]})})}},t instanceof xn||O("Don't call new Database() directly - please use firebase.database().")}return Object.defineProperty(t.prototype,"repo_",{get:function(){return this.instanceStarted_||(this.repoInternal_.start(),this.instanceStarted_=!0),this.repoInternal_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"root_",{get:function(){return this.rootInternal_||(this.rootInternal_=new Pn(this.repo_,Y.Empty)),this.rootInternal_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"app",{get:function(){return this.repo_.app},enumerable:!1,configurable:!0}),t.prototype.useEmulator=function(t,e){this.checkDeleted_("useEmulator"),this.instanceStarted_?O("Cannot call useEmulator() after instance has already been initialized."):jn.getInstance().applyEmulatorSettings(this.repoInternal_,t,e)},t.prototype.ref=function(t){return this.checkDeleted_("ref"),Object(o.H)("database.ref",0,1,arguments.length),t instanceof Pn?this.refFromURL(t.toString()):void 0!==t?this.root_.child(t):this.root_},t.prototype.refFromURL=function(t){var e="database.refFromURL";this.checkDeleted_(e),Object(o.H)(e,1,1,arguments.length);var n=tt(t,this.repo_.repoInfo_.nodeAdmin);yt(e,1,n);var r=n.repoInfo;return this.repo_.repoInfo_.isCustomHost()||r.host===this.repo_.repoInfo_.host||O(e+": Host name does not match the current database: (found "+r.host+" but expected "+this.repo_.repoInfo_.host+")"),this.ref(n.path.toString())},t.prototype.checkDeleted_=function(t){null===this.repoInternal_&&O("Cannot call "+t+" on a deleted database.")},t.prototype.goOffline=function(){Object(o.H)("database.goOffline",0,0,arguments.length),this.checkDeleted_("goOffline"),this.repo_.interrupt()},t.prototype.goOnline=function(){Object(o.H)("database.goOnline",0,0,arguments.length),this.checkDeleted_("goOnline"),this.repo_.resume()},t.ServerValue={TIMESTAMP:{".sv":"timestamp"},increment:function(t){return{".sv":{increment:t}}}},t}(),Dn=Object.freeze({__proto__:null,forceLongPolling:function(){pn.forceDisallow(),cn.forceAllow()},forceWebSockets:function(){cn.forceDisallow()},isWebSocketsAvailable:function(){return pn.isAvailable()},setSecurityDebugCallback:function(t,e){t.repo.persistentConnection_.securityDebugCallback_=e},stats:function(t,e){t.repo.stats(e)},statsIncrementCounter:function(t,e){t.repo.statsIncrementCounter(e)},dataUpdateCount:function(t){return t.repo.dataUpdateCount},interceptServerData:function(t,e){return t.repo.interceptServerData_(e)},initStandalone:function(t){var e=t.app,n=t.url,r=t.customAuthImpl,i=t.namespace,o=t.nodeAdmin,s=void 0!==o&&o;dn(t.version);var u=new a.c("auth-internal",new a.b("database-standalone"));return u.setComponent(new a.a("auth-internal",function(){return r},"PRIVATE")),{instance:jn.getInstance().databaseFromApp(e,u,n,s),namespace:i}}}),Mn=vn;vn.prototype.simpleListen=function(t,e){this.sendRequest("q",{p:t},e)},vn.prototype.echo=function(t,e){this.sendRequest("echo",{d:t},e)};var Ln=Object.freeze({__proto__:null,DataConnection:Mn,RealTimeConnection:mn,hijackHash:function(t){var e=vn.prototype.put;return vn.prototype.put=function(n,r,i,o){void 0!==o&&(o=t()),e.call(this,n,r,i,o)},function(){vn.prototype.put=e}},ConnectionTarget:J,queryIdentifier:function(t){return t.queryIdentifier()},forceRestClient:function(t){jn.getInstance().forceRestClient(t)}}),Fn=Nn.ServerValue;!function(e){dn(e.SDK_VERSION);var n=e.INTERNAL.registerComponent(new a.a("database",function(t,e){var n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal");return jn.getInstance().databaseFromApp(n,r,e)},"PUBLIC").setServiceProps({Reference:Pn,Query:ee,Database:Nn,DataSnapshot:Kt,enableLogging:v,INTERNAL:Dn,ServerValue:Fn,TEST_ACCESS:Ln}).setMultipleInstances(!0));e.registerVersion("@firebase/database","0.9.3"),Object(o.w)()&&(t.exports=n)}(r.a)}).call(this,n("3UD+")(t))},"7o/Q":function(t,e,n){"use strict";n.d(e,"a",function(){return c});var r=n("n6bG"),i=n("gRHU"),o=n("quSY"),s=n("2QA8"),a=n("2fFW"),u=n("NJ4a");class c extends o.a{constructor(t,e,n){switch(super(),this.syncErrorValue=null,this.syncErrorThrown=!1,this.syncErrorThrowable=!1,this.isStopped=!1,arguments.length){case 0:this.destination=i.a;break;case 1:if(!t){this.destination=i.a;break}if("object"==typeof t){t instanceof c?(this.syncErrorThrowable=t.syncErrorThrowable,this.destination=t,t.add(this)):(this.syncErrorThrowable=!0,this.destination=new l(this,t));break}default:this.syncErrorThrowable=!0,this.destination=new l(this,t,e,n)}}[s.a](){return this}static create(t,e,n){const r=new c(t,e,n);return r.syncErrorThrowable=!1,r}next(t){this.isStopped||this._next(t)}error(t){this.isStopped||(this.isStopped=!0,this._error(t))}complete(){this.isStopped||(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe())}_next(t){this.destination.next(t)}_error(t){this.destination.error(t),this.unsubscribe()}_complete(){this.destination.complete(),this.unsubscribe()}_unsubscribeAndRecycle(){const{_parentOrParents:t}=this;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=t,this}}class l extends c{constructor(t,e,n,o){let s;super(),this._parentSubscriber=t;let a=this;Object(r.a)(e)?s=e:e&&(s=e.next,n=e.error,o=e.complete,e!==i.a&&(a=Object.create(e),Object(r.a)(a.unsubscribe)&&this.add(a.unsubscribe.bind(a)),a.unsubscribe=this.unsubscribe.bind(this))),this._context=a,this._next=s,this._error=n,this._complete=o}next(t){if(!this.isStopped&&this._next){const{_parentSubscriber:e}=this;a.a.useDeprecatedSynchronousErrorHandling&&e.syncErrorThrowable?this.__tryOrSetError(e,this._next,t)&&this.unsubscribe():this.__tryOrUnsub(this._next,t)}}error(t){if(!this.isStopped){const{_parentSubscriber:e}=this,{useDeprecatedSynchronousErrorHandling:n}=a.a;if(this._error)n&&e.syncErrorThrowable?(this.__tryOrSetError(e,this._error,t),this.unsubscribe()):(this.__tryOrUnsub(this._error,t),this.unsubscribe());else if(e.syncErrorThrowable)n?(e.syncErrorValue=t,e.syncErrorThrown=!0):Object(u.a)(t),this.unsubscribe();else{if(this.unsubscribe(),n)throw t;Object(u.a)(t)}}}complete(){if(!this.isStopped){const{_parentSubscriber:t}=this;if(this._complete){const e=()=>this._complete.call(this._context);a.a.useDeprecatedSynchronousErrorHandling&&t.syncErrorThrowable?(this.__tryOrSetError(t,e),this.unsubscribe()):(this.__tryOrUnsub(e),this.unsubscribe())}else this.unsubscribe()}}__tryOrUnsub(t,e){try{t.call(this._context,e)}catch(n){if(this.unsubscribe(),a.a.useDeprecatedSynchronousErrorHandling)throw n;Object(u.a)(n)}}__tryOrSetError(t,e,n){if(!a.a.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{e.call(this._context,n)}catch(r){return a.a.useDeprecatedSynchronousErrorHandling?(t.syncErrorValue=r,t.syncErrorThrown=!0,!0):(Object(u.a)(r),!0)}return!1}_unsubscribe(){const{_parentSubscriber:t}=this;this._context=null,this._parentSubscriber=null,t.unsubscribe()}}},"9ppp":function(t,e,n){"use strict";n.d(e,"a",function(){return r});const r=(()=>{function t(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}return t.prototype=Object.create(Error.prototype),t})()},Cfvw:function(t,e,n){"use strict";n.d(e,"a",function(){return h});var r=n("HDdC"),i=n("SeVD"),o=n("quSY"),s=n("kJWO"),a=n("jZKg"),u=n("Lhse"),c=n("c2HN"),l=n("I55L");function h(t,e){return e?function(t,e){if(null!=t){if(function(t){return t&&"function"==typeof t[s.a]}(t))return function(t,e){return new r.a(n=>{const r=new o.a;return r.add(e.schedule(()=>{const i=t[s.a]();r.add(i.subscribe({next(t){r.add(e.schedule(()=>n.next(t)))},error(t){r.add(e.schedule(()=>n.error(t)))},complete(){r.add(e.schedule(()=>n.complete()))}}))})),r})}(t,e);if(Object(c.a)(t))return function(t,e){return new r.a(n=>{const r=new o.a;return r.add(e.schedule(()=>t.then(t=>{r.add(e.schedule(()=>{n.next(t),r.add(e.schedule(()=>n.complete()))}))},t=>{r.add(e.schedule(()=>n.error(t)))}))),r})}(t,e);if(Object(l.a)(t))return Object(a.a)(t,e);if(function(t){return t&&"function"==typeof t[u.a]}(t)||"string"==typeof t)return function(t,e){if(!t)throw new Error("Iterable cannot be null");return new r.a(n=>{const r=new o.a;let i;return r.add(()=>{i&&"function"==typeof i.return&&i.return()}),r.add(e.schedule(()=>{i=t[u.a](),r.add(e.schedule(function(){if(n.closed)return;let t,e;try{const n=i.next();t=n.value,e=n.done}catch(r){return void n.error(r)}e?n.complete():(n.next(t),this.schedule())}))})),r})}(t,e)}throw new TypeError((null!==t&&typeof t||t)+" is not observable")}(t,e):t instanceof r.a?t:new r.a(Object(i.a)(t))}},D0XW:function(t,e,n){"use strict";n.d(e,"b",function(){return i}),n.d(e,"a",function(){return o});var r=n("3N8a");const i=new(n("IjjT").a)(r.a),o=i},DH7j:function(t,e,n){"use strict";n.d(e,"a",function(){return r});const r=(()=>Array.isArray||(t=>t&&"number"==typeof t.length))()},EY2u:function(t,e,n){"use strict";n.d(e,"a",function(){return i}),n.d(e,"b",function(){return o});var r=n("HDdC");const i=new r.a(t=>t.complete());function o(t){return t?function(t){return new r.a(e=>t.schedule(()=>e.complete()))}(t):i}},HDdC:function(t,e,n){"use strict";n.d(e,"a",function(){return c});var r=n("7o/Q"),i=n("2QA8"),o=n("gRHU"),s=n("kJWO"),a=n("SpAZ"),u=n("2fFW");let c=(()=>{class t{constructor(t){this._isScalar=!1,t&&(this._subscribe=t)}lift(e){const n=new t;return n.source=this,n.operator=e,n}subscribe(t,e,n){const{operator:s}=this,a=function(t,e,n){if(t){if(t instanceof r.a)return t;if(t[i.a])return t[i.a]()}return t||e||n?new r.a(t,e,n):new r.a(o.a)}(t,e,n);if(a.add(s?s.call(a,this.source):this.source||u.a.useDeprecatedSynchronousErrorHandling&&!a.syncErrorThrowable?this._subscribe(a):this._trySubscribe(a)),u.a.useDeprecatedSynchronousErrorHandling&&a.syncErrorThrowable&&(a.syncErrorThrowable=!1,a.syncErrorThrown))throw a.syncErrorValue;return a}_trySubscribe(t){try{return this._subscribe(t)}catch(e){u.a.useDeprecatedSynchronousErrorHandling&&(t.syncErrorThrown=!0,t.syncErrorValue=e),function(t){for(;t;){const{closed:e,destination:n,isStopped:i}=t;if(e||i)return!1;t=n&&n instanceof r.a?n:null}return!0}(t)?t.error(e):console.warn(e)}}forEach(t,e){return new(e=l(e))((e,n)=>{let r;r=this.subscribe(e=>{try{t(e)}catch(i){n(i),r&&r.unsubscribe()}},n,e)})}_subscribe(t){const{source:e}=this;return e&&e.subscribe(t)}[s.a](){return this}pipe(...t){return 0===t.length?this:(0===(e=t).length?a.a:1===e.length?e[0]:function(t){return e.reduce((t,e)=>e(t),t)})(this);var e}toPromise(t){return new(t=l(t))((t,e)=>{let n;this.subscribe(t=>n=t,t=>e(t),()=>t(n))})}}return t.create=e=>new t(e),t})();function l(t){if(t||(t=u.a.Promise||Promise),!t)throw new Error("no Promise impl found");return t}},I55L:function(t,e,n){"use strict";n.d(e,"a",function(){return r});const r=t=>t&&"number"==typeof t.length&&"function"!=typeof t},IjjT:function(t,e,n){"use strict";n.d(e,"a",function(){return i});let r=(()=>{class t{constructor(e,n=t.now){this.SchedulerAction=e,this.now=n}schedule(t,e=0,n){return new this.SchedulerAction(this,t).schedule(n,e)}}return t.now=()=>Date.now(),t})();class i extends r{constructor(t,e=r.now){super(t,()=>i.delegate&&i.delegate!==this?i.delegate.now():e()),this.actions=[],this.active=!1,this.scheduled=void 0}schedule(t,e=0,n){return i.delegate&&i.delegate!==this?i.delegate.schedule(t,e,n):super.schedule(t,e,n)}flush(t){const{actions:e}=this;if(this.active)return void e.push(t);let n;this.active=!0;do{if(n=t.execute(t.state,t.delay))break}while(t=e.shift());if(this.active=!1,n){for(;t=e.shift();)t.unsubscribe();throw n}}}},Jgta:function(t,e,n){"use strict";var r=n("zIRd");n.d(e,"a",function(){return r.a}),r.a.registerVersion("firebase","8.2.7","app")},KqfI:function(t,e,n){"use strict";function r(){}n.d(e,"a",function(){return r})},LRne:function(t,e,n){"use strict";n.d(e,"a",function(){return s});var r=n("z+Ro"),i=n("yCtX"),o=n("jZKg");function s(...t){let e=t[t.length-1];return Object(r.a)(e)?(t.pop(),Object(o.a)(t,e)):Object(i.a)(t)}},Lhse:function(t,e,n){"use strict";function r(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}n.d(e,"a",function(){return i});const i=r()},NJ4a:function(t,e,n){"use strict";function r(t){setTimeout(()=>{throw t},0)}n.d(e,"a",function(){return r})},SeVD:function(t,e,n){"use strict";n.d(e,"a",function(){return l});var r=n("ngJS"),i=n("NJ4a"),o=n("Lhse"),s=n("kJWO"),a=n("I55L"),u=n("c2HN"),c=n("XoHu");const l=t=>{if(t&&"function"==typeof t[s.a])return l=t,t=>{const e=l[s.a]();if("function"!=typeof e.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return e.subscribe(t)};if(Object(a.a)(t))return Object(r.a)(t);if(Object(u.a)(t))return n=t,t=>(n.then(e=>{t.closed||(t.next(e),t.complete())},e=>t.error(e)).then(null,i.a),t);if(t&&"function"==typeof t[o.a])return e=t,t=>{const n=e[o.a]();for(;;){let e;try{e=n.next()}catch(r){return t.error(r),t}if(e.done){t.complete();break}if(t.next(e.value),t.closed)break}return"function"==typeof n.return&&t.add(()=>{n.return&&n.return()}),t};{const e=Object(c.a)(t)?"an invalid object":`'${t}'`;throw new TypeError(`You provided ${e} where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.`)}var e,n,l}},SpAZ:function(t,e,n){"use strict";function r(t){return t}n.d(e,"a",function(){return r})},VRyK:function(t,e,n){"use strict";n.d(e,"a",function(){return a});var r=n("HDdC"),i=n("z+Ro"),o=n("bHdf"),s=n("yCtX");function a(...t){let e=Number.POSITIVE_INFINITY,n=null,a=t[t.length-1];return Object(i.a)(a)?(n=t.pop(),t.length>1&&"number"==typeof t[t.length-1]&&(e=t.pop())):"number"==typeof a&&(e=t.pop()),null===n&&1===t.length&&t[0]instanceof r.a?t[0]:Object(o.a)(e)(Object(s.a)(t,n))}},WMd4:function(t,e,n){"use strict";n.d(e,"a",function(){return s});var r=n("EY2u"),i=n("LRne"),o=n("HDdC");let s=(()=>{class t{constructor(t,e,n){this.kind=t,this.value=e,this.error=n,this.hasValue="N"===t}observe(t){switch(this.kind){case"N":return t.next&&t.next(this.value);case"E":return t.error&&t.error(this.error);case"C":return t.complete&&t.complete()}}do(t,e,n){switch(this.kind){case"N":return t&&t(this.value);case"E":return e&&e(this.error);case"C":return n&&n()}}accept(t,e,n){return t&&"function"==typeof t.next?this.observe(t):this.do(t,e,n)}toObservable(){switch(this.kind){case"N":return Object(i.a)(this.value);case"E":return t=this.error,new o.a(e=>e.error(t));case"C":return Object(r.b)()}var t;throw new Error("unexpected notification kind value")}static createNext(e){return void 0!==e?new t("N",e):t.undefinedValueNotification}static createError(e){return new t("E",void 0,e)}static createComplete(){return t.completeNotification}}return t.completeNotification=new t("C"),t.undefinedValueNotification=new t("N",void 0),t})()},XNiG:function(t,e,n){"use strict";n.d(e,"b",function(){return c}),n.d(e,"a",function(){return l});var r=n("HDdC"),i=n("7o/Q"),o=n("quSY"),s=n("9ppp"),a=n("Ylt2"),u=n("2QA8");class c extends i.a{constructor(t){super(t),this.destination=t}}let l=(()=>{class t extends r.a{constructor(){super(),this.observers=[],this.closed=!1,this.isStopped=!1,this.hasError=!1,this.thrownError=null}[u.a](){return new c(this)}lift(t){const e=new h(this,this);return e.operator=t,e}next(t){if(this.closed)throw new s.a;if(!this.isStopped){const{observers:e}=this,n=e.length,r=e.slice();for(let i=0;i<n;i++)r[i].next(t)}}error(t){if(this.closed)throw new s.a;this.hasError=!0,this.thrownError=t,this.isStopped=!0;const{observers:e}=this,n=e.length,r=e.slice();for(let i=0;i<n;i++)r[i].error(t);this.observers.length=0}complete(){if(this.closed)throw new s.a;this.isStopped=!0;const{observers:t}=this,e=t.length,n=t.slice();for(let r=0;r<e;r++)n[r].complete();this.observers.length=0}unsubscribe(){this.isStopped=!0,this.closed=!0,this.observers=null}_trySubscribe(t){if(this.closed)throw new s.a;return super._trySubscribe(t)}_subscribe(t){if(this.closed)throw new s.a;return this.hasError?(t.error(this.thrownError),o.a.EMPTY):this.isStopped?(t.complete(),o.a.EMPTY):(this.observers.push(t),new a.a(this,t))}asObservable(){const t=new r.a;return t.source=this,t}}return t.create=(t,e)=>new h(t,e),t})();class h extends l{constructor(t,e){super(),this.destination=t,this.source=e}next(t){const{destination:e}=this;e&&e.next&&e.next(t)}error(t){const{destination:e}=this;e&&e.error&&this.destination.error(t)}complete(){const{destination:t}=this;t&&t.complete&&this.destination.complete()}_subscribe(t){const{source:e}=this;return e?this.source.subscribe(t):o.a.EMPTY}}},XoHu:function(t,e,n){"use strict";function r(t){return null!==t&&"object"==typeof t}n.d(e,"a",function(){return r})},Y7HM:function(t,e,n){"use strict";n.d(e,"a",function(){return i});var r=n("DH7j");function i(t){return!Object(r.a)(t)&&t-parseFloat(t)+1>=0}},Ylt2:function(t,e,n){"use strict";n.d(e,"a",function(){return i});var r=n("quSY");class i extends r.a{constructor(t,e){super(),this.subject=t,this.subscriber=e,this.closed=!1}unsubscribe(){if(this.closed)return;this.closed=!0;const t=this.subject,e=t.observers;if(this.subject=null,!e||0===e.length||t.isStopped||t.closed)return;const n=e.indexOf(this.subscriber);-1!==n&&e.splice(n,1)}}},bHdf:function(t,e,n){"use strict";n.d(e,"a",function(){return o});var r=n("5+tZ"),i=n("SpAZ");function o(t=Number.POSITIVE_INFINITY){return Object(r.a)(i.a,t)}},c2HN:function(t,e,n){"use strict";function r(t){return!!t&&"function"!=typeof t.subscribe&&"function"==typeof t.then}n.d(e,"a",function(){return r})},fXoL:function(t,e,n){"use strict";n.d(e,"a",function(){return un}),n.d(e,"b",function(){return Zc}),n.d(e,"c",function(){return Wc}),n.d(e,"d",function(){return zc}),n.d(e,"e",function(){return Gc}),n.d(e,"f",function(){return zl}),n.d(e,"g",function(){return Dl}),n.d(e,"h",function(){return Uu}),n.d(e,"i",function(){return cl}),n.d(e,"j",function(){return cu}),n.d(e,"k",function(){return el}),n.d(e,"l",function(){return fu}),n.d(e,"m",function(){return Or}),n.d(e,"n",function(){return Ec}),n.d(e,"o",function(){return Co}),n.d(e,"p",function(){return Tn}),n.d(e,"q",function(){return I}),n.d(e,"r",function(){return an}),n.d(e,"s",function(){return Fo}),n.d(e,"t",function(){return ku}),n.d(e,"u",function(){return Nu}),n.d(e,"v",function(){return tl}),n.d(e,"w",function(){return Ku}),n.d(e,"x",function(){return Ll}),n.d(e,"y",function(){return $u}),n.d(e,"z",function(){return Rl}),n.d(e,"A",function(){return dl}),n.d(e,"B",function(){return Pn}),n.d(e,"C",function(){return Xc}),n.d(e,"D",function(){return Kc}),n.d(e,"E",function(){return mu}),n.d(e,"F",function(){return gu}),n.d(e,"G",function(){return Tr}),n.d(e,"H",function(){return bu}),n.d(e,"I",function(){return br}),n.d(e,"J",function(){return Rn}),n.d(e,"K",function(){return Vl}),n.d(e,"L",function(){return zu}),n.d(e,"M",function(){return vl}),n.d(e,"N",function(){return cn}),n.d(e,"O",function(){return _u}),n.d(e,"P",function(){return vu}),n.d(e,"Q",function(){return Zu}),n.d(e,"R",function(){return k}),n.d(e,"S",function(){return Al}),n.d(e,"T",function(){return Tl}),n.d(e,"U",function(){return f}),n.d(e,"V",function(){return Sl}),n.d(e,"W",function(){return ql}),n.d(e,"X",function(){return Cl}),n.d(e,"Y",function(){return Jc}),n.d(e,"Z",function(){return Eo}),n.d(e,"ab",function(){return oa}),n.d(e,"bb",function(){return mr}),n.d(e,"cb",function(){return Zn}),n.d(e,"db",function(){return Vn}),n.d(e,"eb",function(){return Hn}),n.d(e,"fb",function(){return Gn}),n.d(e,"gb",function(){return Bn}),n.d(e,"hb",function(){return qn}),n.d(e,"ib",function(){return zn}),n.d(e,"jb",function(){return ea}),n.d(e,"kb",function(){return Hl}),n.d(e,"lb",function(){return na}),n.d(e,"mb",function(){return ra}),n.d(e,"nb",function(){return Qn}),n.d(e,"ob",function(){return L}),n.d(e,"pb",function(){return Yo}),n.d(e,"qb",function(){return ps}),n.d(e,"rb",function(){return ds}),n.d(e,"sb",function(){return fs}),n.d(e,"tb",function(){return ta}),n.d(e,"ub",function(){return xt}),n.d(e,"vb",function(){return l}),n.d(e,"wb",function(){return Un}),n.d(e,"xb",function(){return Vo}),n.d(e,"yb",function(){return vt}),n.d(e,"zb",function(){return su}),n.d(e,"Ab",function(){return Oi}),n.d(e,"Bb",function(){return Jo}),n.d(e,"Cb",function(){return js}),n.d(e,"Db",function(){return $s}),n.d(e,"Eb",function(){return ks}),n.d(e,"Fb",function(){return Fc}),n.d(e,"Gb",function(){return Y}),n.d(e,"Hb",function(){return et}),n.d(e,"Ib",function(){return y}),n.d(e,"Jb",function(){return b}),n.d(e,"Kb",function(){return Z}),n.d(e,"Lb",function(){return nt}),n.d(e,"Mb",function(){return rs}),n.d(e,"Nb",function(){return us}),n.d(e,"Ob",function(){return ls}),n.d(e,"Pb",function(){return cs}),n.d(e,"Qb",function(){return as}),n.d(e,"Rb",function(){return ss}),n.d(e,"Sb",function(){return hs}),n.d(e,"Tb",function(){return nn}),n.d(e,"Ub",function(){return Ks}),n.d(e,"Vb",function(){return Ka}),n.d(e,"Wb",function(){return Za}),n.d(e,"Xb",function(){return Xa}),n.d(e,"Yb",function(){return xn}),n.d(e,"Zb",function(){return rn}),n.d(e,"ac",function(){return Bc}),n.d(e,"bc",function(){return gs}),n.d(e,"cc",function(){return Uc}),n.d(e,"dc",function(){return bs}),n.d(e,"ec",function(){return vc}),n.d(e,"fc",function(){return _c}),n.d(e,"gc",function(){return wc}),n.d(e,"hc",function(){return ws}),n.d(e,"ic",function(){return _s}),n.d(e,"jc",function(){return is}),n.d(e,"kc",function(){return Cs}),n.d(e,"lc",function(){return Os}),n.d(e,"mc",function(){return fc}),n.d(e,"nc",function(){return pc}),n.d(e,"oc",function(){return gc}),n.d(e,"pc",function(){return Mc}),n.d(e,"qc",function(){return ns}),n.d(e,"rc",function(){return zt}),n.d(e,"sc",function(){return vr}),n.d(e,"tc",function(){return J}),n.d(e,"uc",function(){return As}),n.d(e,"vc",function(){return es}),n.d(e,"wc",function(){return qc}),n.d(e,"xc",function(){return zs}),n.d(e,"yc",function(){return Gs}),n.d(e,"zc",function(){return Ws}),n.d(e,"Ac",function(){return Ys}),n.d(e,"Bc",function(){return Lc});var r=n("XNiG"),i=n("quSY"),o=n("HDdC"),s=n("VRyK"),a=n("w1tV");function u(t){for(let e in t)if(t[e]===u)return e;throw Error("Could not find renamed property on target object.")}function c(t,e){for(const n in e)e.hasOwnProperty(n)&&!t.hasOwnProperty(n)&&(t[n]=e[n])}function l(t){if("string"==typeof t)return t;if(Array.isArray(t))return"["+t.map(l).join(", ")+"]";if(null==t)return""+t;if(t.overriddenName)return`${t.overriddenName}`;if(t.name)return`${t.name}`;const e=t.toString();if(null==e)return""+e;const n=e.indexOf("\n");return-1===n?e:e.substring(0,n)}function h(t,e){return null==t||""===t?null===e?"":e:null==e||""===e?t:t+" "+e}const d=u({__forward_ref__:u});function f(t){return t.__forward_ref__=f,t.toString=function(){return l(this())},t}function p(t){return g(t)?t():t}function g(t){return"function"==typeof t&&t.hasOwnProperty(d)&&t.__forward_ref__===f}function m(t,e,n,r){throw new Error(`ASSERTION ERROR: ${t}`+(null==r?"":` [Expected=> ${n} ${r} ${e} <=Actual]`))}function y(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function b(t){return{factory:t.factory,providers:t.providers||[],imports:t.imports||[]}}function v(t){return _(t,C)||_(t,E)}function _(t,e){return t.hasOwnProperty(e)?t[e]:null}function w(t){return t&&(t.hasOwnProperty(O)||t.hasOwnProperty(x))?t[O]:null}const C=u({"\u0275prov":u}),O=u({"\u0275inj":u}),E=u({ngInjectableDef:u}),x=u({ngInjectorDef:u});var I=function(t){return t[t.Default=0]="Default",t[t.Host=1]="Host",t[t.Self=2]="Self",t[t.SkipSelf=4]="SkipSelf",t[t.Optional=8]="Optional",t}({});let S;function T(t){const e=S;return S=t,e}function P(t,e,n){const r=v(t);if(r&&"root"==r.providedIn)return void 0===r.value?r.value=r.factory():r.value;if(n&I.Optional)return null;if(void 0!==e)return e;throw new Error(`Injector: NOT_FOUND [${l(t)}]`)}function R(t){return{toString:t}.toString()}var A=function(t){return t[t.OnPush=0]="OnPush",t[t.Default=1]="Default",t}({}),k=function(t){return t[t.Emulated=0]="Emulated",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",t}({});const j="undefined"!=typeof globalThis&&globalThis,N="undefined"!=typeof window&&window,D="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,M="undefined"!=typeof global&&global,L=j||M||N||D,F={},U=[],V=u({"\u0275cmp":u}),Q=u({"\u0275dir":u}),H=u({"\u0275pipe":u}),q=u({"\u0275mod":u}),B=u({"\u0275loc":u}),z=u({"\u0275fac":u}),G=u({__NG_ELEMENT_ID__:u});let W=0;function Y(t){return R(()=>{const e={},n={type:t.type,providersResolver:null,decls:t.decls,vars:t.vars,factory:null,template:t.template||null,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:e,inputs:null,outputs:null,exportAs:t.exportAs||null,onPush:t.changeDetection===A.OnPush,directiveDefs:null,pipeDefs:null,selectors:t.selectors||U,viewQuery:t.viewQuery||null,features:t.features||null,data:t.data||{},encapsulation:t.encapsulation||k.Emulated,id:"c",styles:t.styles||U,_:null,setInput:null,schemas:t.schemas||null,tView:null},r=t.directives,i=t.features,o=t.pipes;return n.id+=W++,n.inputs=tt(t.inputs,e),n.outputs=tt(t.outputs),i&&i.forEach(t=>t(n)),n.directiveDefs=r?()=>("function"==typeof r?r():r).map($):null,n.pipeDefs=o?()=>("function"==typeof o?o():o).map(K):null,n})}function $(t){return rt(t)||function(t){return t[Q]||null}(t)}function K(t){return function(t){return t[H]||null}(t)}const X={};function Z(t){const e={type:t.type,bootstrap:t.bootstrap||U,declarations:t.declarations||U,imports:t.imports||U,exports:t.exports||U,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null};return null!=t.id&&R(()=>{X[t.id]=t.type}),e}function J(t,e){return R(()=>{const n=it(t,!0);n.declarations=e.declarations||U,n.imports=e.imports||U,n.exports=e.exports||U})}function tt(t,e){if(null==t)return F;const n={};for(const r in t)if(t.hasOwnProperty(r)){let i=t[r],o=i;Array.isArray(i)&&(o=i[1],i=i[0]),n[i]=r,e&&(e[i]=o)}return n}const et=Y;function nt(t){return{type:t.type,name:t.name,factory:null,pure:!1!==t.pure,onDestroy:t.type.prototype.ngOnDestroy||null}}function rt(t){return t[V]||null}function it(t,e){const n=t[q]||null;if(!n&&!0===e)throw new Error(`Type ${l(t)} does not have '\u0275mod' property.`);return n}const ot=20,st=10;function at(t){return Array.isArray(t)&&"object"==typeof t[1]}function ut(t){return Array.isArray(t)&&!0===t[1]}function ct(t){return 0!=(8&t.flags)}function lt(t){return 2==(2&t.flags)}function ht(t){return 1==(1&t.flags)}function dt(t){return null!==t.template}function ft(t,e){return t.hasOwnProperty(z)?t[z]:null}class pt extends Error{constructor(t,e){super(function(t,e){return`${t?`NG0${t}: `:""}${e}`}(t,e)),this.code=t}}function gt(t){return"string"==typeof t?t:null==t?"":String(t)}function mt(t){return"function"==typeof t?t.name||t.toString():"object"==typeof t&&null!=t&&"function"==typeof t.type?t.type.name||t.type.toString():gt(t)}function yt(t,e){const n=e?` in ${e}`:"";throw new pt("201",`No provider for ${mt(t)} found${n}`)}class bt{constructor(t,e,n){this.previousValue=t,this.currentValue=e,this.firstChange=n}isFirstChange(){return this.firstChange}}function vt(){return _t}function _t(t){return t.type.prototype.ngOnChanges&&(t.setInput=Ct),wt}function wt(){const t=Ot(this),e=null==t?void 0:t.current;if(e){const n=t.previous;if(n===F)t.previous=e;else for(let t in e)n[t]=e[t];t.current=null,this.ngOnChanges(e)}}function Ct(t,e,n,r){const i=Ot(t)||function(t,e){return t.__ngSimpleChanges__=e}(t,{previous:F,current:null}),o=i.current||(i.current={}),s=i.previous,a=this.declaredInputs[n],u=s[a];o[a]=new bt(u&&u.currentValue,e,s===F),t[r]=e}function Ot(t){return t.__ngSimpleChanges__||null}let Et;function xt(t){Et=t}function It(){return void 0!==Et?Et:"undefined"!=typeof document?document:void 0}function St(t){return!!t.listen}vt.ngInherit=!0;const Tt={createRenderer:(t,e)=>It()};function Pt(t){for(;Array.isArray(t);)t=t[0];return t}function Rt(t,e){return Pt(e[t])}function At(t,e){return Pt(e[t.index])}function kt(t,e){return t.data[e]}function jt(t,e){return t[e]}function Nt(t,e){const n=e[t];return at(n)?n:n[0]}function Dt(t){const e=function(t){return t.__ngContext__||null}(t);return e?Array.isArray(e)?e:e.lView:null}function Mt(t){return 4==(4&t[2])}function Lt(t){return 128==(128&t[2])}function Ft(t,e){return null==e?null:t[e]}function Ut(t){t[18]=0}function Vt(t,e){t[5]+=e;let n=t,r=t[3];for(;null!==r&&(1===e&&1===n[5]||-1===e&&0===n[5]);)r[5]+=e,n=r,r=r[3]}const Qt={lFrame:fe(null),bindingsEnabled:!0,isInCheckNoChangesMode:!1};function Ht(){return Qt.bindingsEnabled}function qt(){return Qt.lFrame.lView}function Bt(){return Qt.lFrame.tView}function zt(t){Qt.lFrame.contextLView=t}function Gt(){let t=Wt();for(;null!==t&&64===t.type;)t=t.parent;return t}function Wt(){return Qt.lFrame.currentTNode}function Yt(){const t=Qt.lFrame,e=t.currentTNode;return t.isParent?e:e.parent}function $t(t,e){const n=Qt.lFrame;n.currentTNode=t,n.isParent=e}function Kt(){return Qt.lFrame.isParent}function Xt(){Qt.lFrame.isParent=!1}function Zt(){return Qt.isInCheckNoChangesMode}function Jt(t){Qt.isInCheckNoChangesMode=t}function te(){const t=Qt.lFrame;let e=t.bindingRootIndex;return-1===e&&(e=t.bindingRootIndex=t.tView.bindingStartIndex),e}function ee(){return Qt.lFrame.bindingIndex}function ne(){return Qt.lFrame.bindingIndex++}function re(t){const e=Qt.lFrame,n=e.bindingIndex;return e.bindingIndex=e.bindingIndex+t,n}function ie(t){Qt.lFrame.inI18n=t}function oe(t,e){const n=Qt.lFrame;n.bindingIndex=n.bindingRootIndex=t,se(e)}function se(t){Qt.lFrame.currentDirectiveIndex=t}function ae(){return Qt.lFrame.currentQueryIndex}function ue(t){Qt.lFrame.currentQueryIndex=t}function ce(t){const e=t[1];return 2===e.type?e.declTNode:1===e.type?t[6]:null}function le(t,e,n){if(n&I.SkipSelf){let r=e,i=t;for(;r=r.parent,!(null!==r||n&I.Host||(r=ce(i),null===r)||(i=i[15],10&r.type)););if(null===r)return!1;e=r,t=i}const r=Qt.lFrame=de();return r.currentTNode=e,r.lView=t,!0}function he(t){const e=de(),n=t[1];Qt.lFrame=e,e.currentTNode=n.firstChild,e.lView=t,e.tView=n,e.contextLView=t,e.bindingIndex=n.bindingStartIndex,e.inI18n=!1}function de(){const t=Qt.lFrame,e=null===t?null:t.child;return null===e?fe(t):e}function fe(t){const e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return null!==t&&(t.child=e),e}function pe(){const t=Qt.lFrame;return Qt.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}const ge=pe;function me(){const t=pe();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function ye(){return Qt.lFrame.selectedIndex}function be(t){Qt.lFrame.selectedIndex=t}function ve(){const t=Qt.lFrame;return kt(t.tView,t.selectedIndex)}function _e(t,e){for(let n=e.directiveStart,r=e.directiveEnd;n<r;n++){const e=t.data[n].type.prototype,{ngAfterContentInit:r,ngAfterContentChecked:i,ngAfterViewInit:o,ngAfterViewChecked:s,ngOnDestroy:a}=e;r&&(t.contentHooks||(t.contentHooks=[])).push(-n,r),i&&((t.contentHooks||(t.contentHooks=[])).push(n,i),(t.contentCheckHooks||(t.contentCheckHooks=[])).push(n,i)),o&&(t.viewHooks||(t.viewHooks=[])).push(-n,o),s&&((t.viewHooks||(t.viewHooks=[])).push(n,s),(t.viewCheckHooks||(t.viewCheckHooks=[])).push(n,s)),null!=a&&(t.destroyHooks||(t.destroyHooks=[])).push(n,a)}}function we(t,e,n){Ee(t,e,3,n)}function Ce(t,e,n,r){(3&t[2])===n&&Ee(t,e,n,r)}function Oe(t,e){let n=t[2];(3&n)===e&&(n&=2047,n+=1,t[2]=n)}function Ee(t,e,n,r){const i=null!=r?r:-1,o=e.length-1;let s=0;for(let a=void 0!==r?65535&t[18]:0;a<o;a++)if("number"==typeof e[a+1]){if(s=e[a],null!=r&&s>=r)break}else e[a]<0&&(t[18]+=65536),(s<i||-1==i)&&(xe(t,n,e,a),t[18]=(4294901760&t[18])+a+2),a++}function xe(t,e,n,r){const i=n[r]<0,o=n[r+1],s=t[i?-n[r]:n[r]];i?t[2]>>11<t[18]>>16&&(3&t[2])===e&&(t[2]+=2048,o.call(s)):o.call(s)}const Ie=-1;class Se{constructor(t,e,n){this.factory=t,this.resolving=!1,this.canSeeViewProviders=e,this.injectImpl=n}}function Te(t,e,n){const r=St(t);let i=0;for(;i<n.length;){const o=n[i];if("number"==typeof o){if(0!==o)break;i++;const s=n[i++],a=n[i++],u=n[i++];r?t.setAttribute(e,a,u,s):e.setAttributeNS(s,a,u)}else{const s=o,a=n[++i];Re(s)?r&&t.setProperty(e,s,a):r?t.setAttribute(e,s,a):e.setAttribute(s,a),i++}}return i}function Pe(t){return 3===t||4===t||6===t}function Re(t){return 64===t.charCodeAt(0)}function Ae(t,e){if(null===e||0===e.length);else if(null===t||0===t.length)t=e.slice();else{let n=-1;for(let r=0;r<e.length;r++){const i=e[r];"number"==typeof i?n=i:0===n||ke(t,n,i,null,-1===n||2===n?e[++r]:null)}}return t}function ke(t,e,n,r,i){let o=0,s=t.length;if(-1===e)s=-1;else for(;o<t.length;){const n=t[o++];if("number"==typeof n){if(n===e){s=-1;break}if(n>e){s=o-1;break}}}for(;o<t.length;){const e=t[o];if("number"==typeof e)break;if(e===n){if(null===r)return void(null!==i&&(t[o+1]=i));if(r===t[o+1])return void(t[o+2]=i)}o++,null!==r&&o++,null!==i&&o++}-1!==s&&(t.splice(s,0,e),o=s+1),t.splice(o++,0,n),null!==r&&t.splice(o++,0,r),null!==i&&t.splice(o++,0,i)}function je(t){return t!==Ie}function Ne(t){return 32767&t}function De(t,e){let n=t>>16,r=e;for(;n>0;)r=r[15],n--;return r}let Me=!0;function Le(t){const e=Me;return Me=t,e}let Fe=0;function Ue(t,e){const n=Qe(t,e);if(-1!==n)return n;const r=e[1];r.firstCreatePass&&(t.injectorIndex=e.length,Ve(r.data,t),Ve(e,null),Ve(r.blueprint,null));const i=He(t,e),o=t.injectorIndex;if(je(i)){const t=Ne(i),n=De(i,e),r=n[1].data;for(let i=0;i<8;i++)e[o+i]=n[t+i]|r[t+i]}return e[o+8]=i,o}function Ve(t,e){t.push(0,0,0,0,0,0,0,0,e)}function Qe(t,e){return-1===t.injectorIndex||t.parent&&t.parent.injectorIndex===t.injectorIndex||null===e[t.injectorIndex+8]?-1:t.injectorIndex}function He(t,e){if(t.parent&&-1!==t.parent.injectorIndex)return t.parent.injectorIndex;let n=0,r=null,i=e;for(;null!==i;){const t=i[1],e=t.type;if(r=2===e?t.declTNode:1===e?i[6]:null,null===r)return Ie;if(n++,i=i[15],-1!==r.injectorIndex)return r.injectorIndex|n<<16}return Ie}function qe(t,e,n){!function(t,e,n){let r;"string"==typeof n?r=n.charCodeAt(0)||0:n.hasOwnProperty(G)&&(r=n[G]),null==r&&(r=n[G]=Fe++);const i=255&r,o=1<<i,s=64&i,a=32&i,u=e.data;128&i?s?a?u[t+7]|=o:u[t+6]|=o:a?u[t+5]|=o:u[t+4]|=o:s?a?u[t+3]|=o:u[t+2]|=o:a?u[t+1]|=o:u[t]|=o}(t,e,n)}function Be(t,e,n){if(n&I.Optional)return t;yt(e,"NodeInjector")}function ze(t,e,n,r){if(n&I.Optional&&void 0===r&&(r=null),0==(n&(I.Self|I.Host))){const i=t[9],o=T(void 0);try{return i?i.get(e,r,n&I.Optional):P(e,r,n&I.Optional)}finally{T(o)}}return Be(r,e,n)}function Ge(t,e,n,r=I.Default,i){if(null!==t){const o=function(t){if("string"==typeof t)return t.charCodeAt(0)||0;const e=t.hasOwnProperty(G)?t[G]:void 0;return"number"==typeof e?e>=0?255&e:Ye:e}(n);if("function"==typeof o){if(!le(e,t,r))return r&I.Host?Be(i,n,r):ze(e,n,r,i);try{const t=o();if(null!=t||r&I.Optional)return t;yt(n)}finally{ge()}}else if("number"==typeof o){let i=null,s=Qe(t,e),a=Ie,u=r&I.Host?e[16][6]:null;for((-1===s||r&I.SkipSelf)&&(a=-1===s?He(t,e):e[s+8],a!==Ie&&Je(r,!1)?(i=e[1],s=Ne(a),e=De(a,e)):s=-1);-1!==s;){const t=e[1];if(Ze(o,s,t.data)){const t=$e(s,e,n,i,r,u);if(t!==We)return t}a=e[s+8],a!==Ie&&Je(r,e[1].data[s+8]===u)&&Ze(o,s,e)?(i=t,s=Ne(a),e=De(a,e)):s=-1}}}return ze(e,n,r,i)}const We={};function Ye(){return new tn(Gt(),qt())}function $e(t,e,n,r,i,o){const s=e[1],a=s.data[t+8],u=Ke(a,s,n,null==r?lt(a)&&Me:r!=s&&0!=(3&a.type),i&I.Host&&o===a);return null!==u?Xe(e,s,u,a):We}function Ke(t,e,n,r,i){const o=t.providerIndexes,s=e.data,a=1048575&o,u=t.directiveStart,c=o>>20,l=i?a+c:t.directiveEnd;for(let h=r?a:a+c;h<l;h++){const t=s[h];if(h<u&&n===t||h>=u&&t.type===n)return h}if(i){const t=s[u];if(t&&dt(t)&&t.type===n)return u}return null}function Xe(t,e,n,r){let i=t[n];const o=e.data;if(i instanceof Se){const s=i;s.resolving&&function(t,e){throw new pt("200",`Circular dependency in DI detected for ${t}`)}(mt(o[n]));const a=Le(s.canSeeViewProviders);s.resolving=!0;const u=s.injectImpl?T(s.injectImpl):null;le(t,r,I.Default);try{i=t[n]=s.factory(void 0,o,t,r),e.firstCreatePass&&n>=r.directiveStart&&function(t,e,n){const{ngOnChanges:r,ngOnInit:i,ngDoCheck:o}=e.type.prototype;if(r){const r=_t(e);(n.preOrderHooks||(n.preOrderHooks=[])).push(t,r),(n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(t,r)}i&&(n.preOrderHooks||(n.preOrderHooks=[])).push(0-t,i),o&&((n.preOrderHooks||(n.preOrderHooks=[])).push(t,o),(n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(t,o))}(n,o[n],e)}finally{null!==u&&T(u),Le(a),s.resolving=!1,ge()}}return i}function Ze(t,e,n){const r=64&t,i=32&t;let o;return o=128&t?r?i?n[e+7]:n[e+6]:i?n[e+5]:n[e+4]:r?i?n[e+3]:n[e+2]:i?n[e+1]:n[e],!!(o&1<<t)}function Je(t,e){return!(t&I.Self||t&I.Host&&e)}class tn{constructor(t,e){this._tNode=t,this._lView=e}get(t,e){return Ge(this._tNode,this._lView,t,void 0,e)}}function en(t){const e=t;if(g(t))return()=>{const t=en(p(e));return t?t():null};let n=ft(e);if(null===n){const t=w(e);n=t&&t.factory}return n||null}function nn(t){return R(()=>{const e=t.prototype.constructor,n=e[z]||en(e),r=Object.prototype;let i=Object.getPrototypeOf(t.prototype).constructor;for(;i&&i!==r;){const t=i[z]||en(i);if(t&&t!==n)return t;i=Object.getPrototypeOf(i)}return t=>new t})}function rn(t){return function(t,e){if("class"===e)return t.classes;if("style"===e)return t.styles;const n=t.attrs;if(n){const t=n.length;let r=0;for(;r<t;){const i=n[r];if(Pe(i))break;if(0===i)r+=2;else if("number"==typeof i)for(r++;r<t&&"string"==typeof n[r];)r++;else{if(i===e)return n[r+1];r+=2}}}return null}(Gt(),t)}const on="__parameters__";function sn(t,e,n){return R(()=>{const r=function(t){return function(...e){if(t){const n=t(...e);for(const t in n)this[t]=n[t]}}}(e);function i(...t){if(this instanceof i)return r.apply(this,t),this;const e=new i(...t);return n.annotation=e,n;function n(t,n,r){const i=t.hasOwnProperty(on)?t[on]:Object.defineProperty(t,on,{value:[]})[on];for(;i.length<=r;)i.push(null);return(i[r]=i[r]||[]).push(e),t}}return n&&(i.prototype=Object.create(n.prototype)),i.prototype.ngMetadataName=t,i.annotationCls=i,i})}class an{constructor(t,e){this._desc=t,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof e?this.__NG_ELEMENT_ID__=e:void 0!==e&&(this.\u0275prov=y({token:this,providedIn:e.providedIn||"root",factory:e.factory}))}toString(){return`InjectionToken ${this._desc}`}}const un=new an("AnalyzeForEntryComponents"),cn=Function;function ln(t,e){void 0===e&&(e=t);for(let n=0;n<t.length;n++){let r=t[n];Array.isArray(r)?(e===t&&(e=t.slice(0,n)),ln(r,e)):e!==t&&e.push(r)}return e}function hn(t,e){t.forEach(t=>Array.isArray(t)?hn(t,e):e(t))}function dn(t,e,n){e>=t.length?t.push(n):t.splice(e,0,n)}function fn(t,e){return e>=t.length-1?t.pop():t.splice(e,1)[0]}function pn(t,e){const n=[];for(let r=0;r<t;r++)n.push(e);return n}function gn(t,e,n){let r=yn(t,e);return r>=0?t[1|r]=n:(r=~r,function(t,e,n,r){let i=t.length;if(i==e)t.push(n,r);else if(1===i)t.push(r,t[0]),t[0]=n;else{for(i--,t.push(t[i-1],t[i]);i>e;)t[i]=t[i-2],i--;t[e]=n,t[e+1]=r}}(t,r,e,n)),r}function mn(t,e){const n=yn(t,e);if(n>=0)return t[1|n]}function yn(t,e){return function(t,e,n){let r=0,i=t.length>>1;for(;i!==r;){const n=r+(i-r>>1),o=t[n<<1];if(e===o)return n<<1;o>e?i=n:r=n+1}return~(i<<1)}(t,e)}const bn={},vn=/\n/gm,_n="__source",wn=u({provide:String,useValue:u});let Cn;function On(t){const e=Cn;return Cn=t,e}function En(t,e=I.Default){if(void 0===Cn)throw new Error("inject() must be called from an injection context");return null===Cn?P(t,void 0,e):Cn.get(t,e&I.Optional?null:void 0,e)}function xn(t,e=I.Default){return(S||En)(p(t),e)}function In(t){const e=[];for(let n=0;n<t.length;n++){const r=p(t[n]);if(Array.isArray(r)){if(0===r.length)throw new Error("Arguments array must have arguments.");let t,n=I.Default;for(let e=0;e<r.length;e++){const i=r[e],o=i.__NG_DI_FLAG__;"number"==typeof o?-1===o?t=i.token:n|=o:t=i}e.push(xn(t,n))}else e.push(xn(r))}return e}function Sn(t,e){return t.__NG_DI_FLAG__=e,t.prototype.__NG_DI_FLAG__=e,t}const Tn=Sn(sn("Inject",t=>({token:t})),-1),Pn=Sn(sn("Optional"),8),Rn=Sn(sn("SkipSelf"),4);let An;function kn(t){var e;return(null===(e=function(){if(void 0===An&&(An=null,L.trustedTypes))try{An=L.trustedTypes.createPolicy("angular",{createHTML:t=>t,createScript:t=>t,createScriptURL:t=>t})}catch(e){}return An}())||void 0===e?void 0:e.createHTML(t))||t}class jn{constructor(t){this.changingThisBreaksApplicationSecurity=t}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}class Nn extends jn{getTypeName(){return"HTML"}}class Dn extends jn{getTypeName(){return"Style"}}class Mn extends jn{getTypeName(){return"Script"}}class Ln extends jn{getTypeName(){return"URL"}}class Fn extends jn{getTypeName(){return"ResourceURL"}}function Un(t){return t instanceof jn?t.changingThisBreaksApplicationSecurity:t}function Vn(t,e){const n=Qn(t);if(null!=n&&n!==e){if("ResourceURL"===n&&"URL"===e)return!0;throw new Error(`Required a safe ${e}, got a ${n} (see https://g.co/ng/security#xss)`)}return n===e}function Qn(t){return t instanceof jn&&t.getTypeName()||null}function Hn(t){return new Nn(t)}function qn(t){return new Dn(t)}function Bn(t){return new Mn(t)}function zn(t){return new Ln(t)}function Gn(t){return new Fn(t)}function Wn(t){const e=new $n(t);return function(){try{return!!(new window.DOMParser).parseFromString(kn(""),"text/html")}catch(t){return!1}}()?new Yn(e):e}class Yn{constructor(t){this.inertDocumentHelper=t}getInertBodyElement(t){t="<body><remove></remove>"+t;try{const e=(new window.DOMParser).parseFromString(kn(t),"text/html").body;return null===e?this.inertDocumentHelper.getInertBodyElement(t):(e.removeChild(e.firstChild),e)}catch(e){return null}}}class $n{constructor(t){if(this.defaultDoc=t,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),null==this.inertDocument.body){const t=this.inertDocument.createElement("html");this.inertDocument.appendChild(t);const e=this.inertDocument.createElement("body");t.appendChild(e)}}getInertBodyElement(t){const e=this.inertDocument.createElement("template");if("content"in e)return e.innerHTML=kn(t),e;const n=this.inertDocument.createElement("body");return n.innerHTML=kn(t),this.defaultDoc.documentMode&&this.stripCustomNsAttrs(n),n}stripCustomNsAttrs(t){const e=t.attributes;for(let r=e.length-1;0<r;r--){const n=e.item(r).name;"xmlns:ns1"!==n&&0!==n.indexOf("ns1:")||t.removeAttribute(n)}let n=t.firstChild;for(;n;)n.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(n),n=n.nextSibling}}const Kn=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,Xn=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;function Zn(t){return(t=String(t)).match(Kn)||t.match(Xn)?t:"unsafe:"+t}function Jn(t){return(t=String(t)).split(",").map(t=>Zn(t.trim())).join(", ")}function tr(t){const e={};for(const n of t.split(","))e[n]=!0;return e}function er(...t){const e={};for(const n of t)for(const t in n)n.hasOwnProperty(t)&&(e[t]=!0);return e}const nr=tr("area,br,col,hr,img,wbr"),rr=tr("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),ir=tr("rp,rt"),or=er(ir,rr),sr=er(nr,er(rr,tr("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),er(ir,tr("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),or),ar=tr("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),ur=tr("srcset"),cr=er(ar,ur,tr("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),tr("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),lr=tr("script,style,template");class hr{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(t){let e=t.firstChild,n=!0;for(;e;)if(e.nodeType===Node.ELEMENT_NODE?n=this.startElement(e):e.nodeType===Node.TEXT_NODE?this.chars(e.nodeValue):this.sanitizedSomething=!0,n&&e.firstChild)e=e.firstChild;else for(;e;){e.nodeType===Node.ELEMENT_NODE&&this.endElement(e);let t=this.checkClobberedElement(e,e.nextSibling);if(t){e=t;break}e=this.checkClobberedElement(e,e.parentNode)}return this.buf.join("")}startElement(t){const e=t.nodeName.toLowerCase();if(!sr.hasOwnProperty(e))return this.sanitizedSomething=!0,!lr.hasOwnProperty(e);this.buf.push("<"),this.buf.push(e);const n=t.attributes;for(let r=0;r<n.length;r++){const t=n.item(r),e=t.name,i=e.toLowerCase();if(!cr.hasOwnProperty(i)){this.sanitizedSomething=!0;continue}let o=t.value;ar[i]&&(o=Zn(o)),ur[i]&&(o=Jn(o)),this.buf.push(" ",e,'="',pr(o),'"')}return this.buf.push(">"),!0}endElement(t){const e=t.nodeName.toLowerCase();sr.hasOwnProperty(e)&&!nr.hasOwnProperty(e)&&(this.buf.push("</"),this.buf.push(e),this.buf.push(">"))}chars(t){this.buf.push(pr(t))}checkClobberedElement(t,e){if(e&&(t.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${t.outerHTML}`);return e}}const dr=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,fr=/([^\#-~ |!])/g;function pr(t){return t.replace(/&/g,"&amp;").replace(dr,function(t){return"&#"+(1024*(t.charCodeAt(0)-55296)+(t.charCodeAt(1)-56320)+65536)+";"}).replace(fr,function(t){return"&#"+t.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let gr;function mr(t,e){let n=null;try{gr=gr||Wn(t);let r=e?String(e):"";n=gr.getInertBodyElement(r);let i=5,o=r;do{if(0===i)throw new Error("Failed to sanitize html because the input is unstable");i--,r=o,o=n.innerHTML,n=gr.getInertBodyElement(r)}while(r!==o);return kn((new hr).sanitizeChildren(yr(n)||n))}finally{if(n){const t=yr(n)||n;for(;t.firstChild;)t.removeChild(t.firstChild)}}}function yr(t){return"content"in t&&function(t){return t.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===t.nodeName}(t)?t.content:null}var br=function(t){return t[t.NONE=0]="NONE",t[t.HTML=1]="HTML",t[t.STYLE=2]="STYLE",t[t.SCRIPT=3]="SCRIPT",t[t.URL=4]="URL",t[t.RESOURCE_URL=5]="RESOURCE_URL",t}({});function vr(t){const e=function(){const t=qt();return t&&t[12]}();return e?e.sanitize(br.URL,t)||"":Vn(t,"URL")?Un(t):Zn(gt(t))}function _r(t){return t.ngDebugContext}function wr(t){return t.ngOriginalError}function Cr(t,...e){t.error(...e)}class Or{constructor(){this._console=console}handleError(t){const e=this._findOriginalError(t),n=this._findContext(t),r=function(t){return t.ngErrorLogger||Cr}(t);r(this._console,"ERROR",t),e&&r(this._console,"ORIGINAL ERROR",e),n&&r(this._console,"ERROR CONTEXT",n)}_findContext(t){return t?_r(t)?_r(t):this._findContext(wr(t)):null}_findOriginalError(t){let e=wr(t);for(;e&&wr(e);)e=wr(e);return e}}const Er=/-->/g;function xr(t,e){t.__ngContext__=e}const Ir=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(L))();function Sr(t){return t instanceof Function?t():t}var Tr=function(t){return t[t.Important=1]="Important",t[t.DashCase=2]="DashCase",t}({});let Pr;function Rr(t,e){return Pr(t,e)}function Ar(t){const e=t[3];return ut(e)?e[3]:e}function kr(t){return Nr(t[13])}function jr(t){return Nr(t[4])}function Nr(t){for(;null!==t&&!ut(t);)t=t[4];return t}function Dr(t,e,n,r,i){if(null!=r){let o,s=!1;ut(r)?o=r:at(r)&&(s=!0,r=r[0]);const a=Pt(r);0===t&&null!==n?null==i?Wr(e,n,a):Gr(e,n,a,i||null,!0):1===t&&null!==n?Gr(e,n,a,i||null,!0):2===t?ii(e,a,s):3===t&&e.destroyNode(a),null!=o&&function(t,e,n,r,i){const o=n[7];o!==Pt(n)&&Dr(e,t,r,o,i);for(let s=st;s<n.length;s++){const i=n[s];si(i[1],i,t,e,r,o)}}(e,t,o,n,i)}}function Mr(t,e){return St(t)?t.createText(e):t.createTextNode(e)}function Lr(t,e,n){St(t)?t.setValue(e,n):e.textContent=n}function Fr(t,e){return t.createComment(function(t){return t.replace(Er,"-\u200b-\u200b>")}(e))}function Ur(t,e,n){return St(t)?t.createElement(e,n):null===n?t.createElement(e):t.createElementNS(n,e)}function Vr(t,e){const n=t[9],r=n.indexOf(e),i=e[3];1024&e[2]&&(e[2]&=-1025,Vt(i,-1)),n.splice(r,1)}function Qr(t,e){if(t.length<=st)return;const n=st+e,r=t[n];if(r){const o=r[17];null!==o&&o!==t&&Vr(o,r),e>0&&(t[n-1][4]=r[4]);const s=fn(t,st+e);si(r[1],i=r,i[11],2,null,null),i[0]=null,i[6]=null;const a=s[19];null!==a&&a.detachView(s[1]),r[3]=null,r[4]=null,r[2]&=-129}var i;return r}function Hr(t,e){if(!(256&e[2])){const n=e[11];St(n)&&n.destroyNode&&si(t,e,n,3,null,null),function(t){let e=t[13];if(!e)return qr(t[1],t);for(;e;){let n=null;if(at(e))n=e[13];else{const t=e[10];t&&(n=t)}if(!n){for(;e&&!e[4]&&e!==t;)at(e)&&qr(e[1],e),e=e[3];null===e&&(e=t),at(e)&&qr(e[1],e),n=e&&e[4]}e=n}}(e)}}function qr(t,e){if(!(256&e[2])){e[2]&=-129,e[2]|=256,function(t,e){let n;if(null!=t&&null!=(n=t.destroyHooks))for(let r=0;r<n.length;r+=2){const t=e[n[r]];if(!(t instanceof Se)){const e=n[r+1];if(Array.isArray(e))for(let n=0;n<e.length;n+=2)e[n+1].call(t[e[n]]);else e.call(t)}}}(t,e),function(t,e){const n=t.cleanup,r=e[7];let i=-1;if(null!==n)for(let o=0;o<n.length-1;o+=2)if("string"==typeof n[o]){const t=n[o+1],s="function"==typeof t?t(e):Pt(e[t]),a=r[i=n[o+2]],u=n[o+3];"boolean"==typeof u?s.removeEventListener(n[o],a,u):u>=0?r[i=u]():r[i=-u].unsubscribe(),o+=2}else{const t=r[i=n[o+1]];n[o].call(t)}if(null!==r){for(let t=i+1;t<r.length;t++)(0,r[t])();e[7]=null}}(t,e),1===e[1].type&&St(e[11])&&e[11].destroy();const n=e[17];if(null!==n&&ut(e[3])){n!==e[3]&&Vr(n,e);const r=e[19];null!==r&&r.detachView(t)}}}function Br(t,e,n){return zr(t,e.parent,n)}function zr(t,e,n){let r=e;for(;null!==r&&40&r.type;)r=(e=r).parent;if(null===r)return n[0];if(2&r.flags){const e=t.data[r.directiveStart].encapsulation;if(e===k.None||e===k.Emulated)return null}return At(r,n)}function Gr(t,e,n,r,i){St(t)?t.insertBefore(e,n,r,i):e.insertBefore(n,r,i)}function Wr(t,e,n){St(t)?t.appendChild(e,n):e.appendChild(n)}function Yr(t,e,n,r,i){null!==r?Gr(t,e,n,r,i):Wr(t,e,n)}function $r(t,e){return St(t)?t.parentNode(e):e.parentNode}function Kr(t,e,n){return Jr(t,e,n)}function Xr(t,e,n){return 40&t.type?At(t,n):null}let Zr,Jr=Xr;function ti(t,e){Jr=t,Zr=e}function ei(t,e,n,r){const i=Br(t,r,e),o=e[11],s=Kr(r.parent||e[6],r,e);if(null!=i)if(Array.isArray(n))for(let a=0;a<n.length;a++)Yr(o,i,n[a],s,!1);else Yr(o,i,n,s,!1);void 0!==Zr&&Zr(o,r,e,n,i)}function ni(t,e){if(null!==e){const n=e.type;if(3&n)return At(e,t);if(4&n)return ri(-1,t[e.index]);if(8&n){const n=e.child;if(null!==n)return ni(t,n);{const n=t[e.index];return ut(n)?ri(-1,n):Pt(n)}}if(32&n)return Rr(e,t)()||Pt(t[e.index]);{const n=t[16],r=n[6],i=Ar(n),o=r.projection[e.projection];return null!=o?ni(i,o):ni(t,e.next)}}return null}function ri(t,e){const n=st+t+1;if(n<e.length){const t=e[n],r=t[1].firstChild;if(null!==r)return ni(t,r)}return e[7]}function ii(t,e,n){const r=$r(t,e);r&&function(t,e,n,r){St(t)?t.removeChild(e,n,r):e.removeChild(n)}(t,r,e,n)}function oi(t,e,n,r,i,o,s){for(;null!=n;){const a=r[n.index],u=n.type;if(s&&0===e&&(a&&xr(Pt(a),r),n.flags|=4),64!=(64&n.flags))if(8&u)oi(t,e,n.child,r,i,o,!1),Dr(e,t,i,a,o);else if(32&u){const s=Rr(n,r);let u;for(;u=s();)Dr(e,t,i,u,o);Dr(e,t,i,a,o)}else 16&u?ai(t,e,r,n,i,o):Dr(e,t,i,a,o);n=s?n.projectionNext:n.next}}function si(t,e,n,r,i,o){oi(n,r,t.firstChild,e,i,o,!1)}function ai(t,e,n,r,i,o){const s=n[16],a=s[6].projection[r.projection];if(Array.isArray(a))for(let u=0;u<a.length;u++)Dr(e,t,i,a[u],o);else oi(t,e,a,s[3],i,o,!0)}function ui(t,e,n){St(t)?t.setAttribute(e,"style",n):e.style.cssText=n}function ci(t,e,n){St(t)?""===n?t.removeAttribute(e,"class"):t.setAttribute(e,"class",n):e.className=n}function li(t,e,n){let r=t.length;for(;;){const i=t.indexOf(e,n);if(-1===i)return i;if(0===i||t.charCodeAt(i-1)<=32){const n=e.length;if(i+n===r||t.charCodeAt(i+n)<=32)return i}n=i+1}}const hi="ng-template";function di(t,e,n){let r=0;for(;r<t.length;){let i=t[r++];if(n&&"class"===i){if(i=t[r],-1!==li(i.toLowerCase(),e,0))return!0}else if(1===i){for(;r<t.length&&"string"==typeof(i=t[r++]);)if(i.toLowerCase()===e)return!0;return!1}}return!1}function fi(t){return 4===t.type&&t.value!==hi}function pi(t,e,n){return e===(4!==t.type||n?t.value:hi)}function gi(t,e,n){let r=4;const i=t.attrs||[],o=function(t){for(let e=0;e<t.length;e++)if(Pe(t[e]))return e;return t.length}(i);let s=!1;for(let a=0;a<e.length;a++){const u=e[a];if("number"!=typeof u){if(!s)if(4&r){if(r=2|1&r,""!==u&&!pi(t,u,n)||""===u&&1===e.length){if(mi(r))return!1;s=!0}}else{const c=8&r?u:e[++a];if(8&r&&null!==t.attrs){if(!di(t.attrs,c,n)){if(mi(r))return!1;s=!0}continue}const l=yi(8&r?"class":u,i,fi(t),n);if(-1===l){if(mi(r))return!1;s=!0;continue}if(""!==c){let t;t=l>o?"":i[l+1].toLowerCase();const e=8&r?t:null;if(e&&-1!==li(e,c,0)||2&r&&c!==t){if(mi(r))return!1;s=!0}}}}else{if(!s&&!mi(r)&&!mi(u))return!1;if(s&&mi(u))continue;s=!1,r=u|1&r}}return mi(r)||s}function mi(t){return 0==(1&t)}function yi(t,e,n,r){if(null===e)return-1;let i=0;if(r||!n){let n=!1;for(;i<e.length;){const r=e[i];if(r===t)return i;if(3===r||6===r)n=!0;else{if(1===r||2===r){let t=e[++i];for(;"string"==typeof t;)t=e[++i];continue}if(4===r)break;if(0===r){i+=4;continue}}i+=n?1:2}return-1}return function(t,e){let n=t.indexOf(4);if(n>-1)for(n++;n<t.length;){const r=t[n];if("number"==typeof r)return-1;if(r===e)return n;n++}return-1}(e,t)}function bi(t,e,n=!1){for(let r=0;r<e.length;r++)if(gi(t,e[r],n))return!0;return!1}function vi(t,e){t:for(let n=0;n<e.length;n++){const r=e[n];if(t.length===r.length){for(let e=0;e<t.length;e++)if(t[e]!==r[e])continue t;return!0}}return!1}function _i(t,e){return t?":not("+e.trim()+")":e}function wi(t){let e=t[0],n=1,r=2,i="",o=!1;for(;n<t.length;){let s=t[n];if("string"==typeof s)if(2&r){const e=t[++n];i+="["+s+(e.length>0?'="'+e+'"':"")+"]"}else 8&r?i+="."+s:4&r&&(i+=" "+s);else""===i||mi(s)||(e+=_i(o,i),i=""),r=s,o=o||!mi(r);n++}return""!==i&&(e+=_i(o,i)),e}const Ci={};function Oi(t){Ei(Bt(),qt(),ye()+t,Zt())}function Ei(t,e,n,r){if(!r)if(3==(3&e[2])){const r=t.preOrderCheckHooks;null!==r&&we(e,r,n)}else{const r=t.preOrderHooks;null!==r&&Ce(e,r,0,n)}be(n)}function xi(t,e){return t<<17|e<<2}function Ii(t){return t>>17&32767}function Si(t){return 2|t}function Ti(t){return(131068&t)>>2}function Pi(t,e){return-131069&t|e<<2}function Ri(t){return 1|t}function Ai(t,e){const n=t.contentQueries;if(null!==n)for(let r=0;r<n.length;r+=2){const i=n[r],o=n[r+1];if(-1!==o){const n=t.data[o];ue(i),n.contentQueries(2,e[o],o)}}}function ki(t,e,n,r,i,o,s,a,u,c){const l=e.blueprint.slice();return l[0]=i,l[2]=140|r,Ut(l),l[3]=l[15]=t,l[8]=n,l[10]=s||t&&t[10],l[11]=a||t&&t[11],l[12]=u||t&&t[12]||null,l[9]=c||t&&t[9]||null,l[6]=o,l[16]=2==e.type?t[16]:l,l}function ji(t,e,n,r,i){let o=t.data[e];if(null===o)o=Ni(t,e,n,r,i),Qt.lFrame.inI18n&&(o.flags|=64);else if(64&o.type){o.type=n,o.value=r,o.attrs=i;const t=Yt();o.injectorIndex=null===t?-1:t.injectorIndex}return $t(o,!0),o}function Ni(t,e,n,r,i){const o=Wt(),s=Kt(),a=t.data[e]=function(t,e,n,r,i,o){return{type:n,index:r,insertBeforeIndex:null,injectorIndex:e?e.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,s?o:o&&o.parent,n,e,r,i);return null===t.firstChild&&(t.firstChild=a),null!==o&&(s?null==o.child&&null!==a.parent&&(o.child=a):null===o.next&&(o.next=a)),a}function Di(t,e,n,r){if(0===n)return-1;const i=e.length;for(let o=0;o<n;o++)e.push(r),t.blueprint.push(r),t.data.push(null);return i}function Mi(t,e,n){he(e);try{const r=t.viewQuery;null!==r&&po(1,r,n);const i=t.template;null!==i&&Ui(t,e,i,1,n),t.firstCreatePass&&(t.firstCreatePass=!1),t.staticContentQueries&&Ai(t,e),t.staticViewQueries&&po(2,t.viewQuery,n);const o=t.components;null!==o&&function(t,e){for(let n=0;n<e.length;n++)uo(t,e[n])}(e,o)}catch(r){throw t.firstCreatePass&&(t.incompleteFirstPass=!0),r}finally{e[2]&=-5,me()}}function Li(t,e,n,r){const i=e[2];if(256==(256&i))return;he(e);const o=Zt();try{Ut(e),Qt.lFrame.bindingIndex=t.bindingStartIndex,null!==n&&Ui(t,e,n,2,r);const s=3==(3&i);if(!o)if(s){const n=t.preOrderCheckHooks;null!==n&&we(e,n,null)}else{const n=t.preOrderHooks;null!==n&&Ce(e,n,0,null),Oe(e,0)}if(function(t){for(let e=kr(t);null!==e;e=jr(e)){if(!e[2])continue;const t=e[9];for(let e=0;e<t.length;e++){const n=t[e],r=n[3];0==(1024&n[2])&&Vt(r,1),n[2]|=1024}}}(e),function(t){for(let e=kr(t);null!==e;e=jr(e))for(let t=st;t<e.length;t++){const n=e[t],r=n[1];Lt(n)&&Li(r,n,r.template,n[8])}}(e),null!==t.contentQueries&&Ai(t,e),!o)if(s){const n=t.contentCheckHooks;null!==n&&we(e,n)}else{const n=t.contentHooks;null!==n&&Ce(e,n,1),Oe(e,1)}!function(t,e){const n=t.hostBindingOpCodes;if(null!==n)try{for(let t=0;t<n.length;t++){const r=n[t];if(r<0)be(~r);else{const i=r,o=n[++t],s=n[++t];oe(o,i),s(2,e[i])}}}finally{be(-1)}}(t,e);const a=t.components;null!==a&&function(t,e){for(let n=0;n<e.length;n++)so(t,e[n])}(e,a);const u=t.viewQuery;if(null!==u&&po(2,u,r),!o)if(s){const n=t.viewCheckHooks;null!==n&&we(e,n)}else{const n=t.viewHooks;null!==n&&Ce(e,n,2),Oe(e,2)}!0===t.firstUpdatePass&&(t.firstUpdatePass=!1),o||(e[2]&=-73),1024&e[2]&&(e[2]&=-1025,Vt(e[3],-1))}finally{me()}}function Fi(t,e,n,r){const i=e[10],o=!Zt(),s=Mt(e);try{o&&!s&&i.begin&&i.begin(),s&&Mi(t,e,r),Li(t,e,n,r)}finally{o&&!s&&i.end&&i.end()}}function Ui(t,e,n,r,i){const o=ye();try{be(-1),2&r&&e.length>ot&&Ei(t,e,ot,Zt()),n(r,i)}finally{be(o)}}function Vi(t,e,n){if(ct(e)){const r=e.directiveEnd;for(let i=e.directiveStart;i<r;i++){const e=t.data[i];e.contentQueries&&e.contentQueries(1,n[i],i)}}}function Qi(t,e,n){Ht()&&(function(t,e,n,r){const i=n.directiveStart,o=n.directiveEnd;t.firstCreatePass||Ue(n,e),xr(r,e);const s=n.initialInputs;for(let a=i;a<o;a++){const r=t.data[a],o=dt(r);o&&eo(e,n,r);const u=Xe(e,t,a,n);xr(u,e),null!==s&&ro(0,a-i,u,r,0,s),o&&(Nt(n.index,e)[8]=u)}}(t,e,n,At(n,e)),128==(128&n.flags)&&function(t,e,n){const r=n.directiveStart,i=n.directiveEnd,o=n.index,s=Qt.lFrame.currentDirectiveIndex;try{be(o);for(let n=r;n<i;n++){const r=t.data[n],i=e[n];se(n),null===r.hostBindings&&0===r.hostVars&&null===r.hostAttrs||Ki(r,i)}}finally{be(-1),se(s)}}(t,e,n))}function Hi(t,e,n=At){const r=e.localNames;if(null!==r){let i=e.index+1;for(let o=0;o<r.length;o+=2){const s=r[o+1],a=-1===s?n(e,t):t[s];t[i++]=a}}}function qi(t){const e=t.tView;return null===e||e.incompleteFirstPass?t.tView=Bi(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts):e}function Bi(t,e,n,r,i,o,s,a,u,c){const l=ot+r,h=l+i,d=function(t,e){const n=[];for(let r=0;r<e;r++)n.push(r<t?null:Ci);return n}(l,h),f="function"==typeof c?c():c;return d[1]={type:t,blueprint:d,template:n,queries:null,viewQuery:a,declTNode:e,data:d.slice().fill(null,l),bindingStartIndex:l,expandoStartIndex:h,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof o?o():o,pipeRegistry:"function"==typeof s?s():s,firstChild:null,schemas:u,consts:f,incompleteFirstPass:!1}}function zi(t,e,n,r){const i=mo(e);null===n?i.push(r):(i.push(n),t.firstCreatePass&&yo(t).push(r,i.length-1))}function Gi(t,e,n){for(let r in t)if(t.hasOwnProperty(r)){const i=t[r];(n=null===n?{}:n).hasOwnProperty(r)?n[r].push(e,i):n[r]=[e,i]}return n}function Wi(t,e,n,r,i,o,s,a){const u=At(e,n);let c,l=e.inputs;!a&&null!=l&&(c=l[r])?(vo(t,n,c,r,i),lt(e)&&function(t,e){const n=Nt(e,t);16&n[2]||(n[2]|=64)}(n,e.index)):3&e.type&&(r=function(t){return"class"===t?"className":"for"===t?"htmlFor":"formaction"===t?"formAction":"innerHtml"===t?"innerHTML":"readonly"===t?"readOnly":"tabindex"===t?"tabIndex":t}(r),i=null!=s?s(i,e.value||"",r):i,St(o)?o.setProperty(u,r,i):Re(r)||(u.setProperty?u.setProperty(r,i):u[r]=i))}function Yi(t,e,n,r){let i=!1;if(Ht()){const o=function(t,e,n){const r=t.directiveRegistry;let i=null;if(r)for(let o=0;o<r.length;o++){const s=r[o];bi(n,s.selectors,!1)&&(i||(i=[]),qe(Ue(n,e),t,s.type),dt(s)?(Xi(t,n),i.unshift(s)):i.push(s))}return i}(t,e,n),s=null===r?null:{"":-1};if(null!==o){i=!0,Ji(n,t.data.length,o.length);for(let t=0;t<o.length;t++){const e=o[t];e.providersResolver&&e.providersResolver(e)}let r=!1,a=!1,u=Di(t,e,o.length,null);for(let i=0;i<o.length;i++){const c=o[i];n.mergedAttrs=Ae(n.mergedAttrs,c.hostAttrs),to(t,n,e,u,c),Zi(u,c,s),null!==c.contentQueries&&(n.flags|=8),null===c.hostBindings&&null===c.hostAttrs&&0===c.hostVars||(n.flags|=128);const l=c.type.prototype;!r&&(l.ngOnChanges||l.ngOnInit||l.ngDoCheck)&&((t.preOrderHooks||(t.preOrderHooks=[])).push(n.index),r=!0),a||!l.ngOnChanges&&!l.ngDoCheck||((t.preOrderCheckHooks||(t.preOrderCheckHooks=[])).push(n.index),a=!0),u++}!function(t,e){const n=e.directiveEnd,r=t.data,i=e.attrs,o=[];let s=null,a=null;for(let u=e.directiveStart;u<n;u++){const t=r[u],n=t.inputs,c=null===i||fi(e)?null:io(n,i);o.push(c),s=Gi(n,u,s),a=Gi(t.outputs,u,a)}null!==s&&(s.hasOwnProperty("class")&&(e.flags|=16),s.hasOwnProperty("style")&&(e.flags|=32)),e.initialInputs=o,e.inputs=s,e.outputs=a}(t,n)}s&&function(t,e,n){if(e){const r=t.localNames=[];for(let t=0;t<e.length;t+=2){const i=n[e[t+1]];if(null==i)throw new pt("301",`Export of name '${e[t+1]}' not found!`);r.push(e[t],i)}}}(n,r,s)}return n.mergedAttrs=Ae(n.mergedAttrs,n.attrs),i}function $i(t,e,n,r,i,o){const s=o.hostBindings;if(s){let n=t.hostBindingOpCodes;null===n&&(n=t.hostBindingOpCodes=[]);const o=~e.index;(function(t){let e=t.length;for(;e>0;){const n=t[--e];if("number"==typeof n&&n<0)return n}return 0})(n)!=o&&n.push(o),n.push(r,i,s)}}function Ki(t,e){null!==t.hostBindings&&t.hostBindings(1,e)}function Xi(t,e){e.flags|=2,(t.components||(t.components=[])).push(e.index)}function Zi(t,e,n){if(n){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)n[e.exportAs[r]]=t;dt(e)&&(n[""]=t)}}function Ji(t,e,n){t.flags|=1,t.directiveStart=e,t.directiveEnd=e+n,t.providerIndexes=e}function to(t,e,n,r,i){t.data[r]=i;const o=i.factory||(i.factory=ft(i.type)),s=new Se(o,dt(i),null);t.blueprint[r]=s,n[r]=s,$i(t,e,0,r,Di(t,n,i.hostVars,Ci),i)}function eo(t,e,n){const r=At(e,t),i=qi(n),o=t[10],s=co(t,ki(t,i,null,n.onPush?64:16,r,e,o,o.createRenderer(r,n),null,null));t[e.index]=s}function no(t,e,n,r,i,o,s){if(null==o)St(t)?t.removeAttribute(e,i,n):e.removeAttribute(i);else{const a=null==s?gt(o):s(o,r||"",i);St(t)?t.setAttribute(e,i,a,n):n?e.setAttributeNS(n,i,a):e.setAttribute(i,a)}}function ro(t,e,n,r,i,o){const s=o[e];if(null!==s){const t=r.setInput;for(let e=0;e<s.length;){const i=s[e++],o=s[e++],a=s[e++];null!==t?r.setInput(n,a,i,o):n[o]=a}}}function io(t,e){let n=null,r=0;for(;r<e.length;){const i=e[r];if(0!==i)if(5!==i){if("number"==typeof i)break;t.hasOwnProperty(i)&&(null===n&&(n=[]),n.push(i,t[i],e[r+1])),r+=2}else r+=2;else r+=4}return n}function oo(t,e,n,r){return new Array(t,!0,!1,e,null,0,r,n,null,null)}function so(t,e){const n=Nt(e,t);if(Lt(n)){const t=n[1];80&n[2]?Li(t,n,t.template,n[8]):n[5]>0&&ao(n)}}function ao(t){for(let n=kr(t);null!==n;n=jr(n))for(let t=st;t<n.length;t++){const e=n[t];if(1024&e[2]){const t=e[1];Li(t,e,t.template,e[8])}else e[5]>0&&ao(e)}const e=t[1].components;if(null!==e)for(let n=0;n<e.length;n++){const r=Nt(e[n],t);Lt(r)&&r[5]>0&&ao(r)}}function uo(t,e){const n=Nt(e,t),r=n[1];!function(t,e){for(let n=e.length;n<t.blueprint.length;n++)e.push(t.blueprint[n])}(r,n),Mi(r,n,n[8])}function co(t,e){return t[13]?t[14][4]=e:t[13]=e,t[14]=e,e}function lo(t){for(;t;){t[2]|=64;const e=Ar(t);if(0!=(512&t[2])&&!e)return t;t=e}return null}function ho(t,e,n){const r=e[10];r.begin&&r.begin();try{Li(t,e,t.template,n)}catch(i){throw bo(e,i),i}finally{r.end&&r.end()}}function fo(t){!function(t){for(let e=0;e<t.components.length;e++){const n=t.components[e],r=Dt(n),i=r[1];Fi(i,r,i.template,n)}}(t[8])}function po(t,e,n){ue(0),e(t,n)}const go=(()=>Promise.resolve(null))();function mo(t){return t[7]||(t[7]=[])}function yo(t){return t.cleanup||(t.cleanup=[])}function bo(t,e){const n=t[9],r=n?n.get(Or,null):null;r&&r.handleError(e)}function vo(t,e,n,r,i){for(let o=0;o<n.length;){const s=n[o++],a=n[o++],u=e[s],c=t.data[s];null!==c.setInput?c.setInput(u,i,r,a):u[a]=i}}function _o(t,e,n){const r=Rt(e,t);Lr(t[11],r,n)}function wo(t,e,n){let r=n?t.styles:null,i=n?t.classes:null,o=0;if(null!==e)for(let s=0;s<e.length;s++){const t=e[s];"number"==typeof t?o=t:1==o?i=h(i,t):2==o&&(r=h(r,t+": "+e[++s]+";"))}n?t.styles=r:t.stylesWithoutHost=r,n?t.classes=i:t.classesWithoutHost=i}const Co=new an("INJECTOR",-1);class Oo{get(t,e=bn){if(e===bn){const e=new Error(`NullInjectorError: No provider for ${l(t)}!`);throw e.name="NullInjectorError",e}return e}}const Eo=new an("Set Injector scope."),xo={},Io={},So=[];let To;function Po(){return void 0===To&&(To=new Oo),To}function Ro(t,e=null,n=null,r){return new Ao(t,n,e||Po(),r)}class Ao{constructor(t,e,n,r=null){this.parent=n,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const i=[];e&&hn(e,n=>this.processProvider(n,t,e)),hn([t],t=>this.processInjectorType(t,[],i)),this.records.set(Co,No(void 0,this));const o=this.records.get(Eo);this.scope=null!=o?o.value:null,this.source=r||("object"==typeof t?null:l(t))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(t=>t.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(t,e=bn,n=I.Default){this.assertNotDestroyed();const r=On(this);try{if(!(n&I.SkipSelf)){let e=this.records.get(t);if(void 0===e){const n=("function"==typeof(i=t)||"object"==typeof i&&i instanceof an)&&v(t);e=n&&this.injectableDefInScope(n)?No(ko(t),xo):null,this.records.set(t,e)}if(null!=e)return this.hydrate(t,e)}return(n&I.Self?Po():this.parent).get(t,e=n&I.Optional&&e===bn?null:e)}catch(o){if("NullInjectorError"===o.name){if((o.ngTempTokenPath=o.ngTempTokenPath||[]).unshift(l(t)),r)throw o;return function(t,e,n,r){const i=t.ngTempTokenPath;throw e[_n]&&i.unshift(e[_n]),t.message=function(t,e,n,r=null){t=t&&"\n"===t.charAt(0)&&"\u0275"==t.charAt(1)?t.substr(2):t;let i=l(e);if(Array.isArray(e))i=e.map(l).join(" -> ");else if("object"==typeof e){let t=[];for(let n in e)if(e.hasOwnProperty(n)){let r=e[n];t.push(n+":"+("string"==typeof r?JSON.stringify(r):l(r)))}i=`{${t.join(", ")}}`}return`${n}${r?"("+r+")":""}[${i}]: ${t.replace(vn,"\n  ")}`}("\n"+t.message,i,n,r),t.ngTokenPath=i,t.ngTempTokenPath=null,t}(o,t,"R3InjectorError",this.source)}throw o}finally{On(r)}var i}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(t=>this.get(t))}toString(){const t=[];return this.records.forEach((e,n)=>t.push(l(n))),`R3Injector[${t.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Error("Injector has already been destroyed.")}processInjectorType(t,e,n){if(!(t=p(t)))return!1;let r=w(t);const i=null==r&&t.ngModule||void 0,o=void 0===i?t:i,s=-1!==n.indexOf(o);if(void 0!==i&&(r=w(i)),null==r)return!1;if(null!=r.imports&&!s){let t;n.push(o);try{hn(r.imports,r=>{this.processInjectorType(r,e,n)&&(void 0===t&&(t=[]),t.push(r))})}finally{}if(void 0!==t)for(let e=0;e<t.length;e++){const{ngModule:n,providers:r}=t[e];hn(r,t=>this.processProvider(t,n,r||So))}}this.injectorDefTypes.add(o),this.records.set(o,No(r.factory,xo));const a=r.providers;if(null!=a&&!s){const e=t;hn(a,t=>this.processProvider(t,e,a))}return void 0!==i&&void 0!==t.providers}processProvider(t,e,n){let r=Mo(t=p(t))?t:p(t&&t.provide);const i=function(t,e,n){return Do(t)?No(void 0,t.useValue):No(jo(t),xo)}(t);if(Mo(t)||!0!==t.multi)this.records.get(r);else{let e=this.records.get(r);e||(e=No(void 0,xo,!0),e.factory=()=>In(e.multi),this.records.set(r,e)),r=t,e.multi.push(t)}this.records.set(r,i)}hydrate(t,e){var n;return e.value===xo&&(e.value=Io,e.value=e.factory()),"object"==typeof e.value&&e.value&&null!==(n=e.value)&&"object"==typeof n&&"function"==typeof n.ngOnDestroy&&this.onDestroy.add(e.value),e.value}injectableDefInScope(t){return!!t.providedIn&&("string"==typeof t.providedIn?"any"===t.providedIn||t.providedIn===this.scope:this.injectorDefTypes.has(t.providedIn))}}function ko(t){const e=v(t),n=null!==e?e.factory:ft(t);if(null!==n)return n;const r=w(t);if(null!==r)return r.factory;if(t instanceof an)throw new Error(`Token ${l(t)} is missing a \u0275prov definition.`);if(t instanceof Function)return function(t){const e=t.length;if(e>0){const n=pn(e,"?");throw new Error(`Can't resolve all parameters for ${l(t)}: (${n.join(", ")}).`)}const n=function(t){const e=t&&(t[C]||t[E]);if(e){const n=function(t){if(t.hasOwnProperty("name"))return t.name;const e=(""+t).match(/^function\s*([^\s(]+)/);return null===e?"":e[1]}(t);return console.warn(`DEPRECATED: DI is instantiating a token "${n}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${n}" class.`),e}return null}(t);return null!==n?()=>n.factory(t):()=>new t}(t);throw new Error("unreachable")}function jo(t,e,n){let r;if(Mo(t)){const e=p(t);return ft(e)||ko(e)}if(Do(t))r=()=>p(t.useValue);else if((i=t)&&i.useFactory)r=()=>t.useFactory(...In(t.deps||[]));else if(function(t){return!(!t||!t.useExisting)}(t))r=()=>xn(p(t.useExisting));else{const e=p(t&&(t.useClass||t.provide));if(!function(t){return!!t.deps}(t))return ft(e)||ko(e);r=()=>new e(...In(t.deps))}var i;return r}function No(t,e,n=!1){return{factory:t,value:e,multi:n?[]:void 0}}function Do(t){return null!==t&&"object"==typeof t&&wn in t}function Mo(t){return"function"==typeof t}const Lo=function(t,e,n){return function(t,e=null,n=null,r){const i=Ro(t,e,n,r);return i._resolveInjectorDefTypes(),i}({name:n},e,t,n)};let Fo=(()=>{class t{static create(t,e){return Array.isArray(t)?Lo(t,e,""):Lo(t.providers,t.parent,t.name||"")}}return t.THROW_IF_NOT_FOUND=bn,t.NULL=new Oo,t.\u0275prov=y({token:t,providedIn:"any",factory:()=>xn(Co)}),t.__NG_ELEMENT_ID__=-1,t})();function Uo(t,e){_e(Dt(t)[1],Gt())}function Vo(t){let e=Object.getPrototypeOf(t.type.prototype).constructor,n=!0;const r=[t];for(;e;){let i;if(dt(t))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new Error("Directives cannot inherit Components");i=e.\u0275dir}if(i){if(n){r.push(i);const e=t;e.inputs=Qo(t.inputs),e.declaredInputs=Qo(t.declaredInputs),e.outputs=Qo(t.outputs);const n=i.hostBindings;n&&Bo(t,n);const o=i.viewQuery,s=i.contentQueries;if(o&&Ho(t,o),s&&qo(t,s),c(t.inputs,i.inputs),c(t.declaredInputs,i.declaredInputs),c(t.outputs,i.outputs),dt(i)&&i.data.animation){const e=t.data;e.animation=(e.animation||[]).concat(i.data.animation)}}const e=i.features;if(e)for(let r=0;r<e.length;r++){const i=e[r];i&&i.ngInherit&&i(t),i===Vo&&(n=!1)}}e=Object.getPrototypeOf(e)}!function(t){let e=0,n=null;for(let r=t.length-1;r>=0;r--){const i=t[r];i.hostVars=e+=i.hostVars,i.hostAttrs=Ae(i.hostAttrs,n=Ae(n,i.hostAttrs))}}(r)}function Qo(t){return t===F?{}:t===U?[]:t}function Ho(t,e){const n=t.viewQuery;t.viewQuery=n?(t,r)=>{e(t,r),n(t,r)}:e}function qo(t,e){const n=t.contentQueries;t.contentQueries=n?(t,r,i)=>{e(t,r,i),n(t,r,i)}:e}function Bo(t,e){const n=t.hostBindings;t.hostBindings=n?(t,r)=>{e(t,r),n(t,r)}:e}let zo=null;function Go(){if(!zo){const t=L.Symbol;if(t&&t.iterator)zo=t.iterator;else{const t=Object.getOwnPropertyNames(Map.prototype);for(let e=0;e<t.length;++e){const n=t[e];"entries"!==n&&"size"!==n&&Map.prototype[n]===Map.prototype.entries&&(zo=n)}}}return zo}class Wo{constructor(t){this.wrapped=t}static wrap(t){return new Wo(t)}static unwrap(t){return Wo.isWrapped(t)?t.wrapped:t}static isWrapped(t){return t instanceof Wo}}function Yo(t){return!!$o(t)&&(Array.isArray(t)||!(t instanceof Map)&&Go()in t)}function $o(t){return null!==t&&("function"==typeof t||"object"==typeof t)}function Ko(t,e,n){return t[e]=n}function Xo(t,e,n){return!Object.is(t[e],n)&&(t[e]=n,!0)}function Zo(t,e,n,r){const i=Xo(t,e,n);return Xo(t,e+1,r)||i}function Jo(t,e,n,r){const i=qt();return Xo(i,ne(),e)&&(Bt(),function(t,e,n,r,i,o){const s=At(t,e);no(e[11],s,o,t.value,n,r,i)}(ve(),i,t,e,n,r)),Jo}function ts(t,e,n,r){return Xo(t,ne(),n)?e+gt(n)+r:Ci}function es(t,e,n,r,i,o,s,a){const u=qt(),c=Bt(),l=t+ot,h=c.firstCreatePass?function(t,e,n,r,i,o,s,a,u){const c=e.consts,l=ji(e,t,4,s||null,Ft(c,a));Yi(e,n,l,Ft(c,u)),_e(e,l);const h=l.tViews=Bi(2,l,r,i,o,e.directiveRegistry,e.pipeRegistry,null,e.schemas,c);return null!==e.queries&&(e.queries.template(e,l),h.queries=e.queries.embeddedTView(l)),l}(l,c,u,e,n,r,i,o,s):c.data[l];$t(h,!1);const d=u[11].createComment("");ei(c,u,d,h),xr(d,u),co(u,u[l]=oo(d,u,d,h)),ht(h)&&Qi(c,u,h),null!=s&&Hi(u,h,a)}function ns(t){return jt(Qt.lFrame.contextLView,ot+t)}function rs(t,e=I.Default){const n=qt();return null===n?xn(t,e):Ge(Gt(),n,p(t),e)}function is(t,e,n){const r=qt();return Xo(r,ne(),e)&&Wi(Bt(),ve(),r,t,e,r[11],n,!1),is}function os(t,e,n,r,i){const o=i?"class":"style";vo(t,n,e.inputs[o],o,r)}function ss(t,e,n,r){const i=qt(),o=Bt(),s=ot+t,a=i[11],u=i[s]=Ur(a,e,Qt.lFrame.currentNamespace),c=o.firstCreatePass?function(t,e,n,r,i,o,s){const a=e.consts,u=ji(e,t,2,i,Ft(a,o));return Yi(e,n,u,Ft(a,s)),null!==u.attrs&&wo(u,u.attrs,!1),null!==u.mergedAttrs&&wo(u,u.mergedAttrs,!0),null!==e.queries&&e.queries.elementStart(e,u),u}(s,o,i,0,e,n,r):o.data[s];$t(c,!0);const l=c.mergedAttrs;null!==l&&Te(a,u,l);const h=c.classes;null!==h&&ci(a,u,h);const d=c.styles;null!==d&&ui(a,u,d),64!=(64&c.flags)&&ei(o,i,u,c),0===Qt.lFrame.elementDepthCount&&xr(u,i),Qt.lFrame.elementDepthCount++,ht(c)&&(Qi(o,i,c),Vi(o,c,i)),null!==r&&Hi(i,c)}function as(){let t=Gt();Kt()?Xt():(t=t.parent,$t(t,!1));const e=t;Qt.lFrame.elementDepthCount--;const n=Bt();n.firstCreatePass&&(_e(n,t),ct(t)&&n.queries.elementEnd(t)),null!=e.classesWithoutHost&&function(t){return 0!=(16&t.flags)}(e)&&os(n,e,qt(),e.classesWithoutHost,!0),null!=e.stylesWithoutHost&&function(t){return 0!=(32&t.flags)}(e)&&os(n,e,qt(),e.stylesWithoutHost,!1)}function us(t,e,n,r){ss(t,e,n,r),as()}function cs(t,e,n){const r=qt(),i=Bt(),o=t+ot,s=i.firstCreatePass?function(t,e,n,r,i){const o=e.consts,s=Ft(o,r),a=ji(e,t,8,"ng-container",s);return null!==s&&wo(a,s,!0),Yi(e,n,a,Ft(o,i)),null!==e.queries&&e.queries.elementStart(e,a),a}(o,i,r,e,n):i.data[o];$t(s,!0);const a=r[o]=r[11].createComment("");ei(i,r,a,s),xr(a,r),ht(s)&&(Qi(i,r,s),Vi(i,s,r)),null!=n&&Hi(r,s)}function ls(){let t=Gt();const e=Bt();Kt()?Xt():(t=t.parent,$t(t,!1)),e.firstCreatePass&&(_e(e,t),ct(t)&&e.queries.elementEnd(t))}function hs(){return qt()}function ds(t){return!!t&&"function"==typeof t.then}function fs(t){return!!t&&"function"==typeof t.subscribe}const ps=fs;function gs(t,e,n=!1,r){const i=qt(),o=Bt(),s=Gt();return function(t,e,n,r,i,o,s=!1,a){const u=ht(r),c=t.firstCreatePass&&yo(t),l=mo(e);let h=!0;if(3&r.type){const d=At(r,e),f=a?a(d):F,p=f.target||d,g=l.length,m=a?t=>a(Pt(t[r.index])).target:r.index;if(St(n)){let s=null;if(!a&&u&&(s=function(t,e,n,r){const i=t.cleanup;if(null!=i)for(let o=0;o<i.length-1;o+=2){const t=i[o];if(t===n&&i[o+1]===r){const t=e[7],n=i[o+2];return t.length>n?t[n]:null}"string"==typeof t&&(o+=2)}return null}(t,e,i,r.index)),null!==s)(s.__ngLastListenerFn__||s).__ngNextListenerFn__=o,s.__ngLastListenerFn__=o,h=!1;else{o=ys(r,e,o,!1);const t=n.listen(f.name||p,i,o);l.push(o,t),c&&c.push(i,m,g,g+1)}}else o=ys(r,e,o,!0),p.addEventListener(i,o,s),l.push(o),c&&c.push(i,m,g,s)}else o=ys(r,e,o,!1);const d=r.outputs;let f;if(h&&null!==d&&(f=d[i])){const t=f.length;if(t)for(let n=0;n<t;n+=2){const t=e[f[n]][f[n+1]].subscribe(o),s=l.length;l.push(o,t),c&&c.push(i,r.index,s,-(s+1))}}}(o,i,i[11],s,t,e,n,r),gs}function ms(t,e,n){try{return!1!==e(n)}catch(r){return bo(t,r),!1}}function ys(t,e,n,r){return function i(o){if(o===Function)return n;const s=2&t.flags?Nt(t.index,e):e;0==(32&e[2])&&lo(s);let a=ms(e,n,o),u=i.__ngNextListenerFn__;for(;u;)a=ms(e,u,o)&&a,u=u.__ngNextListenerFn__;return r&&!1===a&&(o.preventDefault(),o.returnValue=!1),a}}function bs(t=1){return function(t){return(Qt.lFrame.contextLView=function(t,e){for(;t>0;)e=e[15],t--;return e}(t,Qt.lFrame.contextLView))[8]}(t)}function vs(t,e){let n=null;const r=function(t){const e=t.attrs;if(null!=e){const t=e.indexOf(5);if(0==(1&t))return e[t+1]}return null}(t);for(let i=0;i<e.length;i++){const o=e[i];if("*"!==o){if(null===r?bi(t,o,!0):vi(r,o))return i}else n=i}return n}function _s(t){const e=qt()[16][6];if(!e.projection){const n=e.projection=pn(t?t.length:1,null),r=n.slice();let i=e.child;for(;null!==i;){const e=t?vs(i,t):0;null!==e&&(r[e]?r[e].projectionNext=i:n[e]=i,r[e]=i),i=i.next}}}function ws(t,e=0,n){const r=qt(),i=Bt(),o=ji(i,ot+t,16,null,n||null);null===o.projection&&(o.projection=e),Xt(),64!=(64&o.flags)&&function(t,e,n){ai(e[11],0,e,n,Br(t,n,e),Kr(n.parent||e[6],n,e))}(i,r,o)}function Cs(t,e,n){return Os(t,"",e,"",n),Cs}function Os(t,e,n,r,i){const o=qt(),s=ts(o,e,n,r);return s!==Ci&&Wi(Bt(),ve(),o,t,s,o[11],i,!1),Os}const Es=[];function xs(t,e,n,r,i){const o=t[n+1],s=null===e;let a=r?Ii(o):Ti(o),u=!1;for(;0!==a&&(!1===u||s);){const n=t[a+1];Is(t[a],e)&&(u=!0,t[a+1]=r?Ri(n):Si(n)),a=r?Ii(n):Ti(n)}u&&(t[n+1]=r?Si(o):Ri(o))}function Is(t,e){return null===t||null==e||(Array.isArray(t)?t[1]:t)===e||!(!Array.isArray(t)||"string"!=typeof e)&&yn(t,e)>=0}const Ss={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function Ts(t){return t.substring(Ss.key,Ss.keyEnd)}function Ps(t,e){const n=Ss.textEnd;return n===e?-1:(e=Ss.keyEnd=function(t,e,n){for(;e<n&&t.charCodeAt(e)>32;)e++;return e}(t,Ss.key=e,n),Rs(t,e,n))}function Rs(t,e,n){for(;e<n&&t.charCodeAt(e)<=32;)e++;return e}function As(t,e,n){return Ds(t,e,n,!1),As}function ks(t,e){return Ds(t,e,null,!0),ks}function js(t){Ms(gn,Ns,t,!0)}function Ns(t,e){for(let n=function(t){return function(t){Ss.key=0,Ss.keyEnd=0,Ss.value=0,Ss.valueEnd=0,Ss.textEnd=t.length}(t),Ps(t,Rs(t,0,Ss.textEnd))}(e);n>=0;n=Ps(e,n))gn(t,Ts(e),!0)}function Ds(t,e,n,r){const i=qt(),o=Bt(),s=re(2);o.firstUpdatePass&&Fs(o,t,s,r),e!==Ci&&Xo(i,s,e)&&Qs(o,o.data[ye()],i,i[11],t,i[s+1]=function(t,e){return null==t||("string"==typeof e?t+=e:"object"==typeof t&&(t=l(Un(t)))),t}(e,n),r,s)}function Ms(t,e,n,r){const i=Bt(),o=re(2);i.firstUpdatePass&&Fs(i,null,o,r);const s=qt();if(n!==Ci&&Xo(s,o,n)){const a=i.data[ye()];if(Bs(a,r)&&!Ls(i,o)){let t=r?a.classesWithoutHost:a.stylesWithoutHost;null!==t&&(n=h(t,n||"")),os(i,a,s,n,r)}else!function(t,e,n,r,i,o,s,a){i===Ci&&(i=Es);let u=0,c=0,l=0<i.length?i[0]:null,h=0<o.length?o[0]:null;for(;null!==l||null!==h;){const d=u<i.length?i[u+1]:void 0,f=c<o.length?o[c+1]:void 0;let p,g=null;l===h?(u+=2,c+=2,d!==f&&(g=h,p=f)):null===h||null!==l&&l<h?(u+=2,g=l):(c+=2,g=h,p=f),null!==g&&Qs(t,e,n,r,g,p,s,a),l=u<i.length?i[u]:null,h=c<o.length?o[c]:null}}(i,a,s,s[11],s[o+1],s[o+1]=function(t,e,n){if(null==n||""===n)return Es;const r=[],i=Un(n);if(Array.isArray(i))for(let o=0;o<i.length;o++)t(r,i[o],!0);else if("object"==typeof i)for(const o in i)i.hasOwnProperty(o)&&t(r,o,i[o]);else"string"==typeof i&&e(r,i);return r}(t,e,n),r,o)}}function Ls(t,e){return e>=t.expandoStartIndex}function Fs(t,e,n,r){const i=t.data;if(null===i[n+1]){const o=i[ye()],s=Ls(t,n);Bs(o,r)&&null===e&&!s&&(e=!1),e=function(t,e,n,r){const i=function(t){const e=Qt.lFrame.currentDirectiveIndex;return-1===e?null:t[e]}(t);let o=r?e.residualClasses:e.residualStyles;if(null===i)0===(r?e.classBindings:e.styleBindings)&&(n=Vs(n=Us(null,t,e,n,r),e.attrs,r),o=null);else{const s=e.directiveStylingLast;if(-1===s||t[s]!==i)if(n=Us(i,t,e,n,r),null===o){let n=function(t,e,n){const r=n?e.classBindings:e.styleBindings;if(0!==Ti(r))return t[Ii(r)]}(t,e,r);void 0!==n&&Array.isArray(n)&&(n=Us(null,t,e,n[1],r),n=Vs(n,e.attrs,r),function(t,e,n,r){t[Ii(n?e.classBindings:e.styleBindings)]=r}(t,e,r,n))}else o=function(t,e,n){let r;const i=e.directiveEnd;for(let o=1+e.directiveStylingLast;o<i;o++)r=Vs(r,t[o].hostAttrs,n);return Vs(r,e.attrs,n)}(t,e,r)}return void 0!==o&&(r?e.residualClasses=o:e.residualStyles=o),n}(i,o,e,r),function(t,e,n,r,i,o){let s=o?e.classBindings:e.styleBindings,a=Ii(s),u=Ti(s);t[r]=n;let c,l=!1;if(Array.isArray(n)){const t=n;c=t[1],(null===c||yn(t,c)>0)&&(l=!0)}else c=n;if(i)if(0!==u){const e=Ii(t[a+1]);t[r+1]=xi(e,a),0!==e&&(t[e+1]=Pi(t[e+1],r)),t[a+1]=131071&t[a+1]|r<<17}else t[r+1]=xi(a,0),0!==a&&(t[a+1]=Pi(t[a+1],r)),a=r;else t[r+1]=xi(u,0),0===a?a=r:t[u+1]=Pi(t[u+1],r),u=r;l&&(t[r+1]=Si(t[r+1])),xs(t,c,r,!0),xs(t,c,r,!1),function(t,e,n,r,i){const o=i?t.residualClasses:t.residualStyles;null!=o&&"string"==typeof e&&yn(o,e)>=0&&(n[r+1]=Ri(n[r+1]))}(e,c,t,r,o),s=xi(a,u),o?e.classBindings=s:e.styleBindings=s}(i,o,e,n,s,r)}}function Us(t,e,n,r,i){let o=null;const s=n.directiveEnd;let a=n.directiveStylingLast;for(-1===a?a=n.directiveStart:a++;a<s&&(o=e[a],r=Vs(r,o.hostAttrs,i),o!==t);)a++;return null!==t&&(n.directiveStylingLast=a),r}function Vs(t,e,n){const r=n?1:2;let i=-1;if(null!==e)for(let o=0;o<e.length;o++){const s=e[o];"number"==typeof s?i=s:i===r&&(Array.isArray(t)||(t=void 0===t?[]:["",t]),gn(t,s,!!n||e[++o]))}return void 0===t?null:t}function Qs(t,e,n,r,i,o,s,a){if(!(3&e.type))return;const u=t.data,c=u[a+1];qs(1==(1&c)?Hs(u,e,n,i,Ti(c),s):void 0)||(qs(o)||2==(2&c)&&(o=Hs(u,null,n,i,a,s)),function(t,e,n,r,i){const o=St(t);if(e)i?o?t.addClass(n,r):n.classList.add(r):o?t.removeClass(n,r):n.classList.remove(r);else{let e=-1===r.indexOf("-")?void 0:Tr.DashCase;if(null==i)o?t.removeStyle(n,r,e):n.style.removeProperty(r);else{const s="string"==typeof i&&i.endsWith("!important");s&&(i=i.slice(0,-10),e|=Tr.Important),o?t.setStyle(n,r,i,e):n.style.setProperty(r,i,s?"important":"")}}}(r,s,Rt(ye(),n),i,o))}function Hs(t,e,n,r,i,o){const s=null===e;let a;for(;i>0;){const e=t[i],o=Array.isArray(e),u=o?e[1]:e,c=null===u;let l=n[i+1];l===Ci&&(l=c?Es:void 0);let h=c?mn(l,r):u===r?l:void 0;if(o&&!qs(h)&&(h=mn(e,r)),qs(h)&&(a=h,s))return a;const d=t[i+1];i=s?Ii(d):Ti(d)}if(null!==e){let t=o?e.residualClasses:e.residualStyles;null!=t&&(a=mn(t,r))}return a}function qs(t){return void 0!==t}function Bs(t,e){return 0!=(t.flags&(e?16:32))}function zs(t,e=""){const n=qt(),r=Bt(),i=t+ot,o=r.firstCreatePass?ji(r,i,1,e,null):r.data[i],s=n[i]=Mr(n[11],e);ei(r,n,s,o),$t(o,!1)}function Gs(t){return Ws("",t,""),Gs}function Ws(t,e,n){const r=qt(),i=ts(r,t,e,n);return i!==Ci&&_o(r,ye(),i),Ws}function Ys(t,e,n,r,i){const o=qt(),s=function(t,e,n,r,i,o){const s=Zo(t,ee(),n,i);return re(2),s?e+gt(n)+r+gt(i)+o:Ci}(o,t,e,n,r,i);return s!==Ci&&_o(o,ye(),s),Ys}function $s(t,e,n,r,i,o,s,a,u){Ms(gn,Ns,function(t,e,n,r,i,o,s,a,u,c){const l=function(t,e,n,r,i,o){const s=Zo(t,e,n,r);return Zo(t,e+2,i,o)||s}(t,ee(),n,i,s,u);return re(4),l?e+gt(n)+r+gt(i)+o+gt(s)+a+gt(u)+c:Ci}(qt(),t,e,n,r,i,o,s,a,u),!0)}function Ks(t,e,n){const r=qt();return Xo(r,ne(),e)&&Wi(Bt(),ve(),r,t,e,r[11],n,!0),Ks}const Xs=void 0;var Zs=["en",[["a","p"],["AM","PM"],Xs],[["AM","PM"],Xs,Xs],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Xs,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Xs,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Xs,"{1} 'at' {0}",Xs],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function(t){let e=Math.floor(Math.abs(t)),n=t.toString().replace(/^[^.]*\.?/,"").length;return 1===e&&0===n?1:5}];let Js={};function ta(t,e,n){"string"!=typeof e&&(n=e,e=t[oa.LocaleId]),e=e.toLowerCase().replace(/_/g,"-"),Js[e]=t,n&&(Js[e][oa.ExtraData]=n)}function ea(t){const e=function(t){return t.toLowerCase().replace(/_/g,"-")}(t);let n=ia(e);if(n)return n;const r=e.split("-")[0];if(n=ia(r),n)return n;if("en"===r)return Zs;throw new Error(`Missing locale data for the locale "${t}".`)}function na(t){return ea(t)[oa.CurrencyCode]||null}function ra(t){return ea(t)[oa.PluralCase]}function ia(t){return t in Js||(Js[t]=L.ng&&L.ng.common&&L.ng.common.locales&&L.ng.common.locales[t]),Js[t]}var oa=function(t){return t[t.LocaleId=0]="LocaleId",t[t.DayPeriodsFormat=1]="DayPeriodsFormat",t[t.DayPeriodsStandalone=2]="DayPeriodsStandalone",t[t.DaysFormat=3]="DaysFormat",t[t.DaysStandalone=4]="DaysStandalone",t[t.MonthsFormat=5]="MonthsFormat",t[t.MonthsStandalone=6]="MonthsStandalone",t[t.Eras=7]="Eras",t[t.FirstDayOfWeek=8]="FirstDayOfWeek",t[t.WeekendRange=9]="WeekendRange",t[t.DateFormat=10]="DateFormat",t[t.TimeFormat=11]="TimeFormat",t[t.DateTimeFormat=12]="DateTimeFormat",t[t.NumberSymbols=13]="NumberSymbols",t[t.NumberFormats=14]="NumberFormats",t[t.CurrencyCode=15]="CurrencyCode",t[t.CurrencySymbol=16]="CurrencySymbol",t[t.CurrencyName=17]="CurrencyName",t[t.Currencies=18]="Currencies",t[t.Directionality=19]="Directionality",t[t.PluralCase=20]="PluralCase",t[t.ExtraData=21]="ExtraData",t}({});const sa=["zero","one","two","few","many"],aa="en-US",ua={marker:"element"},ca={marker:"ICU"};var la=function(t){return t[t.SHIFT=2]="SHIFT",t[t.APPEND_EAGERLY=1]="APPEND_EAGERLY",t[t.COMMENT=2]="COMMENT",t}({});let ha=aa;function da(t){var e;null==(e=t)&&m("Expected localeId to be defined",e,null,"!="),"string"==typeof t&&(ha=t.toLowerCase().replace(/_/g,"-"))}function fa(t,e,n){const r=e.insertBeforeIndex,i=Array.isArray(r)?r[0]:r;return null===i?Xr(t,0,n):Pt(n[i])}function pa(t,e,n,r,i){const o=e.insertBeforeIndex;if(Array.isArray(o)){let s=r,a=null;if(3&e.type||(a=s,s=i),null!==s&&0==(2&e.flags))for(let e=1;e<o.length;e++)Gr(t,s,n[o[e]],a,!1)}}function ga(t,e){if(t.push(e),t.length>1)for(let n=t.length-2;n>=0;n--){const r=t[n];ma(r)||ya(r,e)&&null===ba(r)&&va(r,e.index)}}function ma(t){return!(64&t.type)}function ya(t,e){return ma(e)||t.index>e.index}function ba(t){const e=t.insertBeforeIndex;return Array.isArray(e)?e[0]:e}function va(t,e){const n=t.insertBeforeIndex;Array.isArray(n)?n[0]=e:(ti(fa,pa),t.insertBeforeIndex=e)}function _a(t,e){const n=t.data[e];return null===n||"string"==typeof n?null:n.hasOwnProperty("currentCaseLViewIndex")?n:n.value}function wa(t,e,n){const r=Ni(t,n,64,null,null);return ga(e,r),r}function Ca(t,e){const n=e[t.currentCaseLViewIndex];return null===n?n:n<0?~n:n}let Oa=0,Ea=0;function xa(t,e,n,r){const i=n[11];let o,s=null;for(let a=0;a<e.length;a++){const u=e[a];if("string"==typeof u){const t=e[++a];null===n[t]&&(n[t]=Mr(i,u))}else if("number"==typeof u)switch(1&u){case 0:const c=u>>>17;let l,h;if(null===s&&(s=c,o=$r(i,r)),c===s?(l=r,h=o):(l=null,h=Pt(n[c])),null!==h){const e=(131070&u)>>>1;Gr(i,h,n[e],l,!1);const r=_a(t,e);if(null!==r&&"object"==typeof r){const e=Ca(r,n);null!==e&&xa(t,r.create[e],n,n[r.anchorIdx])}}break;case 1:const d=e[++a],f=e[++a];no(i,Rt(u>>>1,n),null,null,d,f,null);break;default:throw new Error(`Unable to determine the type of mutate operation for "${u}"`)}else switch(u){case ca:const t=e[++a],r=e[++a];null===n[r]&&xr(n[r]=Fr(i,t),n);break;case ua:const o=e[++a],s=e[++a];null===n[s]&&xr(n[s]=Ur(i,o,null),n)}}}function Ia(t,e,n,r,i){for(let o=0;o<n.length;o++){const s=n[o],a=n[++o];if(s&i){let i="";for(let s=o+1;s<=o+a;s++){const o=n[s];if("string"==typeof o)i+=o;else if("number"==typeof o)if(o<0)i+=gt(e[r-o]);else{const a=o>>>2;switch(3&o){case 1:const o=n[++s],u=n[++s],c=t.data[a];"string"==typeof c?no(e[11],e[a],null,c,o,i,u):Wi(t,c,e,o,i,e[11],u,!1);break;case 0:const l=e[a];null!==l&&Lr(e[11],l,i);break;case 2:Ta(t,_a(t,a),e,i);break;case 3:Sa(t,_a(t,a),r,e)}}}}else{const i=n[o+1];if(i>0&&3==(3&i)){const n=_a(t,i>>>2);e[n.currentCaseLViewIndex]<0&&Sa(t,n,r,e)}}o+=a}}function Sa(t,e,n,r){let i=r[e.currentCaseLViewIndex];if(null!==i){let o=Oa;i<0&&(i=r[e.currentCaseLViewIndex]=~i,o=-1),Ia(t,r,e.update[i],n,o)}}function Ta(t,e,n,r){const i=function(t,e){let n=t.cases.indexOf(e);if(-1===n)switch(t.type){case 1:{const r=function(t,e){const n=ra(e)(parseInt(t,10)),r=sa[n];return void 0!==r?r:"other"}(e,ha);n=t.cases.indexOf(r),-1===n&&"other"!==r&&(n=t.cases.indexOf("other"));break}case 0:n=t.cases.indexOf("other")}return-1===n?null:n}(e,r);if(Ca(e,n)!==i&&(Pa(t,e,n),n[e.currentCaseLViewIndex]=null===i?null:~i,null!==i)){const r=n[e.anchorIdx];r&&xa(t,e.create[i],n,r)}}function Pa(t,e,n){let r=Ca(e,n);if(null!==r){const i=e.remove[r];for(let e=0;e<i.length;e++){const r=i[e];if(r>0){const t=Rt(r,n);null!==t&&ii(n[11],t)}else Pa(t,_a(t,~r),n)}}}const Ra=/\ufffd(\d+):?\d*\ufffd/gi,Aa=/\ufffd(\d+)\ufffd/,ka=/^\s*(\ufffd\d+:?\d*\ufffd)\s*,\s*(select|plural)\s*,/,ja=/\ufffd\/?\*(\d+:\d+)\ufffd/gi,Na=/\ufffd(\/?[#*]\d+):?\d*\ufffd/gi,Da=/\uE500/g;function Ma(t,e,n,r,i,o,s){const a=Di(t,r,1,null);let u=a<<la.SHIFT,c=Yt();e===c&&(c=null),null===c&&(u|=la.APPEND_EAGERLY),s&&(u|=la.COMMENT,void 0===Pr&&(Pr=function(){const t=[];let e,n,r=-1;function i(t,e){r=0;const i=Ca(t,e);n=null!==i?t.remove[i]:U}function o(){if(r<n.length){const s=n[r++];return s>0?e[s]:(t.push(r,n),i(e[1].data[~s],e),o())}return 0===t.length?null:(n=t.pop(),r=t.pop(),o())}return function(n,r){for(e=r;t.length;)t.pop();return i(n.value,r),o}}())),i.push(u,null===o?"":o);const l=Ni(t,a,s?32:1,null===o?"":o,null);ga(n,l);const h=l.index;return $t(l,!1),null!==c&&e!==c&&function(t,e){let n=t.insertBeforeIndex;var r;null===n?(ti(fa,pa),n=t.insertBeforeIndex=[null,e]):("Expecting array here",(r=Array.isArray(n))!=!0&&m("Expecting array here",r,true,"=="),n.push(e))}(c,h),l}function La(t,e,n,r,i,o,s){const a=s.match(Ra),u=Ma(t,e,n,o,r,a?null:s,!1);a&&Fa(i,s,u.index)}function Fa(t,e,n,r,i=null){const o=t.length,s=o+1;t.push(null,null);const a=o+2,u=e.split(Ra);let c=0;for(let l=0;l<u.length;l++){const e=u[l];if(1&l){const n=parseInt(e,10);t.push(-1-n),c|=Ua(n)}else""!==e&&t.push(e)}return t.push(n<<2|(r?1:0)),r&&t.push(r,i),t[o]=c,t[s]=t.length-a,c}function Ua(t){return 1<<Math.min(t,31)}function Va(t){let e,n,r="",i=0,o=!1;for(;null!==(e=ja.exec(t));)o?e[0]===`\ufffd/*${n}\ufffd`&&(i=e.index,o=!1):(r+=t.substring(i,e.index+e[0].length),n=e[1],o=!0);return r+=t.substr(i),r}function Qa(t,e,n,r,i,o){let s=0;const a={type:i.type,currentCaseLViewIndex:Di(t,e,1,null),anchorIdx:o,cases:[],create:[],remove:[],update:[]};!function(t,e,n){t.push(Ua(e.mainBinding),2,-1-e.mainBinding,n<<2|2)}(n,i,o),function(t,e,n){const r=t.data[e];null===r?t.data[e]=n:r.value=n}(t,o,a);const u=i.values;for(let c=0;c<u.length;c++){const o=u[c],l=[];for(let t=0;t<o.length;t++){const e=o[t];if("string"!=typeof e){const n=l.push(e)-1;o[t]=`\x3c!--\ufffd${n}\ufffd--\x3e`}}s=Ba(t,a,e,n,r,i.cases[c],o.join(""),l)|s}s&&function(t,e,n){t.push(e,1,n<<2|3)}(n,s,o)}function Ha(t){const e=[],n=[];let r=1,i=0;const o=qa(t=t.replace(ka,function(t,e,n){return r="select"===n?0:1,i=parseInt(e.substr(1),10),""}));for(let s=0;s<o.length;){let t=o[s++].trim();1===r&&(t=t.replace(/\s*(?:=)?(\w+)\s*/,"$1")),t.length&&e.push(t);const i=qa(o[s++]);e.length>n.length&&n.push(i)}return{type:r,mainBinding:i,cases:e,values:n}}function qa(t){if(!t)return[];let e=0;const n=[],r=[],i=/[{}]/g;let o;for(i.lastIndex=0;o=i.exec(t);){const i=o.index;if("}"==o[0]){if(n.pop(),0==n.length){const n=t.substring(e,i);ka.test(n)?r.push(Ha(n)):r.push(n),e=i+1}}else{if(0==n.length){const n=t.substring(e,i);r.push(n),e=i+1}n.push("{")}}const s=t.substring(e);return r.push(s),r}function Ba(t,e,n,r,i,o,s,a){const u=[],c=[],l=[];e.cases.push(o),e.create.push(u),e.remove.push(c),e.update.push(l);const h=Wn(It()).getInertBodyElement(s),d=yr(h)||h;return d?za(t,e,n,r,u,c,l,d,i,a,0):0}function za(t,e,n,r,i,o,s,a,u,c,l){let h=0,d=a.firstChild;for(;d;){const a=Di(t,n,1,null);switch(d.nodeType){case Node.ELEMENT_NODE:const f=d,p=f.tagName.toLowerCase();if(sr.hasOwnProperty(p)){Ya(i,ua,p,u,a),t.data[a]=p;const g=f.attributes;for(let t=0;t<g.length;t++){const e=g.item(t),n=e.name.toLowerCase();e.value.match(Ra)?cr.hasOwnProperty(n)&&(ar[n]?Fa(s,e.value,a,e.name,Zn):ur[n]?Fa(s,e.value,a,e.name,Jn):Fa(s,e.value,a,e.name)):$a(i,a,e)}h=za(t,e,n,r,i,o,s,d,a,c,l+1)|h,Ga(o,a,l)}break;case Node.TEXT_NODE:const g=d.textContent||"",m=g.match(Ra);Ya(i,null,m?"":g,u,a),Ga(o,a,l),m&&(h=Fa(s,g,a)|h);break;case Node.COMMENT_NODE:const y=Aa.exec(d.textContent||"");if(y){const e=c[parseInt(y[1],10)];Ya(i,ca,"",u,a),Qa(t,n,r,u,e,a),Wa(o,a,l)}}d=d.nextSibling}return h}function Ga(t,e,n){0===n&&t.push(e)}function Wa(t,e,n){0===n&&(t.push(~e),t.push(e))}function Ya(t,e,n,r,i){null!==e&&t.push(e),t.push(n,i,0|r<<17|i<<1)}function $a(t,e,n){t.push(e<<1|1,n.name,n.value)}function Ka(t,e,n){(function(t,e,n=-1){const r=Bt(),i=qt(),o=ot+t,s=Ft(r.consts,e),a=Yt();r.firstCreatePass&&function(t,e,n,r,i,o){const s=Yt(),a=[],u=[],c=[[]],l=(h=i=function(t,e){if(function(t){return-1===t}(e))return Va(t);{const n=t.indexOf(`:${e}\ufffd`)+2+e.toString().length,r=t.search(new RegExp(`\ufffd\\/\\*\\d+:${e}\ufffd`));return Va(t.substring(n,r))}}(i,o),h.replace(Da," ")).split(Na);var h;for(let d=0;d<l.length;d++){let r=l[d];if(0==(1&d)){const o=qa(r);for(let r=0;r<o.length;r++){let l=o[r];if(0==(1&r)){const e=l;""!==e&&La(t,s,c[0],a,u,n,e)}else{const r=l;if("object"!=typeof r)throw new Error(`Unable to parse ICU expression in "${i}" message.`);Qa(t,n,u,e,r,Ma(t,s,c[0],n,a,"",!0).index)}}}else{const e=47===r.charCodeAt(0),n=(r.charCodeAt(e?1:0),ot+Number.parseInt(r.substring(e?2:1)));if(e)c.shift(),$t(Yt(),!1);else{const e=wa(t,c[0],n);c.unshift([]),$t(e,!0)}}}t.data[r]={create:a,update:u}}(r,null===a?0:a.index,i,o,s,n);const u=r.data[o],c=zr(r,a===i[6]?null:a,i);!function(t,e,n,r){const i=t[11];for(let o=0;o<e.length;o++){const s=e[o++],a=e[o],u=(s&la.COMMENT)===la.COMMENT,c=(s&la.APPEND_EAGERLY)===la.APPEND_EAGERLY,l=s>>>la.SHIFT;let h=t[l];null===h&&(h=t[l]=u?i.createComment(a):Mr(i,a)),c&&null!==n&&Gr(i,n,h,r,!1)}}(i,u.create,c,a&&8&a.type?i[a.index]:null),ie(!0)})(t,e,n),ie(!1)}function Xa(t){return Xo(qt(),ne(),t)&&(Oa|=1<<Math.min(Ea,31)),Ea++,Xa}function Za(t){!function(t,e,n){if(Ea>0){const r=t.data[n];Ia(t,e,Array.isArray(r)?r:r.update,ee()-Ea-1,Oa)}Oa=0,Ea=0}(Bt(),qt(),t+ot)}function Ja(t,e,n,r,i){if(t=p(t),Array.isArray(t))for(let o=0;o<t.length;o++)Ja(t[o],e,n,r,i);else{const o=Bt(),s=qt();let a=Mo(t)?t:p(t.provide),u=jo(t);const c=Gt(),l=1048575&c.providerIndexes,h=c.directiveStart,d=c.providerIndexes>>20;if(Mo(t)||!t.multi){const r=new Se(u,i,rs),f=nu(a,e,i?l:l+d,h);-1===f?(qe(Ue(c,s),o,a),tu(o,t,e.length),e.push(a),c.directiveStart++,c.directiveEnd++,i&&(c.providerIndexes+=1048576),n.push(r),s.push(r)):(n[f]=r,s[f]=r)}else{const f=nu(a,e,l+d,h),p=nu(a,e,l,l+d),g=f>=0&&n[f],m=p>=0&&n[p];if(i&&!m||!i&&!g){qe(Ue(c,s),o,a);const l=function(t,e,n,r,i){const o=new Se(t,n,rs);return o.multi=[],o.index=e,o.componentProviders=0,eu(o,i,r&&!n),o}(i?iu:ru,n.length,i,r,u);!i&&m&&(n[p].providerFactory=l),tu(o,t,e.length,0),e.push(a),c.directiveStart++,c.directiveEnd++,i&&(c.providerIndexes+=1048576),n.push(l),s.push(l)}else tu(o,t,f>-1?f:p,eu(n[i?p:f],u,!i&&r));!i&&r&&m&&n[p].componentProviders++}}}function tu(t,e,n,r){const i=Mo(e);if(i||e.useClass){const o=(e.useClass||e).prototype.ngOnDestroy;if(o){const s=t.destroyHooks||(t.destroyHooks=[]);if(!i&&e.multi){const t=s.indexOf(n);-1===t?s.push(n,[r,o]):s[t+1].push(r,o)}else s.push(n,o)}}}function eu(t,e,n){return n&&t.componentProviders++,t.multi.push(e)-1}function nu(t,e,n,r){for(let i=n;i<r;i++)if(e[i]===t)return i;return-1}function ru(t,e,n,r){return ou(this.multi,[])}function iu(t,e,n,r){const i=this.multi;let o;if(this.providerFactory){const t=this.providerFactory.componentProviders,e=Xe(n,n[1],this.providerFactory.index,r);o=e.slice(0,t),ou(i,o);for(let n=t;n<e.length;n++)o.push(e[n])}else o=[],ou(i,o);return o}function ou(t,e){for(let n=0;n<t.length;n++)e.push((0,t[n])());return e}function su(t,e=[]){return n=>{n.providersResolver=(n,r)=>function(t,e,n){const r=Bt();if(r.firstCreatePass){const i=dt(t);Ja(n,r.data,r.blueprint,i,!0),Ja(e,r.data,r.blueprint,i,!1)}}(n,r?r(t):t,e)}}class au{}class uu{resolveComponentFactory(t){throw function(t){const e=Error(`No component factory found for ${l(t)}. Did you add it to @NgModule.entryComponents?`);return e.ngComponent=t,e}(t)}}let cu=(()=>{class t{}return t.NULL=new uu,t})();function lu(...t){}function hu(t,e){return new fu(At(t,e))}const du=function(){return hu(Gt(),qt())};let fu=(()=>{class t{constructor(t){this.nativeElement=t}}return t.__NG_ELEMENT_ID__=du,t})();function pu(t){return t instanceof fu?t.nativeElement:t}class gu{}let mu=(()=>{class t{}return t.__NG_ELEMENT_ID__=()=>yu(),t})();const yu=function(){const t=qt(),e=Nt(Gt().index,t);return function(t){return t[11]}(at(e)?e:t)};let bu=(()=>{class t{}return t.\u0275prov=y({token:t,providedIn:"root",factory:()=>null}),t})();class vu{constructor(t){this.full=t,this.major=t.split(".")[0],this.minor=t.split(".")[1],this.patch=t.split(".").slice(2).join(".")}}const _u=new vu("11.1.0");class wu{constructor(){}supports(t){return Yo(t)}create(t){return new Ou(t)}}const Cu=(t,e)=>e;class Ou{constructor(t){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=t||Cu}forEachItem(t){let e;for(e=this._itHead;null!==e;e=e._next)t(e)}forEachOperation(t){let e=this._itHead,n=this._removalsHead,r=0,i=null;for(;e||n;){const o=!n||e&&e.currentIndex<Su(n,r,i)?e:n,s=Su(o,r,i),a=o.currentIndex;if(o===n)r--,n=n._nextRemoved;else if(e=e._next,null==o.previousIndex)r++;else{i||(i=[]);const t=s-r,e=a-r;if(t!=e){for(let n=0;n<t;n++){const r=n<i.length?i[n]:i[n]=0,o=r+n;e<=o&&o<t&&(i[n]=r+1)}i[o.previousIndex]=e-t}}s!==a&&t(o,s,a)}}forEachPreviousItem(t){let e;for(e=this._previousItHead;null!==e;e=e._nextPrevious)t(e)}forEachAddedItem(t){let e;for(e=this._additionsHead;null!==e;e=e._nextAdded)t(e)}forEachMovedItem(t){let e;for(e=this._movesHead;null!==e;e=e._nextMoved)t(e)}forEachRemovedItem(t){let e;for(e=this._removalsHead;null!==e;e=e._nextRemoved)t(e)}forEachIdentityChange(t){let e;for(e=this._identityChangesHead;null!==e;e=e._nextIdentityChange)t(e)}diff(t){if(null==t&&(t=[]),!Yo(t))throw new Error(`Error trying to diff '${l(t)}'. Only arrays and iterables are allowed`);return this.check(t)?this:null}onDestroy(){}check(t){this._reset();let e,n,r,i=this._itHead,o=!1;if(Array.isArray(t)){this.length=t.length;for(let e=0;e<this.length;e++)n=t[e],r=this._trackByFn(e,n),null!==i&&Object.is(i.trackById,r)?(o&&(i=this._verifyReinsertion(i,n,r,e)),Object.is(i.item,n)||this._addIdentityChange(i,n)):(i=this._mismatch(i,n,r,e),o=!0),i=i._next}else e=0,function(t,e){if(Array.isArray(t))for(let n=0;n<t.length;n++)e(t[n]);else{const n=t[Go()]();let r;for(;!(r=n.next()).done;)e(r.value)}}(t,t=>{r=this._trackByFn(e,t),null!==i&&Object.is(i.trackById,r)?(o&&(i=this._verifyReinsertion(i,t,r,e)),Object.is(i.item,t)||this._addIdentityChange(i,t)):(i=this._mismatch(i,t,r,e),o=!0),i=i._next,e++}),this.length=e;return this._truncate(i),this.collection=t,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let t;for(t=this._previousItHead=this._itHead;null!==t;t=t._next)t._nextPrevious=t._next;for(t=this._additionsHead;null!==t;t=t._nextAdded)t.previousIndex=t.currentIndex;for(this._additionsHead=this._additionsTail=null,t=this._movesHead;null!==t;t=t._nextMoved)t.previousIndex=t.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(t,e,n,r){let i;return null===t?i=this._itTail:(i=t._prev,this._remove(t)),null!==(t=null===this._linkedRecords?null:this._linkedRecords.get(n,r))?(Object.is(t.item,e)||this._addIdentityChange(t,e),this._moveAfter(t,i,r)):null!==(t=null===this._unlinkedRecords?null:this._unlinkedRecords.get(n,null))?(Object.is(t.item,e)||this._addIdentityChange(t,e),this._reinsertAfter(t,i,r)):t=this._addAfter(new Eu(e,n),i,r),t}_verifyReinsertion(t,e,n,r){let i=null===this._unlinkedRecords?null:this._unlinkedRecords.get(n,null);return null!==i?t=this._reinsertAfter(i,t._prev,r):t.currentIndex!=r&&(t.currentIndex=r,this._addToMoves(t,r)),t}_truncate(t){for(;null!==t;){const e=t._next;this._addToRemovals(this._unlink(t)),t=e}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(t,e,n){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(t);const r=t._prevRemoved,i=t._nextRemoved;return null===r?this._removalsHead=i:r._nextRemoved=i,null===i?this._removalsTail=r:i._prevRemoved=r,this._insertAfter(t,e,n),this._addToMoves(t,n),t}_moveAfter(t,e,n){return this._unlink(t),this._insertAfter(t,e,n),this._addToMoves(t,n),t}_addAfter(t,e,n){return this._insertAfter(t,e,n),this._additionsTail=null===this._additionsTail?this._additionsHead=t:this._additionsTail._nextAdded=t,t}_insertAfter(t,e,n){const r=null===e?this._itHead:e._next;return t._next=r,t._prev=e,null===r?this._itTail=t:r._prev=t,null===e?this._itHead=t:e._next=t,null===this._linkedRecords&&(this._linkedRecords=new Iu),this._linkedRecords.put(t),t.currentIndex=n,t}_remove(t){return this._addToRemovals(this._unlink(t))}_unlink(t){null!==this._linkedRecords&&this._linkedRecords.remove(t);const e=t._prev,n=t._next;return null===e?this._itHead=n:e._next=n,null===n?this._itTail=e:n._prev=e,t}_addToMoves(t,e){return t.previousIndex===e||(this._movesTail=null===this._movesTail?this._movesHead=t:this._movesTail._nextMoved=t),t}_addToRemovals(t){return null===this._unlinkedRecords&&(this._unlinkedRecords=new Iu),this._unlinkedRecords.put(t),t.currentIndex=null,t._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=t,t._prevRemoved=null):(t._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=t),t}_addIdentityChange(t,e){return t.item=e,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=t:this._identityChangesTail._nextIdentityChange=t,t}}class Eu{constructor(t,e){this.item=t,this.trackById=e,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class xu{constructor(){this._head=null,this._tail=null}add(t){null===this._head?(this._head=this._tail=t,t._nextDup=null,t._prevDup=null):(this._tail._nextDup=t,t._prevDup=this._tail,t._nextDup=null,this._tail=t)}get(t,e){let n;for(n=this._head;null!==n;n=n._nextDup)if((null===e||e<=n.currentIndex)&&Object.is(n.trackById,t))return n;return null}remove(t){const e=t._prevDup,n=t._nextDup;return null===e?this._head=n:e._nextDup=n,null===n?this._tail=e:n._prevDup=e,null===this._head}}class Iu{constructor(){this.map=new Map}put(t){const e=t.trackById;let n=this.map.get(e);n||(n=new xu,this.map.set(e,n)),n.add(t)}get(t,e){const n=this.map.get(t);return n?n.get(t,e):null}remove(t){const e=t.trackById;return this.map.get(e).remove(t)&&this.map.delete(e),t}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function Su(t,e,n){const r=t.previousIndex;if(null===r)return r;let i=0;return n&&r<n.length&&(i=n[r]),r+e+i}class Tu{constructor(){}supports(t){return t instanceof Map||$o(t)}create(){return new Pu}}class Pu{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(t){let e;for(e=this._mapHead;null!==e;e=e._next)t(e)}forEachPreviousItem(t){let e;for(e=this._previousMapHead;null!==e;e=e._nextPrevious)t(e)}forEachChangedItem(t){let e;for(e=this._changesHead;null!==e;e=e._nextChanged)t(e)}forEachAddedItem(t){let e;for(e=this._additionsHead;null!==e;e=e._nextAdded)t(e)}forEachRemovedItem(t){let e;for(e=this._removalsHead;null!==e;e=e._nextRemoved)t(e)}diff(t){if(t){if(!(t instanceof Map||$o(t)))throw new Error(`Error trying to diff '${l(t)}'. Only maps and objects are allowed`)}else t=new Map;return this.check(t)?this:null}onDestroy(){}check(t){this._reset();let e=this._mapHead;if(this._appendAfter=null,this._forEach(t,(t,n)=>{if(e&&e.key===n)this._maybeAddToChanges(e,t),this._appendAfter=e,e=e._next;else{const r=this._getOrCreateRecordForKey(n,t);e=this._insertBeforeOrAppend(e,r)}}),e){e._prev&&(e._prev._next=null),this._removalsHead=e;for(let t=e;null!==t;t=t._nextRemoved)t===this._mapHead&&(this._mapHead=null),this._records.delete(t.key),t._nextRemoved=t._next,t.previousValue=t.currentValue,t.currentValue=null,t._prev=null,t._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(t,e){if(t){const n=t._prev;return e._next=t,e._prev=n,t._prev=e,n&&(n._next=e),t===this._mapHead&&(this._mapHead=e),this._appendAfter=t,t}return this._appendAfter?(this._appendAfter._next=e,e._prev=this._appendAfter):this._mapHead=e,this._appendAfter=e,null}_getOrCreateRecordForKey(t,e){if(this._records.has(t)){const n=this._records.get(t);this._maybeAddToChanges(n,e);const r=n._prev,i=n._next;return r&&(r._next=i),i&&(i._prev=r),n._next=null,n._prev=null,n}const n=new Ru(t);return this._records.set(t,n),n.currentValue=e,this._addToAdditions(n),n}_reset(){if(this.isDirty){let t;for(this._previousMapHead=this._mapHead,t=this._previousMapHead;null!==t;t=t._next)t._nextPrevious=t._next;for(t=this._changesHead;null!==t;t=t._nextChanged)t.previousValue=t.currentValue;for(t=this._additionsHead;null!=t;t=t._nextAdded)t.previousValue=t.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(t,e){Object.is(e,t.currentValue)||(t.previousValue=t.currentValue,t.currentValue=e,this._addToChanges(t))}_addToAdditions(t){null===this._additionsHead?this._additionsHead=this._additionsTail=t:(this._additionsTail._nextAdded=t,this._additionsTail=t)}_addToChanges(t){null===this._changesHead?this._changesHead=this._changesTail=t:(this._changesTail._nextChanged=t,this._changesTail=t)}_forEach(t,e){t instanceof Map?t.forEach(e):Object.keys(t).forEach(n=>e(t[n],n))}}class Ru{constructor(t){this.key=t,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function Au(){return new ku([new wu])}let ku=(()=>{class t{constructor(t){this.factories=t}static create(e,n){if(null!=n){const t=n.factories.slice();e=e.concat(t)}return new t(e)}static extend(e){return{provide:t,useFactory:n=>t.create(e,n||Au()),deps:[[t,new Rn,new Pn]]}}find(t){const e=this.factories.find(e=>e.supports(t));if(null!=e)return e;throw new Error(`Cannot find a differ supporting object '${t}' of type '${n=t,n.name||typeof n}'`);var n}}return t.\u0275prov=y({token:t,providedIn:"root",factory:Au}),t})();function ju(){return new Nu([new Tu])}let Nu=(()=>{class t{constructor(t){this.factories=t}static create(e,n){if(n){const t=n.factories.slice();e=e.concat(t)}return new t(e)}static extend(e){return{provide:t,useFactory:n=>t.create(e,n||ju()),deps:[[t,new Rn,new Pn]]}}find(t){const e=this.factories.find(e=>e.supports(t));if(e)return e;throw new Error(`Cannot find a differ supporting object '${t}'`)}}return t.\u0275prov=y({token:t,providedIn:"root",factory:ju}),t})();function Du(t,e,n,r,i=!1){for(;null!==n;){const o=e[n.index];if(null!==o&&r.push(Pt(o)),ut(o))for(let t=st;t<o.length;t++){const e=o[t],n=e[1].firstChild;null!==n&&Du(e[1],e,n,r)}const s=n.type;if(8&s)Du(t,e,n.child,r);else if(32&s){const t=Rr(n,e);let i;for(;i=t();)r.push(i)}else if(16&s){const t=e[16],i=t[6].projection[n.projection];if(Array.isArray(i))r.push(...i);else{const e=Ar(t);Du(e[1],e,i,r,!0)}}n=i?n.projectionNext:n.next}return r}class Mu{constructor(t,e){this._lView=t,this._cdRefInjectingView=e,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const t=this._lView,e=t[1];return Du(e,t,e.firstChild,[])}get context(){return this._lView[8]}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const t=this._lView[3];if(ut(t)){const e=t[8],n=e?e.indexOf(this):-1;n>-1&&(Qr(t,n),fn(e,n))}this._attachedToViewContainer=!1}Hr(this._lView[1],this._lView)}onDestroy(t){zi(this._lView[1],this._lView,null,t)}markForCheck(){lo(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){ho(this._lView[1],this._lView,this.context)}checkNoChanges(){!function(t,e,n){Jt(!0);try{ho(t,e,n)}finally{Jt(!1)}}(this._lView[1],this._lView,this.context)}attachToViewContainerRef(){if(this._appRef)throw new Error("This view is already attached directly to the ApplicationRef!");this._attachedToViewContainer=!0}detachFromAppRef(){var t;this._appRef=null,si(this._lView[1],t=this._lView,t[11],2,null,null)}attachToAppRef(t){if(this._attachedToViewContainer)throw new Error("This view is already attached to a ViewContainer!");this._appRef=t}}class Lu extends Mu{constructor(t){super(t),this._view=t}detectChanges(){fo(this._view)}checkNoChanges(){!function(t){Jt(!0);try{fo(t)}finally{Jt(!1)}}(this._view)}get context(){return null}}const Fu=Vu;let Uu=(()=>{class t{}return t.__NG_ELEMENT_ID__=Fu,t.__ChangeDetectorRef__=!0,t})();function Vu(t=!1){return function(t,e,n){if(!n&&lt(t)){const n=Nt(t.index,e);return new Mu(n,n)}return 47&t.type?new Mu(e[16],e):null}(Gt(),qt(),t)}const Qu=[new Tu],Hu=new ku([new wu]),qu=new Nu(Qu),Bu=function(){return Yu(Gt(),qt())};let zu=(()=>{class t{}return t.__NG_ELEMENT_ID__=Bu,t})();const Gu=zu,Wu=class extends Gu{constructor(t,e,n){super(),this._declarationLView=t,this._declarationTContainer=e,this.elementRef=n}createEmbeddedView(t){const e=this._declarationTContainer.tViews,n=ki(this._declarationLView,e,t,16,null,e.declTNode,null,null,null,null);n[17]=this._declarationLView[this._declarationTContainer.index];const r=this._declarationLView[19];return null!==r&&(n[19]=r.createEmbeddedView(e)),Mi(e,n,t),new Mu(n)}};function Yu(t,e){return 4&t.type?new Wu(e,t,hu(t,e)):null}class $u{}class Ku{}const Xu=function(){return rc(Gt(),qt())};let Zu=(()=>{class t{}return t.__NG_ELEMENT_ID__=Xu,t})();const Ju=Zu,tc=class extends Ju{constructor(t,e,n){super(),this._lContainer=t,this._hostTNode=e,this._hostLView=n}get element(){return hu(this._hostTNode,this._hostLView)}get injector(){return new tn(this._hostTNode,this._hostLView)}get parentInjector(){const t=He(this._hostTNode,this._hostLView);if(je(t)){const e=De(t,this._hostLView),n=Ne(t);return new tn(e[1].data[n+8],e)}return new tn(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(t){const e=ec(this._lContainer);return null!==e&&e[t]||null}get length(){return this._lContainer.length-st}createEmbeddedView(t,e,n){const r=t.createEmbeddedView(e||{});return this.insert(r,n),r}createComponent(t,e,n,r,i){const o=n||this.parentInjector;if(!i&&null==t.ngModule&&o){const t=o.get($u,null);t&&(i=t)}const s=t.create(o,r,void 0,i);return this.insert(s.hostView,e),s}insert(t,e){const n=t._lView,r=n[1];if(ut(n[3])){const e=this.indexOf(t);if(-1!==e)this.detach(e);else{const e=n[3],r=new tc(e,e[6],e[3]);r.detach(r.indexOf(t))}}const i=this._adjustIndex(e),o=this._lContainer;!function(t,e,n,r){const i=st+r,o=n.length;r>0&&(n[i-1][4]=e),r<o-st?(e[4]=n[i],dn(n,st+r,e)):(n.push(e),e[4]=null),e[3]=n;const s=e[17];null!==s&&n!==s&&function(t,e){const n=t[9];e[16]!==e[3][3][16]&&(t[2]=!0),null===n?t[9]=[e]:n.push(e)}(s,e);const a=e[19];null!==a&&a.insertView(t),e[2]|=128}(r,n,o,i);const s=ri(i,o),a=n[11],u=$r(a,o[7]);return null!==u&&function(t,e,n,r,i,o){r[0]=i,r[6]=e,si(t,r,n,1,i,o)}(r,o[6],a,n,u,s),t.attachToViewContainerRef(),dn(nc(o),i,t),t}move(t,e){return this.insert(t,e)}indexOf(t){const e=ec(this._lContainer);return null!==e?e.indexOf(t):-1}remove(t){const e=this._adjustIndex(t,-1),n=Qr(this._lContainer,e);n&&(fn(nc(this._lContainer),e),Hr(n[1],n))}detach(t){const e=this._adjustIndex(t,-1),n=Qr(this._lContainer,e);return n&&null!=fn(nc(this._lContainer),e)?new Mu(n):null}_adjustIndex(t,e=0){return null==t?this.length+e:t}};function ec(t){return t[8]}function nc(t){return t[8]||(t[8]=[])}function rc(t,e){let n;const r=e[t.index];if(ut(r))n=r;else{let i;if(8&t.type)i=Pt(r);else{const n=e[11];i=n.createComment("");const r=At(t,e);Gr(n,$r(n,r),i,function(t,e){return St(t)?t.nextSibling(e):e.nextSibling}(n,r),!1)}e[t.index]=n=oo(r,e,i,t),co(e,n)}return new tc(n,t,e)}const ic={};class oc extends cu{constructor(t){super(),this.ngModule=t}resolveComponentFactory(t){const e=rt(t);return new uc(e,this.ngModule)}}function sc(t){const e=[];for(let n in t)t.hasOwnProperty(n)&&e.push({propName:t[n],templateName:n});return e}const ac=new an("SCHEDULER_TOKEN",{providedIn:"root",factory:()=>Ir});class uc extends au{constructor(t,e){super(),this.componentDef=t,this.ngModule=e,this.componentType=t.type,this.selector=t.selectors.map(wi).join(","),this.ngContentSelectors=t.ngContentSelectors?t.ngContentSelectors:[],this.isBoundToModule=!!e}get inputs(){return sc(this.componentDef.inputs)}get outputs(){return sc(this.componentDef.outputs)}create(t,e,n,r){const i=(r=r||this.ngModule)?function(t,e){return{get:(n,r,i)=>{const o=t.get(n,ic,i);return o!==ic||r===ic?o:e.get(n,r,i)}}}(t,r.injector):t,o=i.get(gu,Tt),s=i.get(bu,null),a=o.createRenderer(null,this.componentDef),u=this.componentDef.selectors[0][0]||"div",c=n?function(t,e,n){if(St(t))return t.selectRootElement(e,n===k.ShadowDom);let r="string"==typeof e?t.querySelector(e):e;return r.textContent="",r}(a,n,this.componentDef.encapsulation):Ur(o.createRenderer(null,this.componentDef),u,function(t){const e=t.toLowerCase();return"svg"===e?"http://www.w3.org/2000/svg":"math"===e?"http://www.w3.org/1998/MathML/":null}(u)),l=this.componentDef.onPush?576:528,h={components:[],scheduler:Ir,clean:go,playerHandler:null,flags:0},d=Bi(0,null,null,1,0,null,null,null,null,null),f=ki(null,d,h,l,null,null,o,a,s,i);let p,g;he(f);try{const t=function(t,e,n,r,i,o){const s=n[1];n[20]=t;const a=ji(s,20,2,"#host",null),u=a.mergedAttrs=e.hostAttrs;null!==u&&(wo(a,u,!0),null!==t&&(Te(i,t,u),null!==a.classes&&ci(i,t,a.classes),null!==a.styles&&ui(i,t,a.styles)));const c=r.createRenderer(t,e),l=ki(n,qi(e),null,e.onPush?64:16,n[20],a,r,c,null,null);return s.firstCreatePass&&(qe(Ue(a,n),s,e.type),Xi(s,a),Ji(a,n.length,1)),co(n,l),n[20]=l}(c,this.componentDef,f,o,a);if(c)if(n)Te(a,c,["ng-version",_u.full]);else{const{attrs:t,classes:e}=function(t){const e=[],n=[];let r=1,i=2;for(;r<t.length;){let o=t[r];if("string"==typeof o)2===i?""!==o&&e.push(o,t[++r]):8===i&&n.push(o);else{if(!mi(i))break;i=o}r++}return{attrs:e,classes:n}}(this.componentDef.selectors[0]);t&&Te(a,c,t),e&&e.length>0&&ci(a,c,e.join(" "))}if(g=kt(d,ot),void 0!==e){const t=g.projection=[];for(let n=0;n<this.ngContentSelectors.length;n++){const r=e[n];t.push(null!=r?Array.from(r):null)}}p=function(t,e,n,r,i){const o=n[1],s=function(t,e,n){const r=Gt();t.firstCreatePass&&(n.providersResolver&&n.providersResolver(n),to(t,r,e,Di(t,e,1,null),n));const i=Xe(e,t,r.directiveStart,r);xr(i,e);const o=At(r,e);return o&&xr(o,e),i}(o,n,e);if(r.components.push(s),t[8]=s,i&&i.forEach(t=>t(s,e)),e.contentQueries){const t=Gt();e.contentQueries(1,s,t.directiveStart)}const a=Gt();return!o.firstCreatePass||null===e.hostBindings&&null===e.hostAttrs||(be(a.index),$i(n[1],a,0,a.directiveStart,a.directiveEnd,e),Ki(e,s)),s}(t,this.componentDef,f,h,[Uo]),Mi(d,f,null)}finally{me()}return new cc(this.componentType,p,hu(g,f),f,g)}}class cc extends class{}{constructor(t,e,n,r,i){super(),this.location=n,this._rootLView=r,this._tNode=i,this.instance=e,this.hostView=this.changeDetectorRef=new Lu(r),this.componentType=t}get injector(){return new tn(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(t){this.hostView.onDestroy(t)}}const lc=new Map;class hc extends $u{constructor(t,e){super(),this._parent=e,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new oc(this);const n=it(t),r=t[B]||null;r&&da(r),this._bootstrapComponents=Sr(n.bootstrap),this._r3Injector=Ro(t,e,[{provide:$u,useValue:this},{provide:cu,useValue:this.componentFactoryResolver}],l(t)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(t)}get(t,e=Fo.THROW_IF_NOT_FOUND,n=I.Default){return t===Fo||t===$u||t===Co?this:this._r3Injector.get(t,e,n)}destroy(){const t=this._r3Injector;!t.destroyed&&t.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(t){this.destroyCbs.push(t)}}class dc extends Ku{constructor(t){super(),this.moduleType=t,null!==it(t)&&function(t){const e=new Set;!function t(n){const r=it(n,!0),i=r.id;null!==i&&(function(t,e,n){if(e&&e!==n)throw new Error(`Duplicate module registered for ${t} - ${l(e)} vs ${l(e.name)}`)}(i,lc.get(i),n),lc.set(i,n));const o=Sr(r.imports);for(const s of o)e.has(s)||(e.add(s),t(s))}(t)}(t)}create(t){return new hc(this.moduleType,t)}}function fc(t,e,n,r){return yc(qt(),te(),t,e,n,r)}function pc(t,e,n,r,i){return bc(qt(),te(),t,e,n,r,i)}function gc(t,e,n,r,i,o){return function(t,e,n,r,i,o,s,a){const u=e+n;return function(t,e,n,r,i){const o=Zo(t,e,n,r);return Xo(t,e+2,i)||o}(t,u,i,o,s)?Ko(t,u+3,a?r.call(a,i,o,s):r(i,o,s)):mc(t,u+3)}(qt(),te(),t,e,n,r,i,o)}function mc(t,e){const n=t[e];return n===Ci?void 0:n}function yc(t,e,n,r,i,o){const s=e+n;return Xo(t,s,i)?Ko(t,s+1,o?r.call(o,i):r(i)):mc(t,s+1)}function bc(t,e,n,r,i,o,s){const a=e+n;return Zo(t,a,i,o)?Ko(t,a+2,s?r.call(s,i,o):r(i,o)):mc(t,a+2)}function vc(t,e){const n=Bt();let r;const i=t+ot;n.firstCreatePass?(r=function(t,e){if(e)for(let n=e.length-1;n>=0;n--){const r=e[n];if(t===r.name)return r}throw new pt("302",`The pipe '${t}' could not be found!`)}(e,n.pipeRegistry),n.data[i]=r,r.onDestroy&&(n.destroyHooks||(n.destroyHooks=[])).push(i,r.onDestroy)):r=n.data[i];const o=r.factory||(r.factory=ft(r.type)),s=T(rs);try{const t=Le(!1),e=o();return Le(t),function(t,e,n,r){n>=t.data.length&&(t.data[n]=null,t.blueprint[n]=null),e[n]=r}(n,qt(),i,e),e}finally{T(s)}}function _c(t,e,n){const r=t+ot,i=qt(),o=jt(i,r);return Oc(i,Cc(i,r)?yc(i,te(),e,o.transform,n,o):o.transform(n))}function wc(t,e,n,r){const i=t+ot,o=qt(),s=jt(o,i);return Oc(o,Cc(o,i)?bc(o,te(),e,s.transform,n,r,s):s.transform(n,r))}function Cc(t,e){return t[1].data[e].pure}function Oc(t,e){return Wo.isWrapped(e)&&(e=Wo.unwrap(e),t[ee()]=Ci),e}const Ec=class extends r.a{constructor(t=!1){super(),this.__isAsync=t}emit(t){super.next(t)}subscribe(t,e,n){let r,o=t=>null,s=()=>null;t&&"object"==typeof t?(r=this.__isAsync?e=>{setTimeout(()=>t.next(e))}:e=>{t.next(e)},t.error&&(o=this.__isAsync?e=>{setTimeout(()=>t.error(e))}:e=>{t.error(e)}),t.complete&&(s=this.__isAsync?()=>{setTimeout(()=>t.complete())}:()=>{t.complete()})):(r=this.__isAsync?e=>{setTimeout(()=>t(e))}:e=>{t(e)},e&&(o=this.__isAsync?t=>{setTimeout(()=>e(t))}:t=>{e(t)}),n&&(s=this.__isAsync?()=>{setTimeout(()=>n())}:()=>{n()}));const a=super.subscribe(r,o,s);return t instanceof i.a&&t.add(a),a}};function xc(){return this._results[Go()]()}class Ic{constructor(t=!1){this._emitDistinctChangesOnly=t,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const e=Go(),n=Ic.prototype;n[e]||(n[e]=xc)}get changes(){return this._changes||(this._changes=new Ec)}get(t){return this._results[t]}map(t){return this._results.map(t)}filter(t){return this._results.filter(t)}find(t){return this._results.find(t)}reduce(t,e){return this._results.reduce(t,e)}forEach(t){this._results.forEach(t)}some(t){return this._results.some(t)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(t,e){const n=this;n.dirty=!1;const r=ln(t);(this._changesDetected=!function(t,e,n){if(t.length!==e.length)return!1;for(let r=0;r<t.length;r++){let i=t[r],o=e[r];if(n&&(i=n(i),o=n(o)),o!==i)return!1}return!0}(n._results,r,e))&&(n._results=r,n.length=r.length,n.last=r[this.length-1],n.first=r[0])}notifyOnChanges(){!this._changes||!this._changesDetected&&this._emitDistinctChangesOnly||this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}class Sc{constructor(t){this.queryList=t,this.matches=null}clone(){return new Sc(this.queryList)}setDirty(){this.queryList.setDirty()}}class Tc{constructor(t=[]){this.queries=t}createEmbeddedView(t){const e=t.queries;if(null!==e){const n=null!==t.contentQueries?t.contentQueries[0]:e.length,r=[];for(let t=0;t<n;t++){const n=e.getByIndex(t);r.push(this.queries[n.indexInDeclarationView].clone())}return new Tc(r)}return null}insertView(t){this.dirtyQueriesWithMatches(t)}detachView(t){this.dirtyQueriesWithMatches(t)}dirtyQueriesWithMatches(t){for(let e=0;e<this.queries.length;e++)null!==Hc(t,e).matches&&this.queries[e].setDirty()}}class Pc{constructor(t,e,n=null){this.predicate=t,this.flags=e,this.read=n}}class Rc{constructor(t=[]){this.queries=t}elementStart(t,e){for(let n=0;n<this.queries.length;n++)this.queries[n].elementStart(t,e)}elementEnd(t){for(let e=0;e<this.queries.length;e++)this.queries[e].elementEnd(t)}embeddedTView(t){let e=null;for(let n=0;n<this.length;n++){const r=null!==e?e.length:0,i=this.getByIndex(n).embeddedTView(t,r);i&&(i.indexInDeclarationView=n,null!==e?e.push(i):e=[i])}return null!==e?new Rc(e):null}template(t,e){for(let n=0;n<this.queries.length;n++)this.queries[n].template(t,e)}getByIndex(t){return this.queries[t]}get length(){return this.queries.length}track(t){this.queries.push(t)}}class Ac{constructor(t,e=-1){this.metadata=t,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=e}elementStart(t,e){this.isApplyingToNode(e)&&this.matchTNode(t,e)}elementEnd(t){this._declarationNodeIndex===t.index&&(this._appliesToNextNode=!1)}template(t,e){this.elementStart(t,e)}embeddedTView(t,e){return this.isApplyingToNode(t)?(this.crossesNgTemplate=!0,this.addMatch(-t.index,e),new Ac(this.metadata)):null}isApplyingToNode(t){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const e=this._declarationNodeIndex;let n=t.parent;for(;null!==n&&8&n.type&&n.index!==e;)n=n.parent;return e===(null!==n?n.index:-1)}return this._appliesToNextNode}matchTNode(t,e){const n=this.metadata.predicate;if(Array.isArray(n))for(let r=0;r<n.length;r++){const i=n[r];this.matchTNodeWithReadOption(t,e,kc(e,i)),this.matchTNodeWithReadOption(t,e,Ke(e,t,i,!1,!1))}else n===zu?4&e.type&&this.matchTNodeWithReadOption(t,e,-1):this.matchTNodeWithReadOption(t,e,Ke(e,t,n,!1,!1))}matchTNodeWithReadOption(t,e,n){if(null!==n){const r=this.metadata.read;if(null!==r)if(r===fu||r===Zu||r===zu&&4&e.type)this.addMatch(e.index,-2);else{const n=Ke(e,t,r,!1,!1);null!==n&&this.addMatch(e.index,n)}else this.addMatch(e.index,n)}}addMatch(t,e){null===this.matches?this.matches=[t,e]:this.matches.push(t,e)}}function kc(t,e){const n=t.localNames;if(null!==n)for(let r=0;r<n.length;r+=2)if(n[r]===e)return n[r+1];return null}function jc(t,e,n,r){return-1===n?function(t,e){return 11&t.type?hu(t,e):4&t.type?Yu(t,e):null}(e,t):-2===n?function(t,e,n){return n===fu?hu(e,t):n===zu?Yu(e,t):n===Zu?rc(e,t):void 0}(t,e,r):Xe(t,t[1],n,e)}function Nc(t,e,n,r){const i=e[19].queries[r];if(null===i.matches){const r=t.data,o=n.matches,s=[];for(let t=0;t<o.length;t+=2){const i=o[t];s.push(i<0?null:jc(e,r[i],o[t+1],n.metadata.read))}i.matches=s}return i.matches}function Dc(t,e,n,r){const i=t.queries.getByIndex(n),o=i.matches;if(null!==o){const s=Nc(t,e,i,n);for(let t=0;t<o.length;t+=2){const n=o[t];if(n>0)r.push(s[t/2]);else{const i=o[t+1],s=e[-n];for(let t=st;t<s.length;t++){const e=s[t];e[17]===e[3]&&Dc(e[1],e,i,r)}if(null!==s[9]){const t=s[9];for(let e=0;e<t.length;e++){const n=t[e];Dc(n[1],n,i,r)}}}}}return r}function Mc(t){const e=qt(),n=Bt(),r=ae();ue(r+1);const i=Hc(n,r);if(t.dirty&&Mt(e)===(2==(2&i.metadata.flags))){if(null===i.matches)t.reset([]);else{const o=i.crossesNgTemplate?Dc(n,e,r,[]):Nc(n,e,i,r);t.reset(o,pu),t.notifyOnChanges()}return!0}return!1}function Lc(t,e,n){const r=Bt();r.firstCreatePass&&(Qc(r,new Pc(t,e,n),-1),2==(2&e)&&(r.staticViewQueries=!0)),Vc(r,qt(),e)}function Fc(t,e,n,r){const i=Bt();if(i.firstCreatePass){const o=Gt();Qc(i,new Pc(e,n,r),o.index),function(t,e){const n=t.contentQueries||(t.contentQueries=[]);e!==(n.length?n[n.length-1]:-1)&&n.push(t.queries.length-1,e)}(i,t),2==(2&n)&&(i.staticContentQueries=!0)}Vc(i,qt(),n)}function Uc(){return t=qt(),e=ae(),t[19].queries[e].queryList;var t,e}function Vc(t,e,n){const r=new Ic(4==(4&n));zi(t,e,r,r.destroy),null===e[19]&&(e[19]=new Tc),e[19].queries.push(new Sc(r))}function Qc(t,e,n){null===t.queries&&(t.queries=new Rc),t.queries.track(new Ac(e,n))}function Hc(t,e){return t.queries.getByIndex(e)}function qc(t,e){return Yu(t,e)}function Bc(t=I.Default){const e=Vu(!0);if(null!=e||t&I.Optional)return e;yt("ChangeDetectorRef")}const zc=new an("Application Initializer");let Gc=(()=>{class t{constructor(t){this.appInits=t,this.resolve=lu,this.reject=lu,this.initialized=!1,this.done=!1,this.donePromise=new Promise((t,e)=>{this.resolve=t,this.reject=e})}runInitializers(){if(this.initialized)return;const t=[],e=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let n=0;n<this.appInits.length;n++){const e=this.appInits[n]();ds(e)&&t.push(e)}Promise.all(t).then(()=>{e()}).catch(t=>{this.reject(t)}),0===t.length&&e(),this.initialized=!0}}return t.\u0275fac=function(e){return new(e||t)(xn(zc,8))},t.\u0275prov=y({token:t,factory:t.\u0275fac}),t})();const Wc=new an("AppId"),Yc={provide:Wc,useFactory:function(){return`${$c()}${$c()}${$c()}`},deps:[]};function $c(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const Kc=new an("Platform Initializer"),Xc=new an("Platform ID"),Zc=new an("appBootstrapListener");let Jc=(()=>{class t{log(t){console.log(t)}warn(t){console.warn(t)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=y({token:t,factory:t.\u0275fac}),t})();const tl=new an("LocaleId"),el=new an("DefaultCurrencyCode");class nl{constructor(t,e){this.ngModuleFactory=t,this.componentFactories=e}}const rl=function(t){return new dc(t)},il=rl,ol=function(t){return Promise.resolve(rl(t))},sl=function(t){const e=rl(t),n=Sr(it(t).declarations).reduce((t,e)=>{const n=rt(e);return n&&t.push(new uc(n)),t},[]);return new nl(e,n)},al=sl,ul=function(t){return Promise.resolve(sl(t))};let cl=(()=>{class t{constructor(){this.compileModuleSync=il,this.compileModuleAsync=ol,this.compileModuleAndAllComponentsSync=al,this.compileModuleAndAllComponentsAsync=ul}clearCache(){}clearCacheFor(t){}getModuleId(t){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=y({token:t,factory:t.\u0275fac}),t})();const ll=(()=>Promise.resolve(0))();function hl(t){"undefined"==typeof Zone?ll.then(()=>{t&&t.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",t)}class dl{constructor({enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:e=!1,shouldCoalesceRunChangeDetection:n=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Ec(!1),this.onMicrotaskEmpty=new Ec(!1),this.onStable=new Ec(!1),this.onError=new Ec(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const r=this;r._nesting=0,r._outer=r._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(r._inner=r._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(r._inner=r._inner.fork(Zone.longStackTraceZoneSpec)),r.shouldCoalesceEventChangeDetection=!n&&e,r.shouldCoalesceRunChangeDetection=n,r.lastRequestAnimationFrameId=-1,r.nativeRequestAnimationFrame=function(){let t=L.requestAnimationFrame,e=L.cancelAnimationFrame;if("undefined"!=typeof Zone&&t&&e){const n=t[Zone.__symbol__("OriginalDelegate")];n&&(t=n);const r=e[Zone.__symbol__("OriginalDelegate")];r&&(e=r)}return{nativeRequestAnimationFrame:t,nativeCancelAnimationFrame:e}}().nativeRequestAnimationFrame,function(t){const e=()=>{!function(t){-1===t.lastRequestAnimationFrameId&&(t.lastRequestAnimationFrameId=t.nativeRequestAnimationFrame.call(L,()=>{t.fakeTopEventTask||(t.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{t.lastRequestAnimationFrameId=-1,gl(t),pl(t)},void 0,()=>{},()=>{})),t.fakeTopEventTask.invoke()}),gl(t))}(t)};t._inner=t._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(n,r,i,o,s,a)=>{try{return ml(t),n.invokeTask(i,o,s,a)}finally{(t.shouldCoalesceEventChangeDetection&&"eventTask"===o.type||t.shouldCoalesceRunChangeDetection)&&e(),yl(t)}},onInvoke:(n,r,i,o,s,a,u)=>{try{return ml(t),n.invoke(i,o,s,a,u)}finally{t.shouldCoalesceRunChangeDetection&&e(),yl(t)}},onHasTask:(e,n,r,i)=>{e.hasTask(r,i),n===r&&("microTask"==i.change?(t._hasPendingMicrotasks=i.microTask,gl(t),pl(t)):"macroTask"==i.change&&(t.hasPendingMacrotasks=i.macroTask))},onHandleError:(e,n,r,i)=>(e.handleError(r,i),t.runOutsideAngular(()=>t.onError.emit(i)),!1)})}(r)}static isInAngularZone(){return!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!dl.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(dl.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(t,e,n){return this._inner.run(t,e,n)}runTask(t,e,n,r){const i=this._inner,o=i.scheduleEventTask("NgZoneEvent: "+r,t,fl,lu,lu);try{return i.runTask(o,e,n)}finally{i.cancelTask(o)}}runGuarded(t,e,n){return this._inner.runGuarded(t,e,n)}runOutsideAngular(t){return this._outer.run(t)}}const fl={};function pl(t){if(0==t._nesting&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function gl(t){t.hasPendingMicrotasks=!!(t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&-1!==t.lastRequestAnimationFrameId)}function ml(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function yl(t){t._nesting--,pl(t)}class bl{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Ec,this.onMicrotaskEmpty=new Ec,this.onStable=new Ec,this.onError=new Ec}run(t,e,n){return t.apply(e,n)}runGuarded(t,e,n){return t.apply(e,n)}runOutsideAngular(t){return t()}runTask(t,e,n,r){return t.apply(e,n)}}let vl=(()=>{class t{constructor(t){this._ngZone=t,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),t.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{dl.assertNotInAngularZone(),hl(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())hl(()=>{for(;0!==this._callbacks.length;){let t=this._callbacks.pop();clearTimeout(t.timeoutId),t.doneCb(this._didWork)}this._didWork=!1});else{let t=this.getPendingTasks();this._callbacks=this._callbacks.filter(e=>!e.updateCb||!e.updateCb(t)||(clearTimeout(e.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(t=>({source:t.source,creationLocation:t.creationLocation,data:t.data})):[]}addCallback(t,e,n){let r=-1;e&&e>0&&(r=setTimeout(()=>{this._callbacks=this._callbacks.filter(t=>t.timeoutId!==r),t(this._didWork,this.getPendingTasks())},e)),this._callbacks.push({doneCb:t,timeoutId:r,updateCb:n})}whenStable(t,e,n){if(n&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/dist/task-tracking.js" loaded?');this.addCallback(t,e,n),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(t,e,n){return[]}}return t.\u0275fac=function(e){return new(e||t)(xn(dl))},t.\u0275prov=y({token:t,factory:t.\u0275fac}),t})(),_l=(()=>{class t{constructor(){this._applications=new Map,El.addToWindow(this)}registerApplication(t,e){this._applications.set(t,e)}unregisterApplication(t){this._applications.delete(t)}unregisterAllApplications(){this._applications.clear()}getTestability(t){return this._applications.get(t)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(t,e=!0){return El.findTestabilityInTree(this,t,e)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=y({token:t,factory:t.\u0275fac}),t})();class wl{addToWindow(t){}findTestabilityInTree(t,e,n){return null}}function Cl(t){El=t}let Ol,El=new wl,xl=!0,Il=!1;function Sl(){return Il=!0,xl}function Tl(){if(Il)throw new Error("Cannot enable prod mode after platform setup.");xl=!1}const Pl=new an("AllowMultipleToken");class Rl{constructor(t,e){this.name=t,this.token=e}}function Al(t,e,n=[]){const r=`Platform: ${e}`,i=new an(r);return(e=[])=>{let o=kl();if(!o||o.injector.get(Pl,!1))if(t)t(n.concat(e).concat({provide:i,useValue:!0}));else{const t=n.concat(e).concat({provide:i,useValue:!0},{provide:Eo,useValue:"platform"});!function(t){if(Ol&&!Ol.destroyed&&!Ol.injector.get(Pl,!1))throw new Error("There can be only one platform. Destroy the previous one to create a new one.");Ol=t.get(jl);const e=t.get(Kc,null);e&&e.forEach(t=>t())}(Fo.create({providers:t,name:r}))}return function(t){const e=kl();if(!e)throw new Error("No platform exists!");if(!e.injector.get(t,null))throw new Error("A platform with a different configuration has been created. Please destroy it first.");return e}(i)}}function kl(){return Ol&&!Ol.destroyed?Ol:null}let jl=(()=>{class t{constructor(t){this._injector=t,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(t,e){const n=function(t,e){let n;return n="noop"===t?new bl:("zone.js"===t?void 0:t)||new dl({enableLongStackTrace:Sl(),shouldCoalesceEventChangeDetection:!!(null==e?void 0:e.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==e?void 0:e.ngZoneRunCoalescing)}),n}(e?e.ngZone:void 0,{ngZoneEventCoalescing:e&&e.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:e&&e.ngZoneRunCoalescing||!1}),r=[{provide:dl,useValue:n}];return n.run(()=>{const e=Fo.create({providers:r,parent:this.injector,name:t.moduleType.name}),i=t.create(e),o=i.injector.get(Or,null);if(!o)throw new Error("No ErrorHandler. Is platform module (BrowserModule) included?");return n.runOutsideAngular(()=>{const t=n.onError.subscribe({next:t=>{o.handleError(t)}});i.onDestroy(()=>{Ml(this._modules,i),t.unsubscribe()})}),function(t,e,n){try{const r=n();return ds(r)?r.catch(n=>{throw e.runOutsideAngular(()=>t.handleError(n)),n}):r}catch(r){throw e.runOutsideAngular(()=>t.handleError(r)),r}}(o,n,()=>{const t=i.injector.get(Gc);return t.runInitializers(),t.donePromise.then(()=>(da(i.injector.get(tl,aa)||aa),this._moduleDoBootstrap(i),i))})})}bootstrapModule(t,e=[]){const n=Nl({},e);return function(t,e,n){const r=new dc(n);return Promise.resolve(r)}(0,0,t).then(t=>this.bootstrapModuleFactory(t,n))}_moduleDoBootstrap(t){const e=t.injector.get(Dl);if(t._bootstrapComponents.length>0)t._bootstrapComponents.forEach(t=>e.bootstrap(t));else{if(!t.instance.ngDoBootstrap)throw new Error(`The module ${l(t.instance.constructor)} was bootstrapped, but it does not declare "@NgModule.bootstrap" components nor a "ngDoBootstrap" method. Please define one of these.`);t.instance.ngDoBootstrap(e)}this._modules.push(t)}onDestroy(t){this._destroyListeners.push(t)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Error("The platform has already been destroyed!");this._modules.slice().forEach(t=>t.destroy()),this._destroyListeners.forEach(t=>t()),this._destroyed=!0}get destroyed(){return this._destroyed}}return t.\u0275fac=function(e){return new(e||t)(xn(Fo))},t.\u0275prov=y({token:t,factory:t.\u0275fac}),t})();function Nl(t,e){return Array.isArray(e)?e.reduce(Nl,t):Object.assign(Object.assign({},t),e)}let Dl=(()=>{class t{constructor(t,e,n,r,i,u){this._zone=t,this._console=e,this._injector=n,this._exceptionHandler=r,this._componentFactoryResolver=i,this._initStatus=u,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const c=new o.a(t=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{t.next(this._stable),t.complete()})}),l=new o.a(t=>{let e;this._zone.runOutsideAngular(()=>{e=this._zone.onStable.subscribe(()=>{dl.assertNotInAngularZone(),hl(()=>{this._stable||this._zone.hasPendingMacrotasks||this._zone.hasPendingMicrotasks||(this._stable=!0,t.next(!0))})})});const n=this._zone.onUnstable.subscribe(()=>{dl.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{t.next(!1)}))});return()=>{e.unsubscribe(),n.unsubscribe()}});this.isStable=Object(s.a)(c,l.pipe(Object(a.a)()))}bootstrap(t,e){if(!this._initStatus.done)throw new Error("Cannot bootstrap as there are still asynchronous initializers running. Bootstrap components in the `ngDoBootstrap` method of the root module.");let n;n=t instanceof au?t:this._componentFactoryResolver.resolveComponentFactory(t),this.componentTypes.push(n.componentType);const r=n.isBoundToModule?void 0:this._injector.get($u),i=n.create(Fo.NULL,[],e||n.selector,r),o=i.location.nativeElement,s=i.injector.get(vl,null),a=s&&i.injector.get(_l);return s&&a&&a.registerApplication(o,s),i.onDestroy(()=>{this.detachView(i.hostView),Ml(this.components,i),a&&a.unregisterApplication(o)}),this._loadComponent(i),Sl()&&this._console.log("Angular is running in development mode. Call enableProdMode() to enable production mode."),i}tick(){if(this._runningTick)throw new Error("ApplicationRef.tick is called recursively");try{this._runningTick=!0;for(let t of this._views)t.detectChanges()}catch(t){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(t))}finally{this._runningTick=!1}}attachView(t){const e=t;this._views.push(e),e.attachToAppRef(this)}detachView(t){const e=t;Ml(this._views,e),e.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView),this.tick(),this.components.push(t),this._injector.get(Zc,[]).concat(this._bootstrapListeners).forEach(e=>e(t))}ngOnDestroy(){this._views.slice().forEach(t=>t.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return t.\u0275fac=function(e){return new(e||t)(xn(dl),xn(Jc),xn(Fo),xn(Or),xn(cu),xn(Gc))},t.\u0275prov=y({token:t,factory:t.\u0275fac}),t})();function Ml(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}class Ll{}class Fl{}const Ul={factoryPathPrefix:"",factoryPathSuffix:".ngfactory"};let Vl=(()=>{class t{constructor(t,e){this._compiler=t,this._config=e||Ul}load(t){return this.loadAndCompile(t)}loadAndCompile(t){let[e,r]=t.split("#");return void 0===r&&(r="default"),n("zn8P")(e).then(t=>t[r]).then(t=>Ql(t,e,r)).then(t=>this._compiler.compileModuleAsync(t))}loadFactory(t){let[e,r]=t.split("#"),i="NgFactory";return void 0===r&&(r="default",i=""),n("zn8P")(this._config.factoryPathPrefix+e+this._config.factoryPathSuffix).then(t=>t[r+i]).then(t=>Ql(t,e,r))}}return t.\u0275fac=function(e){return new(e||t)(xn(cl),xn(Fl,8))},t.\u0275prov=y({token:t,factory:t.\u0275fac}),t})();function Ql(t,e,n){if(!t)throw new Error(`Cannot find '${n}' in '${e}'`);return t}const Hl=function(t){return null},ql=Al(null,"core",[{provide:Xc,useValue:"unknown"},{provide:jl,deps:[Fo]},{provide:_l,deps:[]},{provide:Jc,deps:[]}]),Bl=[{provide:Dl,useClass:Dl,deps:[dl,Jc,Fo,Or,cu,Gc]},{provide:ac,deps:[dl],useFactory:function(t){let e=[];return t.onStable.subscribe(()=>{for(;e.length;)e.pop()()}),function(t){e.push(t)}}},{provide:Gc,useClass:Gc,deps:[[new Pn,zc]]},{provide:cl,useClass:cl,deps:[]},Yc,{provide:ku,useFactory:function(){return Hu},deps:[]},{provide:Nu,useFactory:function(){return qu},deps:[]},{provide:tl,useFactory:function(t){return da(t=t||"undefined"!=typeof $localize&&$localize.locale||aa),t},deps:[[new Tn(tl),new Pn,new Rn]]},{provide:el,useValue:"USD"}];let zl=(()=>{class t{constructor(t){}}return t.\u0275mod=Z({type:t}),t.\u0275inj=b({factory:function(e){return new(e||t)(xn(Dl))},providers:Bl}),t})()},gRHU:function(t,e,n){"use strict";n.d(e,"a",function(){return o});var r=n("2fFW"),i=n("NJ4a");const o={closed:!0,next(t){},error(t){if(r.a.useDeprecatedSynchronousErrorHandling)throw t;Object(i.a)(t)},complete(){}}},jZKg:function(t,e,n){"use strict";n.d(e,"a",function(){return o});var r=n("HDdC"),i=n("quSY");function o(t,e){return new r.a(n=>{const r=new i.a;let o=0;return r.add(e.schedule(function(){o!==t.length?(n.next(t[o++]),n.closed||r.add(this.schedule())):n.complete()})),r})}},kJWO:function(t,e,n){"use strict";n.d(e,"a",function(){return r});const r=(()=>"function"==typeof Symbol&&Symbol.observable||"@@observable")()},lJxs:function(t,e,n){"use strict";n.d(e,"a",function(){return i});var r=n("7o/Q");function i(t,e){return function(n){if("function"!=typeof t)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return n.lift(new o(t,e))}}class o{constructor(t,e){this.project=t,this.thisArg=e}call(t,e){return e.subscribe(new s(t,this.project,this.thisArg))}}class s extends r.a{constructor(t,e,n){super(t),this.project=e,this.count=0,this.thisArg=n||this}_next(t){let e;try{e=this.project.call(this.thisArg,t,this.count++)}catch(n){return void this.destination.error(n)}this.destination.next(e)}}},n6bG:function(t,e,n){"use strict";function r(t){return"function"==typeof t}n.d(e,"a",function(){return r})},ngJS:function(t,e,n){"use strict";n.d(e,"a",function(){return r});const r=t=>e=>{for(let n=0,r=t.length;n<r&&!e.closed;n++)e.next(t[n]);e.complete()}},pxpQ:function(t,e,n){"use strict";n.d(e,"b",function(){return o}),n.d(e,"a",function(){return a});var r=n("7o/Q"),i=n("WMd4");function o(t,e=0){return function(n){return n.lift(new s(t,e))}}class s{constructor(t,e=0){this.scheduler=t,this.delay=e}call(t,e){return e.subscribe(new a(t,this.scheduler,this.delay))}}class a extends r.a{constructor(t,e,n=0){super(t),this.scheduler=e,this.delay=n}static dispatch(t){const{notification:e,destination:n}=t;e.observe(n),this.unsubscribe()}scheduleMessage(t){this.destination.add(this.scheduler.schedule(a.dispatch,this.delay,new u(t,this.destination)))}_next(t){this.scheduleMessage(i.a.createNext(t))}_error(t){this.scheduleMessage(i.a.createError(t)),this.unsubscribe()}_complete(){this.scheduleMessage(i.a.createComplete()),this.unsubscribe()}}class u{constructor(t,e){this.notification=t,this.destination=e}}},"q/0M":function(t,e,n){"use strict";function r(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),i=0;for(e=0;e<n;e++)for(var o=arguments[e],s=0,a=o.length;s<a;s++,i++)r[i]=o[s];return r}var i;n.d(e,"a",function(){return s}),n.d(e,"b",function(){return h}),n.d(e,"c",function(){return d}),n.d(e,"d",function(){return f});var o=[],s=function(t){return t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT",t}({}),a={debug:s.DEBUG,verbose:s.VERBOSE,info:s.INFO,warn:s.WARN,error:s.ERROR,silent:s.SILENT},u=s.INFO,c=((i={})[s.DEBUG]="log",i[s.VERBOSE]="log",i[s.INFO]="info",i[s.WARN]="warn",i[s.ERROR]="error",i),l=function(t,e){for(var n=[],i=2;i<arguments.length;i++)n[i-2]=arguments[i];if(!(e<t.logLevel)){var o=(new Date).toISOString(),s=c[e];if(!s)throw new Error("Attempted to log a message with an invalid logType (value: "+e+")");console[s].apply(console,r(["["+o+"]  "+t.name+":"],n))}},h=function(){function t(t){this.name=t,this._logLevel=u,this._logHandler=l,this._userLogHandler=null,o.push(this)}return Object.defineProperty(t.prototype,"logLevel",{get:function(){return this._logLevel},set:function(t){if(!(t in s))throw new TypeError('Invalid value "'+t+'" assigned to `logLevel`');this._logLevel=t},enumerable:!1,configurable:!0}),t.prototype.setLogLevel=function(t){this._logLevel="string"==typeof t?a[t]:t},Object.defineProperty(t.prototype,"logHandler",{get:function(){return this._logHandler},set:function(t){if("function"!=typeof t)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"userLogHandler",{get:function(){return this._userLogHandler},set:function(t){this._userLogHandler=t},enumerable:!1,configurable:!0}),t.prototype.debug=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,s.DEBUG],t)),this._logHandler.apply(this,r([this,s.DEBUG],t))},t.prototype.log=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,s.VERBOSE],t)),this._logHandler.apply(this,r([this,s.VERBOSE],t))},t.prototype.info=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,s.INFO],t)),this._logHandler.apply(this,r([this,s.INFO],t))},t.prototype.warn=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,s.WARN],t)),this._logHandler.apply(this,r([this,s.WARN],t))},t.prototype.error=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,s.ERROR],t)),this._logHandler.apply(this,r([this,s.ERROR],t))},t}();function d(t){o.forEach(function(e){e.setLogLevel(t)})}function f(t,e){for(var n=function(n){var r=null;e&&e.level&&(r=a[e.level]),n.userLogHandler=null===t?null:function(e,n){for(var i=[],o=2;o<arguments.length;o++)i[o-2]=arguments[o];var a=i.map(function(t){if(null==t)return null;if("string"==typeof t)return t;if("number"==typeof t||"boolean"==typeof t)return t.toString();if(t instanceof Error)return t.message;try{return JSON.stringify(t)}catch(e){return null}}).filter(function(t){return t}).join(" ");n>=(null!=r?r:e.logLevel)&&t({level:s[n].toLowerCase(),message:a,args:i,type:e.name})}},r=0,i=o;r<i.length;r++)n(i[r])}},qOnz:function(t,e,n){"use strict";n.d(e,"a",function(){return d}),n.d(e,"b",function(){return E}),n.d(e,"c",function(){return O}),n.d(e,"d",function(){return L}),n.d(e,"e",function(){return i}),n.d(e,"f",function(){return o}),n.d(e,"g",function(){return a}),n.d(e,"h",function(){return u}),n.d(e,"i",function(){return k}),n.d(e,"j",function(){return F}),n.d(e,"k",function(){return l}),n.d(e,"l",function(){return h}),n.d(e,"m",function(){return H}),n.d(e,"n",function(){return f}),n.d(e,"o",function(){return A}),n.d(e,"p",function(){return m}),n.d(e,"q",function(){return y}),n.d(e,"r",function(){return v}),n.d(e,"s",function(){return N}),n.d(e,"t",function(){return _}),n.d(e,"u",function(){return p}),n.d(e,"v",function(){return g}),n.d(e,"w",function(){return C}),n.d(e,"x",function(){return b}),n.d(e,"y",function(){return w}),n.d(e,"z",function(){return R}),n.d(e,"A",function(){return S}),n.d(e,"B",function(){return D}),n.d(e,"C",function(){return M}),n.d(e,"D",function(){return j}),n.d(e,"E",function(){return G}),n.d(e,"F",function(){return z}),n.d(e,"G",function(){return T}),n.d(e,"H",function(){return Q}),n.d(e,"I",function(){return q}),n.d(e,"J",function(){return B});var r=n("uXP2"),i=function(t,e){if(!t)throw o(e)},o=function(t){return new Error("Firebase Database (${JSCORE_VERSION}) INTERNAL ASSERT FAILED: "+t)},s=function(t){for(var e=[],n=0,r=0;r<t.length;r++){var i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=63&i|128):55296==(64512&i)&&r+1<t.length&&56320==(64512&t.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&t.charCodeAt(++r)),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=63&i|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=63&i|128)}return e},a={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray:function(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[],i=0;i<t.length;i+=3){var o=t[i],s=i+1<t.length,a=s?t[i+1]:0,u=i+2<t.length,c=u?t[i+2]:0,l=(15&a)<<2|c>>6,h=63&c;u||(h=64,s||(l=64)),r.push(n[o>>2],n[(3&o)<<4|a>>4],n[l],n[h])}return r.join("")},encodeString:function(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(s(t),e)},decodeString:function(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):function(t){for(var e=[],n=0,r=0;n<t.length;){var i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){var o=t[n++];e[r++]=String.fromCharCode((31&i)<<6|63&o)}else if(i>239&&i<365){var s=((7&i)<<18|(63&(o=t[n++]))<<12|(63&(a=t[n++]))<<6|63&t[n++])-65536;e[r++]=String.fromCharCode(55296+(s>>10)),e[r++]=String.fromCharCode(56320+(1023&s))}else{o=t[n++];var a=t[n++];e[r++]=String.fromCharCode((15&i)<<12|(63&o)<<6|63&a)}}return e.join("")}(this.decodeStringToByteArray(t,e))},decodeStringToByteArray:function(t,e){this.init_();for(var n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[],i=0;i<t.length;){var o=n[t.charAt(i++)],s=i<t.length?n[t.charAt(i)]:0,a=++i<t.length?n[t.charAt(i)]:64,u=++i<t.length?n[t.charAt(i)]:64;if(++i,null==o||null==s||null==a||null==u)throw Error();r.push(o<<2|s>>4),64!==a&&(r.push(s<<4&240|a>>2),64!==u&&r.push(a<<6&192|u))}return r},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}},u=function(t){var e=s(t);return a.encodeByteArray(e,!0)},c=function(t){try{return a.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function l(t){return h(void 0,t)}function h(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:return new Date(e.getTime());case Object:void 0===t&&(t={});break;case Array:t=[];break;default:return e}for(var n in e)e.hasOwnProperty(n)&&"__proto__"!==n&&(t[n]=h(t[n],e[n]));return t}var d=function(){function t(){var t=this;this.reject=function(){},this.resolve=function(){},this.promise=new Promise(function(e,n){t.resolve=e,t.reject=n})}return t.prototype.wrapCallback=function(t){var e=this;return function(n,r){n?e.reject(n):e.resolve(r),"function"==typeof t&&(e.promise.catch(function(){}),1===t.length?t(n):t(n,r))}},t}();function f(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function p(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(f())}function g(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(t){return!1}}function m(){return"object"==typeof self&&self.self===self}function y(){var t="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof t&&void 0!==t.id}function b(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function v(){return f().indexOf("Electron/")>=0}function _(){var t=f();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function w(){return f().indexOf("MSAppHost/")>=0}function C(){return!1}var O=function(t){function e(n,r,i){var o=t.call(this,r)||this;return o.code=n,o.customData=i,o.name="FirebaseError",Object.setPrototypeOf(o,e.prototype),Error.captureStackTrace&&Error.captureStackTrace(o,E.prototype.create),o}return Object(r.c)(e,t),e}(Error),E=function(){function t(t,e,n){this.service=t,this.serviceName=e,this.errors=n}return t.prototype.create=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var r=e[0]||{},i=this.service+"/"+t,o=this.errors[t],s=o?x(o,r):"Error",a=this.serviceName+": "+s+" ("+i+").",u=new O(i,a,r);return u},t}();function x(t,e){return t.replace(I,function(t,n){var r=e[n];return null!=r?String(r):"<"+n+"?>"})}var I=/\{\$([^}]+)}/g;function S(t){return JSON.parse(t)}function T(t){return JSON.stringify(t)}var P=function(t){var e={},n={},r={},i="";try{var o=t.split(".");e=S(c(o[0])||""),n=S(c(o[1])||""),i=o[2],r=n.d||{},delete n.d}catch(s){}return{header:e,claims:n,data:r,signature:i}},R=function(t){var e=P(t).claims;return!!e&&"object"==typeof e&&e.hasOwnProperty("iat")},A=function(t){var e=P(t).claims;return"object"==typeof e&&!0===e.admin};function k(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function j(t,e){return Object.prototype.hasOwnProperty.call(t,e)?t[e]:void 0}function N(t){for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function D(t,e,n){var r={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=e.call(n,t[i],i,t));return r}function M(t){for(var e=[],n=function(t,n){Array.isArray(n)?n.forEach(function(n){e.push(encodeURIComponent(t)+"="+encodeURIComponent(n))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(n))},r=0,i=Object.entries(t);r<i.length;r++){var o=i[r];n(o[0],o[1])}return e.length?"&"+e.join("&"):""}var L=function(){function t(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(var t=1;t<this.blockSize;++t)this.pad_[t]=0;this.reset()}return t.prototype.reset=function(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0},t.prototype.compress_=function(t,e){e||(e=0);var n=this.W_;if("string"==typeof t)for(var r=0;r<16;r++)n[r]=t.charCodeAt(e)<<24|t.charCodeAt(e+1)<<16|t.charCodeAt(e+2)<<8|t.charCodeAt(e+3),e+=4;else for(r=0;r<16;r++)n[r]=t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3],e+=4;for(r=16;r<80;r++)n[r]=4294967295&((h=n[r-3]^n[r-8]^n[r-14]^n[r-16])<<1|h>>>31);var i,o,s=this.chain_[0],a=this.chain_[1],u=this.chain_[2],c=this.chain_[3],l=this.chain_[4];for(r=0;r<80;r++){r<40?r<20?(i=c^a&(u^c),o=1518500249):(i=a^u^c,o=1859775393):r<60?(i=a&u|c&(a|u),o=2400959708):(i=a^u^c,o=3395469782);var h=(s<<5|s>>>27)+i+l+o+n[r]&4294967295;l=c,c=u,u=4294967295&(a<<30|a>>>2),a=s,s=h}this.chain_[0]=this.chain_[0]+s&4294967295,this.chain_[1]=this.chain_[1]+a&4294967295,this.chain_[2]=this.chain_[2]+u&4294967295,this.chain_[3]=this.chain_[3]+c&4294967295,this.chain_[4]=this.chain_[4]+l&4294967295},t.prototype.update=function(t,e){if(null!=t){void 0===e&&(e=t.length);for(var n=e-this.blockSize,r=0,i=this.buf_,o=this.inbuf_;r<e;){if(0===o)for(;r<=n;)this.compress_(t,r),r+=this.blockSize;if("string"==typeof t){for(;r<e;)if(i[o]=t.charCodeAt(r),++r,++o===this.blockSize){this.compress_(i),o=0;break}}else for(;r<e;)if(i[o]=t[r],++r,++o===this.blockSize){this.compress_(i),o=0;break}}this.inbuf_=o,this.total_+=e}},t.prototype.digest=function(){var t=[],e=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(var n=this.blockSize-1;n>=56;n--)this.buf_[n]=255&e,e/=256;this.compress_(this.buf_);var r=0;for(n=0;n<5;n++)for(var i=24;i>=0;i-=8)t[r]=this.chain_[n]>>i&255,++r;return t},t}();function F(t,e){var n=new U(t,e);return n.subscribe.bind(n)}var U=function(){function t(t,e){var n=this;this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=e,this.task.then(function(){t(n)}).catch(function(t){n.error(t)})}return t.prototype.next=function(t){this.forEachObserver(function(e){e.next(t)})},t.prototype.error=function(t){this.forEachObserver(function(e){e.error(t)}),this.close(t)},t.prototype.complete=function(){this.forEachObserver(function(t){t.complete()}),this.close()},t.prototype.subscribe=function(t,e,n){var r,i=this;if(void 0===t&&void 0===e&&void 0===n)throw new Error("Missing Observer.");void 0===(r=function(t,e){if("object"!=typeof t||null===t)return!1;for(var n=0,r=["next","error","complete"];n<r.length;n++){var i=r[n];if(i in t&&"function"==typeof t[i])return!0}return!1}(t)?t:{next:t,error:e,complete:n}).next&&(r.next=V),void 0===r.error&&(r.error=V),void 0===r.complete&&(r.complete=V);var o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(function(){try{i.finalError?r.error(i.finalError):r.complete()}catch(t){}}),this.observers.push(r),o},t.prototype.unsubscribeOne=function(t){void 0!==this.observers&&void 0!==this.observers[t]&&(delete this.observers[t],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))},t.prototype.forEachObserver=function(t){if(!this.finalized)for(var e=0;e<this.observers.length;e++)this.sendOne(e,t)},t.prototype.sendOne=function(t,e){var n=this;this.task.then(function(){if(void 0!==n.observers&&void 0!==n.observers[t])try{e(n.observers[t])}catch(r){"undefined"!=typeof console&&console.error&&console.error(r)}})},t.prototype.close=function(t){var e=this;this.finalized||(this.finalized=!0,void 0!==t&&(this.finalError=t),this.task.then(function(){e.observers=void 0,e.onNoObservers=void 0}))},t}();function V(){}var Q=function(t,e,n,r){var i;if(r<e?i="at least "+e:r>n&&(i=0===n?"none":"no more than "+n),i)throw new Error(t+" failed: Was called with "+r+(1===r?" argument.":" arguments.")+" Expects "+i+".")};function H(t,e,n){var r="";switch(e){case 1:r=n?"first":"First";break;case 2:r=n?"second":"Second";break;case 3:r=n?"third":"Third";break;case 4:r=n?"fourth":"Fourth";break;default:throw new Error("errorPrefix called with argumentNumber > 4.  Need to update it?")}return t+" failed: "+r+" argument "}function q(t,e,n,r){if((!r||n)&&"function"!=typeof n)throw new Error(H(t,e,r)+"must be a valid function.")}function B(t,e,n,r){if((!r||n)&&("object"!=typeof n||null===n))throw new Error(H(t,e,r)+"must be a valid context object.")}var z=function(t){for(var e=[],n=0,r=0;r<t.length;r++){var o=t.charCodeAt(r);if(o>=55296&&o<=56319){var s=o-55296;r++,i(r<t.length,"Surrogate pair missing trail surrogate."),o=65536+(s<<10)+(t.charCodeAt(r)-56320)}o<128?e[n++]=o:o<2048?(e[n++]=o>>6|192,e[n++]=63&o|128):o<65536?(e[n++]=o>>12|224,e[n++]=o>>6&63|128,e[n++]=63&o|128):(e[n++]=o>>18|240,e[n++]=o>>12&63|128,e[n++]=o>>6&63|128,e[n++]=63&o|128)}return e},G=function(t){for(var e=0,n=0;n<t.length;n++){var r=t.charCodeAt(n);r<128?e++:r<2048?e+=2:r>=55296&&r<=56319?(e+=4,n++):e+=3}return e}},qgXg:function(t,e,n){"use strict";n.d(e,"b",function(){return a}),n.d(e,"a",function(){return u});var r=n("3N8a");class i extends r.a{constructor(t,e){super(t,e),this.scheduler=t,this.work=e}schedule(t,e=0){return e>0?super.schedule(t,e):(this.delay=e,this.state=t,this.scheduler.flush(this),this)}execute(t,e){return e>0||this.closed?super.execute(t,e):this._execute(t,e)}requestAsyncId(t,e,n=0){return null!==n&&n>0||null===n&&this.delay>0?super.requestAsyncId(t,e,n):t.flush(this)}}var o=n("IjjT");class s extends o.a{}const a=new s(i),u=a},quSY:function(t,e,n){"use strict";n.d(e,"a",function(){return a});var r=n("DH7j"),i=n("XoHu"),o=n("n6bG");const s=(()=>{function t(t){return Error.call(this),this.message=t?`${t.length} errors occurred during unsubscription:\n${t.map((t,e)=>`${e+1}) ${t.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=t,this}return t.prototype=Object.create(Error.prototype),t})();let a=(()=>{class t{constructor(t){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,t&&(this._ctorUnsubscribe=!0,this._unsubscribe=t)}unsubscribe(){let e;if(this.closed)return;let{_parentOrParents:n,_ctorUnsubscribe:a,_unsubscribe:c,_subscriptions:l}=this;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,n instanceof t)n.remove(this);else if(null!==n)for(let t=0;t<n.length;++t)n[t].remove(this);if(Object(o.a)(c)){a&&(this._unsubscribe=void 0);try{c.call(this)}catch(h){e=h instanceof s?u(h.errors):[h]}}if(Object(r.a)(l)){let t=-1,n=l.length;for(;++t<n;){const n=l[t];if(Object(i.a)(n))try{n.unsubscribe()}catch(h){e=e||[],h instanceof s?e=e.concat(u(h.errors)):e.push(h)}}}if(e)throw new s(e)}add(e){let n=e;if(!e)return t.EMPTY;switch(typeof e){case"function":n=new t(e);case"object":if(n===this||n.closed||"function"!=typeof n.unsubscribe)return n;if(this.closed)return n.unsubscribe(),n;if(!(n instanceof t)){const e=n;n=new t,n._subscriptions=[e]}break;default:throw new Error("unrecognized teardown "+e+" added to Subscription.")}let{_parentOrParents:r}=n;if(null===r)n._parentOrParents=this;else if(r instanceof t){if(r===this)return n;n._parentOrParents=[r,this]}else{if(-1!==r.indexOf(this))return n;r.push(this)}const i=this._subscriptions;return null===i?this._subscriptions=[n]:i.push(n),n}remove(t){const e=this._subscriptions;if(e){const n=e.indexOf(t);-1!==n&&e.splice(n,1)}}}var e;return t.EMPTY=((e=new t).closed=!0,e),t})();function u(t){return t.reduce((t,e)=>t.concat(e instanceof s?e.errors:e),[])}},spgP:function(t,e,n){"use strict";(function(t){n.d(e,"a",function(){return I}),n.d(e,"b",function(){return v}),n.d(e,"c",function(){return b}),n.d(e,"d",function(){return f}),n.d(e,"e",function(){return y}),n.d(e,"f",function(){return E}),n.d(e,"g",function(){return w}),n.d(e,"h",function(){return p}),n.d(e,"i",function(){return m}),n.d(e,"j",function(){return C});var r=n("qgXg"),i=n("D0XW"),o=n("vkgz"),s=n("tf+s"),a=n("pxpQ"),u=n("fXoL"),c=n("Jgta");function l(){}class h{constructor(t,e=r.b){this.zone=t,this.delegate=e}now(){return this.delegate.now()}schedule(t,e,n){const r=this.zone;return this.delegate.schedule(function(e){r.runGuarded(()=>{t.apply(this,[e])})},e,n)}}class d{constructor(t){this.zone=t,this.task=null}call(t,e){const n=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",l,{},l,l)),e.pipe(Object(o.a)({next:n,complete:n,error:n})).subscribe(t).add(n)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}class f{constructor(t){this.ngZone=t,this.outsideAngular=t.runOutsideAngular(()=>new h(Zone.current)),this.insideAngular=t.run(()=>new h(Zone.current,i.b))}}function p(t){return function(e){return(e=e.lift(new d(t.ngZone))).pipe(Object(s.a)(t.outsideAngular),Object(a.b)(t.insideAngular))}}const g=["ngOnDestroy"],m=(t,e,n,r={})=>new Proxy(t,{get:(i,o)=>n.runOutsideAngular(()=>{var i;if(t[o])return(null===(i=null==r?void 0:r.spy)||void 0===i?void 0:i.get)&&r.spy.get(o,t[o]),t[o];if(g.indexOf(o)>-1)return()=>{};const s=e.toPromise().then(t=>{const e=t&&t[o];return"function"==typeof e?e.bind(t):e&&e.then?e.then(t=>n.run(()=>t)):n.run(()=>e)});return new Proxy(()=>{},{get:(t,e)=>s[e],apply:(t,e,n)=>s.then(t=>{var e;const i=t&&t(...n);return(null===(e=null==r?void 0:r.spy)||void 0===e?void 0:e.apply)&&r.spy.apply(o,n,i),i})})})}),y=(t,e)=>{e.forEach(e=>{Object.getOwnPropertyNames(e.prototype||e).forEach(n=>{Object.defineProperty(t.prototype,n,Object.getOwnPropertyDescriptor(e.prototype||e,n))})})},b=new u.r("angularfire2.app.options"),v=new u.r("angularfire2.app.nameOrConfig"),_=new u.P("6.1.4");function w(e,n,r){const i="object"==typeof r&&r||{};i.name=i.name||"string"==typeof r&&r||"[DEFAULT]";const o=c.a.apps.filter(t=>t&&t.name===i.name)[0]||n.runOutsideAngular(()=>c.a.initializeApp(e,i));try{JSON.stringify(e)!==JSON.stringify(o.options)&&O("error",`${o.name} Firebase App already initialized with different options${t.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch(s){}return o}const C=()=>{O("warn","You may need to import 'firebase/auth' manually in your component rather than rely on AngularFireAuth's dynamic import, when using the emulator suite https://github.com/angular/angularfire/issues/2656")},O=(t,...e)=>{Object(u.V)()&&"undefined"!=typeof console&&console[t](...e)};function E(e,n,r,i,o){const[s,...a]=globalThis.\u0275AngularfireInstanceCache.get(e)||[];if(s){try{o.some((t,e)=>{const n=a[e];return t&&"object"==typeof t?JSON.stringify(t)!==JSON.stringify(n):t!==n})&&O("error",`${n} was already initialized on the ${r.name} Firebase App instance with different settings.${t.hot?" You may need to reload as Firebase is not HMR aware.":""}`)}catch(u){}return s}{const t=i();return globalThis.\u0275AngularfireInstanceCache.set(e,[t,...o]),t}}globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=new Map);const x={provide:class{},useFactory:w,deps:[b,u.A,[new u.B,v]]};let I=(()=>{class t{constructor(t){c.a.registerVersion("angularfire",_.full,t.toString()),c.a.registerVersion("angular",u.O.full)}static initializeApp(e,n){return{ngModule:t,providers:[{provide:b,useValue:e},{provide:v,useValue:n}]}}}return t.\u0275mod=u.Kb({type:t}),t.\u0275inj=u.Jb({factory:function(e){return new(e||t)(u.Yb(u.C))},providers:[x]}),t})()}).call(this,n("3UD+")(t))},"tf+s":function(t,e,n){"use strict";n.d(e,"a",function(){return m});var r=n("HDdC");let i=1;const o=(()=>Promise.resolve())(),s={};function a(t){return t in s&&(delete s[t],!0)}const u={setImmediate(t){const e=i++;return s[e]=!0,o.then(()=>a(e)&&t()),e},clearImmediate(t){a(t)}};var c=n("3N8a");class l extends c.a{constructor(t,e){super(t,e),this.scheduler=t,this.work=e}requestAsyncId(t,e,n=0){return null!==n&&n>0?super.requestAsyncId(t,e,n):(t.actions.push(this),t.scheduled||(t.scheduled=u.setImmediate(t.flush.bind(t,null))))}recycleAsyncId(t,e,n=0){if(null!==n&&n>0||null===n&&this.delay>0)return super.recycleAsyncId(t,e,n);0===t.actions.length&&(u.clearImmediate(e),t.scheduled=void 0)}}var h=n("IjjT");class d extends h.a{flush(t){this.active=!0,this.scheduled=void 0;const{actions:e}=this;let n,r=-1,i=e.length;t=t||e.shift();do{if(n=t.execute(t.state,t.delay))break}while(++r<i&&(t=e.shift()));if(this.active=!1,n){for(;++r<i&&(t=e.shift());)t.unsubscribe();throw n}}}const f=new d(l);var p=n("Y7HM");class g extends r.a{constructor(t,e=0,n=f){super(),this.source=t,this.delayTime=e,this.scheduler=n,(!Object(p.a)(e)||e<0)&&(this.delayTime=0),n&&"function"==typeof n.schedule||(this.scheduler=f)}static create(t,e=0,n=f){return new g(t,e,n)}static dispatch(t){const{source:e,subscriber:n}=t;return this.add(e.subscribe(n))}_subscribe(t){return this.scheduler.schedule(g.dispatch,this.delayTime,{source:this.source,subscriber:t})}}function m(t,e=0){return function(n){return n.lift(new y(t,e))}}class y{constructor(t,e){this.scheduler=t,this.delay=e}call(t,e){return new g(e,this.delay,this.scheduler).subscribe(t)}}},uXP2:function(t,e,n){"use strict";n.d(e,"c",function(){return i}),n.d(e,"a",function(){return o}),n.d(e,"b",function(){return s}),n.d(e,"d",function(){return a}),n.d(e,"h",function(){return u}),n.d(e,"e",function(){return c}),n.d(e,"f",function(){return l}),n.d(e,"g",function(){return h});var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};function i(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var o=function(){return(o=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};function s(t,e,n,r){return new(n||(n=Promise))(function(i,o){function s(t){try{u(r.next(t))}catch(e){o(e)}}function a(t){try{u(r.throw(t))}catch(e){o(e)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(s,a)}u((r=r.apply(t,e||[])).next())})}function a(t,e){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((i=(i=s.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=e.call(t,s)}catch(a){o=[6,a],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}}function u(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function c(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,o=n.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(a){i={error:a}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s}function l(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(c(arguments[e]));return t}function h(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),i=0;for(e=0;e<n;e++)for(var o=arguments[e],s=0,a=o.length;s<a;s++,i++)r[i]=o[s];return r}},vkgz:function(t,e,n){"use strict";n.d(e,"a",function(){return s});var r=n("7o/Q"),i=n("KqfI"),o=n("n6bG");function s(t,e,n){return function(r){return r.lift(new a(t,e,n))}}class a{constructor(t,e,n){this.nextOrObserver=t,this.error=e,this.complete=n}call(t,e){return e.subscribe(new u(t,this.nextOrObserver,this.error,this.complete))}}class u extends r.a{constructor(t,e,n,r){super(t),this._tapNext=i.a,this._tapError=i.a,this._tapComplete=i.a,this._tapError=n||i.a,this._tapComplete=r||i.a,Object(o.a)(e)?(this._context=this,this._tapNext=e):e&&(this._context=e,this._tapNext=e.next||i.a,this._tapError=e.error||i.a,this._tapComplete=e.complete||i.a)}_next(t){try{this._tapNext.call(this._context,t)}catch(e){return void this.destination.error(e)}this.destination.next(t)}_error(t){try{this._tapError.call(this._context,t)}catch(t){return void this.destination.error(t)}this.destination.error(t)}_complete(){try{this._tapComplete.call(this._context)}catch(t){return void this.destination.error(t)}return this.destination.complete()}}},w1tV:function(t,e,n){"use strict";n.d(e,"a",function(){return p});var r=n("XNiG"),i=n("HDdC"),o=n("7o/Q"),s=n("quSY");function a(){return function(t){return t.lift(new u(t))}}class u{constructor(t){this.connectable=t}call(t,e){const{connectable:n}=this;n._refCount++;const r=new c(t,n),i=e.subscribe(r);return r.closed||(r.connection=n.connect()),i}}class c extends o.a{constructor(t,e){super(t),this.connectable=e}_unsubscribe(){const{connectable:t}=this;if(!t)return void(this.connection=null);this.connectable=null;const e=t._refCount;if(e<=0)return void(this.connection=null);if(t._refCount=e-1,e>1)return void(this.connection=null);const{connection:n}=this,r=t._connection;this.connection=null,!r||n&&r!==n||r.unsubscribe()}}class l extends i.a{constructor(t,e){super(),this.source=t,this.subjectFactory=e,this._refCount=0,this._isComplete=!1}_subscribe(t){return this.getSubject().subscribe(t)}getSubject(){const t=this._subject;return t&&!t.isStopped||(this._subject=this.subjectFactory()),this._subject}connect(){let t=this._connection;return t||(this._isComplete=!1,t=this._connection=new s.a,t.add(this.source.subscribe(new d(this.getSubject(),this))),t.closed&&(this._connection=null,t=s.a.EMPTY)),t}refCount(){return a()(this)}}const h=(()=>{const t=l.prototype;return{operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:t._subscribe},_isComplete:{value:t._isComplete,writable:!0},getSubject:{value:t.getSubject},connect:{value:t.connect},refCount:{value:t.refCount}}})();class d extends r.b{constructor(t,e){super(t),this.connectable=e}_error(t){this._unsubscribe(),super._error(t)}_complete(){this.connectable._isComplete=!0,this._unsubscribe(),super._complete()}_unsubscribe(){const t=this.connectable;if(t){this.connectable=null;const e=t._connection;t._refCount=0,t._subject=null,t._connection=null,e&&e.unsubscribe()}}}function f(){return new r.a}function p(){return t=>{return a()((e=f,function(t){let n;n="function"==typeof e?e:function(){return e};const r=Object.create(t,h);return r.source=t,r.subjectFactory=n,r})(t));var e}}},yCtX:function(t,e,n){"use strict";n.d(e,"a",function(){return s});var r=n("HDdC"),i=n("ngJS"),o=n("jZKg");function s(t,e){return e?Object(o.a)(t,e):new r.a(Object(i.a)(t))}},"z+Ro":function(t,e,n){"use strict";function r(t){return t&&"function"==typeof t.schedule}n.d(e,"a",function(){return r})},zIRd:function(t,e,n){"use strict";var r,i,o=n("uXP2"),s=n("qOnz"),a=n("/6Yf"),u=n("q/0M"),c=((r={})["no-app"]="No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()",r["bad-app-name"]="Illegal App name: '{$appName}",r["duplicate-app"]="Firebase App named '{$appName}' already exists",r["app-deleted"]="Firebase App named '{$appName}' already deleted",r["invalid-app-argument"]="firebase.{$appName}() takes either no argument or a Firebase App instance.",r["invalid-log-argument"]="First argument to `onLog` must be null or a function.",r),l=new s.b("app","Firebase",c),h="@firebase/app",d="[DEFAULT]",f=((i={})[h]="fire-core",i["@firebase/analytics"]="fire-analytics",i["@firebase/auth"]="fire-auth",i["@firebase/database"]="fire-rtdb",i["@firebase/functions"]="fire-fn",i["@firebase/installations"]="fire-iid",i["@firebase/messaging"]="fire-fcm",i["@firebase/performance"]="fire-perf",i["@firebase/remote-config"]="fire-rc",i["@firebase/storage"]="fire-gcs",i["@firebase/firestore"]="fire-fst",i["fire-js"]="fire-js",i["firebase-wrapper"]="fire-js-all",i),p=new u.b("@firebase/app"),g=function(){function t(t,e,n){var r,i,u=this;this.firebase_=n,this.isDeleted_=!1,this.name_=e.name,this.automaticDataCollectionEnabled_=e.automaticDataCollectionEnabled||!1,this.options_=Object(s.k)(t),this.container=new a.b(e.name),this._addComponent(new a.a("app",function(){return u},"PUBLIC"));try{for(var c=Object(o.h)(this.firebase_.INTERNAL.components.values()),l=c.next();!l.done;l=c.next())this._addComponent(l.value)}catch(h){r={error:h}}finally{try{l&&!l.done&&(i=c.return)&&i.call(c)}finally{if(r)throw r.error}}}return Object.defineProperty(t.prototype,"automaticDataCollectionEnabled",{get:function(){return this.checkDestroyed_(),this.automaticDataCollectionEnabled_},set:function(t){this.checkDestroyed_(),this.automaticDataCollectionEnabled_=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return this.checkDestroyed_(),this.name_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"options",{get:function(){return this.checkDestroyed_(),this.options_},enumerable:!1,configurable:!0}),t.prototype.delete=function(){var t=this;return new Promise(function(e){t.checkDestroyed_(),e()}).then(function(){return t.firebase_.INTERNAL.removeApp(t.name_),Promise.all(t.container.getProviders().map(function(t){return t.delete()}))}).then(function(){t.isDeleted_=!0})},t.prototype._getService=function(t,e){return void 0===e&&(e=d),this.checkDestroyed_(),this.container.getProvider(t).getImmediate({identifier:e})},t.prototype._removeServiceInstance=function(t,e){void 0===e&&(e=d),this.container.getProvider(t).clearInstance(e)},t.prototype._addComponent=function(t){try{this.container.addComponent(t)}catch(e){p.debug("Component "+t.name+" failed to register with FirebaseApp "+this.name,e)}},t.prototype._addOrOverwriteComponent=function(t){this.container.addOrOverwriteComponent(t)},t.prototype.toJSON=function(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}},t.prototype.checkDestroyed_=function(){if(this.isDeleted_)throw l.create("app-deleted",{appName:this.name_})},t}();g.prototype.name&&g.prototype.options||g.prototype.delete||console.log("dc");var m=function t(){var e=function(t){var e={},n=new Map,r={__esModule:!0,initializeApp:function(n,i){void 0===i&&(i={}),"object"==typeof i&&null!==i||(i={name:i});var o=i;void 0===o.name&&(o.name=d);var a=o.name;if("string"!=typeof a||!a)throw l.create("bad-app-name",{appName:String(a)});if(Object(s.i)(e,a))throw l.create("duplicate-app",{appName:a});var u=new t(n,o,r);return e[a]=u,u},app:i,registerVersion:function(t,e,n){var r,i=null!==(r=f[t])&&void 0!==r?r:t;n&&(i+="-"+n);var o=i.match(/\s|\//),s=e.match(/\s|\//);if(o||s){var u=['Unable to register library "'+i+'" with version "'+e+'":'];return o&&u.push('library name "'+i+'" contains illegal characters (whitespace or "/")'),o&&s&&u.push("and"),s&&u.push('version name "'+e+'" contains illegal characters (whitespace or "/")'),void p.warn(u.join(" "))}c(new a.a(i+"-version",function(){return{library:i,version:e}},"VERSION"))},setLogLevel:u.c,onLog:function(t,e){if(null!==t&&"function"!=typeof t)throw l.create("invalid-log-argument",{appName:name});Object(u.d)(t,e)},apps:null,SDK_VERSION:"8.2.5",INTERNAL:{registerComponent:c,removeApp:function(t){delete e[t]},components:n,useAsService:function(t,e){return"serverAuth"===e?null:e}}};function i(t){if(t=t||d,!Object(s.i)(e,t))throw l.create("no-app",{appName:t});return e[t]}function c(a){var u,c,h=a.name;if(n.has(h))return p.debug("There were multiple attempts to register component "+h+"."),"PUBLIC"===a.type?r[h]:null;if(n.set(h,a),"PUBLIC"===a.type){var d=function(t){if(void 0===t&&(t=i()),"function"!=typeof t[h])throw l.create("invalid-app-argument",{appName:h});return t[h]()};void 0!==a.serviceProps&&Object(s.l)(d,a.serviceProps),r[h]=d,t.prototype[h]=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return this._getService.bind(this,h).apply(this,a.multipleInstances?t:[])}}try{for(var f=Object(o.h)(Object.keys(e)),g=f.next();!g.done;g=f.next())e[g.value]._addComponent(a)}catch(m){u={error:m}}finally{try{g&&!g.done&&(c=f.return)&&c.call(f)}finally{if(u)throw u.error}}return"PUBLIC"===a.type?r[h]:null}return r.default=r,Object.defineProperty(r,"apps",{get:function(){return Object.keys(e).map(function(t){return e[t]})}}),i.App=t,r}(g);return e.INTERNAL=Object(o.a)(Object(o.a)({},e.INTERNAL),{createFirebaseNamespace:t,extendNamespace:function(t){Object(s.l)(e,t)},createSubscribe:s.j,ErrorFactory:s.b,deepExtend:s.l}),e}(),y=function(){function t(t){this.container=t}return t.prototype.getPlatformInfoString=function(){return this.container.getProviders().map(function(t){if(function(t){var e=t.getComponent();return"VERSION"===(null==e?void 0:e.type)}(t)){var e=t.getImmediate();return e.library+"/"+e.version}return null}).filter(function(t){return t}).join(" ")},t}();if(Object(s.p)()&&void 0!==self.firebase){p.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");var b=self.firebase.SDK_VERSION;b&&b.indexOf("LITE")>=0&&p.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}var v=m.initializeApp;m.initializeApp=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return Object(s.v)()&&p.warn('\n      Warning: This is a browser-targeted Firebase bundle but it appears it is being\n      run in a Node environment.  If running in a Node environment, make sure you\n      are using the bundle specified by the "main" field in package.json.\n      \n      If you are using Webpack, you can specify "main" as the first item in\n      "resolve.mainFields":\n      https://webpack.js.org/configuration/resolve/#resolvemainfields\n      \n      If using Rollup, use the @rollup/plugin-node-resolve plugin and specify "main"\n      as the first item in "mainFields", e.g. [\'main\', \'module\'].\n      https://github.com/rollup/@rollup/plugin-node-resolve\n      '),v.apply(void 0,t)};var _=m;!function(t,e){t.INTERNAL.registerComponent(new a.a("platform-logger",function(t){return new y(t)},"PRIVATE")),t.registerVersion(h,"0.6.14",void 0),t.registerVersion("fire-js","")}(_),e.a=_},zUnb:function(t,e,n){"use strict";n.r(e);var r=n("fXoL");let i=null;function o(){return i}const s=new r.r("DocumentToken");let a=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=Object(r.Ib)({factory:u,token:t,providedIn:"platform"}),t})();function u(){return Object(r.Yb)(l)}const c=new r.r("Location Initialized");let l=(()=>{class t extends a{constructor(t){super(),this._doc=t,this._init()}_init(){this.location=o().getLocation(),this._history=o().getHistory()}getBaseHrefFromDOM(){return o().getBaseHref(this._doc)}onPopState(t){o().getGlobalEventTarget(this._doc,"window").addEventListener("popstate",t,!1)}onHashChange(t){o().getGlobalEventTarget(this._doc,"window").addEventListener("hashchange",t,!1)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(t){this.location.pathname=t}pushState(t,e,n){h()?this._history.pushState(t,e,n):this.location.hash=n}replaceState(t,e,n){h()?this._history.replaceState(t,e,n):this.location.hash=n}forward(){this._history.forward()}back(){this._history.back()}getState(){return this._history.state}}return t.\u0275fac=function(e){return new(e||t)(r.Yb(s))},t.\u0275prov=Object(r.Ib)({factory:d,token:t,providedIn:"platform"}),t})();function h(){return!!window.history.pushState}function d(){return new l(Object(r.Yb)(s))}function f(t,e){if(0==t.length)return e;if(0==e.length)return t;let n=0;return t.endsWith("/")&&n++,e.startsWith("/")&&n++,2==n?t+e.substring(1):1==n?t+e:t+"/"+e}function p(t){const e=t.match(/#|\?|$/),n=e&&e.index||t.length;return t.slice(0,n-("/"===t[n-1]?1:0))+t.slice(n)}function g(t){return t&&"?"!==t[0]?"?"+t:t}let m=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=Object(r.Ib)({factory:y,token:t,providedIn:"root"}),t})();function y(t){const e=Object(r.Yb)(s).location;return new v(Object(r.Yb)(a),e&&e.origin||"")}const b=new r.r("appBaseHref");let v=(()=>{class t extends m{constructor(t,e){if(super(),this._platformLocation=t,null==e&&(e=this._platformLocation.getBaseHrefFromDOM()),null==e)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=e}onPopState(t){this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t)}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return f(this._baseHref,t)}path(t=!1){const e=this._platformLocation.pathname+g(this._platformLocation.search),n=this._platformLocation.hash;return n&&t?`${e}${n}`:e}pushState(t,e,n,r){const i=this.prepareExternalUrl(n+g(r));this._platformLocation.pushState(t,e,i)}replaceState(t,e,n,r){const i=this.prepareExternalUrl(n+g(r));this._platformLocation.replaceState(t,e,i)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}}return t.\u0275fac=function(e){return new(e||t)(r.Yb(a),r.Yb(b,8))},t.\u0275prov=r.Ib({token:t,factory:t.\u0275fac}),t})(),_=(()=>{class t extends m{constructor(t,e){super(),this._platformLocation=t,this._baseHref="",null!=e&&(this._baseHref=e)}onPopState(t){this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t)}getBaseHref(){return this._baseHref}path(t=!1){let e=this._platformLocation.hash;return null==e&&(e="#"),e.length>0?e.substring(1):e}prepareExternalUrl(t){const e=f(this._baseHref,t);return e.length>0?"#"+e:e}pushState(t,e,n,r){let i=this.prepareExternalUrl(n+g(r));0==i.length&&(i=this._platformLocation.pathname),this._platformLocation.pushState(t,e,i)}replaceState(t,e,n,r){let i=this.prepareExternalUrl(n+g(r));0==i.length&&(i=this._platformLocation.pathname),this._platformLocation.replaceState(t,e,i)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}}return t.\u0275fac=function(e){return new(e||t)(r.Yb(a),r.Yb(b,8))},t.\u0275prov=r.Ib({token:t,factory:t.\u0275fac}),t})(),w=(()=>{class t{constructor(t,e){this._subject=new r.n,this._urlChangeListeners=[],this._platformStrategy=t;const n=this._platformStrategy.getBaseHref();this._platformLocation=e,this._baseHref=p(O(n)),this._platformStrategy.onPopState(t=>{this._subject.emit({url:this.path(!0),pop:!0,state:t.state,type:t.type})})}path(t=!1){return this.normalize(this._platformStrategy.path(t))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(t,e=""){return this.path()==this.normalize(t+g(e))}normalize(e){return t.stripTrailingSlash(function(t,e){return t&&e.startsWith(t)?e.substring(t.length):e}(this._baseHref,O(e)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._platformStrategy.prepareExternalUrl(t)}go(t,e="",n=null){this._platformStrategy.pushState(n,"",t,e),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+g(e)),n)}replaceState(t,e="",n=null){this._platformStrategy.replaceState(n,"",t,e),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+g(e)),n)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}onUrlChange(t){this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(t=>{this._notifyUrlChangeListeners(t.url,t.state)}))}_notifyUrlChangeListeners(t="",e){this._urlChangeListeners.forEach(n=>n(t,e))}subscribe(t,e,n){return this._subject.subscribe({next:t,error:e,complete:n})}}return t.\u0275fac=function(e){return new(e||t)(r.Yb(m),r.Yb(a))},t.normalizeQueryParams=g,t.joinWithSlash=f,t.stripTrailingSlash=p,t.\u0275prov=Object(r.Ib)({factory:C,token:t,providedIn:"root"}),t})();function C(){return new w(Object(r.Yb)(m),Object(r.Yb)(a))}function O(t){return t.replace(/\/index.html$/,"")}const E={ADP:[void 0,void 0,0],AFN:[void 0,void 0,0],ALL:[void 0,void 0,0],AMD:[void 0,void 0,2],AOA:[void 0,"Kz"],ARS:[void 0,"$"],AUD:["A$","$"],BAM:[void 0,"KM"],BBD:[void 0,"$"],BDT:[void 0,"\u09f3"],BHD:[void 0,void 0,3],BIF:[void 0,void 0,0],BMD:[void 0,"$"],BND:[void 0,"$"],BOB:[void 0,"Bs"],BRL:["R$"],BSD:[void 0,"$"],BWP:[void 0,"P"],BYN:[void 0,"\u0440.",2],BYR:[void 0,void 0,0],BZD:[void 0,"$"],CAD:["CA$","$",2],CHF:[void 0,void 0,2],CLF:[void 0,void 0,4],CLP:[void 0,"$",0],CNY:["CN\xa5","\xa5"],COP:[void 0,"$",2],CRC:[void 0,"\u20a1",2],CUC:[void 0,"$"],CUP:[void 0,"$"],CZK:[void 0,"K\u010d",2],DJF:[void 0,void 0,0],DKK:[void 0,"kr",2],DOP:[void 0,"$"],EGP:[void 0,"E\xa3"],ESP:[void 0,"\u20a7",0],EUR:["\u20ac"],FJD:[void 0,"$"],FKP:[void 0,"\xa3"],GBP:["\xa3"],GEL:[void 0,"\u20be"],GIP:[void 0,"\xa3"],GNF:[void 0,"FG",0],GTQ:[void 0,"Q"],GYD:[void 0,"$",2],HKD:["HK$","$"],HNL:[void 0,"L"],HRK:[void 0,"kn"],HUF:[void 0,"Ft",2],IDR:[void 0,"Rp",2],ILS:["\u20aa"],INR:["\u20b9"],IQD:[void 0,void 0,0],IRR:[void 0,void 0,0],ISK:[void 0,"kr",0],ITL:[void 0,void 0,0],JMD:[void 0,"$"],JOD:[void 0,void 0,3],JPY:["\xa5",void 0,0],KHR:[void 0,"\u17db"],KMF:[void 0,"CF",0],KPW:[void 0,"\u20a9",0],KRW:["\u20a9",void 0,0],KWD:[void 0,void 0,3],KYD:[void 0,"$"],KZT:[void 0,"\u20b8"],LAK:[void 0,"\u20ad",0],LBP:[void 0,"L\xa3",0],LKR:[void 0,"Rs"],LRD:[void 0,"$"],LTL:[void 0,"Lt"],LUF:[void 0,void 0,0],LVL:[void 0,"Ls"],LYD:[void 0,void 0,3],MGA:[void 0,"Ar",0],MGF:[void 0,void 0,0],MMK:[void 0,"K",0],MNT:[void 0,"\u20ae",2],MRO:[void 0,void 0,0],MUR:[void 0,"Rs",2],MXN:["MX$","$"],MYR:[void 0,"RM"],NAD:[void 0,"$"],NGN:[void 0,"\u20a6"],NIO:[void 0,"C$"],NOK:[void 0,"kr",2],NPR:[void 0,"Rs"],NZD:["NZ$","$"],OMR:[void 0,void 0,3],PHP:[void 0,"\u20b1"],PKR:[void 0,"Rs",2],PLN:[void 0,"z\u0142"],PYG:[void 0,"\u20b2",0],RON:[void 0,"lei"],RSD:[void 0,void 0,0],RUB:[void 0,"\u20bd"],RUR:[void 0,"\u0440."],RWF:[void 0,"RF",0],SBD:[void 0,"$"],SEK:[void 0,"kr",2],SGD:[void 0,"$"],SHP:[void 0,"\xa3"],SLL:[void 0,void 0,0],SOS:[void 0,void 0,0],SRD:[void 0,"$"],SSP:[void 0,"\xa3"],STD:[void 0,void 0,0],STN:[void 0,"Db"],SYP:[void 0,"\xa3",0],THB:[void 0,"\u0e3f"],TMM:[void 0,void 0,0],TND:[void 0,void 0,3],TOP:[void 0,"T$"],TRL:[void 0,void 0,0],TRY:[void 0,"\u20ba"],TTD:[void 0,"$"],TWD:["NT$","$",2],TZS:[void 0,void 0,2],UAH:[void 0,"\u20b4"],UGX:[void 0,void 0,0],USD:["$"],UYI:[void 0,void 0,0],UYU:[void 0,"$"],UYW:[void 0,void 0,4],UZS:[void 0,void 0,2],VEF:[void 0,"Bs",2],VND:["\u20ab",void 0,0],VUV:[void 0,void 0,0],XAF:["FCFA",void 0,0],XCD:["EC$","$"],XOF:["CFA",void 0,0],XPF:["CFPF",void 0,0],XXX:["\xa4"],YER:[void 0,void 0,0],ZAR:[void 0,"R"],ZMK:[void 0,void 0,0],ZMW:[void 0,"ZK"],ZWD:[void 0,void 0,0]};var x=function(t){return t[t.Decimal=0]="Decimal",t[t.Percent=1]="Percent",t[t.Currency=2]="Currency",t[t.Scientific=3]="Scientific",t}({}),I=function(t){return t[t.Zero=0]="Zero",t[t.One=1]="One",t[t.Two=2]="Two",t[t.Few=3]="Few",t[t.Many=4]="Many",t[t.Other=5]="Other",t}({}),S=function(t){return t[t.Format=0]="Format",t[t.Standalone=1]="Standalone",t}({}),T=function(t){return t[t.Narrow=0]="Narrow",t[t.Abbreviated=1]="Abbreviated",t[t.Wide=2]="Wide",t[t.Short=3]="Short",t}({}),P=function(t){return t[t.Short=0]="Short",t[t.Medium=1]="Medium",t[t.Long=2]="Long",t[t.Full=3]="Full",t}({}),R=function(t){return t[t.Decimal=0]="Decimal",t[t.Group=1]="Group",t[t.List=2]="List",t[t.PercentSign=3]="PercentSign",t[t.PlusSign=4]="PlusSign",t[t.MinusSign=5]="MinusSign",t[t.Exponential=6]="Exponential",t[t.SuperscriptingExponent=7]="SuperscriptingExponent",t[t.PerMille=8]="PerMille",t[t[1/0]=9]="Infinity",t[t.NaN=10]="NaN",t[t.TimeSeparator=11]="TimeSeparator",t[t.CurrencyDecimal=12]="CurrencyDecimal",t[t.CurrencyGroup=13]="CurrencyGroup",t}({});function A(t,e){return L(Object(r.jb)(t)[r.ab.DateFormat],e)}function k(t,e){return L(Object(r.jb)(t)[r.ab.TimeFormat],e)}function j(t,e){return L(Object(r.jb)(t)[r.ab.DateTimeFormat],e)}function N(t,e){const n=Object(r.jb)(t),i=n[r.ab.NumberSymbols][e];if(void 0===i){if(e===R.CurrencyDecimal)return n[r.ab.NumberSymbols][R.Decimal];if(e===R.CurrencyGroup)return n[r.ab.NumberSymbols][R.Group]}return i}const D=r.mb;function M(t){if(!t[r.ab.ExtraData])throw new Error(`Missing extra locale data for the locale "${t[r.ab.LocaleId]}". Use "registerLocaleData" to load new data. See the "I18n guide" on angular.io to know more.`)}function L(t,e){for(let n=e;n>-1;n--)if(void 0!==t[n])return t[n];throw new Error("Locale data API: locale data undefined")}function F(t){const[e,n]=t.split(":");return{hours:+e,minutes:+n}}const U=/^(\d{4})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/,V={},Q=/((?:[^GyYMLwWdEabBhHmsSzZO']+)|(?:'(?:[^']|'')*')|(?:G{1,5}|y{1,4}|Y{1,4}|M{1,5}|L{1,5}|w{1,2}|W{1}|d{1,2}|E{1,6}|a{1,5}|b{1,5}|B{1,5}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|S{1,3}|z{1,4}|Z{1,5}|O{1,4}))([\s\S]*)/;var H=function(t){return t[t.Short=0]="Short",t[t.ShortGMT=1]="ShortGMT",t[t.Long=2]="Long",t[t.Extended=3]="Extended",t}({}),q=function(t){return t[t.FullYear=0]="FullYear",t[t.Month=1]="Month",t[t.Date=2]="Date",t[t.Hours=3]="Hours",t[t.Minutes=4]="Minutes",t[t.Seconds=5]="Seconds",t[t.FractionalSeconds=6]="FractionalSeconds",t[t.Day=7]="Day",t}({}),B=function(t){return t[t.DayPeriods=0]="DayPeriods",t[t.Days=1]="Days",t[t.Months=2]="Months",t[t.Eras=3]="Eras",t}({});function z(t,e,n,r){let i=function(t){if(rt(t))return t;if("number"==typeof t&&!isNaN(t))return new Date(t);if("string"==typeof t){t=t.trim();const e=parseFloat(t);if(!isNaN(t-e))return new Date(e);if(/^(\d{4}-\d{1,2}-\d{1,2})$/.test(t)){const[e,n,r]=t.split("-").map(t=>+t);return new Date(e,n-1,r)}let n;if(n=t.match(U))return function(t){const e=new Date(0);let n=0,r=0;const i=t[8]?e.setUTCFullYear:e.setFullYear,o=t[8]?e.setUTCHours:e.setHours;t[9]&&(n=Number(t[9]+t[10]),r=Number(t[9]+t[11])),i.call(e,Number(t[1]),Number(t[2])-1,Number(t[3]));const s=Number(t[4]||0)-n,a=Number(t[5]||0)-r,u=Number(t[6]||0),c=Math.floor(1e3*parseFloat("0."+(t[7]||0)));return o.call(e,s,a,u,c),e}(n)}const e=new Date(t);if(!rt(e))throw new Error(`Unable to convert "${t}" into a date`);return e}(t);e=G(n,e)||e;let o,s=[];for(;e;){if(o=Q.exec(e),!o){s.push(e);break}{s=s.concat(o.slice(1));const t=s.pop();if(!t)break;e=t}}let a=i.getTimezoneOffset();r&&(a=nt(r,a),i=function(t,e,n){const r=t.getTimezoneOffset();return function(t,e){return(t=new Date(t.getTime())).setMinutes(t.getMinutes()+e),t}(t,-1*(nt(e,r)-r))}(i,r));let u="";return s.forEach(t=>{const e=function(t){if(et[t])return et[t];let e;switch(t){case"G":case"GG":case"GGG":e=K(B.Eras,T.Abbreviated);break;case"GGGG":e=K(B.Eras,T.Wide);break;case"GGGGG":e=K(B.Eras,T.Narrow);break;case"y":e=$(q.FullYear,1,0,!1,!0);break;case"yy":e=$(q.FullYear,2,0,!0,!0);break;case"yyy":e=$(q.FullYear,3,0,!1,!0);break;case"yyyy":e=$(q.FullYear,4,0,!1,!0);break;case"Y":e=tt(1);break;case"YY":e=tt(2,!0);break;case"YYY":e=tt(3);break;case"YYYY":e=tt(4);break;case"M":case"L":e=$(q.Month,1,1);break;case"MM":case"LL":e=$(q.Month,2,1);break;case"MMM":e=K(B.Months,T.Abbreviated);break;case"MMMM":e=K(B.Months,T.Wide);break;case"MMMMM":e=K(B.Months,T.Narrow);break;case"LLL":e=K(B.Months,T.Abbreviated,S.Standalone);break;case"LLLL":e=K(B.Months,T.Wide,S.Standalone);break;case"LLLLL":e=K(B.Months,T.Narrow,S.Standalone);break;case"w":e=J(1);break;case"ww":e=J(2);break;case"W":e=J(1,!0);break;case"d":e=$(q.Date,1);break;case"dd":e=$(q.Date,2);break;case"E":case"EE":case"EEE":e=K(B.Days,T.Abbreviated);break;case"EEEE":e=K(B.Days,T.Wide);break;case"EEEEE":e=K(B.Days,T.Narrow);break;case"EEEEEE":e=K(B.Days,T.Short);break;case"a":case"aa":case"aaa":e=K(B.DayPeriods,T.Abbreviated);break;case"aaaa":e=K(B.DayPeriods,T.Wide);break;case"aaaaa":e=K(B.DayPeriods,T.Narrow);break;case"b":case"bb":case"bbb":e=K(B.DayPeriods,T.Abbreviated,S.Standalone,!0);break;case"bbbb":e=K(B.DayPeriods,T.Wide,S.Standalone,!0);break;case"bbbbb":e=K(B.DayPeriods,T.Narrow,S.Standalone,!0);break;case"B":case"BB":case"BBB":e=K(B.DayPeriods,T.Abbreviated,S.Format,!0);break;case"BBBB":e=K(B.DayPeriods,T.Wide,S.Format,!0);break;case"BBBBB":e=K(B.DayPeriods,T.Narrow,S.Format,!0);break;case"h":e=$(q.Hours,1,-12);break;case"hh":e=$(q.Hours,2,-12);break;case"H":e=$(q.Hours,1);break;case"HH":e=$(q.Hours,2);break;case"m":e=$(q.Minutes,1);break;case"mm":e=$(q.Minutes,2);break;case"s":e=$(q.Seconds,1);break;case"ss":e=$(q.Seconds,2);break;case"S":e=$(q.FractionalSeconds,1);break;case"SS":e=$(q.FractionalSeconds,2);break;case"SSS":e=$(q.FractionalSeconds,3);break;case"Z":case"ZZ":case"ZZZ":e=X(H.Short);break;case"ZZZZZ":e=X(H.Extended);break;case"O":case"OO":case"OOO":case"z":case"zz":case"zzz":e=X(H.ShortGMT);break;case"OOOO":case"ZZZZ":case"zzzz":e=X(H.Long);break;default:return null}return et[t]=e,e}(t);u+=e?e(i,n,a):"''"===t?"'":t.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),u}function G(t,e){const n=function(t){return Object(r.jb)(t)[r.ab.LocaleId]}(t);if(V[n]=V[n]||{},V[n][e])return V[n][e];let i="";switch(e){case"shortDate":i=A(t,P.Short);break;case"mediumDate":i=A(t,P.Medium);break;case"longDate":i=A(t,P.Long);break;case"fullDate":i=A(t,P.Full);break;case"shortTime":i=k(t,P.Short);break;case"mediumTime":i=k(t,P.Medium);break;case"longTime":i=k(t,P.Long);break;case"fullTime":i=k(t,P.Full);break;case"short":const e=G(t,"shortTime"),n=G(t,"shortDate");i=W(j(t,P.Short),[e,n]);break;case"medium":const r=G(t,"mediumTime"),o=G(t,"mediumDate");i=W(j(t,P.Medium),[r,o]);break;case"long":const s=G(t,"longTime"),a=G(t,"longDate");i=W(j(t,P.Long),[s,a]);break;case"full":const u=G(t,"fullTime"),c=G(t,"fullDate");i=W(j(t,P.Full),[u,c])}return i&&(V[n][e]=i),i}function W(t,e){return e&&(t=t.replace(/\{([^}]+)}/g,function(t,n){return null!=e&&n in e?e[n]:t})),t}function Y(t,e,n="-",r,i){let o="";(t<0||i&&t<=0)&&(i?t=1-t:(t=-t,o=n));let s=String(t);for(;s.length<e;)s="0"+s;return r&&(s=s.substr(s.length-e)),o+s}function $(t,e,n=0,r=!1,i=!1){return function(o,s){let a=function(t,e){switch(t){case q.FullYear:return e.getFullYear();case q.Month:return e.getMonth();case q.Date:return e.getDate();case q.Hours:return e.getHours();case q.Minutes:return e.getMinutes();case q.Seconds:return e.getSeconds();case q.FractionalSeconds:return e.getMilliseconds();case q.Day:return e.getDay();default:throw new Error(`Unknown DateType value "${t}".`)}}(t,o);if((n>0||a>-n)&&(a+=n),t===q.Hours)0===a&&-12===n&&(a=12);else if(t===q.FractionalSeconds)return u=e,Y(a,3).substr(0,u);var u;const c=N(s,R.MinusSign);return Y(a,e,c,r,i)}}function K(t,e,n=S.Format,i=!1){return function(o,s){return function(t,e,n,i,o,s){switch(n){case B.Months:return function(t,e,n){const i=Object(r.jb)(t),o=L([i[r.ab.MonthsFormat],i[r.ab.MonthsStandalone]],e);return L(o,n)}(e,o,i)[t.getMonth()];case B.Days:return function(t,e,n){const i=Object(r.jb)(t),o=L([i[r.ab.DaysFormat],i[r.ab.DaysStandalone]],e);return L(o,n)}(e,o,i)[t.getDay()];case B.DayPeriods:const a=t.getHours(),u=t.getMinutes();if(s){const t=function(t){const e=Object(r.jb)(t);return M(e),(e[r.ab.ExtraData][2]||[]).map(t=>"string"==typeof t?F(t):[F(t[0]),F(t[1])])}(e),n=function(t,e,n){const i=Object(r.jb)(t);M(i);const o=L([i[r.ab.ExtraData][0],i[r.ab.ExtraData][1]],e)||[];return L(o,n)||[]}(e,o,i),s=t.findIndex(t=>{if(Array.isArray(t)){const[e,n]=t,r=a>=e.hours&&u>=e.minutes,i=a<n.hours||a===n.hours&&u<n.minutes;if(e.hours<n.hours){if(r&&i)return!0}else if(r||i)return!0}else if(t.hours===a&&t.minutes===u)return!0;return!1});if(-1!==s)return n[s]}return function(t,e,n){const i=Object(r.jb)(t),o=L([i[r.ab.DayPeriodsFormat],i[r.ab.DayPeriodsStandalone]],e);return L(o,n)}(e,o,i)[a<12?0:1];case B.Eras:return function(t,e){return L(Object(r.jb)(t)[r.ab.Eras],e)}(e,i)[t.getFullYear()<=0?0:1];default:throw new Error(`unexpected translation type ${n}`)}}(o,s,t,e,n,i)}}function X(t){return function(e,n,r){const i=-1*r,o=N(n,R.MinusSign),s=i>0?Math.floor(i/60):Math.ceil(i/60);switch(t){case H.Short:return(i>=0?"+":"")+Y(s,2,o)+Y(Math.abs(i%60),2,o);case H.ShortGMT:return"GMT"+(i>=0?"+":"")+Y(s,1,o);case H.Long:return"GMT"+(i>=0?"+":"")+Y(s,2,o)+":"+Y(Math.abs(i%60),2,o);case H.Extended:return 0===r?"Z":(i>=0?"+":"")+Y(s,2,o)+":"+Y(Math.abs(i%60),2,o);default:throw new Error(`Unknown zone width "${t}"`)}}}function Z(t){return new Date(t.getFullYear(),t.getMonth(),t.getDate()+(4-t.getDay()))}function J(t,e=!1){return function(n,r){let i;if(e){const t=new Date(n.getFullYear(),n.getMonth(),1).getDay()-1,e=n.getDate();i=1+Math.floor((e+t)/7)}else{const t=Z(n),e=function(t){const e=new Date(t,0,1).getDay();return new Date(t,0,1+(e<=4?4:11)-e)}(t.getFullYear()),r=t.getTime()-e.getTime();i=1+Math.round(r/6048e5)}return Y(i,t,N(r,R.MinusSign))}}function tt(t,e=!1){return function(n,r){return Y(Z(n).getFullYear(),t,N(r,R.MinusSign),e)}}const et={};function nt(t,e){t=t.replace(/:/g,"");const n=Date.parse("Jan 01, 1970 00:00:00 "+t)/6e4;return isNaN(n)?e:n}function rt(t){return t instanceof Date&&!isNaN(t.valueOf())}const it=/^(\d+)?\.((\d+)(-(\d+))?)?$/,ot=".",st="0";function at(t){const e=parseInt(t);if(isNaN(e))throw new Error("Invalid integer literal when parsing "+t);return e}class ut{}let ct=(()=>{class t extends ut{constructor(t){super(),this.locale=t}getPluralCategory(t,e){switch(D(e||this.locale)(t)){case I.Zero:return"zero";case I.One:return"one";case I.Two:return"two";case I.Few:return"few";case I.Many:return"many";default:return"other"}}}return t.\u0275fac=function(e){return new(e||t)(r.Yb(r.v))},t.\u0275prov=r.Ib({token:t,factory:t.\u0275fac}),t})();function lt(t,e){e=encodeURIComponent(e);for(const n of t.split(";")){const t=n.indexOf("="),[r,i]=-1==t?[n,""]:[n.slice(0,t),n.slice(t+1)];if(r.trim()===e)return decodeURIComponent(i)}return null}class ht{constructor(t,e,n,r){this.$implicit=t,this.ngForOf=e,this.index=n,this.count=r}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let dt=(()=>{class t{constructor(t,e,n){this._viewContainer=t,this._template=e,this._differs=n,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const n=this._ngForOf;if(!this._differ&&n)try{this._differ=this._differs.find(n).create(this.ngForTrackBy)}catch(e){throw new Error(`Cannot find a differ supporting object '${n}' of type '${t=n,t.name||typeof t}'. NgFor only supports binding to Iterables such as Arrays.`)}}var t;if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const e=[];t.forEachOperation((t,n,r)=>{if(null==t.previousIndex){const n=this._viewContainer.createEmbeddedView(this._template,new ht(null,this._ngForOf,-1,-1),null===r?void 0:r),i=new ft(t,n);e.push(i)}else if(null==r)this._viewContainer.remove(null===n?void 0:n);else if(null!==n){const i=this._viewContainer.get(n);this._viewContainer.move(i,r);const o=new ft(t,i);e.push(o)}});for(let n=0;n<e.length;n++)this._perViewChange(e[n].view,e[n].record);for(let n=0,r=this._viewContainer.length;n<r;n++){const t=this._viewContainer.get(n);t.context.index=n,t.context.count=r,t.context.ngForOf=this._ngForOf}t.forEachIdentityChange(t=>{this._viewContainer.get(t.currentIndex).context.$implicit=t.item})}_perViewChange(t,e){t.context.$implicit=e.item}static ngTemplateContextGuard(t,e){return!0}}return t.\u0275fac=function(e){return new(e||t)(r.Mb(r.Q),r.Mb(r.L),r.Mb(r.t))},t.\u0275dir=r.Hb({type:t,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}}),t})();class ft{constructor(t,e){this.record=t,this.view=e}}let pt=(()=>{class t{constructor(t,e){this._viewContainer=t,this._context=new gt,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=e}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){mt("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){mt("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,e){return!0}}return t.\u0275fac=function(e){return new(e||t)(r.Mb(r.Q),r.Mb(r.L))},t.\u0275dir=r.Hb({type:t,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),t})();class gt{constructor(){this.$implicit=null,this.ngIf=null}}function mt(t,e){if(e&&!e.createEmbeddedView)throw new Error(`${t} must be a TemplateRef, but received '${Object(r.vb)(e)}'.`)}function yt(t,e){return Error(`InvalidPipeArgument: '${e}' for pipe '${Object(r.vb)(t)}'`)}let bt=(()=>{class t{constructor(t){this.locale=t}transform(e,n="mediumDate",r,i){if(null==e||""===e||e!=e)return null;try{return z(e,n,i||this.locale,r)}catch(o){throw yt(t,o.message)}}}return t.\u0275fac=function(e){return new(e||t)(r.Mb(r.v))},t.\u0275pipe=r.Lb({name:"date",type:t,pure:!0}),t})(),vt=(()=>{class t{constructor(t,e="USD"){this._locale=t,this._defaultCurrencyCode=e}transform(e,n,i="symbol",o,s){if(!function(t){return!(null==t||""===t||t!=t)}(e))return null;s=s||this._locale,"boolean"==typeof i&&(i=i?"symbol":"code");let a=n||this._defaultCurrencyCode;"code"!==i&&(a="symbol"===i||"symbol-narrow"===i?function(t,e,n="en"){const i=function(t){return Object(r.jb)(t)[r.ab.Currencies]}(n)[t]||E[t]||[],o=i[1];return"narrow"===e&&"string"==typeof o?o:i[0]||t}(a,"symbol"===i?"wide":"narrow",s):i);try{return function(t,e,n,i,o){const s=function(t,e="-"){const n={minInt:1,minFrac:0,maxFrac:0,posPre:"",posSuf:"",negPre:"",negSuf:"",gSize:0,lgSize:0},r=t.split(";"),i=r[0],o=r[1],s=-1!==i.indexOf(ot)?i.split(ot):[i.substring(0,i.lastIndexOf(st)+1),i.substring(i.lastIndexOf(st)+1)],a=s[0],u=s[1]||"";n.posPre=a.substr(0,a.indexOf("#"));for(let l=0;l<u.length;l++){const t=u.charAt(l);t===st?n.minFrac=n.maxFrac=l+1:"#"===t?n.maxFrac=l+1:n.posSuf+=t}const c=a.split(",");if(n.gSize=c[1]?c[1].length:0,n.lgSize=c[2]||c[1]?(c[2]||c[1]).length:0,o){const t=i.length-n.posPre.length-n.posSuf.length,e=o.indexOf("#");n.negPre=o.substr(0,e).replace(/'/g,""),n.negSuf=o.substr(e+t).replace(/'/g,"")}else n.negPre=e+n.posPre,n.negSuf=n.posSuf;return n}(function(t,e){return Object(r.jb)(t)[r.ab.NumberFormats][e]}(e,x.Currency),N(e,R.MinusSign));return s.minFrac=function(t){let e;const n=E[t];return n&&(e=n[2]),"number"==typeof e?e:2}(i),s.maxFrac=s.minFrac,function(t,e,n,r,i,o,s=!1){let a="",u=!1;if(isFinite(t)){let c=function(t){let e,n,r,i,o,s=Math.abs(t)+"",a=0;for((n=s.indexOf(ot))>-1&&(s=s.replace(ot,"")),(r=s.search(/e/i))>0?(n<0&&(n=r),n+=+s.slice(r+1),s=s.substring(0,r)):n<0&&(n=s.length),r=0;s.charAt(r)===st;r++);if(r===(o=s.length))e=[0],n=1;else{for(o--;s.charAt(o)===st;)o--;for(n-=r,e=[],i=0;r<=o;r++,i++)e[i]=Number(s.charAt(r))}return n>22&&(e=e.splice(0,21),a=n-1,n=1),{digits:e,exponent:a,integerLen:n}}(t);s&&(c=function(t){if(0===t.digits[0])return t;const e=t.digits.length-t.integerLen;return t.exponent?t.exponent+=2:(0===e?t.digits.push(0,0):1===e&&t.digits.push(0),t.integerLen+=2),t}(c));let l=e.minInt,h=e.minFrac,d=e.maxFrac;if(o){const t=o.match(it);if(null===t)throw new Error(`${o} is not a valid digit info`);const e=t[1],n=t[3],r=t[5];null!=e&&(l=at(e)),null!=n&&(h=at(n)),null!=r?d=at(r):null!=n&&h>d&&(d=h)}!function(t,e,n){if(e>n)throw new Error(`The minimum number of digits after fraction (${e}) is higher than the maximum (${n}).`);let r=t.digits,i=r.length-t.integerLen;const o=Math.min(Math.max(e,i),n);let s=o+t.integerLen,a=r[s];if(s>0){r.splice(Math.max(t.integerLen,s));for(let t=s;t<r.length;t++)r[t]=0}else{i=Math.max(0,i),t.integerLen=1,r.length=Math.max(1,s=o+1),r[0]=0;for(let t=1;t<s;t++)r[t]=0}if(a>=5)if(s-1<0){for(let e=0;e>s;e--)r.unshift(0),t.integerLen++;r.unshift(1),t.integerLen++}else r[s-1]++;for(;i<Math.max(0,o);i++)r.push(0);let u=0!==o;const c=e+t.integerLen,l=r.reduceRight(function(t,e,n,r){return r[n]=(e+=t)<10?e:e-10,u&&(0===r[n]&&n>=c?r.pop():u=!1),e>=10?1:0},0);l&&(r.unshift(l),t.integerLen++)}(c,h,d);let f=c.digits,p=c.integerLen;const g=c.exponent;let m=[];for(u=f.every(t=>!t);p<l;p++)f.unshift(0);for(;p<0;p++)f.unshift(0);p>0?m=f.splice(p,f.length):(m=f,f=[0]);const y=[];for(f.length>=e.lgSize&&y.unshift(f.splice(-e.lgSize,f.length).join(""));f.length>e.gSize;)y.unshift(f.splice(-e.gSize,f.length).join(""));f.length&&y.unshift(f.join("")),a=y.join(N(n,r)),m.length&&(a+=N(n,i)+m.join("")),g&&(a+=N(n,R.Exponential)+"+"+g)}else a=N(n,R.Infinity);return a=t<0&&!u?e.negPre+a+e.negSuf:e.posPre+a+e.posSuf,a}(t,s,e,R.CurrencyGroup,R.CurrencyDecimal,o).replace("\xa4",n).replace("\xa4","").trim()}(function(t){if("string"==typeof t&&!isNaN(Number(t)-parseFloat(t)))return Number(t);if("number"!=typeof t)throw new Error(`${t} is not a number`);return t}(e),s,a,n,o)}catch(u){throw yt(t,u.message)}}}return t.\u0275fac=function(e){return new(e||t)(r.Mb(r.v),r.Mb(r.k))},t.\u0275pipe=r.Lb({name:"currency",type:t,pure:!0}),t})(),_t=(()=>{class t{}return t.\u0275mod=r.Kb({type:t}),t.\u0275inj=r.Jb({factory:function(e){return new(e||t)},providers:[{provide:ut,useClass:ct}]}),t})();function wt(t){return"server"===t}let Ct=(()=>{class t{}return t.\u0275prov=Object(r.Ib)({token:t,providedIn:"root",factory:()=>new Ot(Object(r.Yb)(s),window)}),t})();class Ot{constructor(t,e){this.document=t,this.window=e,this.offset=()=>[0,0]}setOffset(t){this.offset=Array.isArray(t)?()=>t:t}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(t){this.supportsScrolling()&&this.window.scrollTo(t[0],t[1])}scrollToAnchor(t){var e;if(!this.supportsScrolling())return;const n=null!==(e=this.document.getElementById(t))&&void 0!==e?e:this.document.getElementsByName(t)[0];void 0!==n&&(this.scrollToElement(n),this.attemptFocus(n))}setHistoryScrollRestoration(t){if(this.supportScrollRestoration()){const e=this.window.history;e&&e.scrollRestoration&&(e.scrollRestoration=t)}}scrollToElement(t){const e=t.getBoundingClientRect(),n=e.left+this.window.pageXOffset,r=e.top+this.window.pageYOffset,i=this.offset();this.window.scrollTo(n-i[0],r-i[1])}attemptFocus(t){return t.focus(),this.document.activeElement===t}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const t=Et(this.window.history)||Et(Object.getPrototypeOf(this.window.history));return!(!t||!t.writable&&!t.set)}catch(t){return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch(t){return!1}}}function Et(t){return Object.getOwnPropertyDescriptor(t,"scrollRestoration")}class xt extends class extends class{}{constructor(){super()}supportsDOMEvents(){return!0}}{static makeCurrent(){var t;t=new xt,i||(i=t)}getProperty(t,e){return t[e]}log(t){window.console&&window.console.log&&window.console.log(t)}logGroup(t){window.console&&window.console.group&&window.console.group(t)}logGroupEnd(){window.console&&window.console.groupEnd&&window.console.groupEnd()}onAndCancel(t,e,n){return t.addEventListener(e,n,!1),()=>{t.removeEventListener(e,n,!1)}}dispatchEvent(t,e){t.dispatchEvent(e)}remove(t){return t.parentNode&&t.parentNode.removeChild(t),t}getValue(t){return t.value}createElement(t,e){return(e=e||this.getDefaultDocument()).createElement(t)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(t){return t.nodeType===Node.ELEMENT_NODE}isShadowRoot(t){return t instanceof DocumentFragment}getGlobalEventTarget(t,e){return"window"===e?window:"document"===e?t:"body"===e?t.body:null}getHistory(){return window.history}getLocation(){return window.location}getBaseHref(t){const e=St||(St=document.querySelector("base"),St)?St.getAttribute("href"):null;return null==e?null:(n=e,It||(It=document.createElement("a")),It.setAttribute("href",n),"/"===It.pathname.charAt(0)?It.pathname:"/"+It.pathname);var n}resetBaseElement(){St=null}getUserAgent(){return window.navigator.userAgent}performanceNow(){return window.performance&&window.performance.now?window.performance.now():(new Date).getTime()}supportsCookies(){return!0}getCookie(t){return lt(document.cookie,t)}}let It,St=null;const Tt=new r.r("TRANSITION_ID"),Pt=[{provide:r.d,useFactory:function(t,e,n){return()=>{n.get(r.e).donePromise.then(()=>{const n=o();Array.prototype.slice.apply(e.querySelectorAll("style[ng-transition]")).filter(e=>e.getAttribute("ng-transition")===t).forEach(t=>n.remove(t))})}},deps:[Tt,s,r.s],multi:!0}];class Rt{static init(){Object(r.X)(new Rt)}addToWindow(t){r.ob.getAngularTestability=(e,n=!0)=>{const r=t.findTestabilityInTree(e,n);if(null==r)throw new Error("Could not find testability for element.");return r},r.ob.getAllAngularTestabilities=()=>t.getAllTestabilities(),r.ob.getAllAngularRootElements=()=>t.getAllRootElements(),r.ob.frameworkStabilizers||(r.ob.frameworkStabilizers=[]),r.ob.frameworkStabilizers.push(t=>{const e=r.ob.getAllAngularTestabilities();let n=e.length,i=!1;const o=function(e){i=i||e,n--,0==n&&t(i)};e.forEach(function(t){t.whenStable(o)})})}findTestabilityInTree(t,e,n){if(null==e)return null;const r=t.getTestability(e);return null!=r?r:n?o().isShadowRoot(e)?this.findTestabilityInTree(t,e.host,!0):this.findTestabilityInTree(t,e.parentElement,!0):null}}const At=new r.r("EventManagerPlugins");let kt=(()=>{class t{constructor(t,e){this._zone=e,this._eventNameToPlugin=new Map,t.forEach(t=>t.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,e,n){return this._findPluginFor(e).addEventListener(t,e,n)}addGlobalEventListener(t,e,n){return this._findPluginFor(e).addGlobalEventListener(t,e,n)}getZone(){return this._zone}_findPluginFor(t){const e=this._eventNameToPlugin.get(t);if(e)return e;const n=this._plugins;for(let r=0;r<n.length;r++){const e=n[r];if(e.supports(t))return this._eventNameToPlugin.set(t,e),e}throw new Error(`No event manager plugin found for event ${t}`)}}return t.\u0275fac=function(e){return new(e||t)(r.Yb(At),r.Yb(r.A))},t.\u0275prov=r.Ib({token:t,factory:t.\u0275fac}),t})();class jt{constructor(t){this._doc=t}addGlobalEventListener(t,e,n){const r=o().getGlobalEventTarget(this._doc,t);if(!r)throw new Error(`Unsupported event target ${r} for event ${e}`);return this.addEventListener(r,e,n)}}let Nt=(()=>{class t{constructor(){this._stylesSet=new Set}addStyles(t){const e=new Set;t.forEach(t=>{this._stylesSet.has(t)||(this._stylesSet.add(t),e.add(t))}),this.onStylesAdded(e)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=r.Ib({token:t,factory:t.\u0275fac}),t})(),Dt=(()=>{class t extends Nt{constructor(t){super(),this._doc=t,this._hostNodes=new Set,this._styleNodes=new Set,this._hostNodes.add(t.head)}_addStylesToHost(t,e){t.forEach(t=>{const n=this._doc.createElement("style");n.textContent=t,this._styleNodes.add(e.appendChild(n))})}addHost(t){this._addStylesToHost(this._stylesSet,t),this._hostNodes.add(t)}removeHost(t){this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach(e=>this._addStylesToHost(t,e))}ngOnDestroy(){this._styleNodes.forEach(t=>o().remove(t))}}return t.\u0275fac=function(e){return new(e||t)(r.Yb(s))},t.\u0275prov=r.Ib({token:t,factory:t.\u0275fac}),t})();const Mt={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},Lt=/%COMP%/g;function Ft(t,e,n){for(let r=0;r<e.length;r++){let i=e[r];Array.isArray(i)?Ft(t,i,n):(i=i.replace(Lt,t),n.push(i))}return n}function Ut(t){return e=>{if("__ngUnwrap__"===e)return t;!1===t(e)&&(e.preventDefault(),e.returnValue=!1)}}let Vt=(()=>{class t{constructor(t,e,n){this.eventManager=t,this.sharedStylesHost=e,this.appId=n,this.rendererByCompId=new Map,this.defaultRenderer=new Qt(t)}createRenderer(t,e){if(!t||!e)return this.defaultRenderer;switch(e.encapsulation){case r.R.Emulated:{let n=this.rendererByCompId.get(e.id);return n||(n=new Ht(this.eventManager,this.sharedStylesHost,e,this.appId),this.rendererByCompId.set(e.id,n)),n.applyToHost(t),n}case 1:case r.R.ShadowDom:return new qt(this.eventManager,this.sharedStylesHost,t,e);default:if(!this.rendererByCompId.has(e.id)){const t=Ft(e.id,e.styles,[]);this.sharedStylesHost.addStyles(t),this.rendererByCompId.set(e.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return t.\u0275fac=function(e){return new(e||t)(r.Yb(kt),r.Yb(Dt),r.Yb(r.c))},t.\u0275prov=r.Ib({token:t,factory:t.\u0275fac}),t})();class Qt{constructor(t){this.eventManager=t,this.data=Object.create(null)}destroy(){}createElement(t,e){return e?document.createElementNS(Mt[e]||e,t):document.createElement(t)}createComment(t){return document.createComment(t)}createText(t){return document.createTextNode(t)}appendChild(t,e){t.appendChild(e)}insertBefore(t,e,n){t&&t.insertBefore(e,n)}removeChild(t,e){t&&t.removeChild(e)}selectRootElement(t,e){let n="string"==typeof t?document.querySelector(t):t;if(!n)throw new Error(`The selector "${t}" did not match any elements`);return e||(n.textContent=""),n}parentNode(t){return t.parentNode}nextSibling(t){return t.nextSibling}setAttribute(t,e,n,r){if(r){e=r+":"+e;const i=Mt[r];i?t.setAttributeNS(i,e,n):t.setAttribute(e,n)}else t.setAttribute(e,n)}removeAttribute(t,e,n){if(n){const r=Mt[n];r?t.removeAttributeNS(r,e):t.removeAttribute(`${n}:${e}`)}else t.removeAttribute(e)}addClass(t,e){t.classList.add(e)}removeClass(t,e){t.classList.remove(e)}setStyle(t,e,n,i){i&(r.G.DashCase|r.G.Important)?t.style.setProperty(e,n,i&r.G.Important?"important":""):t.style[e]=n}removeStyle(t,e,n){n&r.G.DashCase?t.style.removeProperty(e):t.style[e]=""}setProperty(t,e,n){t[e]=n}setValue(t,e){t.nodeValue=e}listen(t,e,n){return"string"==typeof t?this.eventManager.addGlobalEventListener(t,e,Ut(n)):this.eventManager.addEventListener(t,e,Ut(n))}}class Ht extends Qt{constructor(t,e,n,r){super(t),this.component=n;const i=Ft(r+"-"+n.id,n.styles,[]);e.addStyles(i),this.contentAttr="_ngcontent-%COMP%".replace(Lt,r+"-"+n.id),this.hostAttr="_nghost-%COMP%".replace(Lt,r+"-"+n.id)}applyToHost(t){super.setAttribute(t,this.hostAttr,"")}createElement(t,e){const n=super.createElement(t,e);return super.setAttribute(n,this.contentAttr,""),n}}class qt extends Qt{constructor(t,e,n,r){super(t),this.sharedStylesHost=e,this.hostEl=n,this.shadowRoot=n.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const i=Ft(r.id,r.styles,[]);for(let o=0;o<i.length;o++){const t=document.createElement("style");t.textContent=i[o],this.shadowRoot.appendChild(t)}}nodeOrShadowRoot(t){return t===this.hostEl?this.shadowRoot:t}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(t,e){return super.appendChild(this.nodeOrShadowRoot(t),e)}insertBefore(t,e,n){return super.insertBefore(this.nodeOrShadowRoot(t),e,n)}removeChild(t,e){return super.removeChild(this.nodeOrShadowRoot(t),e)}parentNode(t){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(t)))}}let Bt=(()=>{class t extends jt{constructor(t){super(t)}supports(t){return!0}addEventListener(t,e,n){return t.addEventListener(e,n,!1),()=>this.removeEventListener(t,e,n)}removeEventListener(t,e,n){return t.removeEventListener(e,n)}}return t.\u0275fac=function(e){return new(e||t)(r.Yb(s))},t.\u0275prov=r.Ib({token:t,factory:t.\u0275fac}),t})();const zt=["alt","control","meta","shift"],Gt={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Wt={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},Yt={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey};let $t=(()=>{class t extends jt{constructor(t){super(t)}supports(e){return null!=t.parseEventName(e)}addEventListener(e,n,r){const i=t.parseEventName(n),s=t.eventCallback(i.fullKey,r,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>o().onAndCancel(e,i.domEventName,s))}static parseEventName(e){const n=e.toLowerCase().split("."),r=n.shift();if(0===n.length||"keydown"!==r&&"keyup"!==r)return null;const i=t._normalizeKey(n.pop());let o="";if(zt.forEach(t=>{const e=n.indexOf(t);e>-1&&(n.splice(e,1),o+=t+".")}),o+=i,0!=n.length||0===i.length)return null;const s={};return s.domEventName=r,s.fullKey=o,s}static getEventFullKey(t){let e="",n=function(t){let e=t.key;if(null==e){if(e=t.keyIdentifier,null==e)return"Unidentified";e.startsWith("U+")&&(e=String.fromCharCode(parseInt(e.substring(2),16)),3===t.location&&Wt.hasOwnProperty(e)&&(e=Wt[e]))}return Gt[e]||e}(t);return n=n.toLowerCase()," "===n?n="space":"."===n&&(n="dot"),zt.forEach(r=>{r!=n&&(0,Yt[r])(t)&&(e+=r+".")}),e+=n,e}static eventCallback(e,n,r){return i=>{t.getEventFullKey(i)===e&&r.runGuarded(()=>n(i))}}static _normalizeKey(t){switch(t){case"esc":return"escape";default:return t}}}return t.\u0275fac=function(e){return new(e||t)(r.Yb(s))},t.\u0275prov=r.Ib({token:t,factory:t.\u0275fac}),t})();const Kt=[{provide:r.C,useValue:"browser"},{provide:r.D,useValue:function(){xt.makeCurrent(),Rt.init()},multi:!0},{provide:s,useFactory:function(){return Object(r.ub)(document),document},deps:[]}],Xt=Object(r.S)(r.W,"browser",Kt),Zt=[[],{provide:r.Z,useValue:"root"},{provide:r.m,useFactory:function(){return new r.m},deps:[]},{provide:At,useClass:Bt,multi:!0,deps:[s,r.A,r.C]},{provide:At,useClass:$t,multi:!0,deps:[s]},[],{provide:Vt,useClass:Vt,deps:[kt,Dt,r.c]},{provide:r.F,useExisting:Vt},{provide:Nt,useExisting:Dt},{provide:Dt,useClass:Dt,deps:[s]},{provide:r.M,useClass:r.M,deps:[r.A]},{provide:kt,useClass:kt,deps:[At,r.A]},[]];let Jt=(()=>{class t{constructor(t){if(t)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(e){return{ngModule:t,providers:[{provide:r.c,useValue:e.appId},{provide:Tt,useExisting:r.c},Pt]}}}return t.\u0275mod=r.Kb({type:t}),t.\u0275inj=r.Jb({factory:function(e){return new(e||t)(r.Yb(t,12))},providers:Zt,imports:[_t,r.f]}),t})();"undefined"!=typeof window&&window;var te=n("XNiG");const ee=["payPalButtonContainer"];let ne=(()=>{class t{constructor(t){this.zone=t}registerScript(t,e,n){const r=window[e];if(r)return void this.zone.run(()=>{n(r)});const i=document.createElement("script");i.id=this.getElemId(e),i.innerHTML="",i.onload=()=>{this.zone.run(()=>{n(window[e])})},i.src=t,i.async=!0,i.defer=!0,document.getElementsByTagName("head")[0].appendChild(i)}cleanup(t){const e=document.getElementById(this.getElemId(t));e&&e.remove()}getElemId(t){return`ngx-paypal-script-elem-${t}`}}return t.\u0275fac=function(e){return new(e||t)(r.Yb(r.A))},t.\u0275prov=r.Ib({token:t,factory:t.\u0275fac}),t})(),re=(()=>{class t{constructor(t){this.scriptService=t,this.paypalWindowName="paypal"}registerPayPalScript(t,e){this.scriptService.registerScript(this.getUrlForConfig(t),this.paypalWindowName,e)}destroyPayPalScript(){this.scriptService.cleanup(this.paypalWindowName)}getUrlForConfig(t){const e=[{name:"client-id",value:t.clientId}];return t.currency&&e.push({name:"currency",value:t.currency}),t.commit&&e.push({name:"commit",value:t.commit}),t.vault&&e.push({name:"vault",value:t.vault}),t.extraParams&&e.push(...t.extraParams),`https://www.paypal.com/sdk/js${this.getQueryString(e)}`}getQueryString(t){let e="";for(let n=0;n<t.length;n++){const r=t[n];e+=0===n?"?":"&",e+=`${r.name}=${r.value}`}return e}}return t.\u0275fac=function(e){return new(e||t)(r.Yb(ne))},t.\u0275prov=r.Ib({token:t,factory:t.\u0275fac}),t})(),ie=(()=>{class t{constructor(t,e,n){this.paypalScriptService=t,this.cdr=e,this.ngZone=n,this.registerScript=!0,this.scriptLoaded=new r.n,this.ngUnsubscribe=new te.a,this.initializePayPal=!0}set payPalButtonContainer(t){this.payPalButtonContainerElem=t}ngOnChanges(t){this.payPalButtonContainerId||(this.payPalButtonContainerId=this.generateElementId());const e=this.config;t.config.isFirstChange()&&e&&this.registerScript&&this.initPayPalScript(e,t=>{this.payPal=t,this.doPayPalCheck()}),t.config.isFirstChange()||this.reinitialize(e)}ngOnDestroy(){this.paypalScriptService.destroyPayPalScript(),this.ngUnsubscribe.next(),this.ngUnsubscribe.complete()}ngAfterViewInit(){this.doPayPalCheck()}customInit(t){this.payPal=t,this.doPayPalCheck()}reinitialize(t){if(this.config=t,this.payPal=void 0,this.paypalScriptService.destroyPayPalScript(),this.payPalButtonContainerId=this.generateElementId(),this.initializePayPal=!0,this.payPalButtonContainerElem)for(;this.payPalButtonContainerElem.nativeElement.firstChild;)this.payPalButtonContainerElem.nativeElement.removeChild(this.payPalButtonContainerElem.nativeElement.firstChild);this.cdr.detectChanges(),this.config&&(this.payPal?this.doPayPalCheck():this.initPayPalScript(this.config,t=>{this.payPal=t,this.doPayPalCheck()}))}doPayPalCheck(){this.initializePayPal&&this.config&&this.payPal&&this.payPalButtonContainerElem&&this.payPalButtonContainerElem.nativeElement.id&&(this.initializePayPal=!1,this.initPayPal(this.config,this.payPal))}initPayPalScript(t,e){this.paypalScriptService.registerPayPalScript({clientId:t.clientId,commit:t.advanced&&t.advanced.commit?t.advanced.commit:void 0,currency:t.currency,vault:t.vault,extraParams:t.advanced&&t.advanced.extraQueryParams?t.advanced.extraQueryParams:[]},t=>{this.scriptLoaded.next(t),e(t)})}generateElementId(){return`ngx-captcha-id-${(new Date).valueOf()}`}initPayPal(t,e){this.ngZone.runOutsideAngular(()=>{const n=Object.assign(Object.assign(Object.assign({style:t.style,onApprove:(e,n)=>this.ngZone.run(()=>{if(t.onApprove&&t.onApprove(e,n),t.authorizeOnServer)return t.authorizeOnServer(e,n);const r=t.onClientAuthorization;r&&n.order.capture().then(t=>{this.ngZone.run(()=>{r(t)})})}),onError:e=>{this.ngZone.run(()=>{t.onError&&t.onError(e)})},onCancel:(e,n)=>{this.ngZone.run(()=>{t.onCancel&&t.onCancel(e,n)})},onClick:(e,n)=>{this.ngZone.run(()=>{t.onClick&&t.onClick(e,n)})},onInit:(e,n)=>{this.ngZone.run(()=>{t.onInit&&t.onInit(e,n)})}},(t.createOrderOnClient||t.createOrderOnServer)&&{createOrder:(e,n)=>this.ngZone.run(()=>{if(t.createOrderOnClient&&t.createOrderOnServer)throw Error("Both 'createOrderOnClient' and 'createOrderOnServer' are defined.\n                    Please choose one or the other.");if(!t.createOrderOnClient&&!t.createOrderOnServer)throw Error("Neither 'createOrderOnClient' or 'createOrderOnServer' are defined.\n                    Please define one of these to create order.");if(t.createOrderOnClient)return n.order.create(t.createOrderOnClient(e));if(t.createOrderOnServer)return t.createOrderOnServer(e);throw Error("Invalid state for 'createOrder'.")})}),t.createSubscription&&{createSubscription:(e,n)=>this.ngZone.run(()=>{if(t.createSubscription)return t.createSubscription(e,n)})}),t.onShippingChange&&{onShippingChange:(e,n)=>this.ngZone.run(()=>{if(t.onShippingChange)return t.onShippingChange(e,n)})});e.Buttons(n).render(`#${this.payPalButtonContainerId}`)})}}return t.\u0275fac=function(e){return new(e||t)(r.Mb(re),r.Mb(r.h),r.Mb(r.A))},t.\u0275cmp=r.Gb({type:t,selectors:[["ngx-paypal"]],viewQuery:function(t,e){if(1&t&&r.Bc(ee,1),2&t){let t;r.pc(t=r.cc())&&(e.payPalButtonContainer=t.first)}},inputs:{registerScript:"registerScript",config:"config"},outputs:{scriptLoaded:"scriptLoaded"},features:[r.yb],decls:2,vars:1,consts:[[3,"id"],["payPalButtonContainer",""]],template:function(t,e){1&t&&r.Nb(0,"div",0,1),2&t&&r.jc("id",e.payPalButtonContainerId)},encapsulation:2,changeDetection:0}),t})(),oe=(()=>{class t{}return t.\u0275mod=r.Kb({type:t}),t.\u0275inj=r.Jb({factory:function(e){return new(e||t)},providers:[ne,re],imports:[[_t]]}),t})();var se=n("spgP"),ae=n("D0XW"),ue=n("HDdC"),ce=n("Cfvw"),le=n("LRne"),he=n("bHdf");function de(...t){return Object(he.a)(1)(Object(le.a)(...t))}var fe=n("z+Ro");function pe(...t){const e=t[t.length-1];return Object(fe.a)(e)?(t.pop(),n=>de(t,n,e)):e=>de(t,e)}var ge=n("7o/Q");function me(){return t=>t.lift(new ye)}class ye{call(t,e){return e.subscribe(new be(t))}}class be extends ge.a{constructor(t){super(t),this.hasPrev=!1}_next(t){let e;this.hasPrev?e=[this.prev,t]:this.hasPrev=!0,this.prev=t,e&&this.destination.next(e)}}var ve=n("lJxs");function _e(t,e){let n=!1;return arguments.length>=2&&(n=!0),function(r){return r.lift(new we(t,e,n))}}class we{constructor(t,e,n=!1){this.accumulator=t,this.seed=e,this.hasSeed=n}call(t,e){return e.subscribe(new Ce(t,this.accumulator,this.seed,this.hasSeed))}}class Ce extends ge.a{constructor(t,e,n,r){super(t),this.accumulator=e,this._seed=n,this.hasSeed=r,this.index=0}get seed(){return this._seed}set seed(t){this.hasSeed=!0,this._seed=t}_next(t){if(this.hasSeed)return this._tryNext(t);this.seed=t,this.destination.next(t)}_tryNext(t){const e=this.index++;let n;try{n=this.accumulator(this.seed,t,e)}catch(r){this.destination.error(r)}this.seed=n,this.destination.next(n)}}function Oe(t,e){return n=>n.lift(new Ee(t,e))}class Ee{constructor(t,e){this.compare=t,this.keySelector=e}call(t,e){return e.subscribe(new xe(t,this.compare,this.keySelector))}}class xe extends ge.a{constructor(t,e,n){super(t),this.keySelector=n,this.hasKey=!1,"function"==typeof e&&(this.compare=e)}compare(t,e){return t===e}_next(t){let e;try{const{keySelector:n}=this;e=n?n(t):t}catch(r){return this.destination.error(r)}let n=!1;if(this.hasKey)try{const{compare:t}=this;n=t(this.key,e)}catch(r){return this.destination.error(r)}else this.hasKey=!0;n||(this.key=e,this.destination.next(t))}}function Ie(t,e){return function(n){return n.lift(new Se(t,e))}}class Se{constructor(t,e){this.predicate=t,this.thisArg=e}call(t,e){return e.subscribe(new Te(t,this.predicate,this.thisArg))}}class Te extends ge.a{constructor(t,e,n){super(t),this.predicate=e,this.thisArg=n,this.count=0}_next(t){let e;try{e=this.predicate.call(this.thisArg,t,this.count++)}catch(n){return void this.destination.error(n)}e&&this.destination.next(t)}}var Pe=n("pxpQ"),Re=n("Jgta"),Ae=n("zIRd"),ke=n("q/0M"),je=n("qOnz"),Ne=function(t,e){return(Ne=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)};function De(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}var Me,Le="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},Fe=Fe||{},Ue=Le||self;function Ve(){}function Qe(t){var e=typeof t;return"array"==(e="object"!=e?e:t?Array.isArray(t)?"array":e:"null")||"object"==e&&"number"==typeof t.length}function He(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}var qe="closure_uid_"+(1e9*Math.random()>>>0),Be=0;function ze(t,e,n){return t.call.apply(t.bind,arguments)}function Ge(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),t.apply(e,n)}}return function(){return t.apply(e,arguments)}}function We(t,e,n){return(We=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?ze:Ge).apply(null,arguments)}function Ye(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var e=n.slice();return e.push.apply(e,arguments),t.apply(this,e)}}function $e(){return Date.now()}function Ke(t,e){function n(){}n.prototype=e.prototype,t.X=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.Kb=function(t,n,r){for(var i=Array(arguments.length-2),o=2;o<arguments.length;o++)i[o-2]=arguments[o];return e.prototype[n].apply(t,i)}}function Xe(){this.j=this.j,this.i=this.i}Xe.prototype.j=!1,Xe.prototype.ja=function(){!this.j&&(this.j=!0,this.G(),0)&&function(t){Object.prototype.hasOwnProperty.call(t,qe)&&t[qe]||(t[qe]=++Be)}(this)},Xe.prototype.G=function(){if(this.i)for(;this.i.length;)this.i.shift()()};var Ze=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if("string"==typeof t)return"string"!=typeof e||1!=e.length?-1:t.indexOf(e,0);for(var n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1},Je=Array.prototype.forEach?function(t,e,n){Array.prototype.forEach.call(t,e,n)}:function(t,e,n){for(var r=t.length,i="string"==typeof t?t.split(""):t,o=0;o<r;o++)o in i&&e.call(n,i[o],o,t)};function tn(t){return Array.prototype.concat.apply([],arguments)}function en(t){var e=t.length;if(0<e){for(var n=Array(e),r=0;r<e;r++)n[r]=t[r];return n}return[]}function nn(t){return/^[\s\xa0]*$/.test(t)}var rn,on=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]};function sn(t,e){return-1!=t.indexOf(e)}function an(t,e){return t<e?-1:t>e?1:0}t:{var un=Ue.navigator;if(un){var cn=un.userAgent;if(cn){rn=cn;break t}}rn=""}function ln(t,e,n){for(var r in t)e.call(n,t[r],r,t)}function hn(t){var e={};for(var n in t)e[n]=t[n];return e}var dn="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function fn(t,e){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])t[n]=r[n];for(var o=0;o<dn.length;o++)n=dn[o],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function pn(t){return pn[" "](t),t}pn[" "]=Ve;var gn,mn,yn=sn(rn,"Opera"),bn=sn(rn,"Trident")||sn(rn,"MSIE"),vn=sn(rn,"Edge"),_n=vn||bn,wn=sn(rn,"Gecko")&&!(sn(rn.toLowerCase(),"webkit")&&!sn(rn,"Edge"))&&!(sn(rn,"Trident")||sn(rn,"MSIE"))&&!sn(rn,"Edge"),Cn=sn(rn.toLowerCase(),"webkit")&&!sn(rn,"Edge");function On(){var t=Ue.document;return t?t.documentMode:void 0}t:{var En="",xn=(mn=rn,wn?/rv:([^\);]+)(\)|;)/.exec(mn):vn?/Edge\/([\d\.]+)/.exec(mn):bn?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(mn):Cn?/WebKit\/(\S+)/.exec(mn):yn?/(?:Version)[ \/]?(\S+)/.exec(mn):void 0);if(xn&&(En=xn?xn[1]:""),bn){var In=On();if(null!=In&&In>parseFloat(En)){gn=String(In);break t}}gn=En}var Sn={};function Tn(t){return function(t,e){var n=Sn;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e()}(t,function(){for(var e=0,n=on(String(gn)).split("."),r=on(String(t)).split("."),i=Math.max(n.length,r.length),o=0;0==e&&o<i;o++){var s=n[o]||"",a=r[o]||"";do{if(s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],0==s[0].length&&0==a[0].length)break;e=an(0==s[1].length?0:parseInt(s[1],10),0==a[1].length?0:parseInt(a[1],10))||an(0==s[2].length,0==a[2].length)||an(s[2],a[2]),s=s[3],a=a[3]}while(0==e)}return 0<=e})}var Pn=Ue.document&&bn&&(On()||parseInt(gn,10))||void 0,Rn=!bn||9<=Number(Pn),An=bn&&!Tn("9"),kn=function(){if(!Ue.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{Ue.addEventListener("test",Ve,e),Ue.removeEventListener("test",Ve,e)}catch(n){}return t}();function jn(t,e){this.type=t,this.a=this.target=e,this.defaultPrevented=!1}function Nn(t,e){if(jn.call(this,t?t.type:""),this.relatedTarget=this.a=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.pointerId=0,this.pointerType="",this.c=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.a=e,e=t.relatedTarget){if(wn){t:{try{pn(e.nodeName);var i=!0;break t}catch(o){}i=!1}i||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType="string"==typeof t.pointerType?t.pointerType:Dn[t.pointerType]||"",this.c=t,t.defaultPrevented&&this.b()}}jn.prototype.b=function(){this.defaultPrevented=!0},Ke(Nn,jn);var Dn={2:"touch",3:"pen",4:"mouse"};Nn.prototype.b=function(){Nn.X.b.call(this);var t=this.c;if(t.preventDefault)t.preventDefault();else if(t.returnValue=!1,An)try{(t.ctrlKey||112<=t.keyCode&&123>=t.keyCode)&&(t.keyCode=-1)}catch(e){}};var Mn="closure_listenable_"+(1e6*Math.random()|0),Ln=0;function Fn(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.ca=i,this.key=++Ln,this.Y=this.Z=!1}function Un(t){t.Y=!0,t.listener=null,t.proxy=null,t.src=null,t.ca=null}function Vn(t){this.src=t,this.a={},this.b=0}function Qn(t,e){var n=e.type;if(n in t.a){var r,i=t.a[n],o=Ze(i,e);(r=0<=o)&&Array.prototype.splice.call(i,o,1),r&&(Un(e),0==t.a[n].length&&(delete t.a[n],t.b--))}}function Hn(t,e,n,r){for(var i=0;i<t.length;++i){var o=t[i];if(!o.Y&&o.listener==e&&o.capture==!!n&&o.ca==r)return i}return-1}Vn.prototype.add=function(t,e,n,r,i){var o=t.toString();(t=this.a[o])||(t=this.a[o]=[],this.b++);var s=Hn(t,e,r,i);return-1<s?(e=t[s],n||(e.Z=!1)):((e=new Fn(e,this.src,o,!!r,i)).Z=n,t.push(e)),e};var qn="closure_lm_"+(1e6*Math.random()|0),Bn={};function zn(t,e,n,r,i){if(r&&r.once)return Wn(t,e,n,r,i);if(Array.isArray(e)){for(var o=0;o<e.length;o++)zn(t,e[o],n,r,i);return null}return n=er(n),t&&t[Mn]?t.va(e,n,He(r)?!!r.capture:!!r,i):Gn(t,e,n,!1,r,i)}function Gn(t,e,n,r,i,o){if(!e)throw Error("Invalid event type");var s=He(i)?!!i.capture:!!i;if(s&&!Rn)return null;var a=Jn(t);if(a||(t[qn]=a=new Vn(t)),(n=a.add(e,n,r,s,o)).proxy)return n;if(r=function(){var t=Zn,e=Rn?function(n){return t.call(e.src,e.listener,n)}:function(n){if(!(n=t.call(e.src,e.listener,n)))return n};return e}(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)kn||(i=s),void 0===i&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(Kn(e.toString()),r);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(r)}return n}function Wn(t,e,n,r,i){if(Array.isArray(e)){for(var o=0;o<e.length;o++)Wn(t,e[o],n,r,i);return null}return n=er(n),t&&t[Mn]?t.wa(e,n,He(r)?!!r.capture:!!r,i):Gn(t,e,n,!0,r,i)}function Yn(t,e,n,r,i){if(Array.isArray(e))for(var o=0;o<e.length;o++)Yn(t,e[o],n,r,i);else r=He(r)?!!r.capture:!!r,n=er(n),t&&t[Mn]?(t=t.c,(e=String(e).toString())in t.a&&-1<(n=Hn(o=t.a[e],n,r,i))&&(Un(o[n]),Array.prototype.splice.call(o,n,1),0==o.length&&(delete t.a[e],t.b--))):t&&(t=Jn(t))&&(e=t.a[e.toString()],t=-1,e&&(t=Hn(e,n,r,i)),(n=-1<t?e[t]:null)&&$n(n))}function $n(t){if("number"!=typeof t&&t&&!t.Y){var e=t.src;if(e&&e[Mn])Qn(e.c,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(Kn(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=Jn(e))?(Qn(n,t),0==n.b&&(n.src=null,e[qn]=null)):Un(t)}}}function Kn(t){return t in Bn?Bn[t]:Bn[t]="on"+t}function Xn(t,e){var n=t.listener,r=t.ca||t.src;return t.Z&&$n(t),n.call(r,e)}function Zn(t,e){if(t.Y)return!0;if(!Rn){if(!e)t:{e=["window","event"];for(var n=Ue,r=0;r<e.length;r++)if(null==(n=n[e[r]])){e=null;break t}e=n}return Xn(t,e=new Nn(e,this))}return Xn(t,new Nn(e,this))}function Jn(t){return(t=t[qn])instanceof Vn?t:null}var tr="__closure_events_fn_"+(1e9*Math.random()>>>0);function er(t){return"function"==typeof t?t:(t[tr]||(t[tr]=function(e){return t.handleEvent(e)}),t[tr])}function nr(){Xe.call(this),this.c=new Vn(this),this.J=this,this.C=null}function rr(t,e){var n,r=t.C;if(r)for(n=[];r;r=r.C)n.push(r);if(t=t.J,r=e.type||e,"string"==typeof e)e=new jn(e,t);else if(e instanceof jn)e.target=e.target||t;else{var i=e;fn(e=new jn(r,t),i)}if(i=!0,n)for(var o=n.length-1;0<=o;o--){var s=e.a=n[o];i=ir(s,r,!0,e)&&i}if(i=ir(s=e.a=t,r,!0,e)&&i,i=ir(s,r,!1,e)&&i,n)for(o=0;o<n.length;o++)i=ir(s=e.a=n[o],r,!1,e)&&i}function ir(t,e,n,r){if(!(e=t.c.a[String(e)]))return!0;e=e.concat();for(var i=!0,o=0;o<e.length;++o){var s=e[o];if(s&&!s.Y&&s.capture==n){var a=s.listener,u=s.ca||s.src;s.Z&&Qn(t.c,s),i=!1!==a.call(u,r)&&i}}return i&&!r.defaultPrevented}Ke(nr,Xe),nr.prototype[Mn]=!0,(Me=nr.prototype).addEventListener=function(t,e,n,r){zn(this,t,e,n,r)},Me.removeEventListener=function(t,e,n,r){Yn(this,t,e,n,r)},Me.G=function(){if(nr.X.G.call(this),this.c){var t,e=this.c;for(t in e.a){for(var n=e.a[t],r=0;r<n.length;r++)Un(n[r]);delete e.a[t],e.b--}}this.C=null},Me.va=function(t,e,n,r){return this.c.add(String(t),e,!1,n,r)},Me.wa=function(t,e,n,r){return this.c.add(String(t),e,!0,n,r)};var or=Ue.JSON.stringify;function sr(){this.b=this.a=null}var ar,ur=new(function(){function t(t,e){this.c=t,this.f=e,this.b=0,this.a=null}return t.prototype.get=function(){var t;return 0<this.b?(this.b--,this.a=(t=this.a).next,t.next=null):t=this.c(),t},t}())(function(){return new lr},function(t){t.reset()});function cr(){var t=pr,e=null;return t.a&&(e=t.a,t.a=t.a.next,t.a||(t.b=null),e.next=null),e}function lr(){this.next=this.b=this.a=null}function hr(t){Ue.setTimeout(function(){throw t},0)}function dr(t,e){ar||function(){var t=Ue.Promise.resolve(void 0);ar=function(){t.then(gr)}}(),fr||(ar(),fr=!0),pr.add(t,e)}sr.prototype.add=function(t,e){var n=ur.get();n.set(t,e),this.b?this.b.next=n:this.a=n,this.b=n},lr.prototype.set=function(t,e){this.a=t,this.b=e,this.next=null},lr.prototype.reset=function(){this.next=this.b=this.a=null};var fr=!1,pr=new sr;function gr(){for(var t;t=cr();){try{t.a.call(t.b)}catch(n){hr(n)}var e=ur;e.f(t),100>e.b&&(e.b++,t.next=e.a,e.a=t)}fr=!1}function mr(t,e){nr.call(this),this.b=t||1,this.a=e||Ue,this.f=We(this.Za,this),this.g=$e()}function yr(t){t.aa=!1,t.M&&(t.a.clearTimeout(t.M),t.M=null)}function br(t,e,n){if("function"==typeof t)n&&(t=We(t,n));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=We(t.handleEvent,t)}return 2147483647<Number(e)?-1:Ue.setTimeout(t,e||0)}function vr(t){t.a=br(function(){t.a=null,t.c&&(t.c=!1,vr(t))},t.h);var e=t.b;t.b=null,t.g.apply(null,e)}Ke(mr,nr),(Me=mr.prototype).aa=!1,Me.M=null,Me.Za=function(){if(this.aa){var t=$e()-this.g;0<t&&t<.8*this.b?this.M=this.a.setTimeout(this.f,this.b-t):(this.M&&(this.a.clearTimeout(this.M),this.M=null),rr(this,"tick"),this.aa&&(yr(this),this.start()))}},Me.start=function(){this.aa=!0,this.M||(this.M=this.a.setTimeout(this.f,this.b),this.g=$e())},Me.G=function(){mr.X.G.call(this),yr(this),delete this.a};var _r=function(t){function e(e,n){var r=t.call(this)||this;return r.g=e,r.h=n,r.b=null,r.c=!1,r.a=null,r}return function(t,e){function n(){this.constructor=t}Ne(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}(e,t),e.prototype.f=function(t){this.b=arguments,this.a?this.c=!0:vr(this)},e.prototype.G=function(){t.prototype.G.call(this),this.a&&(Ue.clearTimeout(this.a),this.a=null,this.c=!1,this.b=null)},e}(Xe);function wr(t){Xe.call(this),this.b=t,this.a={}}Ke(wr,Xe);var Cr=[];function Or(t,e,n,r){Array.isArray(n)||(n&&(Cr[0]=n.toString()),n=Cr);for(var i=0;i<n.length;i++){var o=zn(e,n[i],r||t.handleEvent,!1,t.b||t);if(!o)break;t.a[o.key]=o}}function Er(t){ln(t.a,function(t,e){this.a.hasOwnProperty(e)&&$n(t)},t),t.a={}}function xr(){this.a=!0}function Ir(t,e,n,r){t.info(function(){return"XMLHTTP TEXT ("+e+"): "+function(t,e){if(!t.a)return e;if(!e)return null;try{var n=JSON.parse(e);if(n)for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var r=n[t];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var o=i[0];if("noop"!=o&&"stop"!=o&&"close"!=o)for(var s=1;s<i.length;s++)i[s]=""}}}return or(n)}catch(a){return e}}(t,n)+(r?" "+r:"")})}wr.prototype.G=function(){wr.X.G.call(this),Er(this)},wr.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},xr.prototype.info=function(){};var Sr={},Tr=null;function Pr(){return Tr=Tr||new nr}function Rr(t){jn.call(this,Sr.Fa,t)}function Ar(t){var e=Pr();rr(e,new Rr(e,t))}function kr(t,e){jn.call(this,Sr.STAT_EVENT,t),this.stat=e}function jr(t){var e=Pr();rr(e,new kr(e,t))}function Nr(t){jn.call(this,Sr.Ga,t)}function Dr(t,e){if("function"!=typeof t)throw Error("Fn must not be null and must be a function");return Ue.setTimeout(function(){t()},e)}Sr.Fa="serverreachability",Ke(Rr,jn),Sr.STAT_EVENT="statevent",Ke(kr,jn),Sr.Ga="timingevent",Ke(Nr,jn);var Mr={NO_ERROR:0,$a:1,nb:2,mb:3,hb:4,lb:5,ob:6,Da:7,TIMEOUT:8,rb:9},Lr={fb:"complete",Bb:"success",Ea:"error",Da:"abort",tb:"ready",ub:"readystatechange",TIMEOUT:"timeout",pb:"incrementaldata",sb:"progress",ib:"downloadprogress",Jb:"uploadprogress"};function Fr(){}function Ur(){}Fr.prototype.a=null;var Vr,Qr={OPEN:"a",eb:"b",Ea:"c",qb:"d"};function Hr(){jn.call(this,"d")}function qr(){jn.call(this,"c")}function Br(){}function zr(t,e,n,r){this.g=t,this.c=e,this.f=n,this.S=r||1,this.J=new wr(this),this.P=Gr,this.R=new mr(t=_n?125:void 0),this.B=null,this.b=!1,this.j=this.l=this.i=this.H=this.u=this.T=this.o=null,this.s=[],this.a=null,this.D=0,this.h=this.m=null,this.N=-1,this.A=!1,this.O=0,this.F=null,this.V=this.C=this.U=this.I=!1}Ke(Hr,jn),Ke(qr,jn),Ke(Br,Fr),Vr=new Br;var Gr=45e3,Wr={},Yr={};function $r(t,e,n){t.H=1,t.i=yi(hi(e)),t.j=n,t.I=!0,Kr(t,null)}function Kr(t,e){t.u=$e(),Jr(t),t.l=hi(t.i);var n=t.l,r=t.S;Array.isArray(r)||(r=[String(r)]),Ri(n.b,"t",r),t.D=0,t.a=xo(t.g,t.g.C?e:null),0<t.O&&(t.F=new _r(We(t.Ca,t,t.a),t.O)),Or(t.J,t.a,"readystatechange",t.Xa),e=t.B?hn(t.B):{},t.j?(t.m||(t.m="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.a.ba(t.l,t.m,t.j,e)):(t.m="GET",t.a.ba(t.l,t.m,null,e)),Ar(1),function(t,e,n,r,i,o){t.info(function(){if(t.a)if(o)for(var s="",a=o.split("&"),u=0;u<a.length;u++){var c=a[u].split("=");if(1<c.length){var l=c[0];c=c[1];var h=l.split("_");s=2<=h.length&&"type"==h[1]?s+(l+"=")+c+"&":s+(l+"=redacted&")}}else s=null;else s=o;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+"\n"+n+"\n"+s})}(t.c,t.m,t.l,t.f,t.S,t.j)}function Xr(t,e,n){for(var r=!0;!t.A&&t.D<n.length;){var i=Zr(t,n);if(i==Yr){4==e&&(t.h=4,jr(14),r=!1),Ir(t.c,t.f,null,"[Incomplete Response]");break}if(i==Wr){t.h=4,jr(15),Ir(t.c,t.f,n,"[Invalid Chunk]"),r=!1;break}Ir(t.c,t.f,i,null),ii(t,i)}4==e&&0==n.length&&(t.h=1,jr(16),r=!1),t.b=t.b&&r,r?0<n.length&&!t.V&&(t.V=!0,(e=t.g).a==t&&e.U&&!e.F&&(e.c.info("Great, no buffering proxy detected. Bytes received: "+n.length),yo(e),e.F=!0,jr(11))):(Ir(t.c,t.f,n,"[Invalid Chunked Response]"),ri(t),ni(t))}function Zr(t,e){var n=t.D,r=e.indexOf("\n",n);return-1==r?Yr:(n=Number(e.substring(n,r)),isNaN(n)?Wr:(r+=1)+n>e.length?Yr:(e=e.substr(r,n),t.D=r+n,e))}function Jr(t){t.T=$e()+t.P,ti(t,t.P)}function ti(t,e){if(null!=t.o)throw Error("WatchDog timer not null");t.o=Dr(We(t.Va,t),e)}function ei(t){t.o&&(Ue.clearTimeout(t.o),t.o=null)}function ni(t){0==t.g.v||t.A||_o(t.g,t)}function ri(t){ei(t);var e=t.F;e&&"function"==typeof e.ja&&e.ja(),t.F=null,yr(t.R),Er(t.J),t.a&&(e=t.a,t.a=null,e.abort(),e.ja())}function ii(t,e){try{var n=t.g;if(0!=n.v&&(n.a==t||Li(n.b,t)))if(n.I=t.N,!t.C&&Li(n.b,t)&&3==n.v){try{var r=n.ka.a.parse(e)}catch(cg){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){t:if(!n.j){if(n.a){if(!(n.a.u+3e3<t.u))break t;vo(n),ao(n)}mo(n),jr(18)}}else n.oa=i[1],0<n.oa-n.P&&37500>i[2]&&n.H&&0==n.o&&!n.m&&(n.m=Dr(We(n.Sa,n),6e3));if(1>=Mi(n.b)&&n.ea){try{n.ea()}catch(cg){}n.ea=void 0}}else Co(n,11)}else if((t.C||n.a==t)&&vo(n),!nn(e))for(e=r=n.ka.a.parse(e),r=0;r<e.length;r++)if(n.P=(i=e[r])[0],i=i[1],2==n.v)if("c"==i[0]){n.J=i[1],n.ga=i[2];var o=i[3];null!=o&&(n.ha=o,n.c.info("VER="+n.ha));var s=i[4];null!=s&&(n.pa=s,n.c.info("SVER="+n.pa));var a=i[5];if(null!=a&&"number"==typeof a&&0<a){var u=1.5*a;n.D=u,n.c.info("backChannelRequestTimeoutMs_="+u)}u=n;var c=t.a;if(c){var l=c.a?c.a.getResponseHeader("X-Client-Wire-Protocol"):null;if(l){var h=u.b;!h.a&&(sn(l,"spdy")||sn(l,"quic")||sn(l,"h2"))&&(h.f=h.g,h.a=new Set,h.b&&(Fi(h,h.b),h.b=null))}if(u.A){var d=c.a?c.a.getResponseHeader("X-HTTP-Session-Id"):null;d&&(u.na=d,mi(u.B,u.A,d))}}n.v=3,n.f&&n.f.ta(),n.U&&(n.N=$e()-t.u,n.c.info("Handshake RTT: "+n.N+"ms"));var f=t;if((u=n).la=Eo(u,u.C?u.ga:null,u.fa),f.C){Ui(u.b,f);var p=f,g=u.D;g&&p.setTimeout(g),p.o&&(ei(p),Jr(p)),u.a=f}else go(u);0<n.g.length&&lo(n)}else"stop"!=i[0]&&"close"!=i[0]||Co(n,7);else 3==n.v&&("stop"==i[0]||"close"==i[0]?"stop"==i[0]?Co(n,7):so(n):"noop"!=i[0]&&n.f&&n.f.sa(i),n.o=0);Ar(4)}catch(cg){}}function oi(t,e){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,void 0);else if(Qe(t)||"string"==typeof t)Je(t,e,void 0);else{if(t.L&&"function"==typeof t.L)var n=t.L();else if(t.K&&"function"==typeof t.K)n=void 0;else if(Qe(t)||"string"==typeof t){n=[];for(var r=t.length,i=0;i<r;i++)n.push(i)}else for(i in n=[],r=0,t)n[r++]=i;i=(r=function(t){if(t.K&&"function"==typeof t.K)return t.K();if("string"==typeof t)return t.split("");if(Qe(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}for(r in e=[],n=0,t)e[n++]=t[r];return e}(t)).length;for(var o=0;o<i;o++)e.call(void 0,r[o],n&&n[o],t)}}function si(t,e){this.b={},this.a=[],this.c=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(t)if(t instanceof si)for(n=t.L(),r=0;r<n.length;r++)this.set(n[r],t.get(n[r]));else for(r in t)this.set(r,t[r])}function ai(t){if(t.c!=t.a.length){for(var e=0,n=0;e<t.a.length;){var r=t.a[e];ui(t.b,r)&&(t.a[n++]=r),e++}t.a.length=n}if(t.c!=t.a.length){var i={};for(n=e=0;e<t.a.length;)ui(i,r=t.a[e])||(t.a[n++]=r,i[r]=1),e++;t.a.length=n}}function ui(t,e){return Object.prototype.hasOwnProperty.call(t,e)}(Me=zr.prototype).setTimeout=function(t){this.P=t},Me.Xa=function(t){t=t.target;var e=this.F;e&&3==no(t)?e.f():this.Ca(t)},Me.Ca=function(t){try{if(t==this.a)t:{var e=no(this.a),n=this.a.ua(),r=this.a.W();if(!(3>e||3==e&&!_n&&!this.a.$())){this.A||4!=e||7==n||Ar(8==n||0>=r?3:2),ei(this);var i=this.a.W();this.N=i;var o=this.a.$();if(this.b=200==i,function(t,e,n,r,i,o,s){t.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+"\n"+n+"\n"+o+" "+s})}(this.c,this.m,this.l,this.f,this.S,e,i),this.b){if(this.U&&!this.C){e:{if(this.a){var s,a=this.a;if((s=a.a?a.a.getResponseHeader("X-HTTP-Initial-Response"):null)&&!nn(s)){var u=s;break e}}u=null}if(!u){this.b=!1,this.h=3,jr(12),ri(this),ni(this);break t}Ir(this.c,this.f,u,"Initial handshake response via X-HTTP-Initial-Response"),this.C=!0,ii(this,u)}this.I?(Xr(this,e,o),_n&&this.b&&3==e&&(Or(this.J,this.R,"tick",this.Wa),this.R.start())):(Ir(this.c,this.f,o,null),ii(this,o)),4==e&&ri(this),this.b&&!this.A&&(4==e?_o(this.g,this):(this.b=!1,Jr(this)))}else 400==i&&0<o.indexOf("Unknown SID")?(this.h=3,jr(12)):(this.h=0,jr(13)),ri(this),ni(this)}}}catch(c){}},Me.Wa=function(){if(this.a){var t=no(this.a),e=this.a.$();this.D<e.length&&(ei(this),Xr(this,t,e),this.b&&4!=t&&Jr(this))}},Me.cancel=function(){this.A=!0,ri(this)},Me.Va=function(){this.o=null;var t=$e();0<=t-this.T?(function(t,e){t.info(function(){return"TIMEOUT: "+e})}(this.c,this.l),2!=this.H&&(Ar(3),jr(17)),ri(this),this.h=2,ni(this)):ti(this,this.T-t)},(Me=si.prototype).K=function(){ai(this);for(var t=[],e=0;e<this.a.length;e++)t.push(this.b[this.a[e]]);return t},Me.L=function(){return ai(this),this.a.concat()},Me.get=function(t,e){return ui(this.b,t)?this.b[t]:e},Me.set=function(t,e){ui(this.b,t)||(this.c++,this.a.push(t)),this.b[t]=e},Me.forEach=function(t,e){for(var n=this.L(),r=0;r<n.length;r++){var i=n[r],o=this.get(i);t.call(e,o,i,this)}};var ci=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function li(t,e){if(this.c=this.j=this.f="",this.h=null,this.i=this.g="",this.a=!1,t instanceof li){this.a=void 0!==e?e:t.a,di(this,t.f),this.j=t.j,fi(this,t.c),pi(this,t.h),this.g=t.g,e=t.b;var n=new Ii;n.c=e.c,e.a&&(n.a=new si(e.a),n.b=e.b),gi(this,n),this.i=t.i}else t&&(n=String(t).match(ci))?(this.a=!!e,di(this,n[1]||"",!0),this.j=bi(n[2]||""),fi(this,n[3]||"",!0),pi(this,n[4]),this.g=bi(n[5]||"",!0),gi(this,n[6]||"",!0),this.i=bi(n[7]||"")):(this.a=!!e,this.b=new Ii(null,this.a))}function hi(t){return new li(t)}function di(t,e,n){t.f=n?bi(e,!0):e,t.f&&(t.f=t.f.replace(/:$/,""))}function fi(t,e,n){t.c=n?bi(e,!0):e}function pi(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.h=e}else t.h=null}function gi(t,e,n){e instanceof Ii?(t.b=e,function(t,e){e&&!t.f&&(Si(t),t.c=null,t.a.forEach(function(t,e){var n=e.toLowerCase();e!=n&&(Ti(this,e),Ri(this,n,t))},t)),t.f=e}(t.b,t.a)):(n||(e=vi(e,Ei)),t.b=new Ii(e,t.a))}function mi(t,e,n){t.b.set(e,n)}function yi(t){return mi(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^$e()).toString(36)),t}function bi(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function vi(t,e,n){return"string"==typeof t?(t=encodeURI(t).replace(e,_i),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function _i(t){return"%"+((t=t.charCodeAt(0))>>4&15).toString(16)+(15&t).toString(16)}li.prototype.toString=function(){var t=[],e=this.f;e&&t.push(vi(e,wi,!0),":");var n=this.c;return(n||"file"==e)&&(t.push("//"),(e=this.j)&&t.push(vi(e,wi,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.h)&&t.push(":",String(n))),(n=this.g)&&(this.c&&"/"!=n.charAt(0)&&t.push("/"),t.push(vi(n,"/"==n.charAt(0)?Oi:Ci,!0))),(n=this.b.toString())&&t.push("?",n),(n=this.i)&&t.push("#",vi(n,xi)),t.join("")};var wi=/[#\/\?@]/g,Ci=/[#\?:]/g,Oi=/[#\?]/g,Ei=/[#\?@]/g,xi=/#/g;function Ii(t,e){this.b=this.a=null,this.c=t||null,this.f=!!e}function Si(t){t.a||(t.a=new si,t.b=0,t.c&&function(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var o=t[n].substring(0,r);i=t[n].substring(r+1)}else o=t[n];e(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(t.c,function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)}))}function Ti(t,e){Si(t),e=Ai(t,e),ui(t.a.b,e)&&(t.c=null,t.b-=t.a.get(e).length,ui((t=t.a).b,e)&&(delete t.b[e],t.c--,t.a.length>2*t.c&&ai(t)))}function Pi(t,e){return Si(t),e=Ai(t,e),ui(t.a.b,e)}function Ri(t,e,n){Ti(t,e),0<n.length&&(t.c=null,t.a.set(Ai(t,e),en(n)),t.b+=n.length)}function Ai(t,e){return e=String(e),t.f&&(e=e.toLowerCase()),e}(Me=Ii.prototype).add=function(t,e){Si(this),this.c=null,t=Ai(this,t);var n=this.a.get(t);return n||this.a.set(t,n=[]),n.push(e),this.b+=1,this},Me.forEach=function(t,e){Si(this),this.a.forEach(function(n,r){Je(n,function(n){t.call(e,n,r,this)},this)},this)},Me.L=function(){Si(this);for(var t=this.a.K(),e=this.a.L(),n=[],r=0;r<e.length;r++)for(var i=t[r],o=0;o<i.length;o++)n.push(e[r]);return n},Me.K=function(t){Si(this);var e=[];if("string"==typeof t)Pi(this,t)&&(e=tn(e,this.a.get(Ai(this,t))));else{t=this.a.K();for(var n=0;n<t.length;n++)e=tn(e,t[n])}return e},Me.set=function(t,e){return Si(this),this.c=null,Pi(this,t=Ai(this,t))&&(this.b-=this.a.get(t).length),this.a.set(t,[e]),this.b+=1,this},Me.get=function(t,e){return t&&0<(t=this.K(t)).length?String(t[0]):e},Me.toString=function(){if(this.c)return this.c;if(!this.a)return"";for(var t=[],e=this.a.L(),n=0;n<e.length;n++){var r=e[n],i=encodeURIComponent(String(r));r=this.K(r);for(var o=0;o<r.length;o++){var s=i;""!==r[o]&&(s+="="+encodeURIComponent(String(r[o]))),t.push(s)}}return this.c=t.join("&")};var ki=function(){return function(t,e){this.b=t,this.a=e}}();function ji(t){this.g=t||Ni,t=Ue.PerformanceNavigationTiming?0<(t=Ue.performance.getEntriesByType("navigation")).length&&("hq"==t[0].nextHopProtocol||"h2"==t[0].nextHopProtocol):!!(Ue.ia&&Ue.ia.ya&&Ue.ia.ya()&&Ue.ia.ya().Lb),this.f=t?this.g:1,this.a=null,1<this.f&&(this.a=new Set),this.b=null,this.c=[]}var Ni=10;function Di(t){return!!t.b||!!t.a&&t.a.size>=t.f}function Mi(t){return t.b?1:t.a?t.a.size:0}function Li(t,e){return t.b?t.b==e:!!t.a&&t.a.has(e)}function Fi(t,e){t.a?t.a.add(e):t.b=e}function Ui(t,e){t.b&&t.b==e?t.b=null:t.a&&t.a.has(e)&&t.a.delete(e)}function Vi(t){var e,n;if(null!=t.b)return t.c.concat(t.b.s);if(null!=t.a&&0!==t.a.size){var r=t.c;try{for(var i=De(t.a.values()),o=i.next();!o.done;o=i.next())r=r.concat(o.value.s)}catch(s){e={error:s}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return r}return en(t.c)}function Qi(){}function Hi(){this.a=new Qi}function qi(t,e,n){var r=n||"";try{oi(t,function(t,n){var i=t;He(t)&&(i=or(t)),e.push(r+n+"="+encodeURIComponent(i))})}catch(Kg){throw e.push(r+"type="+encodeURIComponent("_badmap")),Kg}}function Bi(t,e,n,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch(o){}}ji.prototype.cancel=function(){var t,e;if(this.c=Vi(this),this.b)this.b.cancel(),this.b=null;else if(this.a&&0!==this.a.size){try{for(var n=De(this.a.values()),r=n.next();!r.done;r=n.next())r.value.cancel()}catch(i){t={error:i}}finally{try{r&&!r.done&&(e=n.return)&&e.call(n)}finally{if(t)throw t.error}}this.a.clear()}},Qi.prototype.stringify=function(t){return Ue.JSON.stringify(t,void 0)},Qi.prototype.parse=function(t){return Ue.JSON.parse(t,void 0)};var zi=Ue.JSON.parse;function Gi(t){nr.call(this),this.headers=new si,this.H=t||null,this.b=!1,this.s=this.a=null,this.B="",this.h=0,this.f="",this.g=this.A=this.l=this.u=!1,this.o=0,this.m=null,this.I=Wi,this.D=this.F=!1}Ke(Gi,nr);var Wi="",Yi=/^https?$/i,$i=["POST","PUT"];function Ki(t){return"content-type"==t.toLowerCase()}function Xi(t,e){t.b=!1,t.a&&(t.g=!0,t.a.abort(),t.g=!1),t.f=e,t.h=5,Zi(t),to(t)}function Zi(t){t.u||(t.u=!0,rr(t,"complete"),rr(t,"error"))}function Ji(t){if(t.b&&void 0!==Fe&&(!t.s[1]||4!=no(t)||2!=t.W()))if(t.l&&4==no(t))br(t.za,0,t);else if(rr(t,"readystatechange"),4==no(t)){t.b=!1;try{var e,n=t.W();t:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break t;default:r=!1}if(!(e=r)){var i;if(i=0===n){var o=String(t.B).match(ci)[1]||null;if(!o&&Ue.self&&Ue.self.location){var s=Ue.self.location.protocol;o=s.substr(0,s.length-1)}i=!Yi.test(o?o.toLowerCase():"")}e=i}if(e)rr(t,"complete"),rr(t,"success");else{t.h=6;try{var a=2<no(t)?t.a.statusText:""}catch(n){a=""}t.f=a+" ["+t.W()+"]",Zi(t)}}finally{to(t)}}}function to(t,e){if(t.a){eo(t);var n=t.a,r=t.s[0]?Ve:null;t.a=null,t.s=null,e||rr(t,"ready");try{n.onreadystatechange=r}catch(Kg){}}}function eo(t){t.a&&t.D&&(t.a.ontimeout=null),t.m&&(Ue.clearTimeout(t.m),t.m=null)}function no(t){return t.a?t.a.readyState:0}function ro(t,e,n){t:{for(r in n){var r=!1;break t}r=!0}r||(n=function(t){var e="";return ln(t,function(t,n){e+=n,e+=":",e+=t,e+="\r\n"}),e}(n),"string"==typeof t?null!=n&&encodeURIComponent(String(n)):mi(t,e,n))}function io(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function oo(t){this.pa=0,this.g=[],this.c=new xr,this.ga=this.la=this.B=this.fa=this.a=this.na=this.A=this.V=this.i=this.O=this.l=null,this.Oa=this.R=0,this.La=io("failFast",!1,t),this.H=this.m=this.j=this.h=this.f=null,this.S=!0,this.I=this.oa=this.P=-1,this.T=this.o=this.u=0,this.Ha=io("baseRetryDelayMs",5e3,t),this.Ra=io("retryDelaySeedMs",1e4,t),this.Ma=io("forwardChannelMaxRetries",2,t),this.ma=io("forwardChannelRequestTimeoutMs",2e4,t),this.Na=t&&t.g||void 0,this.D=void 0,this.C=t&&t.supportsCrossDomainXhr||!1,this.J="",this.b=new ji(t&&t.concurrentRequestLimit),this.ka=new Hi,this.da=t&&t.fastHandshake||!1,this.Ia=t&&t.b||!1,t&&t.f&&(this.c.a=!1),t&&t.forceLongPolling&&(this.S=!1),this.U=!this.da&&this.S&&t&&t.detectBufferingProxy||!1,this.ea=void 0,this.N=0,this.F=!1,this.s=null,(this.Ka=t&&t.c||!1)&&this.c.info("Opt-in to enable Chrome Origin Trials.")}function so(t){if(uo(t),3==t.v){var e=t.R++,n=hi(t.B);mi(n,"SID",t.J),mi(n,"RID",e),mi(n,"TYPE","terminate"),fo(t,n),(e=new zr(t,t.c,e,void 0)).H=2,e.i=yi(hi(n)),n=!1,Ue.navigator&&Ue.navigator.sendBeacon&&(n=Ue.navigator.sendBeacon(e.i.toString(),"")),!n&&Ue.Image&&((new Image).src=e.i,n=!0),n||(e.a=xo(e.g,null),e.a.ba(e.i)),e.u=$e(),Jr(e)}Oo(t)}function ao(t){t.a&&(yo(t),t.a.cancel(),t.a=null)}function uo(t){ao(t),t.j&&(Ue.clearTimeout(t.j),t.j=null),vo(t),t.b.cancel(),t.h&&("number"==typeof t.h&&Ue.clearTimeout(t.h),t.h=null)}function co(t,e){t.g.push(new ki(t.Oa++,e)),3==t.v&&lo(t)}function lo(t){Di(t.b)||t.h||(t.h=!0,dr(t.Ba,t),t.u=0)}function ho(t,e){var n;n=e?e.f:t.R++;var r=hi(t.B);mi(r,"SID",t.J),mi(r,"RID",n),mi(r,"AID",t.P),fo(t,r),t.i&&t.l&&ro(r,t.i,t.l),n=new zr(t,t.c,n,t.u+1),null===t.i&&(n.B=t.l),e&&(t.g=e.s.concat(t.g)),e=po(t,n,1e3),n.setTimeout(Math.round(.5*t.ma)+Math.round(.5*t.ma*Math.random())),Fi(t.b,n),$r(n,r,e)}function fo(t,e){t.f&&oi({},function(t,n){mi(e,n,t)})}function po(t,e,n){n=Math.min(t.g.length,n);var r=t.f?We(t.f.Ja,t.f,t):null;t:for(var i=t.g,o=-1;;){var s=["count="+n];-1==o?0<n?s.push("ofs="+(o=i[0].b)):o=0:s.push("ofs="+o);for(var a=!0,u=0;u<n;u++){var c=i[u].b,l=i[u].a;if(0>(c-=o))o=Math.max(0,i[u].b-100),a=!1;else try{qi(l,s,"req"+c+"_")}catch(as){r&&r(l)}}if(a){r=s.join("&");break t}}return t=t.g.splice(0,n),e.s=t,r}function go(t){t.a||t.j||(t.T=1,dr(t.Aa,t),t.o=0)}function mo(t){return!(t.a||t.j||3<=t.o||(t.T++,t.j=Dr(We(t.Aa,t),wo(t,t.o)),t.o++,0))}function yo(t){null!=t.s&&(Ue.clearTimeout(t.s),t.s=null)}function bo(t){t.a=new zr(t,t.c,"rpc",t.T),null===t.i&&(t.a.B=t.l),t.a.O=0;var e=hi(t.la);mi(e,"RID","rpc"),mi(e,"SID",t.J),mi(e,"CI",t.H?"0":"1"),mi(e,"AID",t.P),fo(t,e),mi(e,"TYPE","xmlhttp"),t.i&&t.l&&ro(e,t.i,t.l),t.D&&t.a.setTimeout(t.D);var n=t.a;t=t.ga,n.H=1,n.i=yi(hi(e)),n.j=null,n.I=!0,Kr(n,t)}function vo(t){null!=t.m&&(Ue.clearTimeout(t.m),t.m=null)}function _o(t,e){var n=null;if(t.a==e){vo(t),yo(t),t.a=null;var r=2}else{if(!Li(t.b,e))return;n=e.s,Ui(t.b,e),r=1}if(t.I=e.N,0!=t.v)if(e.b)if(1==r){n=e.j?e.j.length:0,e=$e()-e.u;var i=t.u;rr(r=Pr(),new Nr(r,n,e,i)),lo(t)}else go(t);else if(3==(i=e.h)||0==i&&0<t.I||!(1==r&&function(t,e){return!(Mi(t.b)>=t.b.f-(t.h?1:0)||(t.h?(t.g=e.s.concat(t.g),0):1==t.v||2==t.v||t.u>=(t.La?0:t.Ma)||(t.h=Dr(We(t.Ba,t,e),wo(t,t.u)),t.u++,0)))}(t,e)||2==r&&mo(t)))switch(n&&0<n.length&&(e=t.b,e.c=e.c.concat(n)),i){case 1:Co(t,5);break;case 4:Co(t,10);break;case 3:Co(t,6);break;default:Co(t,2)}}function wo(t,e){var n=t.Ha+Math.floor(Math.random()*t.Ra);return t.f||(n*=2),n*e}function Co(t,e){if(t.c.info("Error code "+e),2==e){var n=null;t.f&&(n=null);var r=We(t.Ya,t);n||(n=new li("//www.google.com/images/cleardot.gif"),Ue.location&&"http"==Ue.location.protocol||di(n,"https"),yi(n)),function(t,e){var n=new xr;if(Ue.Image){var r=new Image;r.onload=Ye(Bi,n,r,"TestLoadImage: loaded",!0,e),r.onerror=Ye(Bi,n,r,"TestLoadImage: error",!1,e),r.onabort=Ye(Bi,n,r,"TestLoadImage: abort",!1,e),r.ontimeout=Ye(Bi,n,r,"TestLoadImage: timeout",!1,e),Ue.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=t}else e(!1)}(n.toString(),r)}else jr(2);t.v=0,t.f&&t.f.ra(e),Oo(t),uo(t)}function Oo(t){t.v=0,t.I=-1,t.f&&(0==Vi(t.b).length&&0==t.g.length||(t.b.c.length=0,en(t.g),t.g.length=0),t.f.qa())}function Eo(t,e,n){var r=function(t){return t instanceof li?hi(t):new li(t,void 0)}(n);if(""!=r.c)e&&fi(r,e+"."+r.c),pi(r,r.h);else{var i=Ue.location;r=function(t,e,n,r){var i=new li(null,void 0);return t&&di(i,t),e&&fi(i,e),n&&pi(i,n),r&&(i.g=r),i}(i.protocol,e?e+"."+i.hostname:i.hostname,+i.port,n)}return t.V&&ln(t.V,function(t,e){mi(r,e,t)}),n=t.na,(e=t.A)&&n&&mi(r,e,n),mi(r,"VER",t.ha),fo(t,r),r}function xo(t,e){if(e&&!t.C)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new Gi(t.Na)).F=t.C,e}function Io(){}function So(){if(bn&&!(10<=Number(Pn)))throw Error("Environmental error: no available transport.")}function To(t,e){nr.call(this),this.a=new oo(e),this.o=t,this.b=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.a.l=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.a&&(t?t["X-WebChannel-Client-Profile"]=e.a:t={"X-WebChannel-Client-Profile":e.a}),this.a.O=t,(t=e&&e.httpHeadersOverwriteParam)&&!nn(t)&&(this.a.i=t),this.m=e&&e.supportsCrossDomainXhr||!1,this.l=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!nn(e)&&(this.a.A=e,null!==(t=this.b)&&e in t&&e in(t=this.b)&&delete t[e]),this.f=new Ao(this)}function Po(t){Hr.call(this);var e=t.__sm__;if(e){t:{for(var n in e){t=n;break t}t=void 0}(this.c=t)?(t=this.c,this.data=null!==e&&t in e?e[t]:void 0):this.data=e}else this.data=t}function Ro(){qr.call(this),this.status=1}function Ao(t){this.a=t}(Me=Gi.prototype).ba=function(t,e,n,r){if(this.a)throw Error("[goog.net.XhrIo] Object is active with another request="+this.B+"; newUri="+t);e=e?e.toUpperCase():"GET",this.B=t,this.f="",this.h=0,this.u=!1,this.b=!0,this.a=new XMLHttpRequest,this.s=function(t){var e;return(e=t.a)||(e=t.a={}),e}(this.H?this.H:Vr),this.a.onreadystatechange=We(this.za,this);try{this.A=!0,this.a.open(e,String(t),!0),this.A=!1}catch(o){return void Xi(this,o)}t=n||"";var i=new si(this.headers);r&&oi(r,function(t,e){i.set(e,t)}),r=function(t){t:{for(var e=Ki,n=t.length,r="string"==typeof t?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t)){e=i;break t}e=-1}return 0>e?null:"string"==typeof t?t.charAt(e):t[e]}(i.L()),n=Ue.FormData&&t instanceof Ue.FormData,!(0<=Ze($i,e))||r||n||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach(function(t,e){this.a.setRequestHeader(e,t)},this),this.I&&(this.a.responseType=this.I),"withCredentials"in this.a&&this.a.withCredentials!==this.F&&(this.a.withCredentials=this.F);try{eo(this),0<this.o&&((this.D=function(t){return bn&&Tn(9)&&"number"==typeof t.timeout&&void 0!==t.ontimeout}(this.a))?(this.a.timeout=this.o,this.a.ontimeout=We(this.xa,this)):this.m=br(this.xa,this.o,this)),this.l=!0,this.a.send(t),this.l=!1}catch(o){Xi(this,o)}},Me.xa=function(){void 0!==Fe&&this.a&&(this.f="Timed out after "+this.o+"ms, aborting",this.h=8,rr(this,"timeout"),this.abort(8))},Me.abort=function(t){this.a&&this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1,this.h=t||7,rr(this,"complete"),rr(this,"abort"),to(this))},Me.G=function(){this.a&&(this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1),to(this,!0)),Gi.X.G.call(this)},Me.za=function(){this.j||(this.A||this.l||this.g?Ji(this):this.Ua())},Me.Ua=function(){Ji(this)},Me.W=function(){try{return 2<no(this)?this.a.status:-1}catch(mn){return-1}},Me.$=function(){try{return this.a?this.a.responseText:""}catch(mn){return""}},Me.Pa=function(t){if(this.a){var e=this.a.responseText;return t&&0==e.indexOf(t)&&(e=e.substring(t.length)),zi(e)}},Me.ua=function(){return this.h},Me.Qa=function(){return"string"==typeof this.f?this.f:String(this.f)},(Me=oo.prototype).ha=8,Me.v=1,Me.Ba=function(t){if(this.h)if(this.h=null,1==this.v){if(!t){this.R=Math.floor(1e5*Math.random()),t=this.R++;var e,n=new zr(this,this.c,t,void 0),r=this.l;if(this.O&&(r?fn(r=hn(r),this.O):r=this.O),null===this.i&&(n.B=r),this.da)t:{for(var i=e=0;i<this.g.length;i++){var o=this.g[i];if(void 0===(o="__data__"in o.a&&"string"==typeof(o=o.a.__data__)?o.length:void 0))break;if(4096<(e+=o)){e=i;break t}if(4096===e||i===this.g.length-1){e=i+1;break t}}e=1e3}else e=1e3;e=po(this,n,e),mi(i=hi(this.B),"RID",t),mi(i,"CVER",22),this.A&&mi(i,"X-HTTP-Session-Id",this.A),fo(this,i),this.i&&r&&ro(i,this.i,r),Fi(this.b,n),this.Ia&&mi(i,"TYPE","init"),this.da?(mi(i,"$req",e),mi(i,"SID","null"),n.U=!0,$r(n,i,null)):$r(n,i,e),this.v=2}}else 3==this.v&&(t?ho(this,t):0==this.g.length||Di(this.b)||ho(this))},Me.Aa=function(){if(this.j=null,bo(this),this.U&&!(this.F||null==this.a||0>=this.N)){var t=2*this.N;this.c.info("BP detection timer enabled: "+t),this.s=Dr(We(this.Ta,this),t)}},Me.Ta=function(){this.s&&(this.s=null,this.c.info("BP detection timeout reached."),this.c.info("Buffering proxy detected and switch to long-polling!"),this.H=!1,this.F=!0,jr(10),ao(this),bo(this))},Me.Sa=function(){null!=this.m&&(this.m=null,ao(this),mo(this),jr(19))},Me.Ya=function(t){t?(this.c.info("Successfully pinged google.com"),jr(2)):(this.c.info("Failed to ping google.com"),jr(1))},(Me=Io.prototype).ta=function(){},Me.sa=function(){},Me.ra=function(){},Me.qa=function(){},Me.Ja=function(){},So.prototype.a=function(t,e){return new To(t,e)},Ke(To,nr),To.prototype.g=function(){this.a.f=this.f,this.m&&(this.a.C=!0);var t=this.a,e=this.o,n=this.b||void 0;jr(0),t.fa=e,t.V=n||{},t.H=t.S,t.B=Eo(t,null,t.fa),lo(t)},To.prototype.close=function(){so(this.a)},To.prototype.h=function(t){if("string"==typeof t){var e={};e.__data__=t,co(this.a,e)}else this.l?((e={}).__data__=or(t),co(this.a,e)):co(this.a,t)},To.prototype.G=function(){this.a.f=null,delete this.f,so(this.a),delete this.a,To.X.G.call(this)},Ke(Po,Hr),Ke(Ro,qr),Ke(Ao,Io),Ao.prototype.ta=function(){rr(this.a,"a")},Ao.prototype.sa=function(t){rr(this.a,new Po(t))},Ao.prototype.ra=function(t){rr(this.a,new Ro(t))},Ao.prototype.qa=function(){rr(this.a,"b")},So.prototype.createWebChannel=So.prototype.a,To.prototype.send=To.prototype.h,To.prototype.open=To.prototype.g,To.prototype.close=To.prototype.close,Mr.NO_ERROR=0,Mr.TIMEOUT=8,Mr.HTTP_ERROR=6,Lr.COMPLETE="complete",Ur.EventType=Qr,Qr.OPEN="a",Qr.CLOSE="b",Qr.ERROR="c",Qr.MESSAGE="d",nr.prototype.listen=nr.prototype.va,Gi.prototype.listenOnce=Gi.prototype.wa,Gi.prototype.getLastError=Gi.prototype.Qa,Gi.prototype.getLastErrorCode=Gi.prototype.ua,Gi.prototype.getStatus=Gi.prototype.W,Gi.prototype.getResponseJson=Gi.prototype.Pa,Gi.prototype.getResponseText=Gi.prototype.$,Gi.prototype.send=Gi.prototype.ba;var ko=Mr,jo=Lr,No=Sr,Do=Ur,Mo=Gi,Lo=n("uXP2"),Fo=function(t,e,n,r,i,o){this.t=t,this.persistenceKey=e,this.host=n,this.ssl=r,this.forceLongPolling=i,this.i=o},Uo=function(){function t(t,e){this.projectId=t,this.database=e||"(default)"}return Object.defineProperty(t.prototype,"o",{get:function(){return"(default)"===this.database},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(e){return e instanceof t&&e.projectId===this.projectId&&e.database===this.database},t}(),Vo=new ke.b("@firebase/firestore");function Qo(){return Vo.logLevel}function Ho(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(Vo.logLevel<=ke.a.DEBUG){var r=e.map(zo);Vo.debug.apply(Vo,Object(Lo.g)(["Firestore (8.2.7): "+t],r))}}function qo(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(Vo.logLevel<=ke.a.ERROR){var r=e.map(zo);Vo.error.apply(Vo,Object(Lo.g)(["Firestore (8.2.7): "+t],r))}}function Bo(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(Vo.logLevel<=ke.a.WARN){var r=e.map(zo);Vo.warn.apply(Vo,Object(Lo.g)(["Firestore (8.2.7): "+t],r))}}function zo(t){if("string"==typeof t)return t;try{return JSON.stringify(t)}catch(Kg){return t}}function Go(t){void 0===t&&(t="Unexpected state");var e="FIRESTORE (8.2.7) INTERNAL ASSERTION FAILED: "+t;throw qo(e),new Error(e)}function Wo(t,e){t||Go()}function Yo(t,e){return t}function $o(t){var e="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(n);else for(var r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}var Ko=function(){function t(){}return t.u=function(){for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e=Math.floor(256/t.length)*t.length,n="";n.length<20;)for(var r=$o(40),i=0;i<r.length;++i)n.length<20&&r[i]<e&&(n+=t.charAt(r[i]%t.length));return n},t}();function Xo(t,e){return t<e?-1:t>e?1:0}function Zo(t,e,n){return t.length===e.length&&t.every(function(t,r){return n(t,e[r])})}function Jo(t){return t+"\0"}var ts=function(){function t(t){this.h=t}return t.fromBase64String=function(e){return new t(atob(e))},t.fromUint8Array=function(e){return new t(function(t){for(var e="",n=0;n<t.length;++n)e+=String.fromCharCode(t[n]);return e}(e))},t.prototype.toBase64=function(){return btoa(this.h)},t.prototype.toUint8Array=function(){return function(t){for(var e=new Uint8Array(t.length),n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}(this.h)},t.prototype.l=function(){return 2*this.h.length},t.prototype._=function(t){return Xo(this.h,t.h)},t.prototype.isEqual=function(t){return this.h===t.h},t}();ts.T=new ts("");var es={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},ns=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this).code=e,r.message=n,r.name="FirebaseError",r.toString=function(){return r.name+": [code="+r.code+"]: "+r.message},r}return Object(Lo.c)(e,t),e}(Error),rs=function(){function t(t){this.I=t}return t.fromBase64String=function(e){try{return new t(ts.fromBase64String(e))}catch(e){throw new ns(es.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}},t.fromUint8Array=function(e){return new t(ts.fromUint8Array(e))},t.prototype.toBase64=function(){return this.I.toBase64()},t.prototype.toUint8Array=function(){return this.I.toUint8Array()},t.prototype.toString=function(){return"Bytes(base64: "+this.toBase64()+")"},t.prototype.isEqual=function(t){return this.I.isEqual(t.I)},t}(),is=function(){function t(t){this.uid=t}return t.prototype.m=function(){return null!=this.uid},t.prototype.A=function(){return this.m()?"uid:"+this.uid:"anonymous-user"},t.prototype.isEqual=function(t){return t.uid===this.uid},t}();is.UNAUTHENTICATED=new is(null),is.R=new is("google-credentials-uid"),is.P=new is("first-party-uid");var os=function(t,e){this.user=e,this.type="OAuth",this.g={},this.g.Authorization="Bearer "+t},ss=function(){function t(){this.V=null}return t.prototype.getToken=function(){return Promise.resolve(null)},t.prototype.p=function(){},t.prototype.v=function(t){this.V=t,t(is.UNAUTHENTICATED)},t.prototype.S=function(){this.V=null},t}(),as=function(){function t(t){var e=this;this.D=null,this.currentUser=is.UNAUTHENTICATED,this.C=!1,this.N=0,this.V=null,this.forceRefresh=!1,this.D=function(){e.N++,e.currentUser=e.$(),e.C=!0,e.V&&e.V(e.currentUser)},this.N=0,this.auth=t.getImmediate({optional:!0}),this.auth?this.auth.addAuthTokenListener(this.D):(this.D(null),t.get().then(function(t){e.auth=t,e.D&&e.auth.addAuthTokenListener(e.D)},function(){}))}return t.prototype.getToken=function(){var t=this,e=this.N,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(function(n){return t.N!==e?(Ho("FirebaseCredentialsProvider","getToken aborted due to token change."),t.getToken()):n?(Wo("string"==typeof n.accessToken),new os(n.accessToken,t.currentUser)):null}):Promise.resolve(null)},t.prototype.p=function(){this.forceRefresh=!0},t.prototype.v=function(t){this.V=t,this.C&&t(this.currentUser)},t.prototype.S=function(){this.auth&&this.auth.removeAuthTokenListener(this.D),this.D=null,this.V=null},t.prototype.$=function(){var t=this.auth&&this.auth.getUid();return Wo(null===t||"string"==typeof t),new is(t)},t}(),us=function(){function t(t,e){this.F=t,this.O=e,this.type="FirstParty",this.user=is.P}return Object.defineProperty(t.prototype,"g",{get:function(){var t={"X-Goog-AuthUser":this.O},e=this.F.auth.getAuthHeaderValueForFirstParty([]);return e&&(t.Authorization=e),t},enumerable:!1,configurable:!0}),t}(),cs=function(){function t(t,e){this.F=t,this.O=e}return t.prototype.getToken=function(){return Promise.resolve(new us(this.F,this.O))},t.prototype.v=function(t){t(is.P)},t.prototype.S=function(){},t.prototype.p=function(){},t}(),ls=function(){function t(t,e){var n=this;this.previousValue=t,e&&(e.k=function(t){return n.M(t)},this.L=function(t){return e.B(t)})}return t.prototype.M=function(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue},t.prototype.next=function(){var t=++this.previousValue;return this.L&&this.L(t),t},t}();ls.q=-1;var hs=function(){function t(t,e){if(this.seconds=t,this.nanoseconds=e,e<0)throw new ns(es.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(e>=1e9)throw new ns(es.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(t<-62135596800)throw new ns(es.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new ns(es.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}return t.now=function(){return t.fromMillis(Date.now())},t.fromDate=function(e){return t.fromMillis(e.getTime())},t.fromMillis=function(e){var n=Math.floor(e/1e3);return new t(n,1e6*(e-1e3*n))},t.prototype.toDate=function(){return new Date(this.toMillis())},t.prototype.toMillis=function(){return 1e3*this.seconds+this.nanoseconds/1e6},t.prototype.U=function(t){return this.seconds===t.seconds?Xo(this.nanoseconds,t.nanoseconds):Xo(this.seconds,t.seconds)},t.prototype.isEqual=function(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds},t.prototype.toString=function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"},t.prototype.toJSON=function(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}},t.prototype.valueOf=function(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")},t}(),ds=function(){function t(t){this.timestamp=t}return t.K=function(e){return new t(e)},t.min=function(){return new t(new hs(0,0))},t.prototype._=function(t){return this.timestamp.U(t.timestamp)},t.prototype.isEqual=function(t){return this.timestamp.isEqual(t.timestamp)},t.prototype.W=function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3},t.prototype.toString=function(){return"SnapshotVersion("+this.timestamp.toString()+")"},t.prototype.j=function(){return this.timestamp},t}(),fs=function(){function t(t,e,n){void 0===e?e=0:e>t.length&&Go(),void 0===n?n=t.length-e:n>t.length-e&&Go(),this.segments=t,this.offset=e,this.G=n}return Object.defineProperty(t.prototype,"length",{get:function(){return this.G},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(e){return 0===t.H(this,e)},t.prototype.child=function(e){var n=this.segments.slice(this.offset,this.limit());return e instanceof t?e.forEach(function(t){n.push(t)}):n.push(e),this.J(n)},t.prototype.limit=function(){return this.offset+this.length},t.prototype.Y=function(t){return this.J(this.segments,this.offset+(t=void 0===t?1:t),this.length-t)},t.prototype.X=function(){return this.J(this.segments,this.offset,this.length-1)},t.prototype.Z=function(){return this.segments[this.offset]},t.prototype.tt=function(){return this.get(this.length-1)},t.prototype.get=function(t){return this.segments[this.offset+t]},t.prototype.et=function(){return 0===this.length},t.prototype.nt=function(t){if(t.length<this.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},t.prototype.st=function(t){if(this.length+1!==t.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},t.prototype.forEach=function(t){for(var e=this.offset,n=this.limit();e<n;e++)t(this.segments[e])},t.prototype.it=function(){return this.segments.slice(this.offset,this.limit())},t.H=function(t,e){for(var n=Math.min(t.length,e.length),r=0;r<n;r++){var i=t.get(r),o=e.get(r);if(i<o)return-1;if(i>o)return 1}return t.length<e.length?-1:t.length>e.length?1:0},t}(),ps=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(Lo.c)(e,t),e.prototype.J=function(t,n,r){return new e(t,n,r)},e.prototype.rt=function(){return this.it().join("/")},e.prototype.toString=function(){return this.rt()},e.ot=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];for(var r=[],i=0,o=t;i<o.length;i++){var s=o[i];if(s.indexOf("//")>=0)throw new ns(es.INVALID_ARGUMENT,"Invalid segment ("+s+"). Paths must not contain // in them.");r.push.apply(r,s.split("/").filter(function(t){return t.length>0}))}return new e(r)},e.ct=function(){return new e([])},e}(fs),gs=/^[_a-zA-Z][_a-zA-Z0-9]*$/,ms=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(Lo.c)(e,t),e.prototype.J=function(t,n,r){return new e(t,n,r)},e.at=function(t){return gs.test(t)},e.prototype.rt=function(){return this.it().map(function(t){return t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),e.at(t)||(t="`"+t+"`"),t}).join(".")},e.prototype.toString=function(){return this.rt()},e.prototype.ut=function(){return 1===this.length&&"__name__"===this.get(0)},e.ht=function(){return new e(["__name__"])},e.lt=function(t){for(var n=[],r="",i=0,o=function(){if(0===r.length)throw new ns(es.INVALID_ARGUMENT,"Invalid field path ("+t+"). Paths must not be empty, begin with '.', end with '.', or contain '..'");n.push(r),r=""},s=!1;i<t.length;){var a=t[i];if("\\"===a){if(i+1===t.length)throw new ns(es.INVALID_ARGUMENT,"Path has trailing escape character: "+t);var u=t[i+1];if("\\"!==u&&"."!==u&&"`"!==u)throw new ns(es.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);r+=u,i+=2}else"`"===a?(s=!s,i++):"."!==a||s?(r+=a,i++):(o(),i++)}if(o(),s)throw new ns(es.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new e(n)},e.ct=function(){return new e([])},e}(fs),ys=function(){function t(t){this.path=t}return t._t=function(e){return new t(ps.ot(e))},t.ft=function(e){return new t(ps.ot(e).Y(5))},t.prototype.dt=function(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t},t.prototype.isEqual=function(t){return null!==t&&0===ps.H(this.path,t.path)},t.prototype.toString=function(){return this.path.toString()},t.H=function(t,e){return ps.H(t.path,e.path)},t.wt=function(t){return t.length%2==0},t.Et=function(e){return new t(new ps(e.slice()))},t}();function bs(t){var e=0;for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function vs(t,e){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function _s(t){for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}var ws=function(){function t(t){this.fields=t,t.sort(ms.H)}return t.prototype.Tt=function(t){for(var e=0,n=this.fields;e<n.length;e++)if(n[e].nt(t))return!0;return!1},t.prototype.isEqual=function(t){return Zo(this.fields,t.fields,function(t,e){return t.isEqual(e)})},t}(),Cs=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Os(t){if(Wo(!!t),"string"==typeof t){var e=0,n=Cs.exec(t);if(Wo(!!n),n[1]){var r=n[1];r=(r+"000000000").substr(0,9),e=Number(r)}var i=new Date(t);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:Es(t.seconds),nanos:Es(t.nanos)}}function Es(t){return"number"==typeof t?t:"string"==typeof t?Number(t):0}function xs(t){return"string"==typeof t?ts.fromBase64String(t):ts.fromUint8Array(t)}function Is(t){var e,n;return"server_timestamp"===(null===(n=((null===(e=null==t?void 0:t.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function Ss(t){var e=t.mapValue.fields.__previous_value__;return Is(e)?Ss(e):e}function Ts(t){var e=Os(t.mapValue.fields.__local_write_time__.timestampValue);return new hs(e.seconds,e.nanos)}function Ps(t){return null==t}function Rs(t){return 0===t&&1/t==-1/0}function As(t){return"number"==typeof t&&Number.isInteger(t)&&!Rs(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}function ks(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Is(t)?4:10:Go()}function js(t,e){var n=ks(t);if(n!==ks(e))return!1;switch(n){case 0:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Ts(t).isEqual(Ts(e));case 3:return function(t,e){if("string"==typeof t.timestampValue&&"string"==typeof e.timestampValue&&t.timestampValue.length===e.timestampValue.length)return t.timestampValue===e.timestampValue;var n=Os(t.timestampValue),r=Os(e.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(t,e){return xs(t.bytesValue).isEqual(xs(e.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(t,e){return Es(t.geoPointValue.latitude)===Es(e.geoPointValue.latitude)&&Es(t.geoPointValue.longitude)===Es(e.geoPointValue.longitude)}(t,e);case 2:return function(t,e){if("integerValue"in t&&"integerValue"in e)return Es(t.integerValue)===Es(e.integerValue);if("doubleValue"in t&&"doubleValue"in e){var n=Es(t.doubleValue),r=Es(e.doubleValue);return n===r?Rs(n)===Rs(r):isNaN(n)&&isNaN(r)}return!1}(t,e);case 9:return Zo(t.arrayValue.values||[],e.arrayValue.values||[],js);case 10:return function(t,e){var n=t.mapValue.fields||{},r=e.mapValue.fields||{};if(bs(n)!==bs(r))return!1;for(var i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!js(n[i],r[i])))return!1;return!0}(t,e);default:return Go()}}function Ns(t,e){return void 0!==(t.values||[]).find(function(t){return js(t,e)})}function Ds(t,e){var n=ks(t),r=ks(e);if(n!==r)return Xo(n,r);switch(n){case 0:return 0;case 1:return Xo(t.booleanValue,e.booleanValue);case 2:return function(t,e){var n=Es(t.integerValue||t.doubleValue),r=Es(e.integerValue||e.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(t,e);case 3:return Ms(t.timestampValue,e.timestampValue);case 4:return Ms(Ts(t),Ts(e));case 5:return Xo(t.stringValue,e.stringValue);case 6:return function(t,e){var n=xs(t),r=xs(e);return n._(r)}(t.bytesValue,e.bytesValue);case 7:return function(t,e){for(var n=t.split("/"),r=e.split("/"),i=0;i<n.length&&i<r.length;i++){var o=Xo(n[i],r[i]);if(0!==o)return o}return Xo(n.length,r.length)}(t.referenceValue,e.referenceValue);case 8:return function(t,e){var n=Xo(Es(t.latitude),Es(e.latitude));return 0!==n?n:Xo(Es(t.longitude),Es(e.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(t,e){for(var n=t.values||[],r=e.values||[],i=0;i<n.length&&i<r.length;++i){var o=Ds(n[i],r[i]);if(o)return o}return Xo(n.length,r.length)}(t.arrayValue,e.arrayValue);case 10:return function(t,e){var n=t.fields||{},r=Object.keys(n),i=e.fields||{},o=Object.keys(i);r.sort(),o.sort();for(var s=0;s<r.length&&s<o.length;++s){var a=Xo(r[s],o[s]);if(0!==a)return a;var u=Ds(n[r[s]],i[o[s]]);if(0!==u)return u}return Xo(r.length,o.length)}(t.mapValue,e.mapValue);default:throw Go()}}function Ms(t,e){if("string"==typeof t&&"string"==typeof e&&t.length===e.length)return Xo(t,e);var n=Os(t),r=Os(e),i=Xo(n.seconds,r.seconds);return 0!==i?i:Xo(n.nanos,r.nanos)}function Ls(t){return Fs(t)}function Fs(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(t){var e=Os(t);return"time("+e.seconds+","+e.nanos+")"}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?xs(t.bytesValue).toBase64():"referenceValue"in t?ys.ft(t.referenceValue).toString():"geoPointValue"in t?"geo("+(e=t.geoPointValue).latitude+","+e.longitude+")":"arrayValue"in t?function(t){for(var e="[",n=!0,r=0,i=t.values||[];r<i.length;r++)n?n=!1:e+=",",e+=Fs(i[r]);return e+"]"}(t.arrayValue):"mapValue"in t?function(t){for(var e="{",n=!0,r=0,i=Object.keys(t.fields||{}).sort();r<i.length;r++){var o=i[r];n?n=!1:e+=",",e+=o+":"+Fs(t.fields[o])}return e+"}"}(t.mapValue):Go();var e}function Us(t,e){return{referenceValue:"projects/"+t.projectId+"/databases/"+t.database+"/documents/"+e.path.rt()}}function Vs(t){return!!t&&"integerValue"in t}function Qs(t){return!!t&&"arrayValue"in t}function Hs(t){return!!t&&"nullValue"in t}function qs(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Bs(t){return!!t&&"mapValue"in t}var zs=function(){function t(t){this.proto=t}return t.empty=function(){return new t({mapValue:{}})},t.prototype.field=function(t){if(t.et())return this.proto;for(var e=this.proto,n=0;n<t.length-1;++n){if(!e.mapValue.fields)return null;if(!Bs(e=e.mapValue.fields[t.get(n)]))return null}return(e=(e.mapValue.fields||{})[t.tt()])||null},t.prototype.isEqual=function(t){return js(this.proto,t.proto)},t}(),Gs=function(){function t(t){void 0===t&&(t=zs.empty()),this.It=t,this.At=new Map}return t.prototype.set=function(t,e){return this.Rt(t,e),this},t.prototype.delete=function(t){return this.Rt(t,null),this},t.prototype.Rt=function(t,e){for(var n=this.At,r=0;r<t.length-1;++r){var i=t.get(r),o=n.get(i);o instanceof Map?n=o:o&&10===ks(o)?(o=new Map(Object.entries(o.mapValue.fields||{})),n.set(i,o),n=o):(o=new Map,n.set(i,o),n=o)}n.set(t.tt(),e)},t.prototype.Pt=function(){var t=this.yt(ms.ct(),this.At);return null!=t?new zs(t):this.It},t.prototype.yt=function(t,e){var n=this,r=!1,i=this.It.field(t),o=Bs(i)?Object.assign({},i.mapValue.fields):{};return e.forEach(function(e,i){if(e instanceof Map){var s=n.yt(t.child(i),e);null!=s&&(o[i]=s,r=!0)}else null!==e?(o[i]=e,r=!0):o.hasOwnProperty(i)&&(delete o[i],r=!0)}),r?{mapValue:{fields:o}}:null},t}();function Ws(t){var e=[];return vs(t.fields||{},function(t,n){var r=new ms([t]);if(Bs(n)){var i=Ws(n.mapValue).fields;if(0===i.length)e.push(r);else for(var o=0,s=i;o<s.length;o++)e.push(r.child(s[o]))}else e.push(r)}),new ws(e)}var Ys=function(t,e){this.key=t,this.version=e},$s=function(t){function e(e,n,r,i){var o=this;return(o=t.call(this,e,n)||this).gt=r,o.Vt=!!i.Vt,o.hasCommittedMutations=!!i.hasCommittedMutations,o}return Object(Lo.c)(e,t),e.prototype.field=function(t){return this.gt.field(t)},e.prototype.data=function(){return this.gt},e.prototype.bt=function(){return this.gt.proto},e.prototype.isEqual=function(t){return t instanceof e&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.Vt===t.Vt&&this.hasCommittedMutations===t.hasCommittedMutations&&this.gt.isEqual(t.gt)},e.prototype.toString=function(){return"Document("+this.key+", "+this.version+", "+this.gt.toString()+", {hasLocalMutations: "+this.Vt+"}), {hasCommittedMutations: "+this.hasCommittedMutations+"})"},Object.defineProperty(e.prototype,"hasPendingWrites",{get:function(){return this.Vt||this.hasCommittedMutations},enumerable:!1,configurable:!0}),e}(Ys),Ks=function(t){function e(e,n,r){var i=this;return(i=t.call(this,e,n)||this).hasCommittedMutations=!(!r||!r.hasCommittedMutations),i}return Object(Lo.c)(e,t),e.prototype.toString=function(){return"NoDocument("+this.key+", "+this.version+")"},Object.defineProperty(e.prototype,"hasPendingWrites",{get:function(){return this.hasCommittedMutations},enumerable:!1,configurable:!0}),e.prototype.isEqual=function(t){return t instanceof e&&t.hasCommittedMutations===this.hasCommittedMutations&&t.version.isEqual(this.version)&&t.key.isEqual(this.key)},e}(Ys),Xs=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(Lo.c)(e,t),e.prototype.toString=function(){return"UnknownDocument("+this.key+", "+this.version+")"},Object.defineProperty(e.prototype,"hasPendingWrites",{get:function(){return!0},enumerable:!1,configurable:!0}),e.prototype.isEqual=function(t){return t instanceof e&&t.version.isEqual(this.version)&&t.key.isEqual(this.key)},e}(Ys),Zs=function(t,e,n,r,i,o,s){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===s&&(s=null),this.path=t,this.collectionGroup=e,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=o,this.endAt=s,this.vt=null};function Js(t,e,n,r,i,o,s){return void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===s&&(s=null),new Zs(t,e,n,r,i,o,s)}function ta(t){var e=Yo(t);if(null===e.vt){var n=e.path.rt();null!==e.collectionGroup&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(function(t){return function(t){return t.field.rt()+t.op.toString()+Ls(t.value)}(t)}).join(","),n+="|ob:",n+=e.orderBy.map(function(t){return function(t){return t.field.rt()+t.dir}(t)}).join(","),Ps(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=fa(e.startAt)),e.endAt&&(n+="|ub:",n+=fa(e.endAt)),e.vt=n}return e.vt}function ea(t,e){if(t.limit!==e.limit)return!1;if(t.orderBy.length!==e.orderBy.length)return!1;for(var n=0;n<t.orderBy.length;n++)if(!ga(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(var r=0;r<t.filters.length;r++)if((i=t.filters[r]).op!==(o=e.filters[r]).op||!i.field.isEqual(o.field)||!js(i.value,o.value))return!1;var i,o;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!ya(t.startAt,e.startAt)&&ya(t.endAt,e.endAt)}function na(t){return ys.wt(t.path)&&null===t.collectionGroup&&0===t.filters.length}var ra=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).field=e,i.op=n,i.value=r,i}return Object(Lo.c)(e,t),e.create=function(t,n,r){return t.ut()?"in"===n||"not-in"===n?this.St(t,n,r):new ia(t,n,r):"array-contains"===n?new ua(t,r):"in"===n?new ca(t,r):"not-in"===n?new la(t,r):"array-contains-any"===n?new ha(t,r):new e(t,n,r)},e.St=function(t,e,n){return"in"===e?new oa(t,n):new sa(t,n)},e.prototype.matches=function(t){var e=t.field(this.field);return"!="===this.op?null!==e&&this.Dt(Ds(e,this.value)):null!==e&&ks(this.value)===ks(e)&&this.Dt(Ds(e,this.value))},e.prototype.Dt=function(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return 0===t;case"!=":return 0!==t;case">":return t>0;case">=":return t>=0;default:return Go()}},e.prototype.Ct=function(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0},e}(function(){}),ia=function(t){function e(e,n,r){var i=this;return(i=t.call(this,e,n,r)||this).key=ys.ft(r.referenceValue),i}return Object(Lo.c)(e,t),e.prototype.matches=function(t){var e=ys.H(t.key,this.key);return this.Dt(e)},e}(ra),oa=function(t){function e(e,n){var r=this;return(r=t.call(this,e,"in",n)||this).keys=aa(0,n),r}return Object(Lo.c)(e,t),e.prototype.matches=function(t){return this.keys.some(function(e){return e.isEqual(t.key)})},e}(ra),sa=function(t){function e(e,n){var r=this;return(r=t.call(this,e,"not-in",n)||this).keys=aa(0,n),r}return Object(Lo.c)(e,t),e.prototype.matches=function(t){return!this.keys.some(function(e){return e.isEqual(t.key)})},e}(ra);function aa(t,e){var n;return((null===(n=e.arrayValue)||void 0===n?void 0:n.values)||[]).map(function(t){return ys.ft(t.referenceValue)})}var ua=function(t){function e(e,n){return t.call(this,e,"array-contains",n)||this}return Object(Lo.c)(e,t),e.prototype.matches=function(t){var e=t.field(this.field);return Qs(e)&&Ns(e.arrayValue,this.value)},e}(ra),ca=function(t){function e(e,n){return t.call(this,e,"in",n)||this}return Object(Lo.c)(e,t),e.prototype.matches=function(t){var e=t.field(this.field);return null!==e&&Ns(this.value.arrayValue,e)},e}(ra),la=function(t){function e(e,n){return t.call(this,e,"not-in",n)||this}return Object(Lo.c)(e,t),e.prototype.matches=function(t){if(Ns(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;var e=t.field(this.field);return null!==e&&!Ns(this.value.arrayValue,e)},e}(ra),ha=function(t){function e(e,n){return t.call(this,e,"array-contains-any",n)||this}return Object(Lo.c)(e,t),e.prototype.matches=function(t){var e=this,n=t.field(this.field);return!(!Qs(n)||!n.arrayValue.values)&&n.arrayValue.values.some(function(t){return Ns(e.value.arrayValue,t)})},e}(ra),da=function(t,e){this.position=t,this.before=e};function fa(t){return(t.before?"b":"a")+":"+t.position.map(function(t){return Ls(t)}).join(",")}var pa=function(t,e){void 0===e&&(e="asc"),this.field=t,this.dir=e};function ga(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}function ma(t,e,n){for(var r=0,i=0;i<t.position.length;i++){var o=e[i],s=t.position[i];if(r=o.field.ut()?ys.H(ys.ft(s.referenceValue),n.key):Ds(s,n.field(o.field)),"desc"===o.dir&&(r*=-1),0!==r)break}return t.before?r<=0:r<0}function ya(t,e){if(null===t)return null===e;if(null===e)return!1;if(t.before!==e.before||t.position.length!==e.position.length)return!1;for(var n=0;n<t.position.length;n++)if(!js(t.position[n],e.position[n]))return!1;return!0}var ba=function(t,e,n,r,i,o,s,a){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o="F"),void 0===s&&(s=null),void 0===a&&(a=null),this.path=t,this.collectionGroup=e,this.xt=n,this.filters=r,this.limit=i,this.limitType=o,this.startAt=s,this.endAt=a,this.Nt=null,this.$t=null};function va(t,e,n,r,i,o,s,a){return new ba(t,e,n,r,i,o,s,a)}function _a(t){return new ba(t)}function wa(t){return!Ps(t.limit)&&"F"===t.limitType}function Ca(t){return!Ps(t.limit)&&"L"===t.limitType}function Oa(t){return t.xt.length>0?t.xt[0].field:null}function Ea(t){for(var e=0,n=t.filters;e<n.length;e++){var r=n[e];if(r.Ct())return r.field}return null}function xa(t){return null!==t.collectionGroup}function Ia(t){var e=Yo(t);if(null===e.Nt){e.Nt=[];var n=Ea(e),r=Oa(e);if(null!==n&&null===r)n.ut()||e.Nt.push(new pa(n)),e.Nt.push(new pa(ms.ht(),"asc"));else{for(var i=!1,o=0,s=e.xt;o<s.length;o++){var a=s[o];e.Nt.push(a),a.field.ut()&&(i=!0)}if(!i){var u=e.xt.length>0?e.xt[e.xt.length-1].dir:"asc";e.Nt.push(new pa(ms.ht(),u))}}}return e.Nt}function Sa(t){var e=Yo(t);if(!e.$t)if("F"===e.limitType)e.$t=Js(e.path,e.collectionGroup,Ia(e),e.filters,e.limit,e.startAt,e.endAt);else{for(var n=[],r=0,i=Ia(e);r<i.length;r++){var o=i[r];n.push(new pa(o.field,"desc"===o.dir?"asc":"desc"))}var s=e.endAt?new da(e.endAt.position,!e.endAt.before):null,a=e.startAt?new da(e.startAt.position,!e.startAt.before):null;e.$t=Js(e.path,e.collectionGroup,n,e.filters,e.limit,s,a)}return e.$t}function Ta(t,e,n){return new ba(t.path,t.collectionGroup,t.xt.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Pa(t,e){return ea(Sa(t),Sa(e))&&t.limitType===e.limitType}function Ra(t){return ta(Sa(t))+"|lt:"+t.limitType}function Aa(t){return"Query(target="+function(t){var e=t.path.rt();return null!==t.collectionGroup&&(e+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(e+=", filters: ["+t.filters.map(function(t){return(e=t).field.rt()+" "+e.op+" "+Ls(e.value);var e}).join(", ")+"]"),Ps(t.limit)||(e+=", limit: "+t.limit),t.orderBy.length>0&&(e+=", orderBy: ["+t.orderBy.map(function(t){return function(t){return t.field.rt()+" ("+t.dir+")"}(t)}).join(", ")+"]"),t.startAt&&(e+=", startAt: "+fa(t.startAt)),t.endAt&&(e+=", endAt: "+fa(t.endAt)),"Target("+e+")"}(Sa(t))+"; limitType="+t.limitType+")"}function ka(t,e){return function(t,e){var n=e.key.path;return null!==t.collectionGroup?e.key.dt(t.collectionGroup)&&t.path.nt(n):ys.wt(t.path)?t.path.isEqual(n):t.path.st(n)}(t,e)&&function(t,e){for(var n=0,r=t.xt;n<r.length;n++){var i=r[n];if(!i.field.ut()&&null===e.field(i.field))return!1}return!0}(t,e)&&function(t,e){for(var n=0,r=t.filters;n<r.length;n++)if(!r[n].matches(e))return!1;return!0}(t,e)&&function(t,e){return!(t.startAt&&!ma(t.startAt,Ia(t),e)||t.endAt&&ma(t.endAt,Ia(t),e))}(t,e)}function ja(t){return function(e,n){for(var r=!1,i=0,o=Ia(t);i<o.length;i++){var s=o[i],a=Na(s,e,n);if(0!==a)return a;r=r||s.field.ut()}return 0}}function Na(t,e,n){var r=t.field.ut()?ys.H(e.key,n.key):function(t,e,n){var r=e.field(t),i=n.field(t);return null!==r&&null!==i?Ds(r,i):Go()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return Go()}}var Da=function(){function t(t,e,n,r,i,o,s){void 0===i&&(i=ds.min()),void 0===o&&(o=ds.min()),void 0===s&&(s=ts.T),this.target=t,this.targetId=e,this.Ft=n,this.sequenceNumber=r,this.Ot=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=s}return t.prototype.kt=function(e){return new t(this.target,this.targetId,this.Ft,e,this.Ot,this.lastLimboFreeSnapshotVersion,this.resumeToken)},t.prototype.Mt=function(e,n){return new t(this.target,this.targetId,this.Ft,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e)},t.prototype.Lt=function(e){return new t(this.target,this.targetId,this.Ft,this.sequenceNumber,this.Ot,e,this.resumeToken)},t}();function Ma(t,e){if(t.Bt){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Rs(e)?"-0":e}}function La(t){return{integerValue:""+t}}function Fa(t,e){return As(e)?La(e):Ma(t,e)}var Ua=function(){this.qt=void 0};function Va(t,e,n){return t instanceof qa?function(t,e){var n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:t.seconds,nanos:t.nanoseconds}}}};return e&&(n.fields.__previous_value__=e),{mapValue:n}}(n,e):t instanceof Ba?za(t,e):t instanceof Ga?Wa(t,e):function(t,e){var n=Ha(t,e),r=$a(n)+$a(t.Ut);return Vs(n)&&Vs(t.Ut)?La(r):Ma(t.Qt,r)}(t,e)}function Qa(t,e,n){return t instanceof Ba?za(t,e):t instanceof Ga?Wa(t,e):n}function Ha(t,e){return t instanceof Ya?Vs(n=e)||function(t){return!!t&&"doubleValue"in t}(n)?e:{integerValue:0}:null;var n}var qa=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(Lo.c)(e,t),e}(Ua),Ba=function(t){function e(e){var n=this;return(n=t.call(this)||this).elements=e,n}return Object(Lo.c)(e,t),e}(Ua);function za(t,e){for(var n=Ka(e),r=function(t){n.some(function(e){return js(e,t)})||n.push(t)},i=0,o=t.elements;i<o.length;i++)r(o[i]);return{arrayValue:{values:n}}}var Ga=function(t){function e(e){var n=this;return(n=t.call(this)||this).elements=e,n}return Object(Lo.c)(e,t),e}(Ua);function Wa(t,e){for(var n=Ka(e),r=function(t){n=n.filter(function(e){return!js(e,t)})},i=0,o=t.elements;i<o.length;i++)r(o[i]);return{arrayValue:{values:n}}}var Ya=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).Qt=e,r.Ut=n,r}return Object(Lo.c)(e,t),e}(Ua);function $a(t){return Es(t.integerValue||t.doubleValue)}function Ka(t){return Qs(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}var Xa=function(t,e){this.field=t,this.transform=e},Za=function(t,e){this.version=t,this.transformResults=e},Ja=function(){function t(t,e){this.updateTime=t,this.exists=e}return t.Kt=function(){return new t},t.exists=function(e){return new t(void 0,e)},t.updateTime=function(e){return new t(e)},Object.defineProperty(t.prototype,"Wt",{get:function(){return void 0===this.updateTime&&void 0===this.exists},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)},t}();function tu(t,e){return void 0!==t.updateTime?e instanceof $s&&e.version.isEqual(t.updateTime):void 0===t.exists||t.exists===e instanceof $s}var eu=function(){};function nu(t,e,n){return t instanceof au?function(t,e,n){var r=t.value;if(n.transformResults){var i=lu(t.fieldTransforms,e,n.transformResults);r=du(t.fieldTransforms,r,i)}return new $s(t.key,n.version,r,{hasCommittedMutations:!0})}(t,e,n):t instanceof uu?function(t,e,n){if(!tu(t.jt,e))return new Xs(t.key,n.version);var r=cu(t,e,n.transformResults?lu(t.fieldTransforms,e,n.transformResults):[]);return new $s(t.key,n.version,r,{hasCommittedMutations:!0})}(t,e,n):function(t,e,n){return new Ks(t.key,n.version,{hasCommittedMutations:!0})}(t,0,n)}function ru(t,e,n){return t instanceof au?function(t,e,n){if(!tu(t.jt,e))return e;var r=t.value,i=hu(t.fieldTransforms,n,e);r=du(t.fieldTransforms,r,i);var o=su(e);return new $s(t.key,o,r,{Vt:!0})}(t,e,n):t instanceof uu?function(t,e,n){if(!tu(t.jt,e))return e;var r=su(e),i=cu(t,e,hu(t.fieldTransforms,n,e));return new $s(t.key,r,i,{Vt:!0})}(t,e,n):function(t,e){return tu(t.jt,e)?new Ks(t.key,ds.min()):e}(t,e)}function iu(t,e){return function(t,e){for(var n=null,r=0,i=t;r<i.length;r++){var o=i[r],s=e instanceof $s?e.field(o.field):void 0,a=Ha(o.transform,s||null);null!=a&&(n=null==n?(new Gs).set(o.field,a):n.set(o.field,a))}return n?n.Pt():null}(t.fieldTransforms,e)}function ou(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.jt.isEqual(e.jt)&&!!function(t,e){return void 0===t&&void 0===e||!(!t||!e)&&Zo(t,e,function(t,e){return function(t,e){return t.field.isEqual(e.field)&&function(t,e){return t instanceof Ba&&e instanceof Ba||t instanceof Ga&&e instanceof Ga?Zo(t.elements,e.elements,js):t instanceof Ya&&e instanceof Ya?js(t.Ut,e.Ut):t instanceof qa&&e instanceof qa}(t.transform,e.transform)}(t,e)})}(t.fieldTransforms,e.fieldTransforms)&&(0===t.type?t.value.isEqual(e.value):1!==t.type||t.data.isEqual(e.data)&&t.Gt.isEqual(e.Gt))}function su(t){return t instanceof $s?t.version:ds.min()}var au=function(t){function e(e,n,r,i){void 0===i&&(i=[]);var o=this;return(o=t.call(this)||this).key=e,o.value=n,o.jt=r,o.fieldTransforms=i,o.type=0,o}return Object(Lo.c)(e,t),e}(eu),uu=function(t){function e(e,n,r,i,o){void 0===o&&(o=[]);var s=this;return(s=t.call(this)||this).key=e,s.data=n,s.Gt=r,s.jt=i,s.fieldTransforms=o,s.type=1,s}return Object(Lo.c)(e,t),e}(eu);function cu(t,e,n){var r;return r=function(t,e){var n=new Gs(e);return t.Gt.fields.forEach(function(e){if(!e.et()){var r=t.data.field(e);null!==r?n.set(e,r):n.delete(e)}}),n.Pt()}(t,r=e instanceof $s?e.data():zs.empty()),du(t.fieldTransforms,r,n)}function lu(t,e,n){var r=[];Wo(t.length===n.length);for(var i=0;i<n.length;i++){var o=t[i],s=o.transform,a=null;e instanceof $s&&(a=e.field(o.field)),r.push(Qa(s,a,n[i]))}return r}function hu(t,e,n){for(var r=[],i=0,o=t;i<o.length;i++){var s=o[i],a=s.transform,u=null;n instanceof $s&&(u=n.field(s.field)),r.push(Va(a,u,e))}return r}function du(t,e,n){for(var r=new Gs(e),i=0;i<t.length;i++)r.set(t[i].field,n[i]);return r.Pt()}var fu,pu,gu=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).key=e,r.jt=n,r.type=2,r.fieldTransforms=[],r}return Object(Lo.c)(e,t),e}(eu),mu=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).key=e,r.jt=n,r.type=3,r.fieldTransforms=[],r}return Object(Lo.c)(e,t),e}(eu),yu=function(t){this.count=t};function bu(t){switch(t){case es.OK:return Go();case es.CANCELLED:case es.UNKNOWN:case es.DEADLINE_EXCEEDED:case es.RESOURCE_EXHAUSTED:case es.INTERNAL:case es.UNAVAILABLE:case es.UNAUTHENTICATED:return!1;case es.INVALID_ARGUMENT:case es.NOT_FOUND:case es.ALREADY_EXISTS:case es.PERMISSION_DENIED:case es.FAILED_PRECONDITION:case es.ABORTED:case es.OUT_OF_RANGE:case es.UNIMPLEMENTED:case es.DATA_LOSS:return!0;default:return Go()}}function vu(t){if(void 0===t)return qo("GRPC error has no .code"),es.UNKNOWN;switch(t){case fu.OK:return es.OK;case fu.CANCELLED:return es.CANCELLED;case fu.UNKNOWN:return es.UNKNOWN;case fu.DEADLINE_EXCEEDED:return es.DEADLINE_EXCEEDED;case fu.RESOURCE_EXHAUSTED:return es.RESOURCE_EXHAUSTED;case fu.INTERNAL:return es.INTERNAL;case fu.UNAVAILABLE:return es.UNAVAILABLE;case fu.UNAUTHENTICATED:return es.UNAUTHENTICATED;case fu.INVALID_ARGUMENT:return es.INVALID_ARGUMENT;case fu.NOT_FOUND:return es.NOT_FOUND;case fu.ALREADY_EXISTS:return es.ALREADY_EXISTS;case fu.PERMISSION_DENIED:return es.PERMISSION_DENIED;case fu.FAILED_PRECONDITION:return es.FAILED_PRECONDITION;case fu.ABORTED:return es.ABORTED;case fu.OUT_OF_RANGE:return es.OUT_OF_RANGE;case fu.UNIMPLEMENTED:return es.UNIMPLEMENTED;case fu.DATA_LOSS:return es.DATA_LOSS;default:return Go()}}(pu=fu||(fu={}))[pu.OK=0]="OK",pu[pu.CANCELLED=1]="CANCELLED",pu[pu.UNKNOWN=2]="UNKNOWN",pu[pu.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",pu[pu.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",pu[pu.NOT_FOUND=5]="NOT_FOUND",pu[pu.ALREADY_EXISTS=6]="ALREADY_EXISTS",pu[pu.PERMISSION_DENIED=7]="PERMISSION_DENIED",pu[pu.UNAUTHENTICATED=16]="UNAUTHENTICATED",pu[pu.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",pu[pu.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",pu[pu.ABORTED=10]="ABORTED",pu[pu.OUT_OF_RANGE=11]="OUT_OF_RANGE",pu[pu.UNIMPLEMENTED=12]="UNIMPLEMENTED",pu[pu.INTERNAL=13]="INTERNAL",pu[pu.UNAVAILABLE=14]="UNAVAILABLE",pu[pu.DATA_LOSS=15]="DATA_LOSS";var _u=function(){function t(t,e){this.H=t,this.root=e||Cu.EMPTY}return t.prototype.zt=function(e,n){return new t(this.H,this.root.zt(e,n,this.H).copy(null,null,Cu.Ht,null,null))},t.prototype.remove=function(e){return new t(this.H,this.root.remove(e,this.H).copy(null,null,Cu.Ht,null,null))},t.prototype.get=function(t){for(var e=this.root;!e.et();){var n=this.H(t,e.key);if(0===n)return e.value;n<0?e=e.left:n>0&&(e=e.right)}return null},t.prototype.indexOf=function(t){for(var e=0,n=this.root;!n.et();){var r=this.H(t,n.key);if(0===r)return e+n.left.size;r<0?n=n.left:(e+=n.left.size+1,n=n.right)}return-1},t.prototype.et=function(){return this.root.et()},Object.defineProperty(t.prototype,"size",{get:function(){return this.root.size},enumerable:!1,configurable:!0}),t.prototype.Jt=function(){return this.root.Jt()},t.prototype.Yt=function(){return this.root.Yt()},t.prototype.Xt=function(t){return this.root.Xt(t)},t.prototype.forEach=function(t){this.Xt(function(e,n){return t(e,n),!1})},t.prototype.toString=function(){var t=[];return this.Xt(function(e,n){return t.push(e+":"+n),!1}),"{"+t.join(", ")+"}"},t.prototype.Zt=function(t){return this.root.Zt(t)},t.prototype.te=function(){return new wu(this.root,null,this.H,!1)},t.prototype.ee=function(t){return new wu(this.root,t,this.H,!1)},t.prototype.ne=function(){return new wu(this.root,null,this.H,!0)},t.prototype.se=function(t){return new wu(this.root,t,this.H,!0)},t}(),wu=function(){function t(t,e,n,r){this.ie=r,this.re=[];for(var i=1;!t.et();)if(i=e?n(t.key,e):1,r&&(i*=-1),i<0)t=this.ie?t.left:t.right;else{if(0===i){this.re.push(t);break}this.re.push(t),t=this.ie?t.right:t.left}}return t.prototype.oe=function(){var t=this.re.pop(),e={key:t.key,value:t.value};if(this.ie)for(t=t.left;!t.et();)this.re.push(t),t=t.right;else for(t=t.right;!t.et();)this.re.push(t),t=t.left;return e},t.prototype.ce=function(){return this.re.length>0},t.prototype.ae=function(){if(0===this.re.length)return null;var t=this.re[this.re.length-1];return{key:t.key,value:t.value}},t}(),Cu=function(){function t(e,n,r,i,o){this.key=e,this.value=n,this.color=null!=r?r:t.RED,this.left=null!=i?i:t.EMPTY,this.right=null!=o?o:t.EMPTY,this.size=this.left.size+1+this.right.size}return t.prototype.copy=function(e,n,r,i,o){return new t(null!=e?e:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=o?o:this.right)},t.prototype.et=function(){return!1},t.prototype.Xt=function(t){return this.left.Xt(t)||t(this.key,this.value)||this.right.Xt(t)},t.prototype.Zt=function(t){return this.right.Zt(t)||t(this.key,this.value)||this.left.Zt(t)},t.prototype.min=function(){return this.left.et()?this:this.left.min()},t.prototype.Jt=function(){return this.min().key},t.prototype.Yt=function(){return this.right.et()?this.key:this.right.Yt()},t.prototype.zt=function(t,e,n){var r=this,i=n(t,r.key);return(r=i<0?r.copy(null,null,null,r.left.zt(t,e,n),null):0===i?r.copy(null,e,null,null,null):r.copy(null,null,null,null,r.right.zt(t,e,n))).ue()},t.prototype.he=function(){if(this.left.et())return t.EMPTY;var e=this;return e.left.le()||e.left.left.le()||(e=e._e()),(e=e.copy(null,null,null,e.left.he(),null)).ue()},t.prototype.remove=function(e,n){var r,i=this;if(n(e,i.key)<0)i.left.et()||i.left.le()||i.left.left.le()||(i=i._e()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.le()&&(i=i.fe()),i.right.et()||i.right.le()||i.right.left.le()||(i=i.de()),0===n(e,i.key)){if(i.right.et())return t.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.he())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.ue()},t.prototype.le=function(){return this.color},t.prototype.ue=function(){var t=this;return t.right.le()&&!t.left.le()&&(t=t.we()),t.left.le()&&t.left.left.le()&&(t=t.fe()),t.left.le()&&t.right.le()&&(t=t.Ee()),t},t.prototype._e=function(){var t=this.Ee();return t.right.left.le()&&(t=(t=(t=t.copy(null,null,null,null,t.right.fe())).we()).Ee()),t},t.prototype.de=function(){var t=this.Ee();return t.left.left.le()&&(t=(t=t.fe()).Ee()),t},t.prototype.we=function(){var e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)},t.prototype.fe=function(){var e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)},t.prototype.Ee=function(){var t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)},t.prototype.Te=function(){var t=this.Ie();return Math.pow(2,t)<=this.size+1},t.prototype.Ie=function(){if(this.le()&&this.left.le())throw Go();if(this.right.le())throw Go();var t=this.left.Ie();if(t!==this.right.Ie())throw Go();return t+(this.le()?0:1)},t}();Cu.EMPTY=null,Cu.RED=!0,Cu.Ht=!1,Cu.EMPTY=new(function(){function t(){this.size=0}return Object.defineProperty(t.prototype,"key",{get:function(){throw Go()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"value",{get:function(){throw Go()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"color",{get:function(){throw Go()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"left",{get:function(){throw Go()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"right",{get:function(){throw Go()},enumerable:!1,configurable:!0}),t.prototype.copy=function(t,e,n,r,i){return this},t.prototype.zt=function(t,e,n){return new Cu(t,e)},t.prototype.remove=function(t,e){return this},t.prototype.et=function(){return!0},t.prototype.Xt=function(t){return!1},t.prototype.Zt=function(t){return!1},t.prototype.Jt=function(){return null},t.prototype.Yt=function(){return null},t.prototype.le=function(){return!1},t.prototype.Te=function(){return!0},t.prototype.Ie=function(){return 0},t}());var Ou=function(){function t(t){this.H=t,this.data=new _u(this.H)}return t.prototype.has=function(t){return null!==this.data.get(t)},t.prototype.first=function(){return this.data.Jt()},t.prototype.last=function(){return this.data.Yt()},Object.defineProperty(t.prototype,"size",{get:function(){return this.data.size},enumerable:!1,configurable:!0}),t.prototype.indexOf=function(t){return this.data.indexOf(t)},t.prototype.forEach=function(t){this.data.Xt(function(e,n){return t(e),!1})},t.prototype.me=function(t,e){for(var n=this.data.ee(t[0]);n.ce();){var r=n.oe();if(this.H(r.key,t[1])>=0)return;e(r.key)}},t.prototype.Ae=function(t,e){var n;for(n=void 0!==e?this.data.ee(e):this.data.te();n.ce();)if(!t(n.oe().key))return},t.prototype.Re=function(t){var e=this.data.ee(t);return e.ce()?e.oe().key:null},t.prototype.te=function(){return new Eu(this.data.te())},t.prototype.ee=function(t){return new Eu(this.data.ee(t))},t.prototype.add=function(t){return this.copy(this.data.remove(t).zt(t,!0))},t.prototype.delete=function(t){return this.has(t)?this.copy(this.data.remove(t)):this},t.prototype.et=function(){return this.data.et()},t.prototype.Pe=function(t){var e=this;return e.size<t.size&&(e=t,t=this),t.forEach(function(t){e=e.add(t)}),e},t.prototype.isEqual=function(e){if(!(e instanceof t))return!1;if(this.size!==e.size)return!1;for(var n=this.data.te(),r=e.data.te();n.ce();){var i=n.oe().key,o=r.oe().key;if(0!==this.H(i,o))return!1}return!0},t.prototype.it=function(){var t=[];return this.forEach(function(e){t.push(e)}),t},t.prototype.toString=function(){var t=[];return this.forEach(function(e){return t.push(e)}),"SortedSet("+t.toString()+")"},t.prototype.copy=function(e){var n=new t(this.H);return n.data=e,n},t}(),Eu=function(){function t(t){this.ye=t}return t.prototype.oe=function(){return this.ye.oe().key},t.prototype.ce=function(){return this.ye.ce()},t}(),xu=new _u(ys.H);function Iu(){return xu}function Su(){return Iu()}var Tu=new _u(ys.H);function Pu(){return Tu}var Ru=new _u(ys.H);function Au(){return Ru}var ku=new Ou(ys.H);function ju(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=ku,r=0,i=t;r<i.length;r++){var o=i[r];n=n.add(o)}return n}var Nu=new Ou(Xo);function Du(){return Nu}var Mu=function(){function t(t){this.H=t?function(e,n){return t(e,n)||ys.H(e.key,n.key)}:function(t,e){return ys.H(t.key,e.key)},this.ge=Pu(),this.Ve=new _u(this.H)}return t.pe=function(e){return new t(e.H)},t.prototype.has=function(t){return null!=this.ge.get(t)},t.prototype.get=function(t){return this.ge.get(t)},t.prototype.first=function(){return this.Ve.Jt()},t.prototype.last=function(){return this.Ve.Yt()},t.prototype.et=function(){return this.Ve.et()},t.prototype.indexOf=function(t){var e=this.ge.get(t);return e?this.Ve.indexOf(e):-1},Object.defineProperty(t.prototype,"size",{get:function(){return this.Ve.size},enumerable:!1,configurable:!0}),t.prototype.forEach=function(t){this.Ve.Xt(function(e,n){return t(e),!1})},t.prototype.add=function(t){var e=this.delete(t.key);return e.copy(e.ge.zt(t.key,t),e.Ve.zt(t,null))},t.prototype.delete=function(t){var e=this.get(t);return e?this.copy(this.ge.remove(t),this.Ve.remove(e)):this},t.prototype.isEqual=function(e){if(!(e instanceof t))return!1;if(this.size!==e.size)return!1;for(var n=this.Ve.te(),r=e.Ve.te();n.ce();){var i=n.oe().key,o=r.oe().key;if(!i.isEqual(o))return!1}return!0},t.prototype.toString=function(){var t=[];return this.forEach(function(e){t.push(e.toString())}),0===t.length?"DocumentSet ()":"DocumentSet (\n  "+t.join("  \n")+"\n)"},t.prototype.copy=function(e,n){var r=new t;return r.H=this.H,r.ge=e,r.Ve=n,r},t}(),Lu=function(){function t(){this.be=new _u(ys.H)}return t.prototype.track=function(t){var e=t.doc.key,n=this.be.get(e);n?0!==t.type&&3===n.type?this.be=this.be.zt(e,t):3===t.type&&1!==n.type?this.be=this.be.zt(e,{type:n.type,doc:t.doc}):2===t.type&&2===n.type?this.be=this.be.zt(e,{type:2,doc:t.doc}):2===t.type&&0===n.type?this.be=this.be.zt(e,{type:0,doc:t.doc}):1===t.type&&0===n.type?this.be=this.be.remove(e):1===t.type&&2===n.type?this.be=this.be.zt(e,{type:1,doc:n.doc}):0===t.type&&1===n.type?this.be=this.be.zt(e,{type:2,doc:t.doc}):Go():this.be=this.be.zt(e,t)},t.prototype.ve=function(){var t=[];return this.be.Xt(function(e,n){t.push(n)}),t},t}(),Fu=function(){function t(t,e,n,r,i,o,s,a){this.query=t,this.docs=e,this.Se=n,this.docChanges=r,this.De=i,this.fromCache=o,this.Ce=s,this.xe=a}return t.Ne=function(e,n,r,i){var o=[];return n.forEach(function(t){o.push({type:0,doc:t})}),new t(e,n,Mu.pe(n),o,r,i,!0,!1)},Object.defineProperty(t.prototype,"hasPendingWrites",{get:function(){return!this.De.et()},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){if(!(this.fromCache===t.fromCache&&this.Ce===t.Ce&&this.De.isEqual(t.De)&&Pa(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.Se.isEqual(t.Se)))return!1;var e=this.docChanges,n=t.docChanges;if(e.length!==n.length)return!1;for(var r=0;r<e.length;r++)if(e[r].type!==n[r].type||!e[r].doc.isEqual(n[r].doc))return!1;return!0},t}(),Uu=function(){function t(t,e,n,r,i){this.Ot=t,this.$e=e,this.Fe=n,this.Oe=r,this.ke=i}return t.Me=function(e,n){var r=new Map;return r.set(e,Vu.Le(e,n)),new t(ds.min(),r,Du(),Iu(),ju())},t}(),Vu=function(){function t(t,e,n,r,i){this.resumeToken=t,this.Be=e,this.qe=n,this.Ue=r,this.Qe=i}return t.Le=function(e,n){return new t(ts.T,n,ju(),ju(),ju())},t}(),Qu=function(t,e,n,r){this.Ke=t,this.removedTargetIds=e,this.key=n,this.We=r},Hu=function(t,e){this.targetId=t,this.je=e},qu=function(t,e,n,r){void 0===n&&(n=ts.T),void 0===r&&(r=null),this.state=t,this.targetIds=e,this.resumeToken=n,this.cause=r},Bu=function(){function t(){this.Ge=0,this.ze=Wu(),this.He=ts.T,this.Je=!1,this.Ye=!0}return Object.defineProperty(t.prototype,"Be",{get:function(){return this.Je},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"resumeToken",{get:function(){return this.He},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"Xe",{get:function(){return 0!==this.Ge},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"Ze",{get:function(){return this.Ye},enumerable:!1,configurable:!0}),t.prototype.tn=function(t){t.l()>0&&(this.Ye=!0,this.He=t)},t.prototype.en=function(){var t=ju(),e=ju(),n=ju();return this.ze.forEach(function(r,i){switch(i){case 0:t=t.add(r);break;case 2:e=e.add(r);break;case 1:n=n.add(r);break;default:Go()}}),new Vu(this.He,this.Je,t,e,n)},t.prototype.nn=function(){this.Ye=!1,this.ze=Wu()},t.prototype.sn=function(t,e){this.Ye=!0,this.ze=this.ze.zt(t,e)},t.prototype.rn=function(t){this.Ye=!0,this.ze=this.ze.remove(t)},t.prototype.on=function(){this.Ge+=1},t.prototype.cn=function(){this.Ge-=1},t.prototype.an=function(){this.Ye=!0,this.Je=!0},t}(),zu=function(){function t(t){this.un=t,this.hn=new Map,this.ln=Iu(),this._n=Gu(),this.fn=new Ou(Xo)}return t.prototype.dn=function(t){for(var e=0,n=t.Ke;e<n.length;e++){var r=n[e];t.We instanceof $s?this.wn(r,t.We):t.We instanceof Ks&&this.En(r,t.key,t.We)}for(var i=0,o=t.removedTargetIds;i<o.length;i++)this.En(r=o[i],t.key,t.We)},t.prototype.Tn=function(t){var e=this;this.In(t,function(n){var r=e.mn(n);switch(t.state){case 0:e.An(n)&&r.tn(t.resumeToken);break;case 1:r.cn(),r.Xe||r.nn(),r.tn(t.resumeToken);break;case 2:r.cn(),r.Xe||e.removeTarget(n);break;case 3:e.An(n)&&(r.an(),r.tn(t.resumeToken));break;case 4:e.An(n)&&(e.Rn(n),r.tn(t.resumeToken));break;default:Go()}})},t.prototype.In=function(t,e){var n=this;t.targetIds.length>0?t.targetIds.forEach(e):this.hn.forEach(function(t,r){n.An(r)&&e(r)})},t.prototype.Pn=function(t){var e=t.targetId,n=t.je.count,r=this.yn(e);if(r){var i=r.target;if(na(i))if(0===n){var o=new ys(i.path);this.En(e,o,new Ks(o,ds.min()))}else Wo(1===n);else this.gn(e)!==n&&(this.Rn(e),this.fn=this.fn.add(e))}},t.prototype.Vn=function(t){var e=this,n=new Map;this.hn.forEach(function(r,i){var o=e.yn(i);if(o){if(r.Be&&na(o.target)){var s=new ys(o.target.path);null!==e.ln.get(s)||e.pn(i,s)||e.En(i,s,new Ks(s,t))}r.Ze&&(n.set(i,r.en()),r.nn())}});var r=ju();this._n.forEach(function(t,n){var i=!0;n.Ae(function(t){var n=e.yn(t);return!n||2===n.Ft||(i=!1,!1)}),i&&(r=r.add(t))});var i=new Uu(t,n,this.fn,this.ln,r);return this.ln=Iu(),this._n=Gu(),this.fn=new Ou(Xo),i},t.prototype.wn=function(t,e){if(this.An(t)){var n=this.pn(t,e.key)?2:0;this.mn(t).sn(e.key,n),this.ln=this.ln.zt(e.key,e),this._n=this._n.zt(e.key,this.bn(e.key).add(t))}},t.prototype.En=function(t,e,n){if(this.An(t)){var r=this.mn(t);this.pn(t,e)?r.sn(e,1):r.rn(e),this._n=this._n.zt(e,this.bn(e).delete(t)),n&&(this.ln=this.ln.zt(e,n))}},t.prototype.removeTarget=function(t){this.hn.delete(t)},t.prototype.gn=function(t){var e=this.mn(t).en();return this.un.vn(t).size+e.qe.size-e.Qe.size},t.prototype.on=function(t){this.mn(t).on()},t.prototype.mn=function(t){var e=this.hn.get(t);return e||(e=new Bu,this.hn.set(t,e)),e},t.prototype.bn=function(t){var e=this._n.get(t);return e||(e=new Ou(Xo),this._n=this._n.zt(t,e)),e},t.prototype.An=function(t){var e=null!==this.yn(t);return e||Ho("WatchChangeAggregator","Detected inactive target",t),e},t.prototype.yn=function(t){var e=this.hn.get(t);return e&&e.Xe?null:this.un.Sn(t)},t.prototype.Rn=function(t){var e=this;this.hn.set(t,new Bu),this.un.vn(t).forEach(function(n){e.En(t,n,null)})},t.prototype.pn=function(t,e){return this.un.vn(t).has(e)},t}();function Gu(){return new _u(ys.H)}function Wu(){return new _u(ys.H)}var Yu={asc:"ASCENDING",desc:"DESCENDING"},$u={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Ku=function(t,e){this.t=t,this.Bt=e};function Xu(t,e){return t.Bt?new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")+"."+("000000000"+e.nanoseconds).slice(-9)+"Z":{seconds:""+e.seconds,nanos:e.nanoseconds}}function Zu(t,e){return t.Bt?e.toBase64():e.toUint8Array()}function Ju(t,e){return Xu(t,e.j())}function tc(t){return Wo(!!t),ds.K(function(t){var e=Os(t);return new hs(e.seconds,e.nanos)}(t))}function ec(t,e){return function(t){return new ps(["projects",t.projectId,"databases",t.database])}(t).child("documents").child(e).rt()}function nc(t){var e=ps.ot(t);return Wo(Ic(e)),e}function rc(t,e){return ec(t.t,e.path)}function ic(t,e){var n=nc(e);if(n.get(1)!==t.t.projectId)throw new ns(es.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.t.projectId);if(n.get(3)!==t.t.database)throw new ns(es.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.t.database);return new ys(uc(n))}function oc(t,e){return ec(t.t,e)}function sc(t){var e=nc(t);return 4===e.length?ps.ct():uc(e)}function ac(t){return new ps(["projects",t.t.projectId,"databases",t.t.database]).rt()}function uc(t){return Wo(t.length>4&&"documents"===t.get(4)),t.Y(5)}function cc(t,e,n){return{name:rc(t,e),fields:n.proto.mapValue.fields}}function lc(t,e,n){var r=ic(t,e.name),i=tc(e.updateTime),o=new zs({mapValue:{fields:e.fields}});return new $s(r,i,o,{hasCommittedMutations:!!n})}function hc(t,e){var n;if(e instanceof au)n={update:cc(t,e.key,e.value)};else if(e instanceof gu)n={delete:rc(t,e.key)};else if(e instanceof uu)n={update:cc(t,e.key,e.data),updateMask:xc(e.Gt)};else{if(!(e instanceof mu))return Go();n={verify:rc(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(function(t){return function(t,e){var n=e.transform;if(n instanceof qa)return{fieldPath:e.field.rt(),setToServerValue:"REQUEST_TIME"};if(n instanceof Ba)return{fieldPath:e.field.rt(),appendMissingElements:{values:n.elements}};if(n instanceof Ga)return{fieldPath:e.field.rt(),removeAllFromArray:{values:n.elements}};if(n instanceof Ya)return{fieldPath:e.field.rt(),increment:n.Ut};throw Go()}(0,t)})),e.jt.Wt||(n.currentDocument=function(t,e){return void 0!==e.updateTime?{updateTime:Ju(t,e.updateTime)}:void 0!==e.exists?{exists:e.exists}:Go()}(t,e.jt)),n}function dc(t,e){var n=e.currentDocument?function(t){return void 0!==t.updateTime?Ja.updateTime(tc(t.updateTime)):void 0!==t.exists?Ja.exists(t.exists):Ja.Kt()}(e.currentDocument):Ja.Kt(),r=e.updateTransforms?e.updateTransforms.map(function(e){return function(t,e){var n=null;"setToServerValue"in e?(Wo("REQUEST_TIME"===e.setToServerValue),n=new qa):"appendMissingElements"in e?n=new Ba(e.appendMissingElements.values||[]):"removeAllFromArray"in e?n=new Ga(e.removeAllFromArray.values||[]):"increment"in e?n=new Ya(t,e.increment):Go();var r=ms.lt(e.fieldPath);return new Xa(r,n)}(t,e)}):[];if(e.update){var i=ic(t,e.update.name),o=new zs({mapValue:{fields:e.update.fields}});if(e.updateMask){var s=function(t){return new ws((t.fieldPaths||[]).map(function(t){return ms.lt(t)}))}(e.updateMask);return new uu(i,o,s,n,r)}return new au(i,o,n,r)}if(e.delete){var a=ic(t,e.delete);return new gu(a,n)}if(e.verify){var u=ic(t,e.verify);return new mu(u,n)}return Go()}function fc(t,e){return{documents:[oc(t,e.path)]}}function pc(t,e){var n={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(n.parent=oc(t,r),n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(n.parent=oc(t,r.X()),n.structuredQuery.from=[{collectionId:r.tt()}]);var i=function(t){if(0!==t.length){var e=t.map(function(t){return function(t){if("=="===t.op){if(qs(t.value))return{unaryFilter:{field:wc(t.field),op:"IS_NAN"}};if(Hs(t.value))return{unaryFilter:{field:wc(t.field),op:"IS_NULL"}}}else if("!="===t.op){if(qs(t.value))return{unaryFilter:{field:wc(t.field),op:"IS_NOT_NAN"}};if(Hs(t.value))return{unaryFilter:{field:wc(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:wc(t.field),op:_c(t.op),value:t.value}}}(t)});return 1===e.length?e[0]:{compositeFilter:{op:"AND",filters:e}}}}(e.filters);i&&(n.structuredQuery.where=i);var o=function(t){if(0!==t.length)return t.map(function(t){return function(t){return{field:wc(t.field),direction:vc(t.dir)}}(t)})}(e.orderBy);o&&(n.structuredQuery.orderBy=o);var s=function(t,e){return t.Bt||Ps(e)?e:{value:e}}(t,e.limit);return null!==s&&(n.structuredQuery.limit=s),e.startAt&&(n.structuredQuery.startAt=yc(e.startAt)),e.endAt&&(n.structuredQuery.endAt=yc(e.endAt)),n}function gc(t){var e=sc(t.parent),n=t.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){Wo(1===r);var o=n.from[0];o.allDescendants?i=o.collectionId:e=e.child(o.collectionId)}var s=[];n.where&&(s=mc(n.where));var a=[];n.orderBy&&(a=n.orderBy.map(function(t){return function(t){return new pa(Cc(t.field),function(t){switch(t){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(t.direction))}(t)}));var u=null;n.limit&&(u=function(t){var e;return Ps(e="object"==typeof t?t.value:t)?null:e}(n.limit));var c=null;n.startAt&&(c=bc(n.startAt));var l=null;return n.endAt&&(l=bc(n.endAt)),va(e,i,a,s,u,"F",c,l)}function mc(t){return t?void 0!==t.unaryFilter?[Ec(t)]:void 0!==t.fieldFilter?[Oc(t)]:void 0!==t.compositeFilter?t.compositeFilter.filters.map(function(t){return mc(t)}).reduce(function(t,e){return t.concat(e)}):Go():[]}function yc(t){return{before:t.before,values:t.position}}function bc(t){return new da(t.values||[],!!t.before)}function vc(t){return Yu[t]}function _c(t){return $u[t]}function wc(t){return{fieldPath:t.rt()}}function Cc(t){return ms.lt(t.fieldPath)}function Oc(t){return ra.create(Cc(t.fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":default:return Go()}}(t.fieldFilter.op),t.fieldFilter.value)}function Ec(t){switch(t.unaryFilter.op){case"IS_NAN":var e=Cc(t.unaryFilter.field);return ra.create(e,"==",{doubleValue:NaN});case"IS_NULL":var n=Cc(t.unaryFilter.field);return ra.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":var r=Cc(t.unaryFilter.field);return ra.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":var i=Cc(t.unaryFilter.field);return ra.create(i,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":default:return Go()}}function xc(t){var e=[];return t.fields.forEach(function(t){return e.push(t.rt())}),{fieldPaths:e}}function Ic(t){return t.length>=4&&"projects"===t.get(0)&&"databases"===t.get(2)}var Sc=function(){var t=this;this.promise=new Promise(function(e,n){t.resolve=e,t.reject=n})},Tc=function(){function t(t){var e=this;this.Dn=null,this.Cn=null,this.result=void 0,this.error=void 0,this.xn=!1,this.Nn=!1,t(function(t){e.xn=!0,e.result=t,e.Dn&&e.Dn(t)},function(t){e.xn=!0,e.error=t,e.Cn&&e.Cn(t)})}return t.prototype.catch=function(t){return this.next(void 0,t)},t.prototype.next=function(e,n){var r=this;return this.Nn&&Go(),this.Nn=!0,this.xn?this.error?this.$n(n,this.error):this.Fn(e,this.result):new t(function(t,i){r.Dn=function(n){r.Fn(e,n).next(t,i)},r.Cn=function(e){r.$n(n,e).next(t,i)}})},t.prototype.On=function(){var t=this;return new Promise(function(e,n){t.next(e,n)})},t.prototype.kn=function(e){try{var n=e();return n instanceof t?n:t.resolve(n)}catch(e){return t.reject(e)}},t.prototype.Fn=function(e,n){return e?this.kn(function(){return e(n)}):t.resolve(n)},t.prototype.$n=function(e,n){return e?this.kn(function(){return e(n)}):t.reject(n)},t.resolve=function(e){return new t(function(t,n){t(e)})},t.reject=function(e){return new t(function(t,n){n(e)})},t.Mn=function(e){return new t(function(t,n){var r=0,i=0,o=!1;e.forEach(function(e){++r,e.next(function(){++i,o&&i===r&&t()},function(t){return n(t)})}),o=!0,i===r&&t()})},t.Ln=function(e){for(var n=t.resolve(!1),r=function(e){n=n.next(function(n){return n?t.resolve(n):e()})},i=0,o=e;i<o.length;i++)r(o[i]);return n},t.forEach=function(t,e){var n=this,r=[];return t.forEach(function(t,i){r.push(e.call(n,t,i))}),this.Mn(r)},t}(),Pc=function(){function t(t,e){var n=this;this.action=t,this.transaction=e,this.aborted=!1,this.Bn=new Sc,this.transaction.oncomplete=function(){n.Bn.resolve()},this.transaction.onabort=function(){e.error?n.Bn.reject(new kc(t,e.error)):n.Bn.resolve()},this.transaction.onerror=function(e){var r=Lc(e.target.error);n.Bn.reject(new kc(t,r))}}return t.open=function(e,n,r,i){try{return new t(n,e.transaction(i,r))}catch(e){throw new kc(n,e)}},Object.defineProperty(t.prototype,"qn",{get:function(){return this.Bn.promise},enumerable:!1,configurable:!0}),t.prototype.abort=function(t){t&&this.Bn.reject(t),this.aborted||(Ho("SimpleDb","Aborting transaction:",t?t.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())},t.prototype.store=function(t){var e=this.transaction.objectStore(t);return new Nc(e)},t}(),Rc=function(){function t(e,n,r){this.name=e,this.version=n,this.Un=r,12.2===t.Qn(Object(je.n)())&&qo("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}return t.delete=function(t){return Ho("SimpleDb","Removing database:",t),Dc(window.indexedDB.deleteDatabase(t)).On()},t.Kn=function(){if("undefined"==typeof indexedDB)return!1;if(t.Wn())return!0;var e=Object(je.n)(),n=t.Qn(e),r=0<n&&n<10,i=t.jn(e),o=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||o)},t.Wn=function(){var t;return"undefined"!=typeof process&&"YES"===(null===(t=process.env)||void 0===t?void 0:t.Gn)},t.zn=function(t,e){return t.store(e)},t.Qn=function(t){var e=t.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=e?e[1].split("_").slice(0,2).join("."):"-1";return Number(n)},t.jn=function(t){var e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)},t.prototype.Hn=function(t){return Object(Lo.b)(this,void 0,void 0,function(){var e,n=this;return Object(Lo.d)(this,function(r){switch(r.label){case 0:return this.db?[3,2]:(Ho("SimpleDb","Opening database:",this.name),e=this,[4,new Promise(function(e,r){var i=indexedDB.open(n.name,n.version);i.onsuccess=function(t){e(t.target.result)},i.onblocked=function(){r(new kc(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=function(e){var n=e.target.error;r("VersionError"===n.name?new ns(es.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):new kc(t,n))},i.onupgradeneeded=function(t){Ho("SimpleDb",'Database "'+n.name+'" requires upgrade from version:',t.oldVersion),n.Un.Jn(t.target.result,i.transaction,t.oldVersion,n.version).next(function(){Ho("SimpleDb","Database upgrade to version "+n.version+" complete")})}})]);case 1:e.db=r.sent(),r.label=2;case 2:return[2,(this.Yn&&(this.db.onversionchange=function(t){return n.Yn(t)}),this.db)]}})})},t.prototype.Xn=function(t){this.Yn=t,this.db&&(this.db.onversionchange=function(e){return t(e)})},t.prototype.runTransaction=function(t,e,n,r){return Object(Lo.b)(this,void 0,void 0,function(){var i,o,s,a,u;return Object(Lo.d)(this,function(c){switch(c.label){case 0:i="readonly"===e,o=0,s=function(){var e,s,u,c,l;return Object(Lo.d)(this,function(h){switch(h.label){case 0:++o,h.label=1;case 1:return h.trys.push([1,4,,5]),[4,a.Hn(t)];case 2:return a.db=h.sent(),e=Pc.open(a.db,t,i?"readonly":"readwrite",n),s=r(e).catch(function(t){return e.abort(t),Tc.reject(t)}).On(),u={},s.catch(function(){}),[4,e.qn];case 3:return[2,(u.value=(h.sent(),s),u)];case 4:return Ho("SimpleDb","Transaction failed with error:",(c=h.sent()).message,"Retrying:",l="FirebaseError"!==c.name&&o<3),a.close(),l?[3,5]:[2,{value:Promise.reject(c)}];case 5:return[2]}})},a=this,c.label=1;case 1:return[5,s()];case 2:if("object"==typeof(u=c.sent()))return[2,u.value];c.label=3;case 3:return[3,1];case 4:return[2]}})})},t.prototype.close=function(){this.db&&this.db.close(),this.db=void 0},t}(),Ac=function(){function t(t){this.Zn=t,this.ts=!1,this.es=null}return Object.defineProperty(t.prototype,"xn",{get:function(){return this.ts},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ns",{get:function(){return this.es},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"cursor",{set:function(t){this.Zn=t},enumerable:!1,configurable:!0}),t.prototype.done=function(){this.ts=!0},t.prototype.ss=function(t){this.es=t},t.prototype.delete=function(){return Dc(this.Zn.delete())},t}(),kc=function(t){function e(e,n){var r=this;return(r=t.call(this,es.UNAVAILABLE,"IndexedDB transaction '"+e+"' failed: "+n)||this).name="IndexedDbTransactionError",r}return Object(Lo.c)(e,t),e}(ns);function jc(t){return"IndexedDbTransactionError"===t.name}var Nc=function(){function t(t){this.store=t}return t.prototype.put=function(t,e){var n;return void 0!==e?(Ho("SimpleDb","PUT",this.store.name,t,e),n=this.store.put(e,t)):(Ho("SimpleDb","PUT",this.store.name,"<auto-key>",t),n=this.store.put(t)),Dc(n)},t.prototype.add=function(t){return Ho("SimpleDb","ADD",this.store.name,t,t),Dc(this.store.add(t))},t.prototype.get=function(t){var e=this;return Dc(this.store.get(t)).next(function(n){return void 0===n&&(n=null),Ho("SimpleDb","GET",e.store.name,t,n),n})},t.prototype.delete=function(t){return Ho("SimpleDb","DELETE",this.store.name,t),Dc(this.store.delete(t))},t.prototype.count=function(){return Ho("SimpleDb","COUNT",this.store.name),Dc(this.store.count())},t.prototype.rs=function(t,e){var n=this.cursor(this.options(t,e)),r=[];return this.os(n,function(t,e){r.push(e)}).next(function(){return r})},t.prototype.cs=function(t,e){Ho("SimpleDb","DELETE ALL",this.store.name);var n=this.options(t,e);n.us=!1;var r=this.cursor(n);return this.os(r,function(t,e,n){return n.delete()})},t.prototype.hs=function(t,e){var n;e?n=t:(n={},e=t);var r=this.cursor(n);return this.os(r,e)},t.prototype.ls=function(t){var e=this.cursor({});return new Tc(function(n,r){e.onerror=function(t){var e=Lc(t.target.error);r(e)},e.onsuccess=function(e){var r=e.target.result;r?t(r.primaryKey,r.value).next(function(t){t?r.continue():n()}):n()}})},t.prototype.os=function(t,e){var n=[];return new Tc(function(r,i){t.onerror=function(t){i(t.target.error)},t.onsuccess=function(t){var i=t.target.result;if(i){var o=new Ac(i),s=e(i.primaryKey,i.value,o);if(s instanceof Tc){var a=s.catch(function(t){return o.done(),Tc.reject(t)});n.push(a)}o.xn?r():null===o.ns?i.continue():i.continue(o.ns)}else r()}}).next(function(){return Tc.Mn(n)})},t.prototype.options=function(t,e){var n;return void 0!==t&&("string"==typeof t?n=t:e=t),{index:n,range:e}},t.prototype.cursor=function(t){var e="next";if(t.reverse&&(e="prev"),t.index){var n=this.store.index(t.index);return t.us?n.openKeyCursor(t.range,e):n.openCursor(t.range,e)}return this.store.openCursor(t.range,e)},t}();function Dc(t){return new Tc(function(e,n){t.onsuccess=function(t){e(t.target.result)},t.onerror=function(t){var e=Lc(t.target.error);n(e)}})}var Mc=!1;function Lc(t){var e=Rc.Qn(Object(je.n)());if(e>=12.2&&e<13){var n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){var r=new ns("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '"+n+"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.");return Mc||(Mc=!0,setTimeout(function(){throw r},0)),r}}return t}var Fc=function(){function t(t,e,n,r,i){this._s=t,this.fs=e,this.ds=n,this.op=r,this.ws=i,this.Es=new Sc,this.then=this.Es.promise.then.bind(this.Es.promise),this.Es.promise.catch(function(t){})}return t.Ts=function(e,n,r,i,o){var s=new t(e,n,Date.now()+r,i,o);return s.start(r),s},t.prototype.start=function(t){var e=this;this.Is=setTimeout(function(){return e.As()},t)},t.prototype.Rs=function(){return this.As()},t.prototype.cancel=function(t){null!==this.Is&&(this.clearTimeout(),this.Es.reject(new ns(es.CANCELLED,"Operation cancelled"+(t?": "+t:""))))},t.prototype.As=function(){var t=this;this._s.Ps(function(){return null!==t.Is?(t.clearTimeout(),t.op().then(function(e){return t.Es.resolve(e)})):Promise.resolve()})},t.prototype.clearTimeout=function(){null!==this.Is&&(this.ws(this),clearTimeout(this.Is),this.Is=null)},t}();function Uc(t,e){if(qo("AsyncQueue",e+": "+t),jc(t))return new ns(es.UNAVAILABLE,e+": "+t);throw t}var Vc="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",Qc=function(){function t(){this.ys=[]}return t.prototype.gs=function(t){this.ys.push(t)},t.prototype.Vs=function(){this.ys.forEach(function(t){return t()})},t}();function Hc(t){for(var e="",n=0;n<t.length;n++)e.length>0&&(e=Bc(e)),e=qc(t.get(n),e);return Bc(e)}function qc(t,e){for(var n=e,r=t.length,i=0;i<r;i++){var o=t.charAt(i);switch(o){case"\0":n+="\x01\x10";break;case"\x01":n+="\x01\x11";break;default:n+=o}}return n}function Bc(t){return t+"\x01\x01"}function zc(t){var e=t.length;if(Wo(e>=2),2===e)return Wo("\x01"===t.charAt(0)&&"\x01"===t.charAt(1)),ps.ct();for(var n=e-2,r=[],i="",o=0;o<e;){var s=t.indexOf("\x01",o);switch((s<0||s>n)&&Go(),t.charAt(s+1)){case"\x01":var a=t.substring(o,s),u=void 0;0===i.length?u=a:(u=i+=a,i=""),r.push(u);break;case"\x10":i+=t.substring(o,s),i+="\0";break;case"\x11":i+=t.substring(o,s+1);break;default:Go()}o=s+2}return new ps(r)}var Gc=function(t,e){this.seconds=t,this.nanoseconds=e},Wc=function(t,e,n){this.ownerId=t,this.allowTabSynchronization=e,this.leaseTimestampMs=n};Wc.store="owner",Wc.key="owner";var Yc=function(t,e,n){this.userId=t,this.lastAcknowledgedBatchId=e,this.lastStreamToken=n};Yc.store="mutationQueues",Yc.keyPath="userId";var $c=function(t,e,n,r,i){this.userId=t,this.batchId=e,this.localWriteTimeMs=n,this.baseMutations=r,this.mutations=i};$c.store="mutations",$c.keyPath="batchId",$c.userMutationsIndex="userMutationsIndex",$c.userMutationsKeyPath=["userId","batchId"];var Kc=function(){function t(){}return t.prefixForUser=function(t){return[t]},t.prefixForPath=function(t,e){return[t,Hc(e)]},t.key=function(t,e,n){return[t,Hc(e),n]},t}();Kc.store="documentMutations",Kc.PLACEHOLDER=new Kc;var Xc=function(t,e){this.path=t,this.readTime=e},Zc=function(t,e){this.path=t,this.version=e},Jc=function(t,e,n,r,i,o){this.unknownDocument=t,this.noDocument=e,this.document=n,this.hasCommittedMutations=r,this.readTime=i,this.parentPath=o};Jc.store="remoteDocuments",Jc.readTimeIndex="readTimeIndex",Jc.readTimeIndexPath="readTime",Jc.collectionReadTimeIndex="collectionReadTimeIndex",Jc.collectionReadTimeIndexPath=["parentPath","readTime"];var tl=function(t){this.byteSize=t};tl.store="remoteDocumentGlobal",tl.key="remoteDocumentGlobalKey";var el=function(t,e,n,r,i,o,s){this.targetId=t,this.canonicalId=e,this.readTime=n,this.resumeToken=r,this.lastListenSequenceNumber=i,this.lastLimboFreeSnapshotVersion=o,this.query=s};el.store="targets",el.keyPath="targetId",el.queryTargetsIndexName="queryTargetsIndex",el.queryTargetsKeyPath=["canonicalId","targetId"];var nl=function(t,e,n){this.targetId=t,this.path=e,this.sequenceNumber=n};nl.store="targetDocuments",nl.keyPath=["targetId","path"],nl.documentTargetsIndex="documentTargetsIndex",nl.documentTargetsKeyPath=["path","targetId"];var rl=function(t,e,n,r){this.highestTargetId=t,this.highestListenSequenceNumber=e,this.lastRemoteSnapshotVersion=n,this.targetCount=r};rl.key="targetGlobalKey",rl.store="targetGlobal";var il=function(t,e){this.collectionId=t,this.parent=e};il.store="collectionParents",il.keyPath=["collectionId","parent"];var ol=function(t,e,n,r){this.clientId=t,this.updateTimeMs=e,this.networkEnabled=n,this.inForeground=r};ol.store="clientMetadata",ol.keyPath="clientId";var sl=function(t,e,n){this.bundleId=t,this.createTime=e,this.version=n};sl.store="bundles",sl.keyPath="bundleId";var al=function(t,e,n){this.name=t,this.readTime=e,this.bundledQuery=n};al.store="namedQueries",al.keyPath="name";var ul=Object(Lo.g)(Object(Lo.g)(Object(Lo.g)(Object(Lo.g)([Yc.store,$c.store,Kc.store,Jc.store,el.store,Wc.store,rl.store,nl.store],[ol.store]),[tl.store]),[il.store]),[sl.store,al.store]),cl=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).ps=e,r.bs=n,r}return Object(Lo.c)(e,t),e}(Qc);function ll(t,e){var n=Yo(t);return Rc.zn(n.ps,e)}var hl=function(){function t(t,e,n,r){this.batchId=t,this.vs=e,this.baseMutations=n,this.mutations=r}return t.prototype.Ss=function(t,e,n){for(var r=n.Ds,i=0;i<this.mutations.length;i++){var o=this.mutations[i];o.key.isEqual(t)&&(e=nu(o,e,r[i]))}return e},t.prototype.Cs=function(t,e){for(var n=0,r=this.baseMutations;n<r.length;n++)(s=r[n]).key.isEqual(t)&&(e=ru(s,e,this.vs));for(var i=0,o=this.mutations;i<o.length;i++){var s;(s=o[i]).key.isEqual(t)&&(e=ru(s,e,this.vs))}return e},t.prototype.xs=function(t){var e=this,n=t;return this.mutations.forEach(function(r){var i=e.Cs(r.key,t.get(r.key));i&&(n=n.zt(r.key,i))}),n},t.prototype.keys=function(){return this.mutations.reduce(function(t,e){return t.add(e.key)},ju())},t.prototype.isEqual=function(t){return this.batchId===t.batchId&&Zo(this.mutations,t.mutations,function(t,e){return ou(t,e)})&&Zo(this.baseMutations,t.baseMutations,function(t,e){return ou(t,e)})},t}(),dl=function(){function t(t,e,n,r){this.batch=t,this.Ns=e,this.Ds=n,this.$s=r}return t.from=function(e,n,r){Wo(e.mutations.length===r.length);for(var i=Au(),o=e.mutations,s=0;s<o.length;s++)i=i.zt(o[s].key,r[s].version);return new t(e,n,r,i)},t}(),fl=function(t){this.Fs=t};function pl(t,e){if(e.document)return lc(t.Fs,e.document,!!e.hasCommittedMutations);if(e.noDocument){var n=ys.Et(e.noDocument.path),r=vl(e.noDocument.readTime);return new Ks(n,r,{hasCommittedMutations:!!e.hasCommittedMutations})}if(e.unknownDocument){var i=ys.Et(e.unknownDocument.path);return r=vl(e.unknownDocument.version),new Xs(i,r)}return Go()}function gl(t,e,n){var r=ml(n),i=e.key.path.X().it();if(e instanceof $s){var o=function(t,e){return{name:rc(t,e.key),fields:e.bt().mapValue.fields,updateTime:Xu(t,e.version.j())}}(t.Fs,e),s=e.hasCommittedMutations;return new Jc(null,null,o,s,r,i)}if(e instanceof Ks){var a=e.key.path.it(),u=bl(e.version);return s=e.hasCommittedMutations,new Jc(null,new Xc(a,u),null,s,r,i)}if(e instanceof Xs){var c=e.key.path.it(),l=bl(e.version);return new Jc(new Zc(c,l),null,null,!0,r,i)}return Go()}function ml(t){var e=t.j();return[e.seconds,e.nanoseconds]}function yl(t){var e=new hs(t[0],t[1]);return ds.K(e)}function bl(t){var e=t.j();return new Gc(e.seconds,e.nanoseconds)}function vl(t){var e=new hs(t.seconds,t.nanoseconds);return ds.K(e)}function _l(t,e){for(var n=(e.baseMutations||[]).map(function(e){return dc(t.Fs,e)}),r=0;r<e.mutations.length-1;++r)r+1<e.mutations.length&&void 0!==e.mutations[r+1].transform&&(e.mutations[r].updateTransforms=e.mutations[r+1].transform.fieldTransforms,e.mutations.splice(r+1,1),++r);var i=e.mutations.map(function(e){return dc(t.Fs,e)}),o=hs.fromMillis(e.localWriteTimeMs);return new hl(e.batchId,o,n,i)}function wl(t){var e,n,r=vl(t.readTime),i=void 0!==t.lastLimboFreeSnapshotVersion?vl(t.lastLimboFreeSnapshotVersion):ds.min();return void 0!==t.query.documents?(Wo(1===(n=t.query).documents.length),e=Sa(_a(sc(n.documents[0])))):e=function(t){return Sa(gc(t))}(t.query),new Da(e,t.targetId,0,t.lastListenSequenceNumber,r,i,ts.fromBase64String(t.resumeToken))}function Cl(t,e){var n,r=bl(e.Ot),i=bl(e.lastLimboFreeSnapshotVersion);n=na(e.target)?fc(t.Fs,e.target):pc(t.Fs,e.target);var o=e.resumeToken.toBase64();return new el(e.targetId,ta(e.target),r,o,e.sequenceNumber,i,n)}function Ol(t){var e=gc({parent:t.parent,structuredQuery:t.structuredQuery});return"LAST"===t.limitType?Ta(e,e.limit,"L"):e}var El=function(){function t(){}return t.prototype.Os=function(t,e){return xl(t).get(e).next(function(t){if(t)return{id:(e=t).bundleId,createTime:vl(e.createTime),version:e.version};var e})},t.prototype.ks=function(t,e){return xl(t).put({bundleId:(n=e).id,createTime:bl(tc(n.createTime)),version:n.version});var n},t.prototype.Ms=function(t,e){return Il(t).get(e).next(function(t){if(t)return{name:(e=t).name,query:Ol(e.bundledQuery),readTime:vl(e.readTime)};var e})},t.prototype.Ls=function(t,e){return Il(t).put(function(t){return{name:t.name,readTime:bl(tc(t.readTime)),bundledQuery:t.bundledQuery}}(e))},t}();function xl(t){return ll(t,sl.store)}function Il(t){return ll(t,al.store)}var Sl=function(){function t(){this.Bs=new Tl}return t.prototype.qs=function(t,e){return this.Bs.add(e),Tc.resolve()},t.prototype.Us=function(t,e){return Tc.resolve(this.Bs.getEntries(e))},t}(),Tl=function(){function t(){this.index={}}return t.prototype.add=function(t){var e=t.tt(),n=t.X(),r=this.index[e]||new Ou(ps.H),i=!r.has(n);return this.index[e]=r.add(n),i},t.prototype.has=function(t){var e=t.tt(),n=t.X(),r=this.index[e];return r&&r.has(n)},t.prototype.getEntries=function(t){return(this.index[t]||new Ou(ps.H)).it()},t}(),Pl=function(){function t(){this.Qs=new Tl}return t.prototype.qs=function(t,e){var n=this;if(!this.Qs.has(e)){var r=e.tt(),i=e.X();t.gs(function(){n.Qs.add(e)});var o={collectionId:r,parent:Hc(i)};return Rl(t).put(o)}return Tc.resolve()},t.prototype.Us=function(t,e){var n=[],r=IDBKeyRange.bound([e,""],[Jo(e),""],!1,!0);return Rl(t).rs(r).next(function(t){for(var r=0,i=t;r<i.length;r++){var o=i[r];if(o.collectionId!==e)break;n.push(zc(o.parent))}return n})},t}();function Rl(t){return ll(t,il.store)}var Al={Ks:!1,Ws:0,js:0,Gs:0},kl=function(){function t(t,e,n){this.zs=t,this.Hs=e,this.Js=n}return t.Ys=function(e){return new t(e,t.Xs,t.Zs)},t}();function jl(t){return Object(Lo.b)(this,void 0,void 0,function(){return Object(Lo.d)(this,function(e){if(t.code!==es.FAILED_PRECONDITION||t.message!==Vc)throw t;return Ho("LocalStore","Unexpectedly lost primary lease"),[2]})})}kl.Xs=10,kl.Zs=1e3,kl.ti=new kl(41943040,kl.Xs,kl.Zs),kl.ei=new kl(-1,0,0);var Nl=function(){function t(t,e){this.ni=t,this.si=e,this.ii={}}return t.prototype.get=function(t){var e=this.ni(t),n=this.ii[e];if(void 0!==n)for(var r=0,i=n;r<i.length;r++){var o=i[r],s=o[1];if(this.si(o[0],t))return s}},t.prototype.has=function(t){return void 0!==this.get(t)},t.prototype.set=function(t,e){var n=this.ni(t),r=this.ii[n];if(void 0!==r){for(var i=0;i<r.length;i++)if(this.si(r[i][0],t))return void(r[i]=[t,e]);r.push([t,e])}else this.ii[n]=[[t,e]]},t.prototype.delete=function(t){var e=this.ni(t),n=this.ii[e];if(void 0===n)return!1;for(var r=0;r<n.length;r++)if(this.si(n[r][0],t))return 1===n.length?delete this.ii[e]:n.splice(r,1),!0;return!1},t.prototype.forEach=function(t){vs(this.ii,function(e,n){for(var r=0,i=n;r<i.length;r++){var o=i[r];t(o[0],o[1])}})},t.prototype.et=function(){return _s(this.ii)},t}(),Dl=function(){function t(){this.ri=new Nl(function(t){return t.toString()},function(t,e){return t.isEqual(e)}),this.oi=!1}return t.prototype.ci=function(t){var e=this.ri.get(t);return e?e.readTime:ds.min()},t.prototype.ai=function(t,e){this.ui(),this.ri.set(t.key,{hi:t,readTime:e})},t.prototype.li=function(t,e){void 0===e&&(e=null),this.ui(),this.ri.set(t,{hi:null,readTime:e})},t.prototype._i=function(t,e){this.ui();var n=this.ri.get(e);return void 0!==n?Tc.resolve(n.hi):this.fi(t,e)},t.prototype.getEntries=function(t,e){return this.di(t,e)},t.prototype.apply=function(t){return this.ui(),this.oi=!0,this.wi(t)},t.prototype.ui=function(){},t}();function Ml(t,e,n){var r=t.store($c.store),i=t.store(Kc.store),o=[],s=IDBKeyRange.only(n.batchId),a=0,u=r.hs({range:s},function(t,e,n){return a++,n.delete()});o.push(u.next(function(){Wo(1===a)}));for(var c=[],l=0,h=n.mutations;l<h.length;l++){var d=h[l],f=Kc.key(e,d.key.path,n.batchId);o.push(i.delete(f)),c.push(d.key)}return Tc.Mn(o).next(function(){return c})}function Ll(t){var e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw Go();e=t.noDocument}return JSON.stringify(e).length}var Fl=function(){function t(t,e,n,r){this.userId=t,this.Qt=e,this.Ei=n,this.Ti=r,this.Ii={}}return t.mi=function(e,n,r,i){return Wo(""!==e.uid),new t(e.m()?e.uid:"",n,r,i)},t.prototype.Ai=function(t){var e=!0,n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Vl(t).hs({index:$c.userMutationsIndex,range:n},function(t,n,r){e=!1,r.done()}).next(function(){return e})},t.prototype.Ri=function(t,e,n,r){var i=this,o=Ql(t),s=Vl(t);return s.add({}).next(function(a){Wo("number"==typeof a);for(var u=new hl(a,e,n,r),c=function(t,e,n){var r=n.baseMutations.map(function(e){return hc(t.Fs,e)}),i=n.mutations.map(function(e){return hc(t.Fs,e)});return new $c(e,n.batchId,n.vs.toMillis(),r,i)}(i.Qt,i.userId,u),l=[],h=new Ou(function(t,e){return Xo(t.rt(),e.rt())}),d=0,f=r;d<f.length;d++){var p=f[d],g=Kc.key(i.userId,p.key.path,a);h=h.add(p.key.path.X()),l.push(s.put(c)),l.push(o.put(g,Kc.PLACEHOLDER))}return h.forEach(function(e){l.push(i.Ei.qs(t,e))}),t.gs(function(){i.Ii[a]=u.keys()}),Tc.Mn(l).next(function(){return u})})},t.prototype.Pi=function(t,e){var n=this;return Vl(t).get(e).next(function(t){return t?(Wo(t.userId===n.userId),_l(n.Qt,t)):null})},t.prototype.yi=function(t,e){var n=this;return this.Ii[e]?Tc.resolve(this.Ii[e]):this.Pi(t,e).next(function(t){if(t){var r=t.keys();return n.Ii[e]=r,r}return null})},t.prototype.gi=function(t,e){var n=this,r=e+1,i=IDBKeyRange.lowerBound([this.userId,r]),o=null;return Vl(t).hs({index:$c.userMutationsIndex,range:i},function(t,e,i){e.userId===n.userId&&(Wo(e.batchId>=r),o=_l(n.Qt,e)),i.done()}).next(function(){return o})},t.prototype.Vi=function(t){var e=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),n=-1;return Vl(t).hs({index:$c.userMutationsIndex,range:e,reverse:!0},function(t,e,r){n=e.batchId,r.done()}).next(function(){return n})},t.prototype.pi=function(t){var e=this,n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Vl(t).rs($c.userMutationsIndex,n).next(function(t){return t.map(function(t){return _l(e.Qt,t)})})},t.prototype.bi=function(t,e){var n=this,r=Kc.prefixForPath(this.userId,e.path),i=IDBKeyRange.lowerBound(r),o=[];return Ql(t).hs({range:i},function(r,i,s){var a=r[0],u=r[2],c=zc(r[1]);if(a===n.userId&&e.path.isEqual(c))return Vl(t).get(u).next(function(t){if(!t)throw Go();Wo(t.userId===n.userId),o.push(_l(n.Qt,t))});s.done()}).next(function(){return o})},t.prototype.vi=function(t,e){var n=this,r=new Ou(Xo),i=[];return e.forEach(function(e){var o=Kc.prefixForPath(n.userId,e.path),s=IDBKeyRange.lowerBound(o),a=Ql(t).hs({range:s},function(t,i,o){var s=t[0],a=t[2],u=zc(t[1]);s===n.userId&&e.path.isEqual(u)?r=r.add(a):o.done()});i.push(a)}),Tc.Mn(i).next(function(){return n.Si(t,r)})},t.prototype.Di=function(t,e){var n=this,r=e.path,i=r.length+1,o=Kc.prefixForPath(this.userId,r),s=IDBKeyRange.lowerBound(o),a=new Ou(Xo);return Ql(t).hs({range:s},function(t,e,o){var s=t[0],u=t[2],c=zc(t[1]);s===n.userId&&r.nt(c)?c.length===i&&(a=a.add(u)):o.done()}).next(function(){return n.Si(t,a)})},t.prototype.Si=function(t,e){var n=this,r=[],i=[];return e.forEach(function(e){i.push(Vl(t).get(e).next(function(t){if(null===t)throw Go();Wo(t.userId===n.userId),r.push(_l(n.Qt,t))}))}),Tc.Mn(i).next(function(){return r})},t.prototype.Ci=function(t,e){var n=this;return Ml(t.ps,this.userId,e).next(function(r){return t.gs(function(){n.xi(e.batchId)}),Tc.forEach(r,function(e){return n.Ti.Ni(t,e)})})},t.prototype.xi=function(t){delete this.Ii[t]},t.prototype.$i=function(t){var e=this;return this.Ai(t).next(function(n){if(!n)return Tc.resolve();var r=IDBKeyRange.lowerBound(Kc.prefixForUser(e.userId)),i=[];return Ql(t).hs({range:r},function(t,n,r){if(t[0]===e.userId){var o=zc(t[1]);i.push(o)}else r.done()}).next(function(){Wo(0===i.length)})})},t.prototype.Fi=function(t,e){return Ul(t,this.userId,e)},t.prototype.Oi=function(t){var e=this;return Hl(t).get(this.userId).next(function(t){return t||new Yc(e.userId,-1,"")})},t}();function Ul(t,e,n){var r=Kc.prefixForPath(e,n.path),i=r[1],o=IDBKeyRange.lowerBound(r),s=!1;return Ql(t).hs({range:o,us:!0},function(t,n,r){t[0]===e&&t[1]===i&&(s=!0),r.done()}).next(function(){return s})}function Vl(t){return ll(t,$c.store)}function Ql(t){return ll(t,Kc.store)}function Hl(t){return ll(t,Yc.store)}var ql=function(){function t(t){this.ki=t}return t.prototype.next=function(){return this.ki+=2,this.ki},t.Mi=function(){return new t(0)},t.Li=function(){return new t(-1)},t}(),Bl=function(){function t(t,e){this.Ti=t,this.Qt=e}return t.prototype.Bi=function(t){var e=this;return this.qi(t).next(function(n){var r=new ql(n.highestTargetId);return n.highestTargetId=r.next(),e.Ui(t,n).next(function(){return n.highestTargetId})})},t.prototype.Qi=function(t){return this.qi(t).next(function(t){return ds.K(new hs(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds))})},t.prototype.Ki=function(t){return this.qi(t).next(function(t){return t.highestListenSequenceNumber})},t.prototype.Wi=function(t,e,n){var r=this;return this.qi(t).next(function(i){return i.highestListenSequenceNumber=e,n&&(i.lastRemoteSnapshotVersion=n.j()),e>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=e),r.Ui(t,i)})},t.prototype.ji=function(t,e){var n=this;return this.Gi(t,e).next(function(){return n.qi(t).next(function(r){return r.targetCount+=1,n.zi(e,r),n.Ui(t,r)})})},t.prototype.Hi=function(t,e){return this.Gi(t,e)},t.prototype.Ji=function(t,e){var n=this;return this.Yi(t,e.targetId).next(function(){return zl(t).delete(e.targetId)}).next(function(){return n.qi(t)}).next(function(e){return Wo(e.targetCount>0),e.targetCount-=1,n.Ui(t,e)})},t.prototype.Xi=function(t,e,n){var r=this,i=0,o=[];return zl(t).hs(function(s,a){var u=wl(a);u.sequenceNumber<=e&&null===n.get(u.targetId)&&(i++,o.push(r.Ji(t,u)))}).next(function(){return Tc.Mn(o)}).next(function(){return i})},t.prototype.In=function(t,e){return zl(t).hs(function(t,n){var r=wl(n);e(r)})},t.prototype.qi=function(t){return Gl(t).get(rl.key).next(function(t){return Wo(null!==t),t})},t.prototype.Ui=function(t,e){return Gl(t).put(rl.key,e)},t.prototype.Gi=function(t,e){return zl(t).put(Cl(this.Qt,e))},t.prototype.zi=function(t,e){var n=!1;return t.targetId>e.highestTargetId&&(e.highestTargetId=t.targetId,n=!0),t.sequenceNumber>e.highestListenSequenceNumber&&(e.highestListenSequenceNumber=t.sequenceNumber,n=!0),n},t.prototype.Zi=function(t){return this.qi(t).next(function(t){return t.targetCount})},t.prototype.tr=function(t,e){var n=ta(e),r=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]),i=null;return zl(t).hs({range:r,index:el.queryTargetsIndexName},function(t,n,r){var o=wl(n);ea(e,o.target)&&(i=o,r.done())}).next(function(){return i})},t.prototype.er=function(t,e,n){var r=this,i=[],o=Wl(t);return e.forEach(function(e){var s=Hc(e.path);i.push(o.put(new nl(n,s))),i.push(r.Ti.nr(t,n,e))}),Tc.Mn(i)},t.prototype.sr=function(t,e,n){var r=this,i=Wl(t);return Tc.forEach(e,function(e){var o=Hc(e.path);return Tc.Mn([i.delete([n,o]),r.Ti.ir(t,n,e)])})},t.prototype.Yi=function(t,e){var n=Wl(t),r=IDBKeyRange.bound([e],[e+1],!1,!0);return n.delete(r)},t.prototype.rr=function(t,e){var n=IDBKeyRange.bound([e],[e+1],!1,!0),r=Wl(t),i=ju();return r.hs({range:n,us:!0},function(t,e,n){var r=zc(t[1]),o=new ys(r);i=i.add(o)}).next(function(){return i})},t.prototype.Fi=function(t,e){var n=Hc(e.path),r=IDBKeyRange.bound([n],[Jo(n)],!1,!0),i=0;return Wl(t).hs({index:nl.documentTargetsIndex,us:!0,range:r},function(t,e,n){0!==t[0]&&(i++,n.done())}).next(function(){return i>0})},t.prototype.Sn=function(t,e){return zl(t).get(e).next(function(t){return t?wl(t):null})},t}();function zl(t){return ll(t,el.store)}function Gl(t){return ll(t,rl.store)}function Wl(t){return ll(t,nl.store)}function Yl(t,e){var n=t[1],r=e[1],i=Xo(t[0],e[0]);return 0===i?Xo(n,r):i}var $l=function(){function t(t){this.cr=t,this.buffer=new Ou(Yl),this.ar=0}return t.prototype.ur=function(){return++this.ar},t.prototype.hr=function(t){var e=[t,this.ur()];if(this.buffer.size<this.cr)this.buffer=this.buffer.add(e);else{var n=this.buffer.last();Yl(e,n)<0&&(this.buffer=this.buffer.delete(n).add(e))}},Object.defineProperty(t.prototype,"maxValue",{get:function(){return this.buffer.last()[0]},enumerable:!1,configurable:!0}),t}(),Kl=function(){function t(t,e){this.lr=t,this._s=e,this._r=!1,this.dr=null}return t.prototype.start=function(t){-1!==this.lr.params.zs&&this.wr(t)},t.prototype.stop=function(){this.dr&&(this.dr.cancel(),this.dr=null)},Object.defineProperty(t.prototype,"Er",{get:function(){return null!==this.dr},enumerable:!1,configurable:!0}),t.prototype.wr=function(t){var e=this,n=this._r?3e5:6e4;Ho("LruGarbageCollector","Garbage collection scheduled in "+n+"ms"),this.dr=this._s.Tr("lru_garbage_collection",n,function(){return Object(Lo.b)(e,void 0,void 0,function(){var e;return Object(Lo.d)(this,function(n){switch(n.label){case 0:this.dr=null,this._r=!0,n.label=1;case 1:return n.trys.push([1,3,,7]),[4,t.Ir(this.lr)];case 2:return n.sent(),[3,7];case 3:return jc(e=n.sent())?(Ho("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",e),[3,6]):[3,4];case 4:return[4,jl(e)];case 5:n.sent(),n.label=6;case 6:return[3,7];case 7:return[4,this.wr(t)];case 8:return n.sent(),[2]}})})})},t}(),Xl=function(){function t(t,e){this.mr=t,this.params=e}return t.prototype.Ar=function(t,e){return this.mr.Rr(t).next(function(t){return Math.floor(e/100*t)})},t.prototype.Pr=function(t,e){var n=this;if(0===e)return Tc.resolve(ls.q);var r=new $l(e);return this.mr.In(t,function(t){return r.hr(t.sequenceNumber)}).next(function(){return n.mr.yr(t,function(t){return r.hr(t)})}).next(function(){return r.maxValue})},t.prototype.Xi=function(t,e,n){return this.mr.Xi(t,e,n)},t.prototype.gr=function(t,e){return this.mr.gr(t,e)},t.prototype.Vr=function(t,e){var n=this;return-1===this.params.zs?(Ho("LruGarbageCollector","Garbage collection skipped; disabled"),Tc.resolve(Al)):this.pr(t).next(function(r){return r<n.params.zs?(Ho("LruGarbageCollector","Garbage collection skipped; Cache size "+r+" is lower than threshold "+n.params.zs),Al):n.br(t,e)})},t.prototype.pr=function(t){return this.mr.pr(t)},t.prototype.br=function(t,e){var n,r,i,o,s,a,u,c=this,l=Date.now();return this.Ar(t,this.params.Hs).next(function(e){return e>c.params.Js?(Ho("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of "+c.params.Js+" from "+e),r=c.params.Js):r=e,o=Date.now(),c.Pr(t,r)}).next(function(r){return n=r,s=Date.now(),c.Xi(t,n,e)}).next(function(e){return i=e,a=Date.now(),c.gr(t,n)}).next(function(t){return u=Date.now(),Qo()<=ke.a.DEBUG&&Ho("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in "+(o-l)+"ms\n\tDetermined least recently used "+r+" in "+(s-o)+"ms\n\tRemoved "+i+" targets in "+(a-s)+"ms\n\tRemoved "+t+" documents in "+(u-a)+"ms\nTotal Duration: "+(u-l)+"ms"),Tc.resolve({Ks:!0,Ws:r,js:i,Gs:t})})},t}(),Zl=function(){function t(t,e){this.db=t,this.lr=function(t,e){return new Xl(t,e)}(this,e)}return t.prototype.Rr=function(t){var e=this.vr(t);return this.db.Sr().Zi(t).next(function(t){return e.next(function(e){return t+e})})},t.prototype.vr=function(t){var e=0;return this.yr(t,function(t){e++}).next(function(){return e})},t.prototype.In=function(t,e){return this.db.Sr().In(t,e)},t.prototype.yr=function(t,e){return this.Dr(t,function(t,n){return e(n)})},t.prototype.nr=function(t,e,n){return Jl(t,n)},t.prototype.ir=function(t,e,n){return Jl(t,n)},t.prototype.Xi=function(t,e,n){return this.db.Sr().Xi(t,e,n)},t.prototype.Ni=function(t,e){return Jl(t,e)},t.prototype.Cr=function(t,e){return function(t,e){var n=!1;return Hl(t).ls(function(r){return Ul(t,r,e).next(function(t){return t&&(n=!0),Tc.resolve(!t)})}).next(function(){return n})}(t,e)},t.prototype.gr=function(t,e){var n=this,r=this.db.$r().Nr(),i=[],o=0;return this.Dr(t,function(s,a){if(a<=e){var u=n.Cr(t,s).next(function(e){if(!e)return o++,r._i(t,s).next(function(){return r.li(s),Wl(t).delete([0,Hc(s.path)])})});i.push(u)}}).next(function(){return Tc.Mn(i)}).next(function(){return r.apply(t)}).next(function(){return o})},t.prototype.removeTarget=function(t,e){var n=e.kt(t.bs);return this.db.Sr().Hi(t,n)},t.prototype.Fr=function(t,e){return Jl(t,e)},t.prototype.Dr=function(t,e){var n,r=Wl(t),i=ls.q;return r.hs({index:nl.documentTargetsIndex},function(t,r){var o=r.path,s=r.sequenceNumber;0===t[0]?(i!==ls.q&&e(new ys(zc(n)),i),i=s,n=o):i=ls.q}).next(function(){i!==ls.q&&e(new ys(zc(n)),i)})},t.prototype.pr=function(t){return this.db.$r().Or(t)},t}();function Jl(t,e){return Wl(t).put(function(t,e){return new nl(0,Hc(t.path),e)}(e,t.bs))}var th=function(){function t(t,e){this.Qt=t,this.Ei=e}return t.prototype.ai=function(t,e,n){return rh(t).put(ih(e),n)},t.prototype.li=function(t,e){var n=rh(t),r=ih(e);return n.delete(r)},t.prototype.updateMetadata=function(t,e){var n=this;return this.getMetadata(t).next(function(r){return r.byteSize+=e,n.kr(t,r)})},t.prototype._i=function(t,e){var n=this;return rh(t).get(ih(e)).next(function(t){return n.Mr(t)})},t.prototype.Lr=function(t,e){var n=this;return rh(t).get(ih(e)).next(function(t){var e=n.Mr(t);return e?{hi:e,size:Ll(t)}:null})},t.prototype.getEntries=function(t,e){var n=this,r=Su();return this.Br(t,e,function(t,e){var i=n.Mr(e);r=r.zt(t,i)}).next(function(){return r})},t.prototype.qr=function(t,e){var n=this,r=Su(),i=new _u(ys.H);return this.Br(t,e,function(t,e){var o=n.Mr(e);o?(r=r.zt(t,o),i=i.zt(t,Ll(e))):(r=r.zt(t,null),i=i.zt(t,0))}).next(function(){return{Ur:r,Qr:i}})},t.prototype.Br=function(t,e,n){if(e.et())return Tc.resolve();var r=IDBKeyRange.bound(e.first().path.it(),e.last().path.it()),i=e.te(),o=i.oe();return rh(t).hs({range:r},function(t,e,r){for(var s=ys.Et(t);o&&ys.H(o,s)<0;)n(o,null),o=i.oe();o&&o.isEqual(s)&&(n(o,e),o=i.ce()?i.oe():null),o?r.ss(o.path.it()):r.done()}).next(function(){for(;o;)n(o,null),o=i.ce()?i.oe():null})},t.prototype.Kr=function(t,e,n){var r=this,i=Pu(),o=e.path.length+1,s={};if(n.isEqual(ds.min())){var a=e.path.it();s.range=IDBKeyRange.lowerBound(a)}else{var u=e.path.it(),c=ml(n);s.range=IDBKeyRange.lowerBound([u,c],!0),s.index=Jc.collectionReadTimeIndex}return rh(t).hs(s,function(t,n,s){if(t.length===o){var a=pl(r.Qt,n);e.path.nt(a.key.path)?a instanceof $s&&ka(e,a)&&(i=i.zt(a.key,a)):s.done()}}).next(function(){return i})},t.prototype.Nr=function(t){return new eh(this,!!t&&t.Wr)},t.prototype.Or=function(t){return this.getMetadata(t).next(function(t){return t.byteSize})},t.prototype.getMetadata=function(t){return nh(t).get(tl.key).next(function(t){return Wo(!!t),t})},t.prototype.kr=function(t,e){return nh(t).put(tl.key,e)},t.prototype.Mr=function(t){if(t){var e=pl(this.Qt,t);return e instanceof Ks&&e.version.isEqual(ds.min())?null:e}return null},t}(),eh=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).jr=e,r.Wr=n,r.Gr=new Nl(function(t){return t.toString()},function(t,e){return t.isEqual(e)}),r}return Object(Lo.c)(e,t),e.prototype.wi=function(t){var e=this,n=[],r=0,i=new Ou(function(t,e){return Xo(t.rt(),e.rt())});return this.ri.forEach(function(o,s){var a=e.Gr.get(o);if(s.hi){var u=gl(e.jr.Qt,s.hi,e.ci(o));i=i.add(o.path.X());var c=Ll(u);r+=c-a,n.push(e.jr.ai(t,o,u))}else if(r-=a,e.Wr){var l=gl(e.jr.Qt,new Ks(o,ds.min()),e.ci(o));n.push(e.jr.ai(t,o,l))}else n.push(e.jr.li(t,o))}),i.forEach(function(r){n.push(e.jr.Ei.qs(t,r))}),n.push(this.jr.updateMetadata(t,r)),Tc.Mn(n)},e.prototype.fi=function(t,e){var n=this;return this.jr.Lr(t,e).next(function(t){return null===t?(n.Gr.set(e,0),null):(n.Gr.set(e,t.size),t.hi)})},e.prototype.di=function(t,e){var n=this;return this.jr.qr(t,e).next(function(t){var e=t.Ur;return t.Qr.forEach(function(t,e){n.Gr.set(t,e)}),e})},e}(Dl);function nh(t){return ll(t,tl.store)}function rh(t){return ll(t,Jc.store)}function ih(t){return t.path.it()}var oh=function(){function t(t){this.Qt=t}return t.prototype.Jn=function(t,e,n,r){var i=this;Wo(n<r&&n>=0&&r<=11);var o=new Pc("createOrUpgrade",e);n<1&&r>=1&&(function(t){t.createObjectStore(Wc.store)}(t),function(t){t.createObjectStore(Yc.store,{keyPath:Yc.keyPath}),t.createObjectStore($c.store,{keyPath:$c.keyPath,autoIncrement:!0}).createIndex($c.userMutationsIndex,$c.userMutationsKeyPath,{unique:!0}),t.createObjectStore(Kc.store)}(t),sh(t),function(t){t.createObjectStore(Jc.store)}(t));var s=Tc.resolve();return n<3&&r>=3&&(0!==n&&(function(t){t.deleteObjectStore(nl.store),t.deleteObjectStore(el.store),t.deleteObjectStore(rl.store)}(t),sh(t)),s=s.next(function(){return function(t){var e=t.store(rl.store),n=new rl(0,0,ds.min().j(),0);return e.put(rl.key,n)}(o)})),n<4&&r>=4&&(0!==n&&(s=s.next(function(){return function(t,e){return e.store($c.store).rs().next(function(n){t.deleteObjectStore($c.store),t.createObjectStore($c.store,{keyPath:$c.keyPath,autoIncrement:!0}).createIndex($c.userMutationsIndex,$c.userMutationsKeyPath,{unique:!0});var r=e.store($c.store),i=n.map(function(t){return r.put(t)});return Tc.Mn(i)})}(t,o)})),s=s.next(function(){!function(t){t.createObjectStore(ol.store,{keyPath:ol.keyPath})}(t)})),n<5&&r>=5&&(s=s.next(function(){return i.zr(o)})),n<6&&r>=6&&(s=s.next(function(){return function(t){t.createObjectStore(tl.store)}(t),i.Hr(o)})),n<7&&r>=7&&(s=s.next(function(){return i.Jr(o)})),n<8&&r>=8&&(s=s.next(function(){return i.Yr(t,o)})),n<9&&r>=9&&(s=s.next(function(){!function(t){t.objectStoreNames.contains("remoteDocumentChanges")&&t.deleteObjectStore("remoteDocumentChanges")}(t),function(t){var e=t.objectStore(Jc.store);e.createIndex(Jc.readTimeIndex,Jc.readTimeIndexPath,{unique:!1}),e.createIndex(Jc.collectionReadTimeIndex,Jc.collectionReadTimeIndexPath,{unique:!1})}(e)})),n<10&&r>=10&&(s=s.next(function(){return i.Xr(o)})),n<11&&r>=11&&(s=s.next(function(){!function(t){t.createObjectStore(sl.store,{keyPath:sl.keyPath})}(t),function(t){t.createObjectStore(al.store,{keyPath:al.keyPath})}(t)})),s},t.prototype.Hr=function(t){var e=0;return t.store(Jc.store).hs(function(t,n){e+=Ll(n)}).next(function(){var n=new tl(e);return t.store(tl.store).put(tl.key,n)})},t.prototype.zr=function(t){var e=this,n=t.store(Yc.store),r=t.store($c.store);return n.rs().next(function(n){return Tc.forEach(n,function(n){var i=IDBKeyRange.bound([n.userId,-1],[n.userId,n.lastAcknowledgedBatchId]);return r.rs($c.userMutationsIndex,i).next(function(r){return Tc.forEach(r,function(r){Wo(r.userId===n.userId);var i=_l(e.Qt,r);return Ml(t,n.userId,i).next(function(){})})})})})},t.prototype.Jr=function(t){var e=t.store(nl.store),n=t.store(Jc.store);return t.store(rl.store).get(rl.key).next(function(t){var r=[];return n.hs(function(n,i){var o=new ps(n),s=function(t){return[0,Hc(t)]}(o);r.push(e.get(s).next(function(n){return n?Tc.resolve():function(n){return e.put(new nl(0,Hc(n),t.highestListenSequenceNumber))}(o)}))}).next(function(){return Tc.Mn(r)})})},t.prototype.Yr=function(t,e){t.createObjectStore(il.store,{keyPath:il.keyPath});var n=e.store(il.store),r=new Tl,i=function(t){if(r.add(t)){var e=t.tt(),i=t.X();return n.put({collectionId:e,parent:Hc(i)})}};return e.store(Jc.store).hs({us:!0},function(t,e){var n=new ps(t);return i(n.X())}).next(function(){return e.store(Kc.store).hs({us:!0},function(t,e){var n=zc(t[1]);return i(n.X())})})},t.prototype.Xr=function(t){var e=this,n=t.store(el.store);return n.hs(function(t,r){var i=wl(r),o=Cl(e.Qt,i);return n.put(o)})},t}();function sh(t){t.createObjectStore(nl.store,{keyPath:nl.keyPath}).createIndex(nl.documentTargetsIndex,nl.documentTargetsKeyPath,{unique:!0}),t.createObjectStore(el.store,{keyPath:el.keyPath}).createIndex(el.queryTargetsIndexName,el.queryTargetsKeyPath,{unique:!0}),t.createObjectStore(rl.store)}var ah="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",uh=function(){function t(e,n,r,i,o,s,a,u,c,l){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=r,this.Zr=o,this.window=s,this.document=a,this.eo=c,this.no=l,this.so=null,this.io=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ro=null,this.inForeground=!1,this.oo=null,this.co=null,this.ao=Number.NEGATIVE_INFINITY,this.uo=function(t){return Promise.resolve()},!t.Kn())throw new ns(es.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.Ti=new Zl(this,i),this.ho=n+"main",this.Qt=new fl(u),this.lo=new Rc(this.ho,11,new oh(this.Qt)),this._o=new Bl(this.Ti,this.Qt),this.Ei=new Pl,this.fo=function(t,e){return new th(t,e)}(this.Qt,this.Ei),this.wo=new El,this.window&&this.window.localStorage?this.Eo=this.window.localStorage:(this.Eo=null,!1===l&&qo("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}return t.prototype.start=function(){var t=this;return this.To().then(function(){if(!t.isPrimary&&!t.allowTabSynchronization)throw new ns(es.FAILED_PRECONDITION,ah);return t.Io(),t.mo(),t.Ao(),t.runTransaction("getHighestListenSequenceNumber","readonly",function(e){return t._o.Ki(e)})}).then(function(e){t.so=new ls(e,t.eo)}).then(function(){t.io=!0}).catch(function(e){return t.lo&&t.lo.close(),Promise.reject(e)})},t.prototype.Ro=function(t){var e=this;return this.uo=function(n){return Object(Lo.b)(e,void 0,void 0,function(){return Object(Lo.d)(this,function(e){return this.Er?[2,t(n)]:[2]})})},t(this.isPrimary)},t.prototype.Po=function(t){var e=this;this.lo.Xn(function(n){return Object(Lo.b)(e,void 0,void 0,function(){return Object(Lo.d)(this,function(e){switch(e.label){case 0:return null===n.newVersion?[4,t()]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}})})})},t.prototype.yo=function(t){var e=this;this.networkEnabled!==t&&(this.networkEnabled=t,this.Zr.Ps(function(){return Object(Lo.b)(e,void 0,void 0,function(){return Object(Lo.d)(this,function(t){switch(t.label){case 0:return this.Er?[4,this.To()]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})}))},t.prototype.To=function(){var t=this;return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",function(e){return lh(e).put(new ol(t.clientId,Date.now(),t.networkEnabled,t.inForeground)).next(function(){if(t.isPrimary)return t.Vo(e).next(function(e){e||(t.isPrimary=!1,t.Zr.po(function(){return t.uo(!1)}))})}).next(function(){return t.bo(e)}).next(function(n){return t.isPrimary&&!n?t.vo(e).next(function(){return!1}):!!n&&t.So(e).next(function(){return!0})})}).catch(function(e){if(jc(e))return Ho("IndexedDbPersistence","Failed to extend owner lease: ",e),t.isPrimary;if(!t.allowTabSynchronization)throw e;return Ho("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(function(e){t.isPrimary!==e&&t.Zr.po(function(){return t.uo(e)}),t.isPrimary=e})},t.prototype.Vo=function(t){var e=this;return ch(t).get(Wc.key).next(function(t){return Tc.resolve(e.Do(t))})},t.prototype.Co=function(t){return lh(t).delete(this.clientId)},t.prototype.xo=function(){return Object(Lo.b)(this,void 0,void 0,function(){var t,e,n,r=this;return Object(Lo.d)(this,function(i){switch(i.label){case 0:return!this.isPrimary||this.No(this.ao,18e5)?[3,2]:(this.ao=Date.now(),[4,this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",function(t){var e=ll(t,ol.store);return e.rs().next(function(t){var n=r.$o(t,18e5),i=t.filter(function(t){return-1===n.indexOf(t)});return Tc.forEach(i,function(t){return e.delete(t.clientId)}).next(function(){return i})})}).catch(function(){return[]})]);case 1:if(t=i.sent(),this.Eo)for(e=0,n=t;e<n.length;e++)this.Eo.removeItem(this.Fo(n[e].clientId));i.label=2;case 2:return[2]}})})},t.prototype.Ao=function(){var t=this;this.co=this.Zr.Tr("client_metadata_refresh",4e3,function(){return t.To().then(function(){return t.xo()}).then(function(){return t.Ao()})})},t.prototype.Do=function(t){return!!t&&t.ownerId===this.clientId},t.prototype.bo=function(t){var e=this;return this.no?Tc.resolve(!0):ch(t).get(Wc.key).next(function(n){if(null!==n&&e.No(n.leaseTimestampMs,5e3)&&!e.Oo(n.ownerId)){if(e.Do(n)&&e.networkEnabled)return!0;if(!e.Do(n)){if(!n.allowTabSynchronization)throw new ns(es.FAILED_PRECONDITION,ah);return!1}}return!(!e.networkEnabled||!e.inForeground)||lh(t).rs().next(function(t){return void 0===e.$o(t,5e3).find(function(t){return!(e.clientId===t.clientId||!(!e.networkEnabled&&t.networkEnabled||!e.inForeground&&t.inForeground&&e.networkEnabled===t.networkEnabled))})})}).next(function(t){return e.isPrimary!==t&&Ho("IndexedDbPersistence","Client "+(t?"is":"is not")+" eligible for a primary lease."),t})},t.prototype.ko=function(){return Object(Lo.b)(this,void 0,void 0,function(){var t=this;return Object(Lo.d)(this,function(e){switch(e.label){case 0:return this.io=!1,this.Mo(),this.co&&(this.co.cancel(),this.co=null),this.Lo(),this.Bo(),[4,this.lo.runTransaction("shutdown","readwrite",[Wc.store,ol.store],function(e){var n=new cl(e,ls.q);return t.vo(n).next(function(){return t.Co(n)})})];case 1:return e.sent(),this.lo.close(),this.qo(),[2]}})})},t.prototype.$o=function(t,e){var n=this;return t.filter(function(t){return n.No(t.updateTimeMs,e)&&!n.Oo(t.clientId)})},t.prototype.Uo=function(){var t=this;return this.runTransaction("getActiveClients","readonly",function(e){return lh(e).rs().next(function(e){return t.$o(e,18e5).map(function(t){return t.clientId})})})},Object.defineProperty(t.prototype,"Er",{get:function(){return this.io},enumerable:!1,configurable:!0}),t.prototype.Qo=function(t){return Fl.mi(t,this.Qt,this.Ei,this.Ti)},t.prototype.Sr=function(){return this._o},t.prototype.$r=function(){return this.fo},t.prototype.Ko=function(){return this.Ei},t.prototype.Wo=function(){return this.wo},t.prototype.runTransaction=function(t,e,n){var r,i=this;return Ho("IndexedDbPersistence","Starting transaction:",t),this.lo.runTransaction(t,"readonly"===e?"readonly":"readwrite",ul,function(o){return r=new cl(o,i.so?i.so.next():ls.q),"readwrite-primary"===e?i.Vo(r).next(function(t){return!!t||i.bo(r)}).next(function(e){if(!e)throw qo("Failed to obtain primary lease for action '"+t+"'."),i.isPrimary=!1,i.Zr.po(function(){return i.uo(!1)}),new ns(es.FAILED_PRECONDITION,Vc);return n(r)}).next(function(t){return i.So(r).next(function(){return t})}):i.jo(r).next(function(){return n(r)})}).then(function(t){return r.Vs(),t})},t.prototype.jo=function(t){var e=this;return ch(t).get(Wc.key).next(function(t){if(null!==t&&e.No(t.leaseTimestampMs,5e3)&&!e.Oo(t.ownerId)&&!e.Do(t)&&!(e.no||e.allowTabSynchronization&&t.allowTabSynchronization))throw new ns(es.FAILED_PRECONDITION,ah)})},t.prototype.So=function(t){var e=new Wc(this.clientId,this.allowTabSynchronization,Date.now());return ch(t).put(Wc.key,e)},t.Kn=function(){return Rc.Kn()},t.prototype.vo=function(t){var e=this,n=ch(t);return n.get(Wc.key).next(function(t){return e.Do(t)?(Ho("IndexedDbPersistence","Releasing primary lease."),n.delete(Wc.key)):Tc.resolve()})},t.prototype.No=function(t,e){var n=Date.now();return!(t<n-e||t>n&&(qo("Detected an update time that is in the future: "+t+" > "+n),1))},t.prototype.Io=function(){var t=this;null!==this.document&&"function"==typeof this.document.addEventListener&&(this.oo=function(){t.Zr.Ps(function(){return t.inForeground="visible"===t.document.visibilityState,t.To()})},this.document.addEventListener("visibilitychange",this.oo),this.inForeground="visible"===this.document.visibilityState)},t.prototype.Lo=function(){this.oo&&(this.document.removeEventListener("visibilitychange",this.oo),this.oo=null)},t.prototype.mo=function(){var t,e=this;"function"==typeof(null===(t=this.window)||void 0===t?void 0:t.addEventListener)&&(this.ro=function(){e.Mo(),e.Zr.Ps(function(){return e.ko()})},this.window.addEventListener("unload",this.ro))},t.prototype.Bo=function(){this.ro&&(this.window.removeEventListener("unload",this.ro),this.ro=null)},t.prototype.Oo=function(t){var e;try{var n=null!==(null===(e=this.Eo)||void 0===e?void 0:e.getItem(this.Fo(t)));return Ho("IndexedDbPersistence","Client '"+t+"' "+(n?"is":"is not")+" zombied in LocalStorage"),n}catch(t){return qo("IndexedDbPersistence","Failed to get zombied client id.",t),!1}},t.prototype.Mo=function(){if(this.Eo)try{this.Eo.setItem(this.Fo(this.clientId),String(Date.now()))}catch(t){qo("Failed to set zombie client id.",t)}},t.prototype.qo=function(){if(this.Eo)try{this.Eo.removeItem(this.Fo(this.clientId))}catch(t){}},t.prototype.Fo=function(t){return"firestore_zombie_"+this.persistenceKey+"_"+t},t}();function ch(t){return ll(t,Wc.store)}function lh(t){return ll(t,ol.store)}function hh(t,e){var n=t.projectId;return t.o||(n+="."+t.database),"firestore/"+e+"/"+n+"/"}var dh=function(t,e){this.progress=t,this.Go=e},fh=function(){function t(t,e,n){this.fo=t,this.zo=e,this.Ei=n}return t.prototype.Ho=function(t,e){var n=this;return this.zo.bi(t,e).next(function(r){return n.Jo(t,e,r)})},t.prototype.Jo=function(t,e,n){return this.fo._i(t,e).next(function(t){for(var r=0,i=n;r<i.length;r++)t=i[r].Cs(e,t);return t})},t.prototype.Yo=function(t,e,n){var r=Su();return e.forEach(function(t,e){for(var i=0,o=n;i<o.length;i++)e=o[i].Cs(t,e);r=r.zt(t,e)}),r},t.prototype.Xo=function(t,e){var n=this;return this.fo.getEntries(t,e).next(function(e){return n.Zo(t,e)})},t.prototype.Zo=function(t,e){var n=this;return this.zo.vi(t,e).next(function(r){var i=n.Yo(t,e,r),o=Iu();return i.forEach(function(t,e){e||(e=new Ks(t,ds.min())),o=o.zt(t,e)}),o})},t.prototype.Kr=function(t,e,n){return function(t){return ys.wt(t.path)&&null===t.collectionGroup&&0===t.filters.length}(e)?this.tc(t,e.path):xa(e)?this.ec(t,e,n):this.nc(t,e,n)},t.prototype.tc=function(t,e){return this.Ho(t,new ys(e)).next(function(t){var e=Pu();return t instanceof $s&&(e=e.zt(t.key,t)),e})},t.prototype.ec=function(t,e,n){var r=this,i=e.collectionGroup,o=Pu();return this.Ei.Us(t,i).next(function(s){return Tc.forEach(s,function(s){var a=function(t,e){return new ba(e,null,t.xt.slice(),t.filters.slice(),t.limit,t.limitType,t.startAt,t.endAt)}(e,s.child(i));return r.nc(t,a,n).next(function(t){t.forEach(function(t,e){o=o.zt(t,e)})})}).next(function(){return o})})},t.prototype.nc=function(t,e,n){var r,i,o=this;return this.fo.Kr(t,e,n).next(function(n){return r=n,o.zo.Di(t,e)}).next(function(e){return o.sc(t,i=e,r).next(function(t){r=t;for(var e=0,n=i;e<n.length;e++)for(var o=n[e],s=0,a=o.mutations;s<a.length;s++){var u=a[s],c=u.key,l=ru(u,r.get(c),o.vs);r=l instanceof $s?r.zt(c,l):r.remove(c)}})}).next(function(){return r.forEach(function(t,n){ka(e,n)||(r=r.remove(t))}),r})},t.prototype.sc=function(t,e,n){for(var r=ju(),i=0,o=e;i<o.length;i++)for(var s=0,a=o[i].mutations;s<a.length;s++){var u=a[s];u instanceof uu&&null===n.get(u.key)&&(r=r.add(u.key))}var c=n;return this.fo.getEntries(t,r).next(function(t){return t.forEach(function(t,e){null!==e&&e instanceof $s&&(c=c.zt(t,e))}),c})},t}(),ph=function(){function t(t,e,n,r){this.targetId=t,this.fromCache=e,this.ic=n,this.rc=r}return t.oc=function(e,n){for(var r=ju(),i=ju(),o=0,s=n.docChanges;o<s.length;o++){var a=s[o];switch(a.type){case 0:r=r.add(a.doc.key);break;case 1:i=i.add(a.doc.key)}}return new t(e,n.fromCache,r,i)},t}(),gh=function(){function t(){}return t.prototype.cc=function(t){this.ac=t},t.prototype.Kr=function(t,e,n,r){var i=this;return function(t){return 0===t.filters.length&&null===t.limit&&null==t.startAt&&null==t.endAt&&(0===t.xt.length||1===t.xt.length&&t.xt[0].field.ut())}(e)||n.isEqual(ds.min())?this.uc(t,e):this.ac.Xo(t,r).next(function(o){var s=i.hc(e,o);return(wa(e)||Ca(e))&&i.lc(e.limitType,s,r,n)?i.uc(t,e):(Qo()<=ke.a.DEBUG&&Ho("QueryEngine","Re-using previous result from %s to execute query: %s",n.toString(),Aa(e)),i.ac.Kr(t,e,n).next(function(t){return s.forEach(function(e){t=t.zt(e.key,e)}),t}))})},t.prototype.hc=function(t,e){var n=new Ou(ja(t));return e.forEach(function(e,r){r instanceof $s&&ka(t,r)&&(n=n.add(r))}),n},t.prototype.lc=function(t,e,n,r){if(n.size!==e.size)return!0;var i="F"===t?e.last():e.first();return!!i&&(i.hasPendingWrites||i.version._(r)>0)},t.prototype.uc=function(t,e){return Qo()<=ke.a.DEBUG&&Ho("QueryEngine","Using full collection scan to execute query:",Aa(e)),this.ac.Kr(t,e,ds.min())},t}(),mh=function(){function t(t,e,n,r){this.persistence=t,this._c=e,this.Qt=r,this.fc=new _u(Xo),this.dc=new Nl(function(t){return ta(t)},ea),this.wc=ds.min(),this.zo=t.Qo(n),this.Ec=t.$r(),this._o=t.Sr(),this.Tc=new fh(this.Ec,this.zo,this.persistence.Ko()),this.wo=t.Wo(),this._c.cc(this.Tc)}return t.prototype.Ir=function(t){var e=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",function(n){return t.Vr(n,e.fc)})},t}();function yh(t,e,n,r){return new mh(t,e,n,r)}function bh(t,e){return Object(Lo.b)(this,void 0,void 0,function(){var n,r,i,o;return Object(Lo.d)(this,function(s){switch(s.label){case 0:return n=Yo(t),r=n.zo,i=n.Tc,[4,n.persistence.runTransaction("Handle user change","readonly",function(t){var o;return n.zo.pi(t).next(function(s){return o=s,r=n.persistence.Qo(e),i=new fh(n.Ec,r,n.persistence.Ko()),r.pi(t)}).next(function(e){for(var n=[],r=[],s=ju(),a=0,u=o;a<u.length;a++){var c=u[a];n.push(c.batchId);for(var l=0,h=c.mutations;l<h.length;l++)s=s.add(h[l].key)}for(var d=0,f=e;d<f.length;d++){var p=f[d];r.push(p.batchId);for(var g=0,m=p.mutations;g<m.length;g++)s=s.add(m[g].key)}return i.Xo(t,s).next(function(t){return{Ic:t,mc:n,Ac:r}})})})];case 1:return o=s.sent(),[2,(n.zo=r,n.Tc=i,n._c.cc(n.Tc),o)]}})})}function vh(t,e){var n=Yo(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",function(t){var r=e.batch.keys(),i=n.Ec.Nr({Wr:!0});return function(t,e,n,r){var i=n.batch,o=i.keys(),s=Tc.resolve();return o.forEach(function(t){s=s.next(function(){return r._i(e,t)}).next(function(e){var o=e,s=n.$s.get(t);Wo(null!==s),(!o||o.version._(s)<0)&&(o=i.Ss(t,o,n))&&r.ai(o,n.Ns)})}),s.next(function(){return t.zo.Ci(e,i)})}(n,t,e,i).next(function(){return i.apply(t)}).next(function(){return n.zo.$i(t)}).next(function(){return n.Tc.Xo(t,r)})})}function _h(t){var e=Yo(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",function(t){return e._o.Qi(t)})}function wh(t,e){var n=Yo(t),r=e.Ot,i=n.fc;return n.persistence.runTransaction("Apply remote event","readwrite-primary",function(t){var o=n.Ec.Nr({Wr:!0});i=n.fc;var s=[];e.$e.forEach(function(e,o){var a=i.get(o);if(a){s.push(n._o.sr(t,e.Qe,o).next(function(){return n._o.er(t,e.qe,o)}));var u=e.resumeToken;if(u.l()>0){var c=a.Mt(u,r).kt(t.bs);i=i.zt(o,c),function(t,e,n){return Wo(e.resumeToken.l()>0),0===t.resumeToken.l()||e.Ot.W()-t.Ot.W()>=3e8||n.qe.size+n.Ue.size+n.Qe.size>0}(a,c,e)&&s.push(n._o.Hi(t,c))}}});var a=Iu();if(e.Oe.forEach(function(r,i){e.ke.has(r)&&s.push(n.persistence.Ti.Fr(t,r))}),s.push(Ch(t,o,e.Oe,r,void 0).next(function(t){a=t})),!r.isEqual(ds.min())){var u=n._o.Qi(t).next(function(e){return n._o.Wi(t,t.bs,r)});s.push(u)}return Tc.Mn(s).next(function(){return o.apply(t)}).next(function(){return n.Tc.Zo(t,a)})}).then(function(t){return n.fc=i,t})}function Ch(t,e,n,r,i){var o=ju();return n.forEach(function(t){return o=o.add(t)}),e.getEntries(t,o).next(function(t){var o=Iu();return n.forEach(function(n,s){var a=t.get(n),u=(null==i?void 0:i.get(n))||r;s instanceof Ks&&s.version.isEqual(ds.min())?(e.li(n,u),o=o.zt(n,s)):null==a||s.version._(a.version)>0||0===s.version._(a.version)&&a.hasPendingWrites?(e.ai(s,u),o=o.zt(n,s)):Ho("LocalStore","Ignoring outdated watch update for ",n,". Current version:",a.version," Watch version:",s.version)}),o})}function Oh(t,e){var n=Yo(t);return n.persistence.runTransaction("Get next mutation batch","readonly",function(t){return void 0===e&&(e=-1),n.zo.gi(t,e)})}function Eh(t,e){var n=Yo(t);return n.persistence.runTransaction("Allocate target","readwrite",function(t){var r;return n._o.tr(t,e).next(function(i){return i?Tc.resolve(r=i):n._o.Bi(t).next(function(i){return r=new Da(e,i,0,t.bs),n._o.ji(t,r).next(function(){return r})})})}).then(function(t){var r=n.fc.get(t.targetId);return(null===r||t.Ot._(r.Ot)>0)&&(n.fc=n.fc.zt(t.targetId,t),n.dc.set(e,t.targetId)),t})}function xh(t,e,n){return Object(Lo.b)(this,void 0,void 0,function(){var r,i,o,s;return Object(Lo.d)(this,function(a){switch(a.label){case 0:r=Yo(t),i=r.fc.get(e),o=n?"readwrite":"readwrite-primary",a.label=1;case 1:return a.trys.push([1,4,,5]),n?[3,3]:[4,r.persistence.runTransaction("Release target",o,function(t){return r.persistence.Ti.removeTarget(t,i)})];case 2:a.sent(),a.label=3;case 3:return[3,5];case 4:if(!jc(s=a.sent()))throw s;return Ho("LocalStore","Failed to update sequence numbers for target "+e+": "+s),[3,5];case 5:return r.fc=r.fc.remove(e),r.dc.delete(i.target),[2]}})})}function Ih(t,e,n){var r=Yo(t),i=ds.min(),o=ju();return r.persistence.runTransaction("Execute query","readonly",function(t){return function(t,e,n){var r=Yo(t),i=r.dc.get(n);return void 0!==i?Tc.resolve(r.fc.get(i)):r._o.tr(e,n)}(r,t,Sa(e)).next(function(e){if(e)return i=e.lastLimboFreeSnapshotVersion,r._o.rr(t,e.targetId).next(function(t){o=t})}).next(function(){return r._c.Kr(t,e,n?i:ds.min(),n?o:ju())}).next(function(t){return{documents:t,Rc:o}})})}function Sh(t,e){var n=Yo(t),r=Yo(n._o),i=n.fc.get(e);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",function(t){return r.Sn(t,e).next(function(t){return t?t.target:null})})}function Th(t){var e=Yo(t);return e.persistence.runTransaction("Get new document changes","readonly",function(t){return function(t,e,n){var r=Yo(t),i=Iu(),o=ml(n),s=rh(e),a=IDBKeyRange.lowerBound(o,!0);return s.hs({index:Jc.readTimeIndex,range:a},function(t,e){var n=pl(r.Qt,e);i=i.zt(n.key,n),o=e.readTime}).next(function(){return{Go:i,readTime:yl(o)}})}(e.Ec,t,e.wc)}).then(function(t){var n=t.Go;return e.wc=t.readTime,n})}function Ph(t){return Object(Lo.b)(this,void 0,void 0,function(){var e;return Object(Lo.d)(this,function(n){return[2,(e=Yo(t)).persistence.runTransaction("Synchronize last document change read time","readonly",function(t){return function(t){var e=rh(t),n=ds.min();return e.hs({index:Jc.readTimeIndex,reverse:!0},function(t,e,r){e.readTime&&(n=yl(e.readTime)),r.done()}).next(function(){return n})}(t)}).then(function(t){e.wc=t})]})})}function Rh(t,e,n,r){return Object(Lo.b)(this,void 0,void 0,function(){var i,o,s,a,u,c,l,h,d,f;return Object(Lo.d)(this,function(p){switch(p.label){case 0:for(i=Yo(t),o=ju(),s=Iu(),a=Au(),u=0,c=n;u<c.length;u++)h=e.Pc((l=c[u]).metadata.name),l.document&&(o=o.add(h)),s=s.zt(h,e.yc(l)),a=a.zt(h,e.gc(l.metadata.readTime));return d=i.Ec.Nr({Wr:!0}),[4,Eh(i,function(t){return Sa(_a(ps.ot("__bundle__/docs/"+t)))}(r))];case 1:return f=p.sent(),[2,i.persistence.runTransaction("Apply bundle documents","readwrite",function(t){return Ch(t,d,s,ds.min(),a).next(function(e){return d.apply(t),e}).next(function(e){return i._o.Yi(t,f.targetId).next(function(){return i._o.er(t,o,f.targetId)}).next(function(){return i.Tc.Zo(t,e)})})})]}})})}function Ah(t,e,n){return void 0===n&&(n=ju()),Object(Lo.b)(this,void 0,void 0,function(){var r,i;return Object(Lo.d)(this,function(o){switch(o.label){case 0:return[4,Eh(t,Sa(Ol(e.bundledQuery)))];case 1:return r=o.sent(),[2,(i=Yo(t)).persistence.runTransaction("Save named query","readwrite",function(t){var o=tc(e.readTime);if(r.Ot._(o)>=0)return i.wo.Ls(t,e);var s=r.Mt(ts.T,o);return i.fc=i.fc.zt(s.targetId,s),i._o.Hi(t,s).next(function(){return i._o.Yi(t,r.targetId)}).next(function(){return i._o.er(t,n,r.targetId)}).next(function(){return i.wo.Ls(t,e)})})]}})})}var kh=function(){function t(t){this.Qt=t,this.Vc=new Map,this.bc=new Map}return t.prototype.Os=function(t,e){return Tc.resolve(this.Vc.get(e))},t.prototype.ks=function(t,e){var n;return this.Vc.set(e.id,{id:(n=e).id,version:n.version,createTime:tc(n.createTime)}),Tc.resolve()},t.prototype.Ms=function(t,e){return Tc.resolve(this.bc.get(e))},t.prototype.Ls=function(t,e){return this.bc.set(e.name,function(t){return{name:t.name,query:Ol(t.bundledQuery),readTime:tc(t.readTime)}}(e)),Tc.resolve()},t}(),jh=function(){function t(){this.vc=new Ou(Nh.Sc),this.Dc=new Ou(Nh.Cc)}return t.prototype.et=function(){return this.vc.et()},t.prototype.nr=function(t,e){var n=new Nh(t,e);this.vc=this.vc.add(n),this.Dc=this.Dc.add(n)},t.prototype.xc=function(t,e){var n=this;t.forEach(function(t){return n.nr(t,e)})},t.prototype.ir=function(t,e){this.Nc(new Nh(t,e))},t.prototype.$c=function(t,e){var n=this;t.forEach(function(t){return n.ir(t,e)})},t.prototype.Fc=function(t){var e=this,n=new ys(new ps([])),r=new Nh(n,t),i=new Nh(n,t+1),o=[];return this.Dc.me([r,i],function(t){e.Nc(t),o.push(t.key)}),o},t.prototype.Oc=function(){var t=this;this.vc.forEach(function(e){return t.Nc(e)})},t.prototype.Nc=function(t){this.vc=this.vc.delete(t),this.Dc=this.Dc.delete(t)},t.prototype.kc=function(t){var e=new ys(new ps([])),n=new Nh(e,t),r=new Nh(e,t+1),i=ju();return this.Dc.me([n,r],function(t){i=i.add(t.key)}),i},t.prototype.Fi=function(t){var e=new Nh(t,0),n=this.vc.Re(e);return null!==n&&t.isEqual(n.key)},t}(),Nh=function(){function t(t,e){this.key=t,this.Mc=e}return t.Sc=function(t,e){return ys.H(t.key,e.key)||Xo(t.Mc,e.Mc)},t.Cc=function(t,e){return Xo(t.Mc,e.Mc)||ys.H(t.key,e.key)},t}(),Dh=function(){function t(t,e){this.Ei=t,this.Ti=e,this.zo=[],this.Lc=1,this.Bc=new Ou(Nh.Sc)}return t.prototype.Ai=function(t){return Tc.resolve(0===this.zo.length)},t.prototype.Ri=function(t,e,n,r){var i=this.Lc;this.Lc++;var o=new hl(i,e,n,r);this.zo.push(o);for(var s=0,a=r;s<a.length;s++){var u=a[s];this.Bc=this.Bc.add(new Nh(u.key,i)),this.Ei.qs(t,u.key.path.X())}return Tc.resolve(o)},t.prototype.Pi=function(t,e){return Tc.resolve(this.qc(e))},t.prototype.gi=function(t,e){var n=this.Uc(e+1),r=n<0?0:n;return Tc.resolve(this.zo.length>r?this.zo[r]:null)},t.prototype.Vi=function(){return Tc.resolve(0===this.zo.length?-1:this.Lc-1)},t.prototype.pi=function(t){return Tc.resolve(this.zo.slice())},t.prototype.bi=function(t,e){var n=this,r=new Nh(e,0),i=new Nh(e,Number.POSITIVE_INFINITY),o=[];return this.Bc.me([r,i],function(t){var e=n.qc(t.Mc);o.push(e)}),Tc.resolve(o)},t.prototype.vi=function(t,e){var n=this,r=new Ou(Xo);return e.forEach(function(t){var e=new Nh(t,0),i=new Nh(t,Number.POSITIVE_INFINITY);n.Bc.me([e,i],function(t){r=r.add(t.Mc)})}),Tc.resolve(this.Qc(r))},t.prototype.Di=function(t,e){var n=e.path,r=n.length+1,i=n;ys.wt(i)||(i=i.child(""));var o=new Nh(new ys(i),0),s=new Ou(Xo);return this.Bc.Ae(function(t){var e=t.key.path;return!!n.nt(e)&&(e.length===r&&(s=s.add(t.Mc)),!0)},o),Tc.resolve(this.Qc(s))},t.prototype.Qc=function(t){var e=this,n=[];return t.forEach(function(t){var r=e.qc(t);null!==r&&n.push(r)}),n},t.prototype.Ci=function(t,e){var n=this;Wo(0===this.Kc(e.batchId,"removed")),this.zo.shift();var r=this.Bc;return Tc.forEach(e.mutations,function(i){var o=new Nh(i.key,e.batchId);return r=r.delete(o),n.Ti.Ni(t,i.key)}).next(function(){n.Bc=r})},t.prototype.xi=function(t){},t.prototype.Fi=function(t,e){var n=new Nh(e,0),r=this.Bc.Re(n);return Tc.resolve(e.isEqual(r&&r.key))},t.prototype.$i=function(t){return Tc.resolve()},t.prototype.Kc=function(t,e){return this.Uc(t)},t.prototype.Uc=function(t){return 0===this.zo.length?0:t-this.zo[0].batchId},t.prototype.qc=function(t){var e=this.Uc(t);return e<0||e>=this.zo.length?null:this.zo[e]},t}(),Mh=function(){function t(t,e){this.Ei=t,this.Wc=e,this.docs=new _u(ys.H),this.size=0}return t.prototype.ai=function(t,e,n){var r=e.key,i=this.docs.get(r),o=i?i.size:0,s=this.Wc(e);return this.docs=this.docs.zt(r,{hi:e,size:s,readTime:n}),this.size+=s-o,this.Ei.qs(t,r.path.X())},t.prototype.li=function(t){var e=this.docs.get(t);e&&(this.docs=this.docs.remove(t),this.size-=e.size)},t.prototype._i=function(t,e){var n=this.docs.get(e);return Tc.resolve(n?n.hi:null)},t.prototype.getEntries=function(t,e){var n=this,r=Su();return e.forEach(function(t){var e=n.docs.get(t);r=r.zt(t,e?e.hi:null)}),Tc.resolve(r)},t.prototype.Kr=function(t,e,n){for(var r=Pu(),i=new ys(e.path.child("")),o=this.docs.ee(i);o.ce();){var s=o.oe(),a=s.value,u=a.hi,c=a.readTime;if(!e.path.nt(s.key.path))break;c._(n)<=0||u instanceof $s&&ka(e,u)&&(r=r.zt(u.key,u))}return Tc.resolve(r)},t.prototype.jc=function(t,e){return Tc.forEach(this.docs,function(t){return e(t)})},t.prototype.Nr=function(t){return new Lh(this)},t.prototype.Or=function(t){return Tc.resolve(this.size)},t}(),Lh=function(t){function e(e){var n=this;return(n=t.call(this)||this).jr=e,n}return Object(Lo.c)(e,t),e.prototype.wi=function(t){var e=this,n=[];return this.ri.forEach(function(r,i){i&&i.hi?n.push(e.jr.ai(t,i.hi,e.ci(r))):e.jr.li(r)}),Tc.Mn(n)},e.prototype.fi=function(t,e){return this.jr._i(t,e)},e.prototype.di=function(t,e){return this.jr.getEntries(t,e)},e}(Dl),Fh=function(){function t(t){this.persistence=t,this.Gc=new Nl(function(t){return ta(t)},ea),this.lastRemoteSnapshotVersion=ds.min(),this.highestTargetId=0,this.zc=0,this.Hc=new jh,this.targetCount=0,this.Jc=ql.Mi()}return t.prototype.In=function(t,e){return this.Gc.forEach(function(t,n){return e(n)}),Tc.resolve()},t.prototype.Qi=function(t){return Tc.resolve(this.lastRemoteSnapshotVersion)},t.prototype.Ki=function(t){return Tc.resolve(this.zc)},t.prototype.Bi=function(t){return this.highestTargetId=this.Jc.next(),Tc.resolve(this.highestTargetId)},t.prototype.Wi=function(t,e,n){return n&&(this.lastRemoteSnapshotVersion=n),e>this.zc&&(this.zc=e),Tc.resolve()},t.prototype.Gi=function(t){this.Gc.set(t.target,t);var e=t.targetId;e>this.highestTargetId&&(this.Jc=new ql(e),this.highestTargetId=e),t.sequenceNumber>this.zc&&(this.zc=t.sequenceNumber)},t.prototype.ji=function(t,e){return this.Gi(e),this.targetCount+=1,Tc.resolve()},t.prototype.Hi=function(t,e){return this.Gi(e),Tc.resolve()},t.prototype.Ji=function(t,e){return this.Gc.delete(e.target),this.Hc.Fc(e.targetId),this.targetCount-=1,Tc.resolve()},t.prototype.Xi=function(t,e,n){var r=this,i=0,o=[];return this.Gc.forEach(function(s,a){a.sequenceNumber<=e&&null===n.get(a.targetId)&&(r.Gc.delete(s),o.push(r.Yi(t,a.targetId)),i++)}),Tc.Mn(o).next(function(){return i})},t.prototype.Zi=function(t){return Tc.resolve(this.targetCount)},t.prototype.tr=function(t,e){var n=this.Gc.get(e)||null;return Tc.resolve(n)},t.prototype.er=function(t,e,n){return this.Hc.xc(e,n),Tc.resolve()},t.prototype.sr=function(t,e,n){this.Hc.$c(e,n);var r=this.persistence.Ti,i=[];return r&&e.forEach(function(e){i.push(r.Ni(t,e))}),Tc.Mn(i)},t.prototype.Yi=function(t,e){return this.Hc.Fc(e),Tc.resolve()},t.prototype.rr=function(t,e){var n=this.Hc.kc(e);return Tc.resolve(n)},t.prototype.Fi=function(t,e){return Tc.resolve(this.Hc.Fi(e))},t}(),Uh=function(){function t(t,e){var n=this;this.Yc={},this.so=new ls(0),this.io=!1,this.io=!0,this.Ti=t(this),this._o=new Fh(this),this.Ei=new Sl,this.fo=function(t,e){return new Mh(t,function(t){return n.Ti.Xc(t)})}(this.Ei),this.Qt=new fl(e),this.wo=new kh(this.Qt)}return t.prototype.start=function(){return Promise.resolve()},t.prototype.ko=function(){return this.io=!1,Promise.resolve()},Object.defineProperty(t.prototype,"Er",{get:function(){return this.io},enumerable:!1,configurable:!0}),t.prototype.Po=function(){},t.prototype.yo=function(){},t.prototype.Ko=function(){return this.Ei},t.prototype.Qo=function(t){var e=this.Yc[t.A()];return e||(e=new Dh(this.Ei,this.Ti),this.Yc[t.A()]=e),e},t.prototype.Sr=function(){return this._o},t.prototype.$r=function(){return this.fo},t.prototype.Wo=function(){return this.wo},t.prototype.runTransaction=function(t,e,n){var r=this;Ho("MemoryPersistence","Starting transaction:",t);var i=new Vh(this.so.next());return this.Ti.Zc(),n(i).next(function(t){return r.Ti.ta(i).next(function(){return t})}).On().then(function(t){return i.Vs(),t})},t.prototype.ea=function(t,e){return Tc.Ln(Object.values(this.Yc).map(function(n){return function(){return n.Fi(t,e)}}))},t}(),Vh=function(t){function e(e){var n=this;return(n=t.call(this)||this).bs=e,n}return Object(Lo.c)(e,t),e}(Qc),Qh=function(){function t(t){this.persistence=t,this.na=new jh,this.sa=null}return t.ia=function(e){return new t(e)},Object.defineProperty(t.prototype,"ra",{get:function(){if(this.sa)return this.sa;throw Go()},enumerable:!1,configurable:!0}),t.prototype.nr=function(t,e,n){return this.na.nr(n,e),this.ra.delete(n.toString()),Tc.resolve()},t.prototype.ir=function(t,e,n){return this.na.ir(n,e),this.ra.add(n.toString()),Tc.resolve()},t.prototype.Ni=function(t,e){return this.ra.add(e.toString()),Tc.resolve()},t.prototype.removeTarget=function(t,e){var n=this;this.na.Fc(e.targetId).forEach(function(t){return n.ra.add(t.toString())});var r=this.persistence.Sr();return r.rr(t,e.targetId).next(function(t){t.forEach(function(t){return n.ra.add(t.toString())})}).next(function(){return r.Ji(t,e)})},t.prototype.Zc=function(){this.sa=new Set},t.prototype.ta=function(t){var e=this,n=this.persistence.$r().Nr();return Tc.forEach(this.ra,function(r){var i=ys._t(r);return e.oa(t,i).next(function(t){t||n.li(i)})}).next(function(){return e.sa=null,n.apply(t)})},t.prototype.Fr=function(t,e){var n=this;return this.oa(t,e).next(function(t){t?n.ra.delete(e.toString()):n.ra.add(e.toString())})},t.prototype.Xc=function(t){return 0},t.prototype.oa=function(t,e){var n=this;return Tc.Ln([function(){return Tc.resolve(n.na.Fi(e))},function(){return n.persistence.Sr().Fi(t,e)},function(){return n.persistence.ea(t,e)}])},t}();function Hh(t,e){return"firestore_clients_"+t+"_"+e}function qh(t,e,n){var r="firestore_mutations_"+t+"_"+n;return e.m()&&(r+="_"+e.uid),r}function Bh(t,e){return"firestore_targets_"+t+"_"+e}var zh=function(){function t(t,e,n,r){this.user=t,this.batchId=e,this.state=n,this.error=r}return t.ca=function(e,n,r){var i,o=JSON.parse(r),s="object"==typeof o&&-1!==["pending","acknowledged","rejected"].indexOf(o.state)&&(void 0===o.error||"object"==typeof o.error);return s&&o.error&&(s="string"==typeof o.error.message&&"string"==typeof o.error.code)&&(i=new ns(o.error.code,o.error.message)),s?new t(e,n,o.state,i):(qo("SharedClientState","Failed to parse mutation state for ID '"+n+"': "+r),null)},t.prototype.aa=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},t}(),Gh=function(){function t(t,e,n){this.targetId=t,this.state=e,this.error=n}return t.ca=function(e,n){var r,i=JSON.parse(n),o="object"==typeof i&&-1!==["not-current","current","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return o&&i.error&&(o="string"==typeof i.error.message&&"string"==typeof i.error.code)&&(r=new ns(i.error.code,i.error.message)),o?new t(e,i.state,r):(qo("SharedClientState","Failed to parse target state for ID '"+e+"': "+n),null)},t.prototype.aa=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},t}(),Wh=function(){function t(t,e){this.clientId=t,this.activeTargetIds=e}return t.ca=function(e,n){for(var r=JSON.parse(n),i="object"==typeof r&&r.activeTargetIds instanceof Array,o=Du(),s=0;i&&s<r.activeTargetIds.length;++s)i=As(r.activeTargetIds[s]),o=o.add(r.activeTargetIds[s]);return i?new t(e,o):(qo("SharedClientState","Failed to parse client data for instance '"+e+"': "+n),null)},t}(),Yh=function(){function t(t,e){this.clientId=t,this.onlineState=e}return t.ca=function(e){var n=JSON.parse(e);return"object"==typeof n&&-1!==["Unknown","Online","Offline"].indexOf(n.onlineState)&&"string"==typeof n.clientId?new t(n.clientId,n.onlineState):(qo("SharedClientState","Failed to parse online state: "+e),null)},t}(),$h=function(){function t(){this.activeTargetIds=Du()}return t.prototype.ua=function(t){this.activeTargetIds=this.activeTargetIds.add(t)},t.prototype.ha=function(t){this.activeTargetIds=this.activeTargetIds.delete(t)},t.prototype.aa=function(){var t={activeTargetIds:this.activeTargetIds.it(),updateTimeMs:Date.now()};return JSON.stringify(t)},t}(),Kh=function(){function t(t,e,n,r,i){this.window=t,this.Zr=e,this.persistenceKey=n,this.la=r,this._a=null,this.fa=null,this.k=null,this.da=this.wa.bind(this),this.Ea=new _u(Xo),this.Er=!1,this.Ta=[];var o=n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=i,this.Ia=Hh(this.persistenceKey,this.la),this.ma=function(t){return"firestore_sequence_number_"+t}(this.persistenceKey),this.Ea=this.Ea.zt(this.la,new $h),this.Aa=new RegExp("^firestore_clients_"+o+"_([^_]*)$"),this.Ra=new RegExp("^firestore_mutations_"+o+"_(\\d+)(?:_(.*))?$"),this.Pa=new RegExp("^firestore_targets_"+o+"_(\\d+)$"),this.ya=function(t){return"firestore_online_state_"+t}(this.persistenceKey),this.ga=function(t){return"firestore_bundle_loaded_"+t}(this.persistenceKey),this.window.addEventListener("storage",this.da)}return t.Kn=function(t){return!(!t||!t.localStorage)},t.prototype.start=function(){return Object(Lo.b)(this,void 0,void 0,function(){var t,e,n,r,i,o,s,a,u,c,l=this;return Object(Lo.d)(this,function(h){switch(h.label){case 0:return[4,this._a.Uo()];case 1:for(t=h.sent(),e=0,n=t;e<n.length;e++)(r=n[e])!==this.la&&(i=this.getItem(Hh(this.persistenceKey,r)))&&(o=Wh.ca(r,i))&&(this.Ea=this.Ea.zt(o.clientId,o));for(this.Va(),(s=this.storage.getItem(this.ya))&&(a=this.pa(s))&&this.ba(a),u=0,c=this.Ta;u<c.length;u++)this.wa(c[u]);return this.Ta=[],this.window.addEventListener("unload",function(){return l.ko()}),this.Er=!0,[2]}})})},t.prototype.B=function(t){this.setItem(this.ma,JSON.stringify(t))},t.prototype.va=function(){return this.Sa(this.Ea)},t.prototype.Da=function(t){var e=!1;return this.Ea.forEach(function(n,r){r.activeTargetIds.has(t)&&(e=!0)}),e},t.prototype.Ca=function(t){this.xa(t,"pending")},t.prototype.Na=function(t,e,n){this.xa(t,e,n),this.$a(t)},t.prototype.Fa=function(t){var e="not-current";if(this.Da(t)){var n=this.storage.getItem(Bh(this.persistenceKey,t));if(n){var r=Gh.ca(t,n);r&&(e=r.state)}}return this.Oa.ua(t),this.Va(),e},t.prototype.ka=function(t){this.Oa.ha(t),this.Va()},t.prototype.Ma=function(t){return this.Oa.activeTargetIds.has(t)},t.prototype.La=function(t){this.removeItem(Bh(this.persistenceKey,t))},t.prototype.Ba=function(t,e,n){this.qa(t,e,n)},t.prototype.Ua=function(t,e,n){var r=this;e.forEach(function(t){r.$a(t)}),this.currentUser=t,n.forEach(function(t){r.Ca(t)})},t.prototype.Qa=function(t){this.Ka(t)},t.prototype.Wa=function(){this.ja()},t.prototype.ko=function(){this.Er&&(this.window.removeEventListener("storage",this.da),this.removeItem(this.Ia),this.Er=!1)},t.prototype.getItem=function(t){var e=this.storage.getItem(t);return Ho("SharedClientState","READ",t,e),e},t.prototype.setItem=function(t,e){Ho("SharedClientState","SET",t,e),this.storage.setItem(t,e)},t.prototype.removeItem=function(t){Ho("SharedClientState","REMOVE",t),this.storage.removeItem(t)},t.prototype.wa=function(t){var e=this,n=t;if(n.storageArea===this.storage){if(Ho("SharedClientState","EVENT",n.key,n.newValue),n.key===this.Ia)return void qo("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Zr.po(function(){return Object(Lo.b)(e,void 0,void 0,function(){var t,e,r,i,o,s;return Object(Lo.d)(this,function(a){if(this.Er){if(null!==n.key)if(this.Aa.test(n.key)){if(null==n.newValue)return t=this.Ga(n.key),[2,this.za(t,null)];if(e=this.Ha(n.key,n.newValue))return[2,this.za(e.clientId,e)]}else if(this.Ra.test(n.key)){if(null!==n.newValue&&(r=this.Ja(n.key,n.newValue)))return[2,this.Ya(r)]}else if(this.Pa.test(n.key)){if(null!==n.newValue&&(i=this.Xa(n.key,n.newValue)))return[2,this.Za(i)]}else if(n.key===this.ya){if(null!==n.newValue&&(o=this.pa(n.newValue)))return[2,this.ba(o)]}else if(n.key===this.ma)(s=function(t){var e=ls.q;if(null!=t)try{var n=JSON.parse(t);Wo("number"==typeof n),e=n}catch(t){qo("SharedClientState","Failed to read sequence number from WebStorage",t)}return e}(n.newValue))!==ls.q&&this.k(s);else if(n.key===this.ga)return[2,this._a.tu()]}else this.Ta.push(n);return[2]})})})}},Object.defineProperty(t.prototype,"Oa",{get:function(){return this.Ea.get(this.la)},enumerable:!1,configurable:!0}),t.prototype.Va=function(){this.setItem(this.Ia,this.Oa.aa())},t.prototype.xa=function(t,e,n){var r=new zh(this.currentUser,t,e,n),i=qh(this.persistenceKey,this.currentUser,t);this.setItem(i,r.aa())},t.prototype.$a=function(t){var e=qh(this.persistenceKey,this.currentUser,t);this.removeItem(e)},t.prototype.Ka=function(t){this.storage.setItem(this.ya,JSON.stringify({clientId:this.la,onlineState:t}))},t.prototype.qa=function(t,e,n){var r=Bh(this.persistenceKey,t),i=new Gh(t,e,n);this.setItem(r,i.aa())},t.prototype.ja=function(){this.setItem(this.ga,"value-not-used")},t.prototype.Ga=function(t){var e=this.Aa.exec(t);return e?e[1]:null},t.prototype.Ha=function(t,e){var n=this.Ga(t);return Wh.ca(n,e)},t.prototype.Ja=function(t,e){var n=this.Ra.exec(t),r=Number(n[1]);return zh.ca(new is(void 0!==n[2]?n[2]:null),r,e)},t.prototype.Xa=function(t,e){var n=this.Pa.exec(t),r=Number(n[1]);return Gh.ca(r,e)},t.prototype.pa=function(t){return Yh.ca(t)},t.prototype.Ya=function(t){return Object(Lo.b)(this,void 0,void 0,function(){return Object(Lo.d)(this,function(e){return t.user.uid===this.currentUser.uid?[2,this._a.eu(t.batchId,t.state,t.error)]:(Ho("SharedClientState","Ignoring mutation for non-active user "+t.user.uid),[2])})})},t.prototype.Za=function(t){return this._a.nu(t.targetId,t.state,t.error)},t.prototype.za=function(t,e){var n=this,r=e?this.Ea.zt(t,e):this.Ea.remove(t),i=this.Sa(this.Ea),o=this.Sa(r),s=[],a=[];return o.forEach(function(t){i.has(t)||s.push(t)}),i.forEach(function(t){o.has(t)||a.push(t)}),this._a.su(s,a).then(function(){n.Ea=r})},t.prototype.ba=function(t){this.Ea.get(t.clientId)&&this.fa(t.onlineState)},t.prototype.Sa=function(t){var e=Du();return t.forEach(function(t,n){e=e.Pe(n.activeTargetIds)}),e},t}(),Xh=function(){function t(){this.iu=new $h,this.ru={},this.fa=null,this.k=null}return t.prototype.Ca=function(t){},t.prototype.Na=function(t,e,n){},t.prototype.Fa=function(t){return this.iu.ua(t),this.ru[t]||"not-current"},t.prototype.Ba=function(t,e,n){this.ru[t]=e},t.prototype.ka=function(t){this.iu.ha(t)},t.prototype.Ma=function(t){return this.iu.activeTargetIds.has(t)},t.prototype.La=function(t){delete this.ru[t]},t.prototype.va=function(){return this.iu.activeTargetIds},t.prototype.Da=function(t){return this.iu.activeTargetIds.has(t)},t.prototype.start=function(){return this.iu=new $h,Promise.resolve()},t.prototype.Ua=function(t,e,n){},t.prototype.Qa=function(t){},t.prototype.ko=function(){},t.prototype.B=function(t){},t.prototype.Wa=function(){},t}(),Zh=function(){function t(){}return t.prototype.ou=function(t){},t.prototype.ko=function(){},t}(),Jh=function(){function t(){var t=this;this.cu=function(){return t.au()},this.uu=function(){return t.hu()},this.lu=[],this._u()}return t.prototype.ou=function(t){this.lu.push(t)},t.prototype.ko=function(){window.removeEventListener("online",this.cu),window.removeEventListener("offline",this.uu)},t.prototype._u=function(){window.addEventListener("online",this.cu),window.addEventListener("offline",this.uu)},t.prototype.au=function(){Ho("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(var t=0,e=this.lu;t<e.length;t++)(0,e[t])(0)},t.prototype.hu=function(){Ho("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(var t=0,e=this.lu;t<e.length;t++)(0,e[t])(1)},t.Kn=function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener},t}(),td={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"},ed=function(){function t(t){this.fu=t.fu,this.du=t.du}return t.prototype.wu=function(t){this.Eu=t},t.prototype.Tu=function(t){this.Iu=t},t.prototype.onMessage=function(t){this.mu=t},t.prototype.close=function(){this.du()},t.prototype.send=function(t){this.fu(t)},t.prototype.Au=function(){this.Eu()},t.prototype.Ru=function(t){this.Iu(t)},t.prototype.Pu=function(t){this.mu(t)},t}(),nd=function(t){function e(e){var n=this;return(n=t.call(this,e)||this).forceLongPolling=e.forceLongPolling,n.i=e.i,n}return Object(Lo.c)(e,t),e.prototype.Su=function(t,e,n,r){return new Promise(function(i,o){var s=new Mo;s.listenOnce(jo.COMPLETE,function(){try{switch(s.getLastErrorCode()){case ko.NO_ERROR:var e=s.getResponseJson();Ho("Connection","XHR received:",JSON.stringify(e)),i(e);break;case ko.TIMEOUT:Ho("Connection",'RPC "'+t+'" timed out'),o(new ns(es.DEADLINE_EXCEEDED,"Request time out"));break;case ko.HTTP_ERROR:var n=s.getStatus();if(Ho("Connection",'RPC "'+t+'" failed with status:',n,"response text:",s.getResponseText()),n>0){var r=s.getResponseJson().error;if(r&&r.status&&r.message){var a=function(t){var e=t.toLowerCase().replace(/_/g,"-");return Object.values(es).indexOf(e)>=0?e:es.UNKNOWN}(r.status);o(new ns(a,r.message))}else o(new ns(es.UNKNOWN,"Server responded with status "+s.getStatus()))}else o(new ns(es.UNAVAILABLE,"Connection failed."));break;default:Go()}}finally{Ho("Connection",'RPC "'+t+'" completed.')}});var a=JSON.stringify(r);s.send(e,"POST",a,n,15)})},e.prototype.Cu=function(t,e){var n=[this.gu,"/","google.firestore.v1.Firestore","/",t,"/channel"],r=new So,i=Pr(),o={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/"+this.t.projectId+"/databases/"+this.t.database},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.i};this.vu(o.initMessageHeaders,e),Object(je.u)()||Object(je.x)()||Object(je.r)()||Object(je.t)()||Object(je.y)()||Object(je.q)()||(o.httpHeadersOverwriteParam="$httpHeaders");var s=n.join("");Ho("Connection","Creating WebChannel: "+s,o);var a=r.createWebChannel(s,o),u=!1,c=!1,l=new ed({fu:function(t){c?Ho("Connection","Not sending because WebChannel is closed:",t):(u||(Ho("Connection","Opening WebChannel transport."),a.open(),u=!0),Ho("Connection","WebChannel sending:",t),a.send(t))},du:function(){return a.close()}}),h=function(t,e,n){t.listen(e,function(t){try{n(t)}catch(t){setTimeout(function(){throw t},0)}})};return h(a,Do.EventType.OPEN,function(){c||Ho("Connection","WebChannel transport opened.")}),h(a,Do.EventType.CLOSE,function(){c||(c=!0,Ho("Connection","WebChannel transport closed"),l.Ru())}),h(a,Do.EventType.ERROR,function(t){c||(c=!0,Bo("Connection","WebChannel transport errored:",t),l.Ru(new ns(es.UNAVAILABLE,"The operation could not be completed")))}),h(a,Do.EventType.MESSAGE,function(t){var e;if(!c){var n=t.data[0];Wo(!!n);var r=n.error||(null===(e=n[0])||void 0===e?void 0:e.error);if(r){Ho("Connection","WebChannel received error:",r);var i=r.status,o=function(t){var e=fu[t];if(void 0!==e)return vu(e)}(i),s=r.message;void 0===o&&(o=es.INTERNAL,s="Unknown error status: "+i+" with message "+r.message),c=!0,l.Ru(new ns(o,s)),a.close()}else Ho("Connection","WebChannel received:",n),l.Pu(n)}}),h(i,No.STAT_EVENT,function(t){10===t.stat?Ho("Connection","Detected buffering proxy"):11===t.stat&&Ho("Connection","Detected no buffering proxy")}),setTimeout(function(){l.Au()},0),l},e}(function(){function t(t){this.yu=t,this.t=t.t,this.gu=(t.ssl?"https":"http")+"://"+t.host,this.Vu="projects/"+this.t.projectId+"/databases/"+this.t.database+"/documents"}return t.prototype.pu=function(t,e,n,r){var i=this.bu(t,e);Ho("RestConnection","Sending: ",i,n);var o={};return this.vu(o,r),this.Su(t,i,o,n).then(function(t){return Ho("RestConnection","Received: ",t),t},function(e){throw Bo("RestConnection",t+" failed with error: ",e,"url: ",i,"request:",n),e})},t.prototype.Du=function(t,e,n,r){return this.pu(t,e,n,r)},t.prototype.vu=function(t,e){if(t["X-Goog-Api-Client"]="gl-js/ fire/8.2.7",t["Content-Type"]="text/plain",e)for(var n in e.g)e.g.hasOwnProperty(n)&&(t[n]=e.g[n])},t.prototype.bu=function(t,e){return this.gu+"/v1/"+e+":"+td[t]},t}());function rd(){return"undefined"!=typeof window?window:null}function id(){return"undefined"!=typeof document?document:null}function od(t){return new Ku(t,!0)}var sd=function(){function t(t,e,n,r,i){void 0===n&&(n=1e3),void 0===r&&(r=1.5),void 0===i&&(i=6e4),this.Zr=t,this.fs=e,this.xu=n,this.Nu=r,this.$u=i,this.Fu=0,this.Ou=null,this.ku=Date.now(),this.reset()}return t.prototype.reset=function(){this.Fu=0},t.prototype.Mu=function(){this.Fu=this.$u},t.prototype.Lu=function(t){var e=this;this.cancel();var n=Math.floor(this.Fu+this.Bu()),r=Math.max(0,Date.now()-this.ku),i=Math.max(0,n-r);i>0&&Ho("ExponentialBackoff","Backing off for "+i+" ms (base delay: "+this.Fu+" ms, delay with jitter: "+n+" ms, last attempt: "+r+" ms ago)"),this.Ou=this.Zr.Tr(this.fs,i,function(){return e.ku=Date.now(),t()}),this.Fu*=this.Nu,this.Fu<this.xu&&(this.Fu=this.xu),this.Fu>this.$u&&(this.Fu=this.$u)},t.prototype.qu=function(){null!==this.Ou&&(this.Ou.Rs(),this.Ou=null)},t.prototype.cancel=function(){null!==this.Ou&&(this.Ou.cancel(),this.Ou=null)},t.prototype.Bu=function(){return(Math.random()-.5)*this.Fu},t}(),ad=function(){function t(t,e,n,r,i,o){this.Zr=t,this.Uu=n,this.Qu=r,this.Ku=i,this.listener=o,this.state=0,this.Wu=0,this.ju=null,this.stream=null,this.Gu=new sd(t,e)}return t.prototype.zu=function(){return 1===this.state||2===this.state||4===this.state},t.prototype.Hu=function(){return 2===this.state},t.prototype.start=function(){3!==this.state?this.auth():this.Ju()},t.prototype.stop=function(){return Object(Lo.b)(this,void 0,void 0,function(){return Object(Lo.d)(this,function(t){switch(t.label){case 0:return this.zu()?[4,this.close(0)]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})},t.prototype.Yu=function(){this.state=0,this.Gu.reset()},t.prototype.Xu=function(){var t=this;this.Hu()&&null===this.ju&&(this.ju=this.Zr.Tr(this.Uu,6e4,function(){return t.Zu()}))},t.prototype.th=function(t){this.eh(),this.stream.send(t)},t.prototype.Zu=function(){return Object(Lo.b)(this,void 0,void 0,function(){return Object(Lo.d)(this,function(t){return this.Hu()?[2,this.close(0)]:[2]})})},t.prototype.eh=function(){this.ju&&(this.ju.cancel(),this.ju=null)},t.prototype.close=function(t,e){return Object(Lo.b)(this,void 0,void 0,function(){return Object(Lo.d)(this,function(n){switch(n.label){case 0:return this.eh(),this.Gu.cancel(),this.Wu++,3!==t?this.Gu.reset():e&&e.code===es.RESOURCE_EXHAUSTED?(qo(e.toString()),qo("Using maximum backoff delay to prevent overloading the backend."),this.Gu.Mu()):e&&e.code===es.UNAUTHENTICATED&&this.Ku.p(),null!==this.stream&&(this.nh(),this.stream.close(),this.stream=null),this.state=t,[4,this.listener.Tu(e)];case 1:return n.sent(),[2]}})})},t.prototype.nh=function(){},t.prototype.auth=function(){var t=this;this.state=1;var e=this.sh(this.Wu),n=this.Wu;this.Ku.getToken().then(function(e){t.Wu===n&&t.ih(e)},function(n){e(function(){var e=new ns(es.UNKNOWN,"Fetching auth token failed: "+n.message);return t.rh(e)})})},t.prototype.ih=function(t){var e=this,n=this.sh(this.Wu);this.stream=this.oh(t),this.stream.wu(function(){n(function(){return e.state=2,e.listener.wu()})}),this.stream.Tu(function(t){n(function(){return e.rh(t)})}),this.stream.onMessage(function(t){n(function(){return e.onMessage(t)})})},t.prototype.Ju=function(){var t=this;this.state=4,this.Gu.Lu(function(){return Object(Lo.b)(t,void 0,void 0,function(){return Object(Lo.d)(this,function(t){return this.state=0,this.start(),[2]})})})},t.prototype.rh=function(t){return Ho("PersistentStream","close with error: "+t),this.stream=null,this.close(3,t)},t.prototype.sh=function(t){var e=this;return function(n){e.Zr.Ps(function(){return e.Wu===t?n():(Ho("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())})}},t}(),ud=function(t){function e(e,n,r,i,o){var s=this;return(s=t.call(this,e,"listen_stream_connection_backoff","listen_stream_idle",n,r,o)||this).Qt=i,s}return Object(Lo.c)(e,t),e.prototype.oh=function(t){return this.Qu.Cu("Listen",t)},e.prototype.onMessage=function(t){this.Gu.reset();var e=function(t,e){var n;if("targetChange"in e){var r=function(t){return"NO_CHANGE"===t?0:"ADD"===t?1:"REMOVE"===t?2:"CURRENT"===t?3:"RESET"===t?4:Go()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=function(t,e){return t.Bt?(Wo(void 0===e||"string"==typeof e),ts.fromBase64String(e||"")):(Wo(void 0===e||e instanceof Uint8Array),ts.fromUint8Array(e||new Uint8Array))}(t,e.targetChange.resumeToken),s=(a=e.targetChange.cause)&&function(t){var e=void 0===t.code?es.UNKNOWN:vu(t.code);return new ns(e,t.message||"")}(a);n=new qu(r,i,o,s||null)}else if("documentChange"in e){i=ic(t,(r=e.documentChange).document.name),o=tc(r.document.updateTime);var a=new zs({mapValue:{fields:r.document.fields}}),u=(s=new $s(i,o,a,{}),r.targetIds||[]);n=new Qu(u,r.removedTargetIds||[],s.key,s)}else if("documentDelete"in e)i=ic(t,(r=e.documentDelete).document),o=r.readTime?tc(r.readTime):ds.min(),a=new Ks(i,o),n=new Qu([],s=r.removedTargetIds||[],a.key,a);else if("documentRemove"in e)i=ic(t,(r=e.documentRemove).document),n=new Qu([],o=r.removedTargetIds||[],i,null);else{if(!("filter"in e))return Go();var c=e.filter;i=new yu(r=c.count||0),n=new Hu(o=c.targetId,i)}return n}(this.Qt,t),n=function(t){if(!("targetChange"in t))return ds.min();var e=t.targetChange;return e.targetIds&&e.targetIds.length?ds.min():e.readTime?tc(e.readTime):ds.min()}(t);return this.listener.ah(e,n)},e.prototype.uh=function(t){var e={};e.database=ac(this.Qt),e.addTarget=function(t,e){var n,r=e.target;return(n=na(r)?{documents:fc(t,r)}:{query:pc(t,r)}).targetId=e.targetId,e.resumeToken.l()>0?n.resumeToken=Zu(t,e.resumeToken):e.Ot._(ds.min())>0&&(n.readTime=Xu(t,e.Ot.j())),n}(this.Qt,t);var n=function(t,e){var n=function(t,e){switch(e){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return Go()}}(0,e.Ft);return null==n?null:{"goog-listen-tags":n}}(0,t);n&&(e.labels=n),this.th(e)},e.prototype.hh=function(t){var e={};e.database=ac(this.Qt),e.removeTarget=t,this.th(e)},e}(ad),cd=function(t){function e(e,n,r,i,o){var s=this;return(s=t.call(this,e,"write_stream_connection_backoff","write_stream_idle",n,r,o)||this).Qt=i,s.lh=!1,s}return Object(Lo.c)(e,t),Object.defineProperty(e.prototype,"_h",{get:function(){return this.lh},enumerable:!1,configurable:!0}),e.prototype.start=function(){this.lh=!1,this.lastStreamToken=void 0,t.prototype.start.call(this)},e.prototype.nh=function(){this.lh&&this.fh([])},e.prototype.oh=function(t){return this.Qu.Cu("Write",t)},e.prototype.onMessage=function(t){if(Wo(!!t.streamToken),this.lastStreamToken=t.streamToken,this.lh){this.Gu.reset();var e=function(t,e){return t&&t.length>0?(Wo(void 0!==e),t.map(function(t){return function(t,e){var n=tc(t.updateTime?t.updateTime:e);n.isEqual(ds.min())&&(n=tc(e));var r=null;return t.transformResults&&t.transformResults.length>0&&(r=t.transformResults),new Za(n,r)}(t,e)})):[]}(t.writeResults,t.commitTime),n=tc(t.commitTime);return this.listener.dh(n,e)}return Wo(!t.writeResults||0===t.writeResults.length),this.lh=!0,this.listener.wh()},e.prototype.Eh=function(){var t={};t.database=ac(this.Qt),this.th(t)},e.prototype.fh=function(t){var e=this,n={streamToken:this.lastStreamToken,writes:t.map(function(t){return hc(e.Qt,t)})};this.th(n)},e}(ad),ld=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).credentials=e,i.Qu=n,i.Qt=r,i.Th=!1,i}return Object(Lo.c)(e,t),e.prototype.Ih=function(){if(this.Th)throw new ns(es.FAILED_PRECONDITION,"The client has already been terminated.")},e.prototype.pu=function(t,e,n){var r=this;return this.Ih(),this.credentials.getToken().then(function(i){return r.Qu.pu(t,e,n,i)}).catch(function(t){throw t.code===es.UNAUTHENTICATED&&r.credentials.p(),t})},e.prototype.Du=function(t,e,n){var r=this;return this.Ih(),this.credentials.getToken().then(function(i){return r.Qu.Du(t,e,n,i)}).catch(function(t){throw t.code===es.UNAUTHENTICATED&&r.credentials.p(),t})},e.prototype.terminate=function(){this.Th=!1},e}(function(){}),hd=function(){function t(t,e){this._s=t,this.fa=e,this.state="Unknown",this.mh=0,this.Ah=null,this.Rh=!0}return t.prototype.Ph=function(){var t=this;0===this.mh&&(this.yh("Unknown"),this.Ah=this._s.Tr("online_state_timeout",1e4,function(){return t.Ah=null,t.gh("Backend didn't respond within 10 seconds."),t.yh("Offline"),Promise.resolve()}))},t.prototype.Vh=function(t){"Online"===this.state?this.yh("Unknown"):(this.mh++,this.mh>=1&&(this.ph(),this.gh("Connection failed 1 times. Most recent error: "+t.toString()),this.yh("Offline")))},t.prototype.set=function(t){this.ph(),this.mh=0,"Online"===t&&(this.Rh=!1),this.yh(t)},t.prototype.yh=function(t){t!==this.state&&(this.state=t,this.fa(t))},t.prototype.gh=function(t){var e="Could not reach Cloud Firestore backend. "+t+"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.";this.Rh?(qo(e),this.Rh=!1):Ho("OnlineStateTracker",e)},t.prototype.ph=function(){null!==this.Ah&&(this.Ah.cancel(),this.Ah=null)},t}(),dd=function(t,e,n,r,i){var o=this;this.bh=t,this.Sh=e,this._s=n,this.Dh={},this.Ch=[],this.xh=new Map,this.Nh=new Set,this.$h=[],this.Fh=i,this.Fh.ou(function(t){n.Ps(function(){return Object(Lo.b)(o,void 0,void 0,function(){return Object(Lo.d)(this,function(t){switch(t.label){case 0:return wd(this)?(Ho("RemoteStore","Restarting streams for network reachability change."),[4,function(t){return Object(Lo.b)(this,void 0,void 0,function(){var e;return Object(Lo.d)(this,function(n){switch(n.label){case 0:return(e=Yo(t)).Nh.add(4),[4,pd(e)];case 1:return n.sent(),e.Oh.set("Unknown"),e.Nh.delete(4),[4,fd(e)];case 2:return n.sent(),[2]}})})}(this)]):[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})})}),this.Oh=new hd(n,r)};function fd(t){return Object(Lo.b)(this,void 0,void 0,function(){var e,n;return Object(Lo.d)(this,function(r){switch(r.label){case 0:if(!wd(t))return[3,4];e=0,n=t.$h,r.label=1;case 1:return e<n.length?[4,(0,n[e])(!0)]:[3,4];case 2:r.sent(),r.label=3;case 3:return e++,[3,1];case 4:return[2]}})})}function pd(t){return Object(Lo.b)(this,void 0,void 0,function(){var e,n;return Object(Lo.d)(this,function(r){switch(r.label){case 0:e=0,n=t.$h,r.label=1;case 1:return e<n.length?[4,(0,n[e])(!1)]:[3,4];case 2:r.sent(),r.label=3;case 3:return e++,[3,1];case 4:return[2]}})})}function gd(t,e){var n=Yo(t);n.xh.has(e.targetId)||(n.xh.set(e.targetId,e),_d(n)?vd(n):Md(n).Hu()&&yd(n,e))}function md(t,e){var n=Yo(t),r=Md(n);n.xh.delete(e),r.Hu()&&bd(n,e),0===n.xh.size&&(r.Hu()?r.Xu():wd(n)&&n.Oh.set("Unknown"))}function yd(t,e){t.kh.on(e.targetId),Md(t).uh(e)}function bd(t,e){t.kh.on(e),Md(t).hh(e)}function vd(t){t.kh=new zu({vn:function(e){return t.Dh.vn(e)},Sn:function(e){return t.xh.get(e)||null}}),Md(t).start(),t.Oh.Ph()}function _d(t){return wd(t)&&!Md(t).zu()&&t.xh.size>0}function wd(t){return 0===Yo(t).Nh.size}function Cd(t){t.kh=void 0}function Od(t){return Object(Lo.b)(this,void 0,void 0,function(){return Object(Lo.d)(this,function(e){return t.xh.forEach(function(e,n){yd(t,e)}),[2]})})}function Ed(t,e){return Object(Lo.b)(this,void 0,void 0,function(){return Object(Lo.d)(this,function(n){return Cd(t),_d(t)?(t.Oh.Vh(e),vd(t)):t.Oh.set("Unknown"),[2]})})}function xd(t,e,n){return Object(Lo.b)(this,void 0,void 0,function(){var r,i,o;return Object(Lo.d)(this,function(s){switch(s.label){case 0:if(t.Oh.set("Online"),!(e instanceof qu&&2===e.state&&e.cause))return[3,6];s.label=1;case 1:return s.trys.push([1,3,,5]),[4,function(t,e){return Object(Lo.b)(this,void 0,void 0,function(){var n,r,i,o;return Object(Lo.d)(this,function(s){switch(s.label){case 0:n=e.cause,r=0,i=e.targetIds,s.label=1;case 1:return r<i.length?t.xh.has(o=i[r])?[4,t.Dh.Mh(o,n)]:[3,3]:[3,5];case 2:s.sent(),t.xh.delete(o),t.kh.removeTarget(o),s.label=3;case 3:s.label=4;case 4:return r++,[3,1];case 5:return[2]}})})}(t,e)];case 2:return s.sent(),[3,5];case 3:return r=s.sent(),Ho("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),[4,Id(t,r)];case 4:return s.sent(),[3,5];case 5:return[3,13];case 6:if(e instanceof Qu?t.kh.dn(e):e instanceof Hu?t.kh.Pn(e):t.kh.Tn(e),n.isEqual(ds.min()))return[3,13];s.label=7;case 7:return s.trys.push([7,11,,13]),[4,_h(t.bh)];case 8:return i=s.sent(),n._(i)>=0?[4,function(t,e){var n=t.kh.Vn(e);return n.$e.forEach(function(n,r){if(n.resumeToken.l()>0){var i=t.xh.get(r);i&&t.xh.set(r,i.Mt(n.resumeToken,e))}}),n.Fe.forEach(function(e){var n=t.xh.get(e);if(n){t.xh.set(e,n.Mt(ts.T,n.Ot)),bd(t,e);var r=new Da(n.target,e,1,n.sequenceNumber);yd(t,r)}}),t.Dh.Lh(n)}(t,n)]:[3,10];case 9:s.sent(),s.label=10;case 10:return[3,13];case 11:return Ho("RemoteStore","Failed to raise snapshot:",o=s.sent()),[4,Id(t,o)];case 12:return s.sent(),[3,13];case 13:return[2]}})})}function Id(t,e,n){return Object(Lo.b)(this,void 0,void 0,function(){var r=this;return Object(Lo.d)(this,function(i){switch(i.label){case 0:if(!jc(e))throw e;return t.Nh.add(1),[4,pd(t)];case 1:return i.sent(),t.Oh.set("Offline"),n||(n=function(){return _h(t.bh)}),t._s.po(function(){return Object(Lo.b)(r,void 0,void 0,function(){return Object(Lo.d)(this,function(e){switch(e.label){case 0:return Ho("RemoteStore","Retrying IndexedDB access"),[4,n()];case 1:return e.sent(),t.Nh.delete(1),[4,fd(t)];case 2:return e.sent(),[2]}})})}),[2]}})})}function Sd(t,e){return e().catch(function(n){return Id(t,n,e)})}function Td(t){return Object(Lo.b)(this,void 0,void 0,function(){var e,n,r,i,o;return Object(Lo.d)(this,function(s){switch(s.label){case 0:e=Yo(t),n=Ld(e),r=e.Ch.length>0?e.Ch[e.Ch.length-1].batchId:-1,s.label=1;case 1:if(!function(t){return wd(t)&&t.Ch.length<10}(e))return[3,7];s.label=2;case 2:return s.trys.push([2,4,,6]),[4,Oh(e.bh,r)];case 3:return null===(i=s.sent())?(0===e.Ch.length&&n.Xu(),[3,7]):(r=i.batchId,function(t,e){t.Ch.push(e);var n=Ld(t);n.Hu()&&n._h&&n.fh(e.mutations)}(e,i),[3,6]);case 4:return o=s.sent(),[4,Id(e,o)];case 5:return s.sent(),[3,6];case 6:return[3,1];case 7:return Pd(e)&&Rd(e),[2]}})})}function Pd(t){return wd(t)&&!Ld(t).zu()&&t.Ch.length>0}function Rd(t){Ld(t).start()}function Ad(t){return Object(Lo.b)(this,void 0,void 0,function(){return Object(Lo.d)(this,function(e){return Ld(t).Eh(),[2]})})}function kd(t){return Object(Lo.b)(this,void 0,void 0,function(){var e,n,r;return Object(Lo.d)(this,function(i){for(e=Ld(t),n=0,r=t.Ch;n<r.length;n++)e.fh(r[n].mutations);return[2]})})}function jd(t,e,n){return Object(Lo.b)(this,void 0,void 0,function(){var r,i;return Object(Lo.d)(this,function(o){switch(o.label){case 0:return r=t.Ch.shift(),i=dl.from(r,e,n),[4,Sd(t,function(){return t.Dh.Bh(i)})];case 1:return o.sent(),[4,Td(t)];case 2:return o.sent(),[2]}})})}function Nd(t,e){return Object(Lo.b)(this,void 0,void 0,function(){return Object(Lo.d)(this,function(n){switch(n.label){case 0:return e&&Ld(t)._h?[4,function(t,e){return Object(Lo.b)(this,void 0,void 0,function(){var n,r;return Object(Lo.d)(this,function(i){switch(i.label){case 0:return bu(r=e.code)&&r!==es.ABORTED?(n=t.Ch.shift(),Ld(t).Yu(),[4,Sd(t,function(){return t.Dh.qh(n.batchId,e)})]):[3,3];case 1:return i.sent(),[4,Td(t)];case 2:i.sent(),i.label=3;case 3:return[2]}})})}(t,e)]:[3,2];case 1:n.sent(),n.label=2;case 2:return Pd(t)&&Rd(t),[2]}})})}function Dd(t,e){return Object(Lo.b)(this,void 0,void 0,function(){var n;return Object(Lo.d)(this,function(r){switch(r.label){case 0:return n=Yo(t),e?(n.Nh.delete(2),[4,fd(n)]):[3,2];case 1:return r.sent(),[3,5];case 2:return e?[3,4]:(n.Nh.add(2),[4,pd(n)]);case 3:r.sent(),n.Oh.set("Unknown"),r.label=4;case 4:r.label=5;case 5:return[2]}})})}function Md(t){var e=this;return t.Uh||(t.Uh=function(t,e,n){var r=Yo(t);return r.Ih(),new ud(e,r.Qu,r.credentials,r.Qt,n)}(t.Sh,t._s,{wu:Od.bind(null,t),Tu:Ed.bind(null,t),ah:xd.bind(null,t)}),t.$h.push(function(n){return Object(Lo.b)(e,void 0,void 0,function(){return Object(Lo.d)(this,function(e){switch(e.label){case 0:return n?(t.Uh.Yu(),_d(t)?vd(t):t.Oh.set("Unknown"),[3,3]):[3,1];case 1:return[4,t.Uh.stop()];case 2:e.sent(),Cd(t),e.label=3;case 3:return[2]}})})})),t.Uh}function Ld(t){var e=this;return t.Qh||(t.Qh=function(t,e,n){var r=Yo(t);return r.Ih(),new cd(e,r.Qu,r.credentials,r.Qt,n)}(t.Sh,t._s,{wu:Ad.bind(null,t),Tu:Nd.bind(null,t),wh:kd.bind(null,t),dh:jd.bind(null,t)}),t.$h.push(function(n){return Object(Lo.b)(e,void 0,void 0,function(){return Object(Lo.d)(this,function(e){switch(e.label){case 0:return n?(t.Qh.Yu(),[4,Td(t)]):[3,2];case 1:return e.sent(),[3,4];case 2:return[4,t.Qh.stop()];case 3:e.sent(),t.Ch.length>0&&(Ho("RemoteStore","Stopping write stream with "+t.Ch.length+" pending writes"),t.Ch=[]),e.label=4;case 4:return[2]}})})})),t.Qh}var Fd=function(){this.Kh=void 0,this.listeners=[]},Ud=function(){this.queries=new Nl(function(t){return Ra(t)},Pa),this.onlineState="Unknown",this.Wh=new Set};function Vd(t,e){return Object(Lo.b)(this,void 0,void 0,function(){var n,r,i,o,s,a,u;return Object(Lo.d)(this,function(c){switch(c.label){case 0:if(n=Yo(t),i=!1,(o=n.queries.get(r=e.query))||(i=!0,o=new Fd),!i)return[3,4];c.label=1;case 1:return c.trys.push([1,3,,4]),s=o,[4,n.jh(r)];case 2:return s.Kh=c.sent(),[3,4];case 3:return a=c.sent(),u=Uc(a,"Initialization of query '"+Aa(e.query)+"' failed"),[2,void e.onError(u)];case 4:return n.queries.set(r,o),o.listeners.push(e),e.Gh(n.onlineState),o.Kh&&e.zh(o.Kh)&&Bd(n),[2]}})})}function Qd(t,e){return Object(Lo.b)(this,void 0,void 0,function(){var n,r,i,o,s;return Object(Lo.d)(this,function(a){return n=Yo(t),i=!1,(o=n.queries.get(r=e.query))&&(s=o.listeners.indexOf(e))>=0&&(o.listeners.splice(s,1),i=0===o.listeners.length),i?[2,(n.queries.delete(r),n.Hh(r))]:[2]})})}function Hd(t,e){for(var n=Yo(t),r=!1,i=0,o=e;i<o.length;i++){var s=o[i],a=n.queries.get(s.query);if(a){for(var u=0,c=a.listeners;u<c.length;u++)c[u].zh(s)&&(r=!0);a.Kh=s}}r&&Bd(n)}function qd(t,e,n){var r=Yo(t),i=r.queries.get(e);if(i)for(var o=0,s=i.listeners;o<s.length;o++)s[o].onError(n);r.queries.delete(e)}function Bd(t){t.Wh.forEach(function(t){t.next()})}var zd=function(){function t(t,e,n){this.query=t,this.Jh=e,this.Yh=!1,this.Xh=null,this.onlineState="Unknown",this.options=n||{}}return t.prototype.zh=function(t){if(!this.options.includeMetadataChanges){for(var e=[],n=0,r=t.docChanges;n<r.length;n++){var i=r[n];3!==i.type&&e.push(i)}t=new Fu(t.query,t.docs,t.Se,e,t.De,t.fromCache,t.Ce,!0)}var o=!1;return this.Yh?this.Zh(t)&&(this.Jh.next(t),o=!0):this.tl(t,this.onlineState)&&(this.el(t),o=!0),this.Xh=t,o},t.prototype.onError=function(t){this.Jh.error(t)},t.prototype.Gh=function(t){this.onlineState=t;var e=!1;return this.Xh&&!this.Yh&&this.tl(this.Xh,t)&&(this.el(this.Xh),e=!0),e},t.prototype.tl=function(t,e){return!t.fromCache||!(this.options.nl&&"Offline"!==e||t.docs.et()&&"Offline"!==e)},t.prototype.Zh=function(t){return t.docChanges.length>0||!!(t.Ce||this.Xh&&this.Xh.hasPendingWrites!==t.hasPendingWrites)&&!0===this.options.includeMetadataChanges},t.prototype.el=function(t){t=Fu.Ne(t.query,t.docs,t.De,t.fromCache),this.Yh=!0,this.Jh.next(t)},t}(),Gd=function(){function t(t,e){this.payload=t,this.byteLength=e}return t.prototype.sl=function(){return"metadata"in this.payload},t}(),Wd=function(){function t(t){this.Qt=t}return t.prototype.Pc=function(t){return ic(this.Qt,t)},t.prototype.yc=function(t){return t.metadata.exists?lc(this.Qt,t.document,!1):new Ks(this.Pc(t.metadata.name),this.gc(t.metadata.readTime))},t.prototype.gc=function(t){return tc(t)},t}();!function(){function t(t,e,n){this.il=t,this.bh=e,this.Qt=n,this.queries=[],this.documents=[],this.progress=function(t){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:t.totalDocuments,totalBytes:t.totalBytes}}(t)}t.prototype.rl=function(t){this.progress.bytesLoaded+=t.byteLength;var e=this.progress.documentsLoaded;return t.payload.namedQuery?this.queries.push(t.payload.namedQuery):t.payload.documentMetadata?(this.documents.push({metadata:t.payload.documentMetadata}),t.payload.documentMetadata.exists||++e):t.payload.document&&(this.documents[this.documents.length-1].document=t.payload.document,++e),e!==this.progress.documentsLoaded?(this.progress.documentsLoaded=e,Object.assign({},this.progress)):null},t.prototype.ol=function(t){for(var e=new Map,n=new Wd(this.Qt),r=0,i=t;r<i.length;r++){var o=i[r];if(o.metadata.queries)for(var s=n.Pc(o.metadata.name),a=0,u=o.metadata.queries;a<u.length;a++){var c=u[a],l=(e.get(c)||ju()).add(s);e.set(c,l)}}return e},t.prototype.complete=function(){return Object(Lo.b)(this,void 0,void 0,function(){var t,e,n,r,i;return Object(Lo.d)(this,function(o){switch(o.label){case 0:return[4,Rh(this.bh,new Wd(this.Qt),this.documents,this.il.id)];case 1:t=o.sent(),e=this.ol(this.documents),n=0,r=this.queries,o.label=2;case 2:return n<r.length?[4,Ah(this.bh,i=r[n],e.get(i.name))]:[3,5];case 3:o.sent(),o.label=4;case 4:return n++,[3,2];case 5:return[2,(this.progress.taskState="Success",new dh(Object.assign({},this.progress),t))]}})})}}();var Yd=function(t){this.key=t},$d=function(t){this.key=t},Kd=function(){function t(t,e){this.query=t,this.cl=e,this.al=null,this.Be=!1,this.ul=ju(),this.De=ju(),this.hl=ja(t),this.ll=new Mu(this.hl)}return Object.defineProperty(t.prototype,"_l",{get:function(){return this.cl},enumerable:!1,configurable:!0}),t.prototype.fl=function(t,e){var n=this,r=e?e.dl:new Lu,i=e?e.ll:this.ll,o=e?e.De:this.De,s=i,a=!1,u=wa(this.query)&&i.size===this.query.limit?i.last():null,c=Ca(this.query)&&i.size===this.query.limit?i.first():null;if(t.Xt(function(t,e){var l=i.get(t),h=e instanceof $s?e:null;h&&(h=ka(n.query,h)?h:null);var d=!!l&&n.De.has(l.key),f=!!h&&(h.Vt||n.De.has(h.key)&&h.hasCommittedMutations),p=!1;l&&h?l.data().isEqual(h.data())?d!==f&&(r.track({type:3,doc:h}),p=!0):n.wl(l,h)||(r.track({type:2,doc:h}),p=!0,(u&&n.hl(h,u)>0||c&&n.hl(h,c)<0)&&(a=!0)):!l&&h?(r.track({type:0,doc:h}),p=!0):l&&!h&&(r.track({type:1,doc:l}),p=!0,(u||c)&&(a=!0)),p&&(h?(s=s.add(h),o=f?o.add(t):o.delete(t)):(s=s.delete(t),o=o.delete(t)))}),wa(this.query)||Ca(this.query))for(;s.size>this.query.limit;){var l=wa(this.query)?s.last():s.first();s=s.delete(l.key),o=o.delete(l.key),r.track({type:1,doc:l})}return{ll:s,dl:r,lc:a,De:o}},t.prototype.wl=function(t,e){return t.Vt&&e.hasCommittedMutations&&!e.Vt},t.prototype.wi=function(t,e,n){var r=this,i=this.ll;this.ll=t.ll,this.De=t.De;var o=t.dl.ve();o.sort(function(t,e){return function(t,e){var n=function(t){switch(t){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Go()}};return n(t)-n(e)}(t.type,e.type)||r.hl(t.doc,e.doc)}),this.El(n);var s=e?this.Tl():[],a=0===this.ul.size&&this.Be?1:0,u=a!==this.al;return this.al=a,0!==o.length||u?{snapshot:new Fu(this.query,t.ll,i,o,t.De,0===a,u,!1),Il:s}:{Il:s}},t.prototype.Gh=function(t){return this.Be&&"Offline"===t?(this.Be=!1,this.wi({ll:this.ll,dl:new Lu,De:this.De,lc:!1},!1)):{Il:[]}},t.prototype.ml=function(t){return!this.cl.has(t)&&!!this.ll.has(t)&&!this.ll.get(t).Vt},t.prototype.El=function(t){var e=this;t&&(t.qe.forEach(function(t){return e.cl=e.cl.add(t)}),t.Ue.forEach(function(t){}),t.Qe.forEach(function(t){return e.cl=e.cl.delete(t)}),this.Be=t.Be)},t.prototype.Tl=function(){var t=this;if(!this.Be)return[];var e=this.ul;this.ul=ju(),this.ll.forEach(function(e){t.ml(e.key)&&(t.ul=t.ul.add(e.key))});var n=[];return e.forEach(function(e){t.ul.has(e)||n.push(new $d(e))}),this.ul.forEach(function(t){e.has(t)||n.push(new Yd(t))}),n},t.prototype.Al=function(t){this.cl=t.Rc,this.ul=ju();var e=this.fl(t.documents);return this.wi(e,!0)},t.prototype.Rl=function(){return Fu.Ne(this.query,this.ll,this.De,0===this.al)},t}(),Xd=function(t,e,n){this.query=t,this.targetId=e,this.view=n},Zd=function(t){this.key=t,this.Pl=!1},Jd=function(){function t(t,e,n,r,i,o){this.bh=t,this.yl=e,this.gl=n,this.Vl=r,this.currentUser=i,this.pl=o,this.bl={},this.vl=new Nl(function(t){return Ra(t)},Pa),this.Sl=new Map,this.Dl=new Set,this.Cl=new _u(ys.H),this.xl=new Map,this.Nl=new jh,this.$l={},this.Fl=new Map,this.Ol=ql.Li(),this.onlineState="Unknown",this.kl=void 0}return Object.defineProperty(t.prototype,"Ml",{get:function(){return!0===this.kl},enumerable:!1,configurable:!0}),t}();function tf(t,e){return Object(Lo.b)(this,void 0,void 0,function(){var n,r,i,o,s;return Object(Lo.d)(this,function(a){switch(a.label){case 0:return n=Rf(t),(i=n.vl.get(e))?(n.Vl.Fa(i.targetId),r=i.view.Rl(),[3,4]):[3,1];case 1:return[4,Eh(n.bh,Sa(e))];case 2:return o=a.sent(),s=n.Vl.Fa(o.targetId),[4,ef(n,e,o.targetId,"current"===s)];case 3:r=a.sent(),n.Ml&&gd(n.yl,o),a.label=4;case 4:return[2,r]}})})}function ef(t,e,n,r){return Object(Lo.b)(this,void 0,void 0,function(){var i,o,s,a,u,c;return Object(Lo.d)(this,function(l){switch(l.label){case 0:return t.Ll=function(e,n,r){return function(t,e,n,r){return Object(Lo.b)(this,void 0,void 0,function(){var i,o,s;return Object(Lo.d)(this,function(a){switch(a.label){case 0:return(i=e.view.fl(n)).lc?[4,Ih(t.bh,e.query,!1).then(function(t){return e.view.fl(t.documents,i)})]:[3,2];case 1:i=a.sent(),a.label=2;case 2:return o=r&&r.$e.get(e.targetId),s=e.view.wi(i,t.Ml,o),[2,(gf(t,e.targetId,s.Il),s.snapshot)]}})})}(t,e,n,r)},[4,Ih(t.bh,e,!0)];case 1:return i=l.sent(),o=new Kd(e,i.Rc),s=o.fl(i.documents),a=Vu.Le(n,r&&"Offline"!==t.onlineState),u=o.wi(s,t.Ml,a),gf(t,n,u.Il),c=new Xd(e,n,o),[2,(t.vl.set(e,c),t.Sl.has(n)?t.Sl.get(n).push(e):t.Sl.set(n,[e]),u.snapshot)]}})})}function nf(t,e){return Object(Lo.b)(this,void 0,void 0,function(){var n,r,i;return Object(Lo.d)(this,function(o){switch(o.label){case 0:return n=Yo(t),r=n.vl.get(e),(i=n.Sl.get(r.targetId)).length>1?[2,(n.Sl.set(r.targetId,i.filter(function(t){return!Pa(t,e)})),void n.vl.delete(e))]:n.Ml?(n.Vl.ka(r.targetId),n.Vl.Da(r.targetId)?[3,2]:[4,xh(n.bh,r.targetId,!1).then(function(){n.Vl.La(r.targetId),md(n.yl,r.targetId),ff(n,r.targetId)}).catch(jl)]):[3,3];case 1:o.sent(),o.label=2;case 2:return[3,5];case 3:return ff(n,r.targetId),[4,xh(n.bh,r.targetId,!0)];case 4:o.sent(),o.label=5;case 5:return[2]}})})}function rf(t,e,n){return Object(Lo.b)(this,void 0,void 0,function(){var r,i,o,s;return Object(Lo.d)(this,function(a){switch(a.label){case 0:r=Af(t),a.label=1;case 1:return a.trys.push([1,5,,6]),[4,function(t,e){var n,r=Yo(t),i=hs.now(),o=e.reduce(function(t,e){return t.add(e.key)},ju());return r.persistence.runTransaction("Locally write mutations","readwrite",function(t){return r.Tc.Xo(t,o).next(function(o){n=o;for(var s=[],a=0,u=e;a<u.length;a++){var c=u[a],l=iu(c,n.get(c.key));null!=l&&s.push(new uu(c.key,l,Ws(l.proto.mapValue),Ja.exists(!0)))}return r.zo.Ri(t,i,s,e)})}).then(function(t){var e=t.xs(n);return{batchId:t.batchId,ri:e}})}(r.bh,e)];case 2:return i=a.sent(),r.Vl.Ca(i.batchId),function(t,e,n){var r=t.$l[t.currentUser.A()];r||(r=new _u(Xo)),r=r.zt(e,n),t.$l[t.currentUser.A()]=r}(r,i.batchId,n),[4,bf(r,i.ri)];case 3:return a.sent(),[4,Td(r.yl)];case 4:return a.sent(),[3,6];case 5:return o=a.sent(),s=Uc(o,"Failed to persist write"),n.reject(s),[3,6];case 6:return[2]}})})}function of(t,e){return Object(Lo.b)(this,void 0,void 0,function(){var n,r;return Object(Lo.d)(this,function(i){switch(i.label){case 0:n=Yo(t),i.label=1;case 1:return i.trys.push([1,4,,6]),[4,wh(n.bh,e)];case 2:return r=i.sent(),e.$e.forEach(function(t,e){var r=n.xl.get(e);r&&(Wo(t.qe.size+t.Ue.size+t.Qe.size<=1),t.qe.size>0?r.Pl=!0:t.Ue.size>0?Wo(r.Pl):t.Qe.size>0&&(Wo(r.Pl),r.Pl=!1))}),[4,bf(n,r,e)];case 3:return i.sent(),[3,6];case 4:return[4,jl(i.sent())];case 5:return i.sent(),[3,6];case 6:return[2]}})})}function sf(t,e,n){var r=Yo(t);if(r.Ml&&0===n||!r.Ml&&1===n){var i=[];r.vl.forEach(function(t,n){var r=n.view.Gh(e);r.snapshot&&i.push(r.snapshot)}),function(t,e){var n=Yo(t);n.onlineState=e;var r=!1;n.queries.forEach(function(t,n){for(var i=0,o=n.listeners;i<o.length;i++)o[i].Gh(e)&&(r=!0)}),r&&Bd(n)}(r.gl,e),i.length&&r.bl.ah(i),r.onlineState=e,r.Ml&&r.Vl.Qa(e)}}function af(t,e,n){return Object(Lo.b)(this,void 0,void 0,function(){var r,i,o,s,a,u;return Object(Lo.d)(this,function(c){switch(c.label){case 0:return(r=Yo(t)).Vl.Ba(e,"rejected",n),i=r.xl.get(e),(o=i&&i.key)?(s=(s=new _u(ys.H)).zt(o,new Ks(o,ds.min())),a=ju().add(o),u=new Uu(ds.min(),new Map,new Ou(Xo),s,a),[4,of(r,u)]):[3,2];case 1:return c.sent(),r.Cl=r.Cl.remove(o),r.xl.delete(e),yf(r),[3,4];case 2:return[4,xh(r.bh,e,!1).then(function(){return ff(r,e,n)}).catch(jl)];case 3:c.sent(),c.label=4;case 4:return[2]}})})}function uf(t,e){return Object(Lo.b)(this,void 0,void 0,function(){var n,r,i;return Object(Lo.d)(this,function(o){switch(o.label){case 0:n=Yo(t),r=e.batch.batchId,o.label=1;case 1:return o.trys.push([1,4,,6]),[4,vh(n.bh,e)];case 2:return i=o.sent(),df(n,r,null),hf(n,r),n.Vl.Na(r,"acknowledged"),[4,bf(n,i)];case 3:return o.sent(),[3,6];case 4:return[4,jl(o.sent())];case 5:return o.sent(),[3,6];case 6:return[2]}})})}function cf(t,e,n){return Object(Lo.b)(this,void 0,void 0,function(){var r,i;return Object(Lo.d)(this,function(o){switch(o.label){case 0:r=Yo(t),o.label=1;case 1:return o.trys.push([1,4,,6]),[4,function(t,e){var n=Yo(t);return n.persistence.runTransaction("Reject batch","readwrite-primary",function(t){var r;return n.zo.Pi(t,e).next(function(e){return Wo(null!==e),r=e.keys(),n.zo.Ci(t,e)}).next(function(){return n.zo.$i(t)}).next(function(){return n.Tc.Xo(t,r)})})}(r.bh,e)];case 2:return i=o.sent(),df(r,e,n),hf(r,e),r.Vl.Na(e,"rejected",n),[4,bf(r,i)];case 3:return o.sent(),[3,6];case 4:return[4,jl(o.sent())];case 5:return o.sent(),[3,6];case 6:return[2]}})})}function lf(t,e){return Object(Lo.b)(this,void 0,void 0,function(){var n,r,i,o,s;return Object(Lo.d)(this,function(a){switch(a.label){case 0:wd((n=Yo(t)).yl)||Ho("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled."),a.label=1;case 1:return a.trys.push([1,3,,4]),[4,function(t){var e=Yo(t);return e.persistence.runTransaction("Get highest unacknowledged batch id","readonly",function(t){return e.zo.Vi(t)})}(n.bh)];case 2:return-1===(r=a.sent())?[2,void e.resolve()]:((i=n.Fl.get(r)||[]).push(e),n.Fl.set(r,i),[3,4]);case 3:return o=a.sent(),s=Uc(o,"Initialization of waitForPendingWrites() operation failed"),e.reject(s),[3,4];case 4:return[2]}})})}function hf(t,e){(t.Fl.get(e)||[]).forEach(function(t){t.resolve()}),t.Fl.delete(e)}function df(t,e,n){var r=Yo(t),i=r.$l[r.currentUser.A()];if(i){var o=i.get(e);o&&(n?o.reject(n):o.resolve(),i=i.remove(e)),r.$l[r.currentUser.A()]=i}}function ff(t,e,n){void 0===n&&(n=null),t.Vl.ka(e);for(var r=0,i=t.Sl.get(e);r<i.length;r++){var o=i[r];t.vl.delete(o),n&&t.bl.Bl(o,n)}t.Sl.delete(e),t.Ml&&t.Nl.Fc(e).forEach(function(e){t.Nl.Fi(e)||pf(t,e)})}function pf(t,e){t.Dl.delete(e.path.rt());var n=t.Cl.get(e);null!==n&&(md(t.yl,n),t.Cl=t.Cl.remove(e),t.xl.delete(n),yf(t))}function gf(t,e,n){for(var r=0,i=n;r<i.length;r++){var o=i[r];o instanceof Yd?(t.Nl.nr(o.key,e),mf(t,o)):o instanceof $d?(Ho("SyncEngine","Document no longer in limbo: "+o.key),t.Nl.ir(o.key,e),t.Nl.Fi(o.key)||pf(t,o.key)):Go()}}function mf(t,e){var n=e.key,r=n.path.rt();t.Cl.get(n)||t.Dl.has(r)||(Ho("SyncEngine","New document in limbo: "+n),t.Dl.add(r),yf(t))}function yf(t){for(;t.Dl.size>0&&t.Cl.size<t.pl;){var e=t.Dl.values().next().value;t.Dl.delete(e);var n=new ys(ps.ot(e)),r=t.Ol.next();t.xl.set(r,new Zd(n)),t.Cl=t.Cl.zt(n,r),gd(t.yl,new Da(Sa(_a(n.path)),r,2,ls.q))}}function bf(t,e,n){return Object(Lo.b)(this,void 0,void 0,function(){var r,i,o,s;return Object(Lo.d)(this,function(a){switch(a.label){case 0:return r=Yo(t),i=[],o=[],s=[],r.vl.et()?[3,3]:(r.vl.forEach(function(t,a){s.push(r.Ll(a,e,n).then(function(t){if(t){r.Ml&&r.Vl.Ba(a.targetId,t.fromCache?"not-current":"current"),i.push(t);var e=ph.oc(a.targetId,t);o.push(e)}}))}),[4,Promise.all(s)]);case 1:return a.sent(),r.bl.ah(i),[4,function(t,e){return Object(Lo.b)(this,void 0,void 0,function(){var n,r,i,o,s,a,u,c;return Object(Lo.d)(this,function(l){switch(l.label){case 0:n=Yo(t),l.label=1;case 1:return l.trys.push([1,3,,4]),[4,n.persistence.runTransaction("notifyLocalViewChanges","readwrite",function(t){return Tc.forEach(e,function(e){return Tc.forEach(e.ic,function(r){return n.persistence.Ti.nr(t,e.targetId,r)}).next(function(){return Tc.forEach(e.rc,function(r){return n.persistence.Ti.ir(t,e.targetId,r)})})})})];case 2:return l.sent(),[3,4];case 3:if(!jc(r=l.sent()))throw r;return Ho("LocalStore","Failed to update sequence numbers: "+r),[3,4];case 4:for(i=0,o=e;i<o.length;i++)a=(s=o[i]).targetId,s.fromCache||(u=n.fc.get(a),c=u.Lt(u.Ot),n.fc=n.fc.zt(a,c));return[2]}})})}(r.bh,o)];case 2:a.sent(),a.label=3;case 3:return[2]}})})}function vf(t,e){return Object(Lo.b)(this,void 0,void 0,function(){var n,r;return Object(Lo.d)(this,function(i){switch(i.label){case 0:return(n=Yo(t)).currentUser.isEqual(e)?[3,3]:(Ho("SyncEngine","User change. New user:",e.A()),[4,bh(n.bh,e)]);case 1:return r=i.sent(),n.currentUser=e,function(t,e){t.Fl.forEach(function(t){t.forEach(function(t){t.reject(new ns(es.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),t.Fl.clear()}(n),n.Vl.Ua(e,r.mc,r.Ac),[4,bf(n,r.Ic)];case 2:i.sent(),i.label=3;case 3:return[2]}})})}function _f(t,e){var n=Yo(t),r=n.xl.get(e);if(r&&r.Pl)return ju().add(r.key);var i=ju(),o=n.Sl.get(e);if(!o)return i;for(var s=0,a=o;s<a.length;s++){var u=n.vl.get(a[s]);i=i.Pe(u.view._l)}return i}function wf(t,e){return Object(Lo.b)(this,void 0,void 0,function(){var n,r,i;return Object(Lo.d)(this,function(o){switch(o.label){case 0:return[4,Ih((n=Yo(t)).bh,e.query,!0)];case 1:return r=o.sent(),i=e.view.Al(r),[2,(n.Ml&&gf(n,e.targetId,i.Il),i)]}})})}function Cf(t){return Object(Lo.b)(this,void 0,void 0,function(){var e;return Object(Lo.d)(this,function(n){return[2,Th((e=Yo(t)).bh).then(function(t){return bf(e,t)})]})})}function Of(t,e,n,r){return Object(Lo.b)(this,void 0,void 0,function(){var i,o;return Object(Lo.d)(this,function(s){switch(s.label){case 0:return[4,function(t,e){var n=Yo(t),r=Yo(n.zo);return n.persistence.runTransaction("Lookup mutation documents","readonly",function(t){return r.yi(t,e).next(function(e){return e?n.Tc.Xo(t,e):Tc.resolve(null)})})}((i=Yo(t)).bh,e)];case 1:return null===(o=s.sent())?[3,6]:"pending"!==n?[3,3]:[4,Td(i.yl)];case 2:return s.sent(),[3,4];case 3:"acknowledged"===n||"rejected"===n?(df(i,e,r||null),hf(i,e),function(t,e){Yo(Yo(t).zo).xi(e)}(i.bh,e)):Go(),s.label=4;case 4:return[4,bf(i,o)];case 5:return s.sent(),[3,7];case 6:Ho("SyncEngine","Cannot apply mutation batch with id: "+e),s.label=7;case 7:return[2]}})})}function Ef(t,e){return Object(Lo.b)(this,void 0,void 0,function(){var n,r,i,o,s,a,u;return Object(Lo.d)(this,function(c){switch(c.label){case 0:return Rf(n=Yo(t)),Af(n),!0!==e||!0===n.kl?[3,3]:(r=n.Vl.va(),[4,xf(n,r.it())]);case 1:return i=c.sent(),n.kl=!0,[4,Dd(n.yl,!0)];case 2:for(c.sent(),o=0,s=i;o<s.length;o++)gd(n.yl,s[o]);return[3,7];case 3:return!1!==e||!1===n.kl?[3,7]:(a=[],u=Promise.resolve(),n.Sl.forEach(function(t,e){n.Vl.Ma(e)?a.push(e):u=u.then(function(){return ff(n,e),xh(n.bh,e,!0)}),md(n.yl,e)}),[4,u]);case 4:return c.sent(),[4,xf(n,a)];case 5:return c.sent(),function(t){var e=Yo(t);e.xl.forEach(function(t,n){md(e.yl,n)}),e.Nl.Oc(),e.xl=new Map,e.Cl=new _u(ys.H)}(n),n.kl=!1,[4,Dd(n.yl,!1)];case 6:c.sent(),c.label=7;case 7:return[2]}})})}function xf(t,e,n){return Object(Lo.b)(this,void 0,void 0,function(){var n,r,i,o,s,a,u,c,l,h,d,f,p;return Object(Lo.d)(this,function(g){switch(g.label){case 0:n=Yo(t),r=[],i=[],o=0,s=e,g.label=1;case 1:return o<s.length?(u=void 0,(c=n.Sl.get(a=s[o]))&&0!==c.length?[4,Eh(n.bh,Sa(c[0]))]:[3,7]):[3,13];case 2:u=g.sent(),l=0,h=c,g.label=3;case 3:return l<h.length?(d=n.vl.get(h[l]),[4,wf(n,d)]):[3,6];case 4:(f=g.sent()).snapshot&&i.push(f.snapshot),g.label=5;case 5:return l++,[3,3];case 6:return[3,11];case 7:return[4,Sh(n.bh,a)];case 8:return p=g.sent(),[4,Eh(n.bh,p)];case 9:return u=g.sent(),[4,ef(n,If(p),a,!1)];case 10:g.sent(),g.label=11;case 11:r.push(u),g.label=12;case 12:return o++,[3,1];case 13:return[2,(n.bl.ah(i),r)]}})})}function If(t){return va(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function Sf(t){var e=Yo(t);return Yo(Yo(e.bh).persistence).Uo()}function Tf(t,e,n,r){return Object(Lo.b)(this,void 0,void 0,function(){var i,o,s;return Object(Lo.d)(this,function(a){switch(a.label){case 0:return(i=Yo(t)).kl?(Ho("SyncEngine","Ignoring unexpected query state notification."),[3,8]):[3,1];case 1:if(!i.Sl.has(e))return[3,8];switch(n){case"current":case"not-current":return[3,2];case"rejected":return[3,5]}return[3,7];case 2:return[4,Th(i.bh)];case 3:return o=a.sent(),s=Uu.Me(e,"current"===n),[4,bf(i,o,s)];case 4:return a.sent(),[3,8];case 5:return[4,xh(i.bh,e,!0)];case 6:return a.sent(),ff(i,e,r),[3,8];case 7:Go(),a.label=8;case 8:return[2]}})})}function Pf(t,e,n){return Object(Lo.b)(this,void 0,void 0,function(){var r,i,o,s,a,u,c,l,h;return Object(Lo.d)(this,function(d){switch(d.label){case 0:if(!(r=Rf(t)).kl)return[3,10];i=0,o=e,d.label=1;case 1:return i<o.length?r.Sl.has(s=o[i])?(Ho("SyncEngine","Adding an already active target "+s),[3,5]):[4,Sh(r.bh,s)]:[3,6];case 2:return a=d.sent(),[4,Eh(r.bh,a)];case 3:return u=d.sent(),[4,ef(r,If(a),u.targetId,!1)];case 4:d.sent(),gd(r.yl,u),d.label=5;case 5:return i++,[3,1];case 6:c=function(t){return Object(Lo.d)(this,function(e){switch(e.label){case 0:return r.Sl.has(t)?[4,xh(r.bh,t,!1).then(function(){md(r.yl,t),ff(r,t)}).catch(jl)]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}})},l=0,h=n,d.label=7;case 7:return l<h.length?[5,c(h[l])]:[3,10];case 8:d.sent(),d.label=9;case 9:return l++,[3,7];case 10:return[2]}})})}function Rf(t){var e=Yo(t);return e.yl.Dh.Lh=of.bind(null,e),e.yl.Dh.vn=_f.bind(null,e),e.yl.Dh.Mh=af.bind(null,e),e.bl.ah=Hd.bind(null,e.gl),e.bl.Bl=qd.bind(null,e.gl),e}function Af(t){var e=Yo(t);return e.yl.Dh.Bh=uf.bind(null,e),e.yl.Dh.qh=cf.bind(null,e),e}var kf=function(){function t(){this.synchronizeTabs=!1}return t.prototype.initialize=function(t){return Object(Lo.b)(this,void 0,void 0,function(){return Object(Lo.d)(this,function(e){switch(e.label){case 0:return this.Qt=od(t.yu.t),this.Vl=this.Wl(t),this.persistence=this.jl(t),[4,this.persistence.start()];case 1:return e.sent(),this.Gl=this.zl(t),this.bh=this.Hl(t),[2]}})})},t.prototype.zl=function(t){return null},t.prototype.Hl=function(t){return yh(this.persistence,new gh,t.Jl,this.Qt)},t.prototype.jl=function(t){return new Uh(Qh.ia,this.Qt)},t.prototype.Wl=function(t){return new Xh},t.prototype.terminate=function(){return Object(Lo.b)(this,void 0,void 0,function(){return Object(Lo.d)(this,function(t){switch(t.label){case 0:return this.Gl&&this.Gl.stop(),[4,this.Vl.ko()];case 1:return t.sent(),[4,this.persistence.ko()];case 2:return t.sent(),[2]}})})},t}(),jf=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).Yl=e,i.cacheSizeBytes=n,i.forceOwnership=r,i.synchronizeTabs=!1,i}return Object(Lo.c)(e,t),e.prototype.initialize=function(e){return Object(Lo.b)(this,void 0,void 0,function(){return Object(Lo.d)(this,function(n){switch(n.label){case 0:return[4,t.prototype.initialize.call(this,e)];case 1:return n.sent(),[4,Ph(this.bh)];case 2:return n.sent(),[4,this.Yl.initialize(this,e)];case 3:return n.sent(),[4,Af(this.Yl._a)];case 4:return n.sent(),[4,Td(this.Yl.yl)];case 5:return n.sent(),[2]}})})},e.prototype.Hl=function(t){return yh(this.persistence,new gh,t.Jl,this.Qt)},e.prototype.zl=function(t){return new Kl(this.persistence.Ti.lr,t._s)},e.prototype.jl=function(t){var e=hh(t.yu.t,t.yu.persistenceKey),n=void 0!==this.cacheSizeBytes?kl.Ys(this.cacheSizeBytes):kl.ti;return new uh(this.synchronizeTabs,e,t.clientId,n,t._s,rd(),id(),this.Qt,this.Vl,!!this.forceOwnership)},e.prototype.Wl=function(t){return new Xh},e}(kf),Nf=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n,!1)||this).Yl=e,r.cacheSizeBytes=n,r.synchronizeTabs=!0,r}return Object(Lo.c)(e,t),e.prototype.initialize=function(e){return Object(Lo.b)(this,void 0,void 0,function(){var n,r=this;return Object(Lo.d)(this,function(i){switch(i.label){case 0:return[4,t.prototype.initialize.call(this,e)];case 1:return i.sent(),n=this.Yl._a,this.Vl instanceof Kh?(this.Vl._a={eu:Of.bind(null,n),nu:Tf.bind(null,n),su:Pf.bind(null,n),Uo:Sf.bind(null,n),tu:Cf.bind(null,n)},[4,this.Vl.start()]):[3,3];case 2:i.sent(),i.label=3;case 3:return[4,this.persistence.Ro(function(t){return Object(Lo.b)(r,void 0,void 0,function(){return Object(Lo.d)(this,function(e){switch(e.label){case 0:return[4,Ef(this.Yl._a,t)];case 1:return e.sent(),this.Gl&&(t&&!this.Gl.Er?this.Gl.start(this.bh):t||this.Gl.stop()),[2]}})})})];case 4:return i.sent(),[2]}})})},e.prototype.Wl=function(t){var e=rd();if(!Kh.Kn(e))throw new ns(es.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");var n=hh(t.yu.t,t.yu.persistenceKey);return new Kh(e,t._s,n,t.clientId,t.Jl)},e}(jf),Df=function(){function t(){}return t.prototype.initialize=function(t,e){return Object(Lo.b)(this,void 0,void 0,function(){var n=this;return Object(Lo.d)(this,function(r){switch(r.label){case 0:return this.bh?[3,2]:(this.bh=t.bh,this.Vl=t.Vl,this.Sh=this.Xl(e),this.yl=this.Zl(e),this.gl=this.t_(e),this._a=this.e_(e,!t.synchronizeTabs),this.Vl.fa=function(t){return sf(n._a,t,1)},this.yl.Dh.n_=vf.bind(null,this._a),[4,Dd(this.yl,this._a.Ml)]);case 1:r.sent(),r.label=2;case 2:return[2]}})})},t.prototype.t_=function(t){return new Ud},t.prototype.Xl=function(t){var e=od(t.yu.t),n=new nd(t.yu);return function(t,e,n){return new ld(t,e,n)}(t.credentials,n,e)},t.prototype.Zl=function(t){var e,n,r,i,o,s=this;return e=this.bh,n=this.Sh,r=t._s,i=function(t){return sf(s._a,t,0)},o=Jh.Kn()?new Jh:new Zh,new dd(e,n,r,i,o)},t.prototype.e_=function(t,e){return function(t,e,n,r,i,o,s){var a=new Jd(t,e,n,r,i,o);return s&&(a.kl=!0),a}(this.bh,this.yl,this.gl,this.Vl,t.Jl,t.pl,e)},t.prototype.terminate=function(){return function(t){return Object(Lo.b)(this,void 0,void 0,function(){var e;return Object(Lo.d)(this,function(n){switch(n.label){case 0:return e=Yo(t),Ho("RemoteStore","RemoteStore shutting down."),e.Nh.add(5),[4,pd(e)];case 1:return n.sent(),e.Fh.ko(),e.Oh.set("Unknown"),[2]}})})}(this.yl)},t}(),Mf=function(){function t(t){this.observer=t,this.muted=!1}return t.prototype.next=function(t){this.observer.next&&this.s_(this.observer.next,t)},t.prototype.error=function(t){this.observer.error?this.s_(this.observer.error,t):console.error("Uncaught Error in snapshot listener:",t)},t.prototype.i_=function(){this.muted=!0},t.prototype.s_=function(t,e){var n=this;this.muted||setTimeout(function(){n.muted||t(e)},0)},t}(),Lf=(function(){function t(t,e){var n=this;this.r_=t,this.Qt=e,this.metadata=new Sc,this.buffer=new Uint8Array,this.o_=new TextDecoder("utf-8"),this.c_().then(function(t){t&&t.sl()?n.metadata.resolve(t.payload.metadata):n.metadata.reject(new Error("The first element of the bundle is not a metadata, it is\n             "+JSON.stringify(null==t?void 0:t.payload)))},function(t){return n.metadata.reject(t)})}t.prototype.close=function(){return this.r_.cancel()},t.prototype.getMetadata=function(){return Object(Lo.b)(this,void 0,void 0,function(){return Object(Lo.d)(this,function(t){return[2,this.metadata.promise]})})},t.prototype.Ql=function(){return Object(Lo.b)(this,void 0,void 0,function(){return Object(Lo.d)(this,function(t){switch(t.label){case 0:return[4,this.getMetadata()];case 1:return[2,(t.sent(),this.c_())]}})})},t.prototype.c_=function(){return Object(Lo.b)(this,void 0,void 0,function(){var t,e,n,r;return Object(Lo.d)(this,function(i){switch(i.label){case 0:return[4,this.a_()];case 1:return null===(t=i.sent())?[2,null]:(e=this.o_.decode(t),n=Number(e),isNaN(n)&&this.u_("length string ("+e+") is not valid number"),[4,this.h_(n)]);case 2:return r=i.sent(),[2,new Gd(JSON.parse(r),t.length+n)]}})})},t.prototype.l_=function(){return this.buffer.findIndex(function(t){return t==="{".charCodeAt(0)})},t.prototype.a_=function(){return Object(Lo.b)(this,void 0,void 0,function(){var t,e;return Object(Lo.d)(this,function(n){switch(n.label){case 0:return this.l_()<0?[4,this.__()]:[3,3];case 1:if(n.sent())return[3,3];n.label=2;case 2:return[3,0];case 3:return 0===this.buffer.length?[2,null]:((t=this.l_())<0&&this.u_("Reached the end of bundle when a length string is expected."),e=this.buffer.slice(0,t),[2,(this.buffer=this.buffer.slice(t),e)])}})})},t.prototype.h_=function(t){return Object(Lo.b)(this,void 0,void 0,function(){var e;return Object(Lo.d)(this,function(n){switch(n.label){case 0:return this.buffer.length<t?[4,this.__()]:[3,3];case 1:n.sent()&&this.u_("Reached the end of bundle when more is expected."),n.label=2;case 2:return[3,0];case 3:return e=this.o_.decode(this.buffer.slice(0,t)),[2,(this.buffer=this.buffer.slice(t),e)]}})})},t.prototype.u_=function(t){throw this.r_.cancel(),new Error("Invalid bundle format: "+t)},t.prototype.__=function(){return Object(Lo.b)(this,void 0,void 0,function(){var t,e;return Object(Lo.d)(this,function(n){switch(n.label){case 0:return[4,this.r_.read()];case 1:return(t=n.sent()).done||((e=new Uint8Array(this.buffer.length+t.value.length)).set(this.buffer),e.set(t.value,this.buffer.length),this.buffer=e),[2,t.done]}})})}}(),function(){function t(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=0;n<t.length;++n)if(0===t[n].length)throw new ns(es.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this.f_=new ms(t)}return t.prototype.isEqual=function(t){return this.f_.isEqual(t.f_)},t}()),Ff=function(t){this._methodName=t},Uf=function(t){this.d_=t};function Vf(t,e,n){if(!n)throw new ns(es.INVALID_ARGUMENT,"Function "+t+"() cannot be called with an empty "+e+".")}function Qf(t,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new ns(es.INVALID_ARGUMENT,"Invalid options passed to function "+t+'(): You cannot specify both "merge" and "mergeFields".');return e}function Hf(t,e,n,r){if(!0===e&&!0===r)throw new ns(es.INVALID_ARGUMENT,t+" and "+n+" cannot be used together.")}function qf(t){if(!ys.wt(t))throw new ns(es.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+t+" has "+t.length+".")}function Bf(t){if(ys.wt(t))throw new ns(es.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but "+t+" has "+t.length+".")}function zf(t){if(void 0===t)return"undefined";if(null===t)return"null";if("string"==typeof t)return t.length>20&&(t=t.substring(0,20)+"..."),JSON.stringify(t);if("number"==typeof t||"boolean"==typeof t)return""+t;if("object"==typeof t){if(t instanceof Array)return"an array";var e=function(t){if(t.constructor){var e=/function\s+([^\s(]+)\s*\(/.exec(t.constructor.toString());if(e&&e.length>1)return e[1]}return null}(t);return e?"a custom "+e+" object":"an object"}return"function"==typeof t?"a function":Go()}function Gf(t,e){if("_delegate"in t&&(t=t.d_),!(t instanceof e)){if(e.name===t.constructor.name)throw new ns(es.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");var n=zf(t);throw new ns(es.INVALID_ARGUMENT,"Expected type '"+e.name+"', but it was: "+n)}return t}function Wf(t,e){if(e<=0)throw new ns(es.INVALID_ARGUMENT,"Function "+t+"() requires a positive number, but it was: "+e+".")}var Yf=function(){function t(t){var e;if(void 0===t.host){if(void 0!==t.ssl)throw new ns(es.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=null===(e=t.ssl)||void 0===e||e;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,void 0===t.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new ns(es.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,Hf("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling)}return t.prototype.isEqual=function(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties},t}(),$f=new Map,Kf=function(){function t(t,e){this.w_="(lite)",this.E_=new Yf({}),this.T_=!1,t instanceof Uo?(this.I_=t,this.m_=new ss):(this.A_=t,this.I_=function(t){if(!Object.prototype.hasOwnProperty.apply(t.options,["projectId"]))throw new ns(es.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Uo(t.options.projectId)}(t),this.m_=new as(e))}return Object.defineProperty(t.prototype,"app",{get:function(){if(!this.A_)throw new ns(es.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this.A_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"R_",{get:function(){return this.T_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"P_",{get:function(){return void 0!==this.y_},enumerable:!1,configurable:!0}),t.prototype.g_=function(t){if(this.T_)throw new ns(es.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this.E_=new Yf(t),void 0!==t.credentials&&(this.m_=function(t){if(!t)return new ss;switch(t.type){case"gapi":var e=t.client;return Wo(!("object"!=typeof e||null===e||!e.auth||!e.auth.getAuthHeaderValueForFirstParty)),new cs(e,t.sessionIndex||"0");case"provider":return t.client;default:throw new ns(es.INVALID_ARGUMENT,"makeCredentialsProvider failed due to invalid credential type")}}(t.credentials))},t.prototype.V_=function(){return this.E_},t.prototype.p_=function(){return this.T_=!0,this.E_},t.prototype._delete=function(){return this.y_||(this.y_=this.b_()),this.y_},t.prototype.toJSON=function(){return{app:this.A_,t:this.I_,settings:this.E_}},t.prototype.b_=function(){return(t=$f.get(this))&&(Ho("ComponentProvider","Removing Datastore"),$f.delete(this),t.terminate()),Promise.resolve();var t},t}(),Xf=function(){function t(t,e,n){this.v_=e,this.S_=n,this.type="document",this.firestore=t}return Object.defineProperty(t.prototype,"D_",{get:function(){return this.S_.path},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"id",{get:function(){return this.S_.path.tt()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"path",{get:function(){return this.S_.path.rt()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){return new Jf(this.firestore,this.v_,this.S_.path.X())},enumerable:!1,configurable:!0}),t.prototype.withConverter=function(e){return new t(this.firestore,e,this.S_)},t}(),Zf=function(){function t(t,e,n){this.v_=e,this.C_=n,this.type="query",this.firestore=t}return t.prototype.withConverter=function(e){return new t(this.firestore,e,this.C_)},t}(),Jf=function(t){function e(e,n,r){var i=this;return(i=t.call(this,e,n,_a(r))||this).firestore=e,i.D_=r,i.type="collection",i}return Object(Lo.c)(e,t),Object.defineProperty(e.prototype,"id",{get:function(){return this.C_.path.tt()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this.C_.path.rt()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){var t=this.D_.X();return t.et()?null:new Xf(this.firestore,null,new ys(t))},enumerable:!1,configurable:!0}),e.prototype.withConverter=function(t){return new e(this.firestore,t,this.D_)},e}(Zf);function tp(t,e){for(var n,r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];if(t instanceof Uf&&(t=t.d_),Vf("collection","path",e),t instanceof Kf)return Bf(n=ps.ot.apply(ps,Object(Lo.g)([e],r))),new Jf(t,null,n);if(!(t instanceof Xf||t instanceof Jf))throw new ns(es.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");return Bf(n=ps.ot.apply(ps,Object(Lo.g)([t.path],r)).child(ps.ot(e))),new Jf(t.firestore,null,n)}function ep(t,e){for(var n,r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];if(t instanceof Uf&&(t=t.d_),1===arguments.length&&(e=Ko.u()),Vf("doc","path",e),t instanceof Kf)return qf(n=ps.ot.apply(ps,Object(Lo.g)([e],r))),new Xf(t,null,new ys(n));if(!(t instanceof Xf||t instanceof Jf))throw new ns(es.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");return qf(n=t.D_.child(ps.ot.apply(ps,Object(Lo.g)([e],r)))),new Xf(t.firestore,t instanceof Jf?t.v_:null,new ys(n))}function np(t,e){return t instanceof Uf&&(t=t.d_),e instanceof Uf&&(e=e.d_),(t instanceof Xf||t instanceof Jf)&&(e instanceof Xf||e instanceof Jf)&&t.firestore===e.firestore&&t.path===e.path&&t.v_===e.v_}function rp(t,e){return t instanceof Uf&&(t=t.d_),e instanceof Uf&&(e=e.d_),t instanceof Zf&&e instanceof Zf&&t.firestore===e.firestore&&Pa(t.C_,e.C_)&&t.v_===e.v_}var ip=function(){function t(t,e){if(!isFinite(t)||t<-90||t>90)throw new ns(es.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(e)||e<-180||e>180)throw new ns(es.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this.x_=t,this.N_=e}return Object.defineProperty(t.prototype,"latitude",{get:function(){return this.x_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"longitude",{get:function(){return this.N_},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){return this.x_===t.x_&&this.N_===t.N_},t.prototype.toJSON=function(){return{latitude:this.x_,longitude:this.N_}},t.prototype.U=function(t){return Xo(this.x_,t.x_)||Xo(this.N_,t.N_)},t}(),op=/^__.*__$/,sp=function(){function t(t,e,n){this.data=t,this.Gt=e,this.fieldTransforms=n}return t.prototype.F_=function(t,e){return null!==this.Gt?new uu(t,this.data,this.Gt,e,this.fieldTransforms):new au(t,this.data,e,this.fieldTransforms)},t}(),ap=function(){function t(t,e,n){this.data=t,this.Gt=e,this.fieldTransforms=n}return t.prototype.F_=function(t,e){return new uu(t,this.data,this.Gt,e,this.fieldTransforms)},t}();function up(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Go()}}var cp=function(){function t(t,e,n,r,i,o){this.settings=t,this.t=e,this.Qt=n,this.ignoreUndefinedProperties=r,void 0===i&&this.O_(),this.fieldTransforms=i||[],this.Gt=o||[]}return Object.defineProperty(t.prototype,"path",{get:function(){return this.settings.path},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"k_",{get:function(){return this.settings.k_},enumerable:!1,configurable:!0}),t.prototype.M_=function(e){return new t(Object.assign(Object.assign({},this.settings),e),this.t,this.Qt,this.ignoreUndefinedProperties,this.fieldTransforms,this.Gt)},t.prototype.L_=function(t){var e,n=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.M_({path:n,B_:!1});return r.q_(t),r},t.prototype.U_=function(t){var e,n=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.M_({path:n,B_:!1});return r.O_(),r},t.prototype.Q_=function(t){return this.M_({path:void 0,B_:!0})},t.prototype.K_=function(t){return Pp(t,this.settings.methodName,this.settings.W_||!1,this.path,this.settings.j_)},t.prototype.contains=function(t){return void 0!==this.Gt.find(function(e){return t.nt(e)})||void 0!==this.fieldTransforms.find(function(e){return t.nt(e.field)})},t.prototype.O_=function(){if(this.path)for(var t=0;t<this.path.length;t++)this.q_(this.path.get(t))},t.prototype.q_=function(t){if(0===t.length)throw this.K_("Document fields must not be empty");if(up(this.k_)&&op.test(t))throw this.K_('Document fields cannot begin and end with "__"')},t}(),lp=function(){function t(t,e,n){this.t=t,this.ignoreUndefinedProperties=e,this.Qt=n||od(t)}return t.prototype.G_=function(t,e,n,r){return void 0===r&&(r=!1),new cp({k_:t,methodName:e,j_:n,path:ms.ct(),B_:!1,W_:r},this.t,this.Qt,this.ignoreUndefinedProperties)},t}();function hp(t){var e=t.p_(),n=od(t.I_);return new lp(t.I_,!!e.ignoreUndefinedProperties,n)}function dp(t,e,n,r,i,o){void 0===o&&(o={});var s=t.G_(o.merge||o.mergeFields?2:0,e,n,i);xp("Data must be an object, but it was:",s,r);var a,u,c=Op(r,s);if(o.merge)a=new ws(s.Gt),u=s.fieldTransforms;else if(o.mergeFields){for(var l=[],h=0,d=o.mergeFields;h<d.length;h++){var f=Ip(e,d[h],n);if(!s.contains(f))throw new ns(es.INVALID_ARGUMENT,"Field '"+f+"' is specified in your field mask but missing from your input data.");Rp(l,f)||l.push(f)}a=new ws(l),u=s.fieldTransforms.filter(function(t){return a.Tt(t.field)})}else a=null,u=s.fieldTransforms;return new sp(new zs(c),a,u)}var fp=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(Lo.c)(e,t),e.prototype.z_=function(t){if(2!==t.k_)throw t.K_(1===t.k_?this._methodName+"() can only appear at the top level of your update data":this._methodName+"() cannot be used with set() unless you pass {merge:true}");return t.Gt.push(t.path),null},e.prototype.isEqual=function(t){return t instanceof e},e}(Ff);function pp(t,e,n){return new cp({k_:3,j_:e.settings.j_,methodName:t._methodName,B_:n},e.t,e.Qt,e.ignoreUndefinedProperties)}var gp=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(Lo.c)(e,t),e.prototype.z_=function(t){return new Xa(t.path,new qa)},e.prototype.isEqual=function(t){return t instanceof e},e}(Ff),mp=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).H_=n,r}return Object(Lo.c)(e,t),e.prototype.z_=function(t){var e=pp(this,t,!0),n=this.H_.map(function(t){return Cp(t,e)}),r=new Ba(n);return new Xa(t.path,r)},e.prototype.isEqual=function(t){return this===t},e}(Ff),yp=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).H_=n,r}return Object(Lo.c)(e,t),e.prototype.z_=function(t){var e=pp(this,t,!0),n=this.H_.map(function(t){return Cp(t,e)}),r=new Ga(n);return new Xa(t.path,r)},e.prototype.isEqual=function(t){return this===t},e}(Ff),bp=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).J_=n,r}return Object(Lo.c)(e,t),e.prototype.z_=function(t){var e=new Ya(t.Qt,Fa(t.Qt,this.J_));return new Xa(t.path,e)},e.prototype.isEqual=function(t){return this===t},e}(Ff);function vp(t,e,n,r){var i=t.G_(1,e,n);xp("Data must be an object, but it was:",i,r);var o=[],s=new Gs;vs(r,function(t,r){var a=Tp(e,t,n);r instanceof Uf&&(r=r.d_);var u=i.U_(a);if(r instanceof fp)o.push(a);else{var c=Cp(r,u);null!=c&&(o.push(a),s.set(a,c))}});var a=new ws(o);return new ap(s.Pt(),a,i.fieldTransforms)}function _p(t,e,n,r,i,o){var s=t.G_(1,e,n),a=[Ip(e,r,n)],u=[i];if(o.length%2!=0)throw new ns(es.INVALID_ARGUMENT,"Function "+e+"() needs to be called with an even number of arguments that alternate between field names and values.");for(var c=0;c<o.length;c+=2)a.push(Ip(e,o[c])),u.push(o[c+1]);for(var l=[],h=new Gs,d=a.length-1;d>=0;--d)if(!Rp(l,a[d])){var f=a[d],p=u[d];p instanceof Uf&&(p=p.d_);var g=s.U_(f);if(p instanceof fp)l.push(f);else{var m=Cp(p,g);null!=m&&(l.push(f),h.set(f,m))}}var y=new ws(l);return new ap(h.Pt(),y,s.fieldTransforms)}function wp(t,e,n,r){return void 0===r&&(r=!1),Cp(n,t.G_(r?4:3,e))}function Cp(t,e){if(t instanceof Uf&&(t=t.d_),Ep(t))return xp("Unsupported field value:",e,t),Op(t,e);if(t instanceof Ff)return function(t,e){if(!up(e.k_))throw e.K_(t._methodName+"() can only be used with update() and set()");if(!e.path)throw e.K_(t._methodName+"() is not currently supported inside arrays");var n=t.z_(e);n&&e.fieldTransforms.push(n)}(t,e),null;if(void 0===t&&e.ignoreUndefinedProperties)return null;if(e.path&&e.Gt.push(e.path),t instanceof Array){if(e.settings.B_&&4!==e.k_)throw e.K_("Nested arrays are not supported");return function(t,e){for(var n=[],r=0,i=0,o=t;i<o.length;i++){var s=Cp(o[i],e.Q_(r));null==s&&(s={nullValue:"NULL_VALUE"}),n.push(s),r++}return{arrayValue:{values:n}}}(t,e)}return function(t,e){if(t instanceof Uf&&(t=t.d_),null===t)return{nullValue:"NULL_VALUE"};if("number"==typeof t)return Fa(e.Qt,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){var n=hs.fromDate(t);return{timestampValue:Xu(e.Qt,n)}}if(t instanceof hs)return n=new hs(t.seconds,1e3*Math.floor(t.nanoseconds/1e3)),{timestampValue:Xu(e.Qt,n)};if(t instanceof ip)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof rs)return{bytesValue:Zu(e.Qt,t.I)};if(t instanceof Xf){var r=t.firestore.I_;if(!r.isEqual(n=e.t))throw e.K_("Document reference is for database "+r.projectId+"/"+r.database+" but should be for database "+n.projectId+"/"+n.database);return{referenceValue:ec(t.firestore.I_||e.t,t.S_.path)}}throw e.K_("Unsupported field value: "+zf(t))}(t,e)}function Op(t,e){var n={};return _s(t)?e.path&&e.path.length>0&&e.Gt.push(e.path):vs(t,function(t,r){var i=Cp(r,e.L_(t));null!=i&&(n[t]=i)}),{mapValue:{fields:n}}}function Ep(t){return!("object"!=typeof t||null===t||t instanceof Array||t instanceof Date||t instanceof hs||t instanceof ip||t instanceof rs||t instanceof Xf||t instanceof Ff)}function xp(t,e,n){if(!Ep(n)||!function(t){return"object"==typeof t&&null!==t&&(Object.getPrototypeOf(t)===Object.prototype||null===Object.getPrototypeOf(t))}(n)){var r=zf(n);throw e.K_("an object"===r?t+" a custom object":t+" "+r)}}function Ip(t,e,n){if(e instanceof Uf&&(e=e.d_),e instanceof Lf)return e.f_;if("string"==typeof e)return Tp(t,e);throw Pp("Field path arguments must be of type string or FieldPath.",t,!1,void 0,n)}var Sp=new RegExp("[~\\*/\\[\\]]");function Tp(t,e,n){if(e.search(Sp)>=0)throw Pp("Invalid field path ("+e+"). Paths must not contain '~', '*', '/', '[', or ']'",t,!1,void 0,n);try{return(new(Lf.bind.apply(Lf,Object(Lo.g)([void 0],e.split("."))))).f_}catch(r){throw Pp("Invalid field path ("+e+"). Paths must not be empty, begin with '.', end with '.', or contain '..'",t,!1,void 0,n)}}function Pp(t,e,n,r,i){var o=r&&!r.et(),s=void 0!==i,a="Function "+e+"() called with invalid data";n&&(a+=" (via `toFirestore()`)");var u="";return(o||s)&&(u+=" (found",o&&(u+=" in field "+r),s&&(u+=" in document "+i),u+=")"),new ns(es.INVALID_ARGUMENT,(a+=". ")+t+u)}function Rp(t,e){return t.some(function(t){return t.isEqual(e)})}var Ap=function(){function t(t){this.Sh=t,this.Y_=new Map,this.mutations=[],this.X_=!1,this.Z_=null,this.tf=new Set}return t.prototype.ef=function(t){return Object(Lo.b)(this,void 0,void 0,function(){var e,n=this;return Object(Lo.d)(this,function(r){switch(r.label){case 0:if(this.nf(),this.mutations.length>0)throw new ns(es.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");return[4,function(t,e){return Object(Lo.b)(this,void 0,void 0,function(){var n,r,i,o,s,a;return Object(Lo.d)(this,function(u){switch(u.label){case 0:return n=Yo(t),r=ac(n.Qt)+"/documents",i={documents:e.map(function(t){return rc(n.Qt,t)})},[4,n.Du("BatchGetDocuments",r,i)];case 1:return o=u.sent(),s=new Map,o.forEach(function(t){var e=function(t,e){return"found"in e?function(t,e){Wo(!!e.found);var n=ic(t,e.found.name),r=tc(e.found.updateTime),i=new zs({mapValue:{fields:e.found.fields}});return new $s(n,r,i,{})}(t,e):"missing"in e?function(t,e){Wo(!!e.missing),Wo(!!e.readTime);var n=ic(t,e.missing),r=tc(e.readTime);return new Ks(n,r)}(t,e):Go()}(n.Qt,t);s.set(e.key.toString(),e)}),a=[],[2,(e.forEach(function(t){var e=s.get(t.toString());Wo(!!e),a.push(e)}),a)]}})})}(this.Sh,t)];case 1:return[2,((e=r.sent()).forEach(function(t){t instanceof Ks||t instanceof $s?n.sf(t):Go()}),e)]}})})},t.prototype.set=function(t,e){this.write(e.F_(t,this.jt(t))),this.tf.add(t.toString())},t.prototype.update=function(t,e){try{this.write(e.F_(t,this.rf(t)))}catch(t){this.Z_=t}this.tf.add(t.toString())},t.prototype.delete=function(t){this.write(new gu(t,this.jt(t))),this.tf.add(t.toString())},t.prototype.commit=function(){return Object(Lo.b)(this,void 0,void 0,function(){var t,e=this;return Object(Lo.d)(this,function(n){switch(n.label){case 0:if(this.nf(),this.Z_)throw this.Z_;return t=this.Y_,this.mutations.forEach(function(e){t.delete(e.key.toString())}),t.forEach(function(t,n){var r=ys._t(n);e.mutations.push(new mu(r,e.jt(r)))}),[4,function(t,e){return Object(Lo.b)(this,void 0,void 0,function(){var n,r,i;return Object(Lo.d)(this,function(o){switch(o.label){case 0:return n=Yo(t),r=ac(n.Qt)+"/documents",i={writes:e.map(function(t){return hc(n.Qt,t)})},[4,n.pu("Commit",r,i)];case 1:return o.sent(),[2]}})})}(this.Sh,this.mutations)];case 1:return n.sent(),this.X_=!0,[2]}})})},t.prototype.sf=function(t){var e;if(t instanceof $s)e=t.version;else{if(!(t instanceof Ks))throw Go();e=ds.min()}var n=this.Y_.get(t.key.toString());if(n){if(!e.isEqual(n))throw new ns(es.ABORTED,"Document version changed between two reads.")}else this.Y_.set(t.key.toString(),e)},t.prototype.jt=function(t){var e=this.Y_.get(t.toString());return!this.tf.has(t.toString())&&e?Ja.updateTime(e):Ja.Kt()},t.prototype.rf=function(t){var e=this.Y_.get(t.toString());if(!this.tf.has(t.toString())&&e){if(e.isEqual(ds.min()))throw new ns(es.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Ja.updateTime(e)}return Ja.exists(!0)},t.prototype.write=function(t){this.nf(),this.mutations.push(t)},t.prototype.nf=function(){},t}(),kp=function(){function t(t,e,n,r){this._s=t,this.Sh=e,this.updateFunction=n,this.Es=r,this.cf=5,this.Gu=new sd(this._s,"transaction_retry")}return t.prototype.run=function(){this.af()},t.prototype.af=function(){var t=this;this.Gu.Lu(function(){return Object(Lo.b)(t,void 0,void 0,function(){var t,e,n=this;return Object(Lo.d)(this,function(r){return t=new Ap(this.Sh),(e=this.uf(t))&&e.then(function(e){n._s.Ps(function(){return t.commit().then(function(){n.Es.resolve(e)}).catch(function(t){n.hf(t)})})}).catch(function(t){n.hf(t)}),[2]})})})},t.prototype.uf=function(t){try{var e=this.updateFunction(t);return!Ps(e)&&e.catch&&e.then?e:(this.Es.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.Es.reject(t),null}},t.prototype.hf=function(t){var e=this;this.cf>0&&this.lf(t)?(this.cf-=1,this._s.Ps(function(){return e.af(),Promise.resolve()})):this.Es.reject(t)},t.prototype.lf=function(t){if("FirebaseError"===t.name){var e=t.code;return"aborted"===e||"failed-precondition"===e||!bu(e)}return!1},t}(),jp=function(){function t(t,e,n){var r=this;this.credentials=t,this._s=e,this.yu=n,this.user=is.UNAUTHENTICATED,this.clientId=Ko.u(),this._f=function(){},this.C=new Sc,this.credentials.v(function(t){Ho("FirestoreClient","Received user=",t.uid),r.user=t,r._f(t),r.C.resolve()})}return t.prototype.getConfiguration=function(){return Object(Lo.b)(this,void 0,void 0,function(){return Object(Lo.d)(this,function(t){switch(t.label){case 0:return[4,this.C.promise];case 1:return[2,(t.sent(),{_s:this._s,yu:this.yu,clientId:this.clientId,credentials:this.credentials,Jl:this.user,pl:100})]}})})},t.prototype.ff=function(t){var e=this;this._f=t,this.C.promise.then(function(){return e._f(e.user)})},t.prototype.df=function(){if(this._s.wf)throw new ns(es.FAILED_PRECONDITION,"The client has already been terminated.")},t.prototype.terminate=function(){var t=this;this._s.Ef();var e=new Sc;return this._s.Tf(function(){return Object(Lo.b)(t,void 0,void 0,function(){var t,n;return Object(Lo.d)(this,function(r){switch(r.label){case 0:return r.trys.push([0,5,,6]),this.If?[4,this.If.terminate()]:[3,2];case 1:r.sent(),r.label=2;case 2:return this.mf?[4,this.mf.terminate()]:[3,4];case 3:r.sent(),r.label=4;case 4:return this.credentials.S(),e.resolve(),[3,6];case 5:return t=r.sent(),n=Uc(t,"Failed to shutdown persistence"),e.reject(n),[3,6];case 6:return[2]}})})}),e.promise},t}();function Np(t,e){return Object(Lo.b)(this,void 0,void 0,function(){var n,r,i=this;return Object(Lo.d)(this,function(o){switch(o.label){case 0:return t._s.Af(),Ho("FirestoreClient","Initializing OfflineComponentProvider"),[4,t.getConfiguration()];case 1:return n=o.sent(),[4,e.initialize(n)];case 2:return o.sent(),r=n.Jl,t.ff(function(n){r.isEqual(n)||(r=n,t._s.po(function(){return Object(Lo.b)(i,void 0,void 0,function(){return Object(Lo.d)(this,function(t){switch(t.label){case 0:return[4,bh(e.bh,n)];case 1:return t.sent(),[2]}})})}))}),e.persistence.Po(function(){return t.terminate()}),t.mf=e,[2]}})})}function Dp(t,e){return Object(Lo.b)(this,void 0,void 0,function(){var n,r;return Object(Lo.d)(this,function(i){switch(i.label){case 0:return t._s.Af(),[4,Mp(t)];case 1:return n=i.sent(),Ho("FirestoreClient","Initializing OnlineComponentProvider"),[4,t.getConfiguration()];case 2:return r=i.sent(),[4,e.initialize(n,r)];case 3:return i.sent(),t.ff(function(n){return t._s.po(function(){return function(t,e){return Object(Lo.b)(this,void 0,void 0,function(){var n,r;return Object(Lo.d)(this,function(i){switch(i.label){case 0:return(n=Yo(t))._s.Af(),Ho("RemoteStore","RemoteStore received new credentials"),r=wd(n),n.Nh.add(3),[4,pd(n)];case 1:return i.sent(),r&&n.Oh.set("Unknown"),[4,n.Dh.n_(e)];case 2:return i.sent(),n.Nh.delete(3),[4,fd(n)];case 3:return i.sent(),[2]}})})}(e.yl,n)})}),t.If=e,[2]}})})}function Mp(t){return Object(Lo.b)(this,void 0,void 0,function(){return Object(Lo.d)(this,function(e){switch(e.label){case 0:return t.mf?[3,2]:(Ho("FirestoreClient","Using default OfflineComponentProvider"),[4,Np(t,new kf)]);case 1:e.sent(),e.label=2;case 2:return[2,t.mf]}})})}function Lp(t){return Object(Lo.b)(this,void 0,void 0,function(){return Object(Lo.d)(this,function(e){switch(e.label){case 0:return t.If?[3,2]:(Ho("FirestoreClient","Using default OnlineComponentProvider"),[4,Dp(t,new Df)]);case 1:e.sent(),e.label=2;case 2:return[2,t.If]}})})}function Fp(t){return Mp(t).then(function(t){return t.persistence})}function Up(t){return Mp(t).then(function(t){return t.bh})}function Vp(t){return Lp(t).then(function(t){return t.yl})}function Qp(t){return Lp(t).then(function(t){return t._a})}function Hp(t){return Object(Lo.b)(this,void 0,void 0,function(){var e,n;return Object(Lo.d)(this,function(r){switch(r.label){case 0:return[4,Lp(t)];case 1:return e=r.sent(),[2,((n=e.gl).jh=tf.bind(null,e._a),n.Hh=nf.bind(null,e._a),n)]}})})}function qp(t,e,n){var r=this;void 0===n&&(n={});var i=new Sc;return t._s.Ps(function(){return Object(Lo.b)(r,void 0,void 0,function(){var r;return Object(Lo.d)(this,function(o){switch(o.label){case 0:return r=function(t,e,n,r,i){var o=new Mf({next:function(o){e.Ps(function(){return Qd(t,s)});var a=o.docs.has(n);!a&&o.fromCache?i.reject(new ns(es.UNAVAILABLE,"Failed to get document because the client is offline.")):a&&o.fromCache&&r&&"server"===r.source?i.reject(new ns(es.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(o)},error:function(t){return i.reject(t)}}),s=new zd(_a(n.path),o,{includeMetadataChanges:!0,nl:!0});return Vd(t,s)},[4,Hp(t)];case 1:return[2,r.apply(void 0,[o.sent(),t._s,e,n,i])]}})})}),i.promise}function Bp(t,e,n){var r=this;void 0===n&&(n={});var i=new Sc;return t._s.Ps(function(){return Object(Lo.b)(r,void 0,void 0,function(){var r;return Object(Lo.d)(this,function(o){switch(o.label){case 0:return r=function(t,e,n,r,i){var o=new Mf({next:function(n){e.Ps(function(){return Qd(t,s)}),n.fromCache&&"server"===r.source?i.reject(new ns(es.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:function(t){return i.reject(t)}}),s=new zd(n,o,{includeMetadataChanges:!0,nl:!0});return Vd(t,s)},[4,Hp(t)];case 1:return[2,r.apply(void 0,[o.sent(),t._s,e,n,i])]}})})}),i.promise}var zp=function(){function t(){var t=this;this.Rf=Promise.resolve(),this.Pf=[],this.yf=!1,this.gf=[],this.Vf=null,this.pf=!1,this.bf=[],this.Gu=new sd(this,"async_queue_retry"),this.vf=function(){var e=id();e&&Ho("AsyncQueue","Visibility state changed to "+e.visibilityState),t.Gu.qu()};var e=id();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.vf)}return Object.defineProperty(t.prototype,"wf",{get:function(){return this.yf},enumerable:!1,configurable:!0}),t.prototype.Ps=function(t){this.enqueue(t)},t.prototype.Tf=function(t){this.Sf(),this.Df(t)},t.prototype.Ef=function(){if(!this.yf){this.yf=!0;var t=id();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.vf)}},t.prototype.enqueue=function(t){return this.Sf(),this.yf?new Promise(function(t){}):this.Df(t)},t.prototype.po=function(t){var e=this;this.Ps(function(){return e.Pf.push(t),e.Cf()})},t.prototype.Cf=function(){return Object(Lo.b)(this,void 0,void 0,function(){var t,e=this;return Object(Lo.d)(this,function(n){switch(n.label){case 0:if(0===this.Pf.length)return[3,5];n.label=1;case 1:return n.trys.push([1,3,,4]),[4,this.Pf[0]()];case 2:return n.sent(),this.Pf.shift(),this.Gu.reset(),[3,4];case 3:if(!jc(t=n.sent()))throw t;return Ho("AsyncQueue","Operation failed with retryable error: "+t),[3,4];case 4:this.Pf.length>0&&this.Gu.Lu(function(){return e.Cf()}),n.label=5;case 5:return[2]}})})},t.prototype.Df=function(t){var e=this,n=this.Rf.then(function(){return e.pf=!0,t().catch(function(t){throw e.Vf=t,e.pf=!1,qo("INTERNAL UNHANDLED ERROR: ",function(t){var e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+"\n"+t.stack),e}(t)),t}).then(function(t){return e.pf=!1,t})});return this.Rf=n,n},t.prototype.Tr=function(t,e,n){var r=this;this.Sf(),this.bf.indexOf(t)>-1&&(e=0);var i=Fc.Ts(this,t,e,n,function(t){return r.xf(t)});return this.gf.push(i),i},t.prototype.Sf=function(){this.Vf&&Go()},t.prototype.Af=function(){},t.prototype.Nf=function(){return Object(Lo.b)(this,void 0,void 0,function(){var t;return Object(Lo.d)(this,function(e){switch(e.label){case 0:return[4,t=this.Rf];case 1:e.sent(),e.label=2;case 2:if(t!==this.Rf)return[3,0];e.label=3;case 3:return[2]}})})},t.prototype.$f=function(t){for(var e=0,n=this.gf;e<n.length;e++)if(n[e].fs===t)return!0;return!1},t.prototype.Ff=function(t){var e=this;return this.Nf().then(function(){e.gf.sort(function(t,e){return t.ds-e.ds});for(var n=0,r=e.gf;n<r.length;n++){var i=r[n];if(i.Rs(),"all"!==t&&i.fs===t)break}return e.Nf()})},t.prototype.Of=function(t){this.bf.push(t)},t.prototype.xf=function(t){var e=this.gf.indexOf(t);this.gf.splice(e,1)},t}();function Gp(t){return function(t,e){if("object"!=typeof t||null===t)return!1;for(var n=t,r=0,i=["next","error","complete"];r<i.length;r++){var o=i[r];if(o in n&&"function"==typeof n[o])return!0}return!1}(t)}!function(){function t(){this.kf={},this.Mf=new Sc,this.Lf={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}t.prototype.onProgress=function(t,e,n){this.kf={next:t,error:e,complete:n}},t.prototype.catch=function(t){return this.Mf.promise.catch(t)},t.prototype.then=function(t,e){return this.Mf.promise.then(t,e)},t.prototype.ql=function(t){this.Ul(t),this.kf.complete&&this.kf.complete(),this.Mf.resolve(t)},t.prototype.Kl=function(t){this.Lf.taskState="Error",this.kf.next&&this.kf.next(this.Lf),this.kf.error&&this.kf.error(t),this.Mf.reject(t)},t.prototype.Ul=function(t){this.Lf=t,this.kf.next&&this.kf.next(t)}}();var Wp=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n)||this).Bf=new zp,r.w_="name"in e?e.name:"[DEFAULT]",r}return Object(Lo.c)(e,t),e.prototype.b_=function(){return this.qf||$p(this),this.qf.terminate()},e}(Kf);function Yp(t){return t.qf||$p(t),t.qf.df(),t.qf}function $p(t){var e=t.p_(),n=function(t,e,n){return new Fo(t,e,n.host,n.ssl,n.experimentalForceLongPolling,n.experimentalAutoDetectLongPolling)}(t.I_,t.w_,e);t.qf=new jp(t.m_,t.Bf,n)}function Kp(t,e,n){var r=this,i=new Sc;return t._s.enqueue(function(){return Object(Lo.b)(r,void 0,void 0,function(){var r;return Object(Lo.d)(this,function(o){switch(o.label){case 0:return o.trys.push([0,3,,4]),[4,Np(t,n)];case 1:return o.sent(),[4,Dp(t,e)];case 2:return o.sent(),i.resolve(),[3,4];case 3:if(!function(t){return"FirebaseError"===t.name?t.code===es.FAILED_PRECONDITION||t.code===es.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&t instanceof DOMException)||22===t.code||20===t.code||11===t.code}(r=o.sent()))throw r;return console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+r),i.reject(r),[3,4];case 4:return[2]}})})}).then(function(){return i.promise})}function Xp(t){if(t.R_||t.P_)throw new ns(es.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}var Zp=function(){function t(){}return t.prototype.Uf=function(t,e){switch(void 0===e&&(e="none"),ks(t)){case 0:return null;case 1:return t.booleanValue;case 2:return Es(t.integerValue||t.doubleValue);case 3:return this.Qf(t.timestampValue);case 4:return this.Kf(t,e);case 5:return t.stringValue;case 6:return this.Wf(xs(t.bytesValue));case 7:return this.jf(t.referenceValue);case 8:return this.Gf(t.geoPointValue);case 9:return this.zf(t.arrayValue,e);case 10:return this.Hf(t.mapValue,e);default:throw Go()}},t.prototype.Hf=function(t,e){var n=this,r={};return vs(t.fields||{},function(t,i){r[t]=n.Uf(i,e)}),r},t.prototype.Gf=function(t){return new ip(Es(t.latitude),Es(t.longitude))},t.prototype.zf=function(t,e){var n=this;return(t.values||[]).map(function(t){return n.Uf(t,e)})},t.prototype.Kf=function(t,e){switch(e){case"previous":var n=Ss(t);return null==n?null:this.Uf(n,e);case"estimate":return this.Qf(Ts(t));default:return null}},t.prototype.Qf=function(t){var e=Os(t);return new hs(e.seconds,e.nanos)},t.prototype.Jf=function(t,e){var n=ps.ot(t);Wo(Ic(n));var r=new Uo(n.get(1),n.get(3)),i=new ys(n.Y(5));return r.isEqual(e)||qo("Document "+i+" contains a document reference within a different database ("+r.projectId+"/"+r.database+") which is not supported. It will be treated as a reference in the current database ("+e.projectId+"/"+e.database+") instead."),i},t}(),Jp=function(){function t(t,e,n,r,i){this.Yf=t,this.Xf=e,this.S_=n,this.Zf=r,this.v_=i}return Object.defineProperty(t.prototype,"id",{get:function(){return this.S_.path.tt()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ref",{get:function(){return new Xf(this.Yf,this.v_,this.S_)},enumerable:!1,configurable:!0}),t.prototype.exists=function(){return null!==this.Zf},t.prototype.data=function(){if(this.Zf){if(this.v_){var t=new tg(this.Yf,this.Xf,this.S_,this.Zf,null);return this.v_.fromFirestore(t)}return this.Xf.Uf(this.Zf.bt())}},t.prototype.get=function(t){if(this.Zf){var e=this.Zf.data().field(eg("DocumentSnapshot.get",t));if(null!==e)return this.Xf.Uf(e)}},t}(),tg=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(Lo.c)(e,t),e.prototype.data=function(){return t.prototype.data.call(this)},e}(Jp);function eg(t,e){return"string"==typeof e?Tp(t,e):e instanceof Uf?e.d_.f_:e.f_}function ng(t){if(Ca(t)&&0===t.xt.length)throw new ns(es.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var rg=function(){};function ig(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];for(var r=0,i=e;r<i.length;r++){var o=i[r];t=o.td(t)}return t}var og=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).ed=e,i.nd=n,i.sd=r,i.type="where",i}return Object(Lo.c)(e,t),e.prototype.td=function(t){var e=hp(t.firestore),n=function(t,e,n,r,i,o,s){var a;if(i.ut()){if("array-contains"===o||"array-contains-any"===o)throw new ns(es.INVALID_ARGUMENT,"Invalid Query. You can't perform '"+o+"' queries on FieldPath.documentId().");if("in"===o||"not-in"===o){dg(s,o);for(var u=[],c=0,l=s;c<l.length;c++)u.push(hg(r,t,l[c]));a={arrayValue:{values:u}}}else a=hg(r,t,s)}else"in"!==o&&"not-in"!==o&&"array-contains-any"!==o||dg(s,o),a=wp(n,"where",s,"in"===o||"not-in"===o);var h=ra.create(i,o,a);return function(t,e){if(e.Ct()){var n=Ea(t);if(null!==n&&!n.isEqual(e.field))throw new ns(es.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '"+n.toString()+"' and '"+e.field.toString()+"'");var r=Oa(t);null!==r&&fg(0,e.field,r)}var i=function(t,e){for(var n=0,r=t.filters;n<r.length;n++){var i=r[n];if(e.indexOf(i.op)>=0)return i.op}return null}(t,function(t){switch(t){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==i)throw new ns(es.INVALID_ARGUMENT,i===e.op?"Invalid query. You cannot use more than one '"+e.op.toString()+"' filter.":"Invalid query. You cannot use '"+e.op.toString()+"' filters with '"+i.toString()+"' filters.")}(t,h),h}(t.C_,0,e,t.firestore.I_,this.ed,this.nd,this.sd);return new Zf(t.firestore,t.v_,function(t,e){var n=t.filters.concat([e]);return new ba(t.path,t.collectionGroup,t.xt.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}(t.C_,n))},e}(rg),sg=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).ed=e,r.rd=n,r.type="orderBy",r}return Object(Lo.c)(e,t),e.prototype.td=function(t){var e=function(t,e,n){if(null!==t.startAt)throw new ns(es.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==t.endAt)throw new ns(es.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");var r=new pa(e,n);return function(t,e){if(null===Oa(t)){var n=Ea(t);null!==n&&fg(0,n,e.field)}}(t,r),r}(t.C_,this.ed,this.rd);return new Zf(t.firestore,t.v_,function(t,e){var n=t.xt.concat([e]);return new ba(t.path,t.collectionGroup,n,t.filters.slice(),t.limit,t.limitType,t.startAt,t.endAt)}(t.C_,e))},e}(rg),ag=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).type=e,i.od=n,i.ad=r,i}return Object(Lo.c)(e,t),e.prototype.td=function(t){return new Zf(t.firestore,t.v_,Ta(t.C_,this.od,this.ad))},e}(rg),ug=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).type=e,i.ud=n,i.hd=r,i}return Object(Lo.c)(e,t),e.prototype.td=function(t){var e=lg(t,this.type,this.ud,this.hd);return new Zf(t.firestore,t.v_,function(t,e){return new ba(t.path,t.collectionGroup,t.xt.slice(),t.filters.slice(),t.limit,t.limitType,e,t.endAt)}(t.C_,e))},e}(rg),cg=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).type=e,i.ud=n,i.hd=r,i}return Object(Lo.c)(e,t),e.prototype.td=function(t){var e=lg(t,this.type,this.ud,this.hd);return new Zf(t.firestore,t.v_,function(t,e){return new ba(t.path,t.collectionGroup,t.xt.slice(),t.filters.slice(),t.limit,t.limitType,t.startAt,e)}(t.C_,e))},e}(rg);function lg(t,e,n,r){if(n[0]instanceof Uf&&(n[0]=n[0].d_),n[0]instanceof Jp)return function(t,e,n,r,i){if(!r)throw new ns(es.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for "+n+"().");for(var o=[],s=0,a=Ia(t);s<a.length;s++){var u=a[s];if(u.field.ut())o.push(Us(e,r.key));else{var c=r.field(u.field);if(Is(c))throw new ns(es.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+u.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===c){var l=u.field.rt();throw new ns(es.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '"+l+"' (used as the orderBy) does not exist.")}o.push(c)}}return new da(o,i)}(t.C_,t.firestore.I_,e,n[0].Zf,r);var i=hp(t.firestore);return function(t,e,n,r,i,o){var s=t.xt;if(i.length>s.length)throw new ns(es.INVALID_ARGUMENT,"Too many arguments provided to "+r+"(). The number of arguments must be less than or equal to the number of orderBy() clauses");for(var a=[],u=0;u<i.length;u++){var c=i[u];if(s[u].field.ut()){if("string"!=typeof c)throw new ns(es.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in "+r+"(), but got a "+typeof c);if(!xa(t)&&-1!==c.indexOf("/"))throw new ns(es.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by FieldPath.documentId(), the value passed to "+r+"() must be a plain document ID, but '"+c+"' contains a slash.");var l=t.path.child(ps.ot(c));if(!ys.wt(l))throw new ns(es.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by FieldPath.documentId(), the value passed to "+r+"() must result in a valid document path, but '"+l+"' is not because it contains an odd number of segments.");var h=new ys(l);a.push(Us(e,h))}else{var d=wp(n,r,c);a.push(d)}}return new da(a,o)}(t.C_,t.firestore.I_,i,e,n,r)}function hg(t,e,n){if(n instanceof Uf&&(n=n.d_),"string"==typeof n){if(""===n)throw new ns(es.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid document ID, but it was an empty string.");if(!xa(e)&&-1!==n.indexOf("/"))throw new ns(es.INVALID_ARGUMENT,"Invalid query. When querying a collection by FieldPath.documentId(), you must provide a plain document ID, but '"+n+"' contains a '/' character.");var r=e.path.child(ps.ot(n));if(!ys.wt(r))throw new ns(es.INVALID_ARGUMENT,"Invalid query. When querying a collection group by FieldPath.documentId(), the value provided must result in a valid document path, but '"+r+"' is not because it has an odd number of segments ("+r.length+").");return Us(t,new ys(r))}if(n instanceof Xf)return Us(t,n.S_);throw new ns(es.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid string or a DocumentReference, but it was: "+zf(n)+".")}function dg(t,e){if(!Array.isArray(t)||0===t.length)throw new ns(es.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '"+e.toString()+"' filters.");if(t.length>10)throw new ns(es.INVALID_ARGUMENT,"Invalid Query. '"+e.toString()+"' filters support a maximum of 10 elements in the value array.")}function fg(t,e,n){if(!n.isEqual(e))throw new ns(es.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '"+e.toString()+"' and so you must also use '"+e.toString()+"' as your first argument to orderBy(), but your first orderBy() is on field '"+n.toString()+"' instead.")}function pg(t,e,n){return t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e}var gg=function(t){function e(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return Object(Lo.c)(e,t),e.prototype.Wf=function(t){return new rs(t)},e.prototype.jf=function(t){var e=this.Jf(t,this.firestore.I_);return new Xf(this.firestore,null,e)},e}(Zp),mg=function(){function t(t,e){this.hasPendingWrites=t,this.fromCache=e}return t.prototype.isEqual=function(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache},t}(),yg=function(t){function e(e,n,r,i,o,s){var a=this;return(a=t.call(this,e,n,r,i,s)||this).Yf=e,a.ld=e,a.metadata=o,a}return Object(Lo.c)(e,t),e.prototype.exists=function(){return t.prototype.exists.call(this)},e.prototype.data=function(t){if(void 0===t&&(t={}),this.Zf){if(this.v_){var e=new bg(this.Yf,this.Xf,this.S_,this.Zf,this.metadata,null);return this.v_.fromFirestore(e,t)}return this.Xf.Uf(this.Zf.bt(),t.serverTimestamps)}},e.prototype.get=function(t,e){if(void 0===e&&(e={}),this.Zf){var n=this.Zf.data().field(eg("DocumentSnapshot.get",t));if(null!==n)return this.Xf.Uf(n,e.serverTimestamps)}},e}(Jp),bg=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(Lo.c)(e,t),e.prototype.data=function(e){return void 0===e&&(e={}),t.prototype.data.call(this,e)},e}(yg),vg=function(){function t(t,e,n,r){this.Yf=t,this.Xf=e,this._d=r,this.metadata=new mg(r.hasPendingWrites,r.fromCache),this.query=n}return Object.defineProperty(t.prototype,"docs",{get:function(){var t=[];return this.forEach(function(e){return t.push(e)}),t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return this._d.docs.size},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"empty",{get:function(){return 0===this.size},enumerable:!1,configurable:!0}),t.prototype.forEach=function(t,e){var n=this;this._d.docs.forEach(function(r){t.call(e,new bg(n.Yf,n.Xf,r.key,r,new mg(n._d.De.has(r.key),n._d.fromCache),n.query.v_))})},t.prototype.docChanges=function(t){void 0===t&&(t={});var e=!!t.includeMetadataChanges;if(e&&this._d.xe)throw new ns(es.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this.fd&&this.dd===e||(this.fd=function(t,e){if(t._d.Se.et()){var n=0;return t._d.docChanges.map(function(e){return{type:"added",doc:new bg(t.Yf,t.Xf,e.doc.key,e.doc,new mg(t._d.De.has(e.doc.key),t._d.fromCache),t.query.v_),oldIndex:-1,newIndex:n++}})}var r=t._d.Se;return t._d.docChanges.filter(function(t){return e||3!==t.type}).map(function(e){var n=new bg(t.Yf,t.Xf,e.doc.key,e.doc,new mg(t._d.De.has(e.doc.key),t._d.fromCache),t.query.v_),i=-1,o=-1;return 0!==e.type&&(i=r.indexOf(e.doc.key),r=r.delete(e.doc.key)),1!==e.type&&(o=(r=r.add(e.doc)).indexOf(e.doc.key)),{type:_g(e.type),doc:n,oldIndex:i,newIndex:o}})}(this,e),this.dd=e),this.fd},t}();function _g(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Go()}}function wg(t,e){return t instanceof yg&&e instanceof yg?t.Yf===e.Yf&&t.S_.isEqual(e.S_)&&(null===t.Zf?null===e.Zf:t.Zf.isEqual(e.Zf))&&t.v_===e.v_:t instanceof vg&&e instanceof vg&&t.Yf===e.Yf&&rp(t.query,e.query)&&t.metadata.isEqual(e.metadata)&&t._d.isEqual(e._d)}var Cg=function(t){function e(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return Object(Lo.c)(e,t),e.prototype.Wf=function(t){return new rs(t)},e.prototype.jf=function(t){var e=this.Jf(t,this.firestore.I_);return new Xf(this.firestore,null,e)},e}(Zp);function Og(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];t=Gf(t,Xf);var o=Gf(t.firestore,Wp),s=hp(o);return e instanceof Uf&&(e=e.d_),xg(o,[("string"==typeof e||e instanceof Lf?_p(s,"updateDoc",t.S_,e,n,r):vp(s,"updateDoc",t.S_,e)).F_(t.S_,Ja.exists(!0))])}function Eg(t){for(var e,n,r,i=[],o=1;o<arguments.length;o++)i[o-1]=arguments[o];t instanceof Uf&&(t=t.d_);var s={includeMetadataChanges:!1},a=0;"object"!=typeof i[a]||Gp(i[a])||(s=i[a],a++);var u,c,l,h={includeMetadataChanges:s.includeMetadataChanges};if(Gp(i[a])){var d=i[a];i[a]=null===(e=d.next)||void 0===e?void 0:e.bind(d),i[a+1]=null===(n=d.error)||void 0===n?void 0:n.bind(d),i[a+2]=null===(r=d.complete)||void 0===r?void 0:r.bind(d)}if(t instanceof Xf)c=Gf(t.firestore,Wp),l=_a(t.S_.path),u={next:function(e){i[a]&&i[a](Ig(c,t,e))},error:i[a+1],complete:i[a+2]};else{var f=Gf(t,Zf);c=Gf(f.firestore,Wp),l=f.C_;var p=new Cg(c);u={next:function(t){i[a]&&i[a](new vg(c,p,f,t))},error:i[a+1],complete:i[a+2]},ng(t.C_)}return function(t,e,n,r){var i=this,o=new Mf(r),s=new zd(e,o,n);return t._s.Ps(function(){return Object(Lo.b)(i,void 0,void 0,function(){var e;return Object(Lo.d)(this,function(n){switch(n.label){case 0:return e=Vd,[4,Hp(t)];case 1:return[2,e.apply(void 0,[n.sent(),s])]}})})}),function(){o.i_(),t._s.Ps(function(){return Object(Lo.b)(i,void 0,void 0,function(){var e;return Object(Lo.d)(this,function(n){switch(n.label){case 0:return e=Qd,[4,Hp(t)];case 1:return[2,e.apply(void 0,[n.sent(),s])]}})})})}}(Yp(c),l,h,u)}function xg(t,e){return function(t,e){var n=this,r=new Sc;return t._s.Ps(function(){return Object(Lo.b)(n,void 0,void 0,function(){var n;return Object(Lo.d)(this,function(i){switch(i.label){case 0:return n=rf,[4,Qp(t)];case 1:return[2,n.apply(void 0,[i.sent(),e,r])]}})})}),r.promise}(Yp(t),e)}function Ig(t,e,n){var r=n.docs.get(e.S_),i=new Cg(t);return new yg(t,i,e.S_,r,new mg(n.hasPendingWrites,n.fromCache),e.v_)}var Sg=function(){function t(t,e){this.Yf=t,this.wd=e,this.Ed=[],this.Td=!1,this.Id=hp(t)}return t.prototype.set=function(t,e,n){this.md();var r=Tg(t,this.Yf),i=pg(r.v_,e,n),o=dp(this.Id,"WriteBatch.set",r.S_,i,null!==r.v_,n);return this.Ed.push(o.F_(r.S_,Ja.Kt())),this},t.prototype.update=function(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];this.md();var o,s=Tg(t,this.Yf);return e instanceof Uf&&(e=e.d_),o="string"==typeof e||e instanceof Lf?_p(this.Id,"WriteBatch.update",s.S_,e,n,r):vp(this.Id,"WriteBatch.update",s.S_,e),this.Ed.push(o.F_(s.S_,Ja.exists(!0))),this},t.prototype.delete=function(t){this.md();var e=Tg(t,this.Yf);return this.Ed=this.Ed.concat(new gu(e.S_,Ja.Kt())),this},t.prototype.commit=function(){return this.md(),this.Td=!0,this.Ed.length>0?this.wd(this.Ed):Promise.resolve()},t.prototype.md=function(){if(this.Td)throw new ns(es.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")},t}();function Tg(t,e){if(t instanceof Uf&&(t=t.d_),t.firestore!==e)throw new ns(es.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}var Pg=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n)||this).Yf=e,r}return Object(Lo.c)(e,t),e.prototype.get=function(e){var n=this,r=Tg(e,this.Yf),i=new Cg(this.Yf);return t.prototype.get.call(this,e).then(function(t){return new yg(n.Yf,i,r.S_,t.Zf,new mg(!1,!1),r.v_)})},e}(function(){function t(t,e){this.Yf=t,this.Ad=e,this.Id=hp(t)}return t.prototype.get=function(t){var e=this,n=Tg(t,this.Yf),r=new gg(this.Yf);return this.Ad.ef([n.S_]).then(function(t){if(!t||1!==t.length)return Go();var i=t[0];if(i instanceof Ks)return new Jp(e.Yf,r,n.S_,null,n.v_);if(i instanceof $s)return new Jp(e.Yf,r,i.key,i,n.v_);throw Go()})},t.prototype.set=function(t,e,n){var r=Tg(t,this.Yf),i=pg(r.v_,e,n),o=dp(this.Id,"Transaction.set",r.S_,i,null!==r.v_,n);return this.Ad.set(r.S_,o),this},t.prototype.update=function(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];var o,s=Tg(t,this.Yf);return e instanceof Uf&&(e=e.d_),o="string"==typeof e||e instanceof Lf?_p(this.Id,"Transaction.update",s.S_,e,n,r):vp(this.Id,"Transaction.update",s.S_,e),this.Ad.update(s.S_,o),this},t.prototype.delete=function(t){var e=Tg(t,this.Yf);return this.Ad.delete(e.S_),this},t}());function Rg(){if("undefined"==typeof Uint8Array)throw new ns(es.UNIMPLEMENTED,"Uint8Arrays are not available in this environment.")}function Ag(){if("undefined"==typeof atob)throw new ns(es.UNIMPLEMENTED,"Blobs are unavailable in Firestore in this environment.")}var kg=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(Lo.c)(e,t),e.fromBase64String=function(t){return Ag(),new e(rs.fromBase64String(t))},e.fromUint8Array=function(t){return Rg(),new e(rs.fromUint8Array(t))},e.prototype.toBase64=function(){return Ag(),this.d_.toBase64()},e.prototype.toUint8Array=function(){return Rg(),this.d_.toUint8Array()},e.prototype.isEqual=function(t){return this.d_.isEqual(t.d_)},e.prototype.toString=function(){return"Blob(base64: "+this.toBase64()+")"},e}(Uf),jg=function(){function t(){}return t.prototype.enableIndexedDbPersistence=function(t,e){return function(t,e){Xp(t=Gf(t,Wp));var n=Yp(t),r=t.p_(),i=new Df;return Kp(n,i,new jf(i,r.cacheSizeBytes,null==e?void 0:e.forceOwnership))}(t.d_,{forceOwnership:e})},t.prototype.enableMultiTabIndexedDbPersistence=function(t){return function(t){Xp(t=Gf(t,Wp));var e=Yp(t),n=t.p_(),r=new Df;return Kp(e,r,new Nf(r,n.cacheSizeBytes))}(t.d_)},t.prototype.clearIndexedDbPersistence=function(t){return function(t){var e=this;if(t.R_&&!t.P_)throw new ns(es.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");var n=new Sc;return t.Bf.Tf(function(){return Object(Lo.b)(e,void 0,void 0,function(){var e;return Object(Lo.d)(this,function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,function(t){return Object(Lo.b)(this,void 0,void 0,function(){return Object(Lo.d)(this,function(e){switch(e.label){case 0:return Rc.Kn()?[4,Rc.delete(t+"main")]:[2,Promise.resolve()];case 1:return e.sent(),[2]}})})}(hh(t.I_,t.w_))];case 1:return r.sent(),n.resolve(),[3,3];case 2:return e=r.sent(),n.reject(e),[3,3];case 3:return[2]}})})}),n.promise}(t.d_)},t}(),Ng=function(t){function e(e,n,r){var i=this;return(i=t.call(this,n)||this).Rd=r,i.INTERNAL={delete:function(){return i.terminate()}},e instanceof Uo||(i.Pd=e),i}return Object(Lo.c)(e,t),Object.defineProperty(e.prototype,"I_",{get:function(){return this.d_.I_},enumerable:!1,configurable:!0}),e.prototype.settings=function(t){t.merge&&delete(t=Object.assign(Object.assign({},this.d_.V_()),t)).merge,this.d_.g_(t)},e.prototype.useEmulator=function(t,e){!function(t,e,n){var r=(t=Gf(t,Kf)).V_();"firestore.googleapis.com"!==r.host&&r.host!==e&&Bo("Host has been set in both settings() and useEmulator(), emulator host will be used"),t.g_(Object.assign(Object.assign({},r),{host:e+":"+n,ssl:!1}))}(this.d_,t,e)},e.prototype.enableNetwork=function(){return function(t){var e=this;return t._s.enqueue(function(){return Object(Lo.b)(e,void 0,void 0,function(){var e,n;return Object(Lo.d)(this,function(r){switch(r.label){case 0:return[4,Fp(t)];case 1:return e=r.sent(),[4,Vp(t)];case 2:return n=r.sent(),[2,(e.yo(!0),function(t){var e=Yo(t);return e.Nh.delete(0),fd(e)}(n))]}})})})}(Yp(Gf(this.d_,Wp)))},e.prototype.disableNetwork=function(){return function(t){var e=this;return t._s.enqueue(function(){return Object(Lo.b)(e,void 0,void 0,function(){var e,n;return Object(Lo.d)(this,function(r){switch(r.label){case 0:return[4,Fp(t)];case 1:return e=r.sent(),[4,Vp(t)];case 2:return n=r.sent(),[2,(e.yo(!1),function(t){return Object(Lo.b)(this,void 0,void 0,function(){var e;return Object(Lo.d)(this,function(n){switch(n.label){case 0:return(e=Yo(t)).Nh.add(0),[4,pd(e)];case 1:return n.sent(),e.Oh.set("Offline"),[2]}})})}(n))]}})})})}(Yp(Gf(this.d_,Wp)))},e.prototype.enablePersistence=function(t){var e=!1,n=!1;return t&&Hf("synchronizeTabs",e=!!t.synchronizeTabs,"experimentalForceOwningTab",n=!!t.experimentalForceOwningTab),e?this.Rd.enableMultiTabIndexedDbPersistence(this):this.Rd.enableIndexedDbPersistence(this,n)},e.prototype.clearPersistence=function(){return this.Rd.clearIndexedDbPersistence(this)},e.prototype.terminate=function(){return this.Pd&&(this.Pd._removeServiceInstance("firestore"),this.Pd._removeServiceInstance("firestore-exp")),this.d_._delete()},e.prototype.waitForPendingWrites=function(){return function(t){var e=this,n=new Sc;return t._s.Ps(function(){return Object(Lo.b)(e,void 0,void 0,function(){var e;return Object(Lo.d)(this,function(r){switch(r.label){case 0:return e=lf,[4,Qp(t)];case 1:return[2,e.apply(void 0,[r.sent(),n])]}})})}),n.promise}(Yp(Gf(this.d_,Wp)))},e.prototype.onSnapshotsInSync=function(t){return function(t,e){return function(t,e){var n=this,r=new Mf(e);return t._s.Ps(function(){return Object(Lo.b)(n,void 0,void 0,function(){var e;return Object(Lo.d)(this,function(n){switch(n.label){case 0:return e=function(t,e){Yo(t).Wh.add(e),e.next()},[4,Hp(t)];case 1:return[2,e.apply(void 0,[n.sent(),r])]}})})}),function(){r.i_(),t._s.Ps(function(){return Object(Lo.b)(n,void 0,void 0,function(){var e;return Object(Lo.d)(this,function(n){switch(n.label){case 0:return e=function(t,e){Yo(t).Wh.delete(e)},[4,Hp(t)];case 1:return[2,e.apply(void 0,[n.sent(),r])]}})})})}}(Yp(t=Gf(t,Wp)),Gp(e)?e:{next:e})}(this.d_,t)},Object.defineProperty(e.prototype,"app",{get:function(){if(!this.Pd)throw new ns(es.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this.Pd},enumerable:!1,configurable:!0}),e.prototype.collection=function(t){try{return new Yg(this,tp(this.d_,t))}catch(t){throw Vg(t,"collection()","Firestore.collection()")}},e.prototype.doc=function(t){try{return new Ug(this,ep(this.d_,t))}catch(t){throw Vg(t,"doc()","Firestore.doc()")}},e.prototype.collectionGroup=function(t){try{return new zg(this,function(t,e){if(t=Gf(t,Kf),Vf("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new ns(es.INVALID_ARGUMENT,"Invalid collection ID '"+e+"' passed to function collectionGroup(). Collection IDs must not contain '/'.");return new Zf(t,null,function(t){return new ba(ps.ct(),t)}(e))}(this.d_,t))}catch(t){throw Vg(t,"collectionGroup()","Firestore.collectionGroup()")}},e.prototype.runTransaction=function(t){var e=this;return function(t,e){return function(t,e){var n=this,r=new Sc;return t._s.Ps(function(){return Object(Lo.b)(n,void 0,void 0,function(){var n;return Object(Lo.d)(this,function(i){switch(i.label){case 0:return[4,function(t){return Lp(t).then(function(t){return t.Sh})}(t)];case 1:return n=i.sent(),new kp(t._s,n,e,r).run(),[2]}})})}),r.promise}(Yp(t),function(n){return e(new Pg(t,n))})}(this.d_,function(n){return t(new Mg(e,n))})},e.prototype.batch=function(){var t=this;return Yp(this.d_),new Lg(new Sg(this.d_,function(e){return xg(t.d_,e)}))},e.prototype.loadBundle=function(t){throw new ns(es.FAILED_PRECONDITION,'"loadBundle()" does not exist, have you imported "firebase/firestore/bundle"?')},e.prototype.namedQuery=function(t){throw new ns(es.FAILED_PRECONDITION,'"namedQuery()" does not exist, have you imported "firebase/firestore/bundle"?')},e}(Uf),Dg=function(t){function e(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return Object(Lo.c)(e,t),e.prototype.Wf=function(t){return new kg(new rs(t))},e.prototype.jf=function(t){var e=this.Jf(t,this.firestore.I_);return Ug.yd(e,this.firestore,null)},e}(Zp),Mg=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this).Yf=e,r.Xf=new Dg(e),r}return Object(Lo.c)(e,t),e.prototype.get=function(t){var e=this,n=$g(t);return this.d_.get(n).then(function(t){return new qg(e.Yf,new yg(e.Yf.d_,e.Xf,t.S_,t.Zf,t.metadata,n.v_))})},e.prototype.set=function(t,e,n){var r=$g(t);return n?(Qf("Transaction.set",n),this.d_.set(r,e,n)):this.d_.set(r,e),this},e.prototype.update=function(t,e,n){for(var r,i=[],o=3;o<arguments.length;o++)i[o-3]=arguments[o];var s=$g(t);return 2===arguments.length?this.d_.update(s,e):(r=this.d_).update.apply(r,Object(Lo.g)([s,e,n],i)),this},e.prototype.delete=function(t){var e=$g(t);return this.d_.delete(e),this},e}(Uf),Lg=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(Lo.c)(e,t),e.prototype.set=function(t,e,n){var r=$g(t);return n?(Qf("WriteBatch.set",n),this.d_.set(r,e,n)):this.d_.set(r,e),this},e.prototype.update=function(t,e,n){for(var r,i=[],o=3;o<arguments.length;o++)i[o-3]=arguments[o];var s=$g(t);return 2===arguments.length?this.d_.update(s,e):(r=this.d_).update.apply(r,Object(Lo.g)([s,e,n],i)),this},e.prototype.delete=function(t){var e=$g(t);return this.d_.delete(e),this},e.prototype.commit=function(){return this.d_.commit()},e}(Uf),Fg=function(t){function e(e,n,r){var i=this;return(i=t.call(this,r)||this).Yf=e,i.Xf=n,i}return Object(Lo.c)(e,t),e.prototype.fromFirestore=function(t,e){var n=new bg(this.Yf.d_,this.Xf,t.S_,t.Zf,t.metadata,null);return this.d_.fromFirestore(new Bg(this.Yf,n),null!=e?e:{})},e.prototype.toFirestore=function(t,e){return e?this.d_.toFirestore(t,e):this.d_.toFirestore(t)},e.gd=function(t,n){var r=e.Vd,i=r.get(t);i||(i=new WeakMap,r.set(t,i));var o=i.get(n);return o||(o=new e(t,new Dg(t),n),i.set(n,o)),o},e}(Uf);Fg.Vd=new WeakMap;var Ug=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this).firestore=e,r.Xf=new Dg(e),r}return Object(Lo.c)(e,t),e.pd=function(t,n,r){if(t.length%2!=0)throw new ns(es.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+t.rt()+" has "+t.length);return new e(n,new Xf(n.d_,r,new ys(t)))},e.yd=function(t,n,r){return new e(n,new Xf(n.d_,r,t))},Object.defineProperty(e.prototype,"id",{get:function(){return this.d_.id},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){return new Yg(this.firestore,this.d_.parent)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this.d_.path},enumerable:!1,configurable:!0}),e.prototype.collection=function(t){try{return new Yg(this.firestore,tp(this.d_,t))}catch(t){throw Vg(t,"collection()","DocumentReference.collection()")}},e.prototype.isEqual=function(t){return t instanceof Uf&&(t=t.d_),t instanceof Xf&&np(this.d_,t)},e.prototype.set=function(t,e){e=Qf("DocumentReference.set",e);try{return function(t,e,n){t=Gf(t,Xf);var r=Gf(t.firestore,Wp),i=pg(t.v_,e,n);return xg(r,[dp(hp(r),"setDoc",t.S_,i,null!==t.v_,n).F_(t.S_,Ja.Kt())])}(this.d_,t,e)}catch(t){throw Vg(t,"setDoc()","DocumentReference.set()")}},e.prototype.update=function(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];try{return 1===arguments.length?Og(this.d_,t):Og.apply(void 0,Object(Lo.g)([this.d_,t,e],n))}catch(t){throw Vg(t,"updateDoc()","DocumentReference.update()")}},e.prototype.delete=function(){return xg(Gf((t=this.d_).firestore,Wp),[new gu(t.S_,Ja.Kt())]);var t},e.prototype.onSnapshot=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=Qg(e),i=Hg(e,function(e){return new qg(t.firestore,new yg(t.firestore.d_,t.Xf,e.S_,e.Zf,e.metadata,t.d_.v_))});return Eg(this.d_,r,i)},e.prototype.get=function(t){var e=this;return("cache"===(null==t?void 0:t.source)?function(t){t=Gf(t,Xf);var e=Gf(t.firestore,Wp),n=Yp(e),r=new Cg(e);return function(t,e){var n=this,r=new Sc;return t._s.Ps(function(){return Object(Lo.b)(n,void 0,void 0,function(){var n;return Object(Lo.d)(this,function(i){switch(i.label){case 0:return n=function(t,e,n){return Object(Lo.b)(this,void 0,void 0,function(){var r,i;return Object(Lo.d)(this,function(o){switch(o.label){case 0:return o.trys.push([0,2,,3]),[4,function(t,e){var n=Yo(t);return n.persistence.runTransaction("read document","readonly",function(t){return n.Tc.Ho(t,e)})}(t,e)];case 1:return(i=o.sent())instanceof $s?n.resolve(i):i instanceof Ks?n.resolve(null):n.reject(new ns(es.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")),[3,3];case 2:return r=o.sent(),i=Uc(r,"Failed to get document '"+e+" from cache"),n.reject(i),[3,3];case 3:return[2]}})})},[4,Up(t)];case 1:return[2,n.apply(void 0,[i.sent(),e,r])]}})})}),r.promise}(n,t.S_).then(function(n){return new yg(e,r,t.S_,n,new mg(n instanceof $s&&n.Vt,!0),t.v_)})}(this.d_):"server"===(null==t?void 0:t.source)?function(t){t=Gf(t,Xf);var e=Gf(t.firestore,Wp);return qp(Yp(e),t.S_,{source:"server"}).then(function(n){return Ig(e,t,n)})}(this.d_):function(t){t=Gf(t,Xf);var e=Gf(t.firestore,Wp);return qp(Yp(e),t.S_).then(function(n){return Ig(e,t,n)})}(this.d_)).then(function(t){return new qg(e.firestore,new yg(e.firestore.d_,e.Xf,t.S_,t.Zf,t.metadata,e.d_.v_))})},e.prototype.withConverter=function(t){return new e(this.firestore,this.d_.withConverter(Fg.gd(this.firestore,t)))},e}(Uf);function Vg(t,e,n){return t.message=t.message.replace(e,n),t}function Qg(t){for(var e=0,n=t;e<n.length;e++){var r=n[e];if("object"==typeof r&&!Gp(r))return r}return{}}function Hg(t,e){var n,r,i;return{next:function(t){i.next&&i.next(e(t))},error:null===(n=(i=Gp(t[0])?t[0]:Gp(t[1])?t[1]:"function"==typeof t[0]?{next:t[0],error:t[1],complete:t[2]}:{next:t[1],error:t[2],complete:t[3]}).error)||void 0===n?void 0:n.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}var qg=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this).Yf=e,r}return Object(Lo.c)(e,t),Object.defineProperty(e.prototype,"ref",{get:function(){return new Ug(this.Yf,this.d_.ref)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"id",{get:function(){return this.d_.id},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"metadata",{get:function(){return this.d_.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"exists",{get:function(){return this.d_.exists()},enumerable:!1,configurable:!0}),e.prototype.data=function(t){return this.d_.data(t)},e.prototype.get=function(t,e){return this.d_.get(t,e)},e.prototype.isEqual=function(t){return wg(this.d_,t.d_)},e}(Uf),Bg=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(Lo.c)(e,t),e.prototype.data=function(t){return this.d_.data(t)},e}(qg),zg=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this).firestore=e,r.Xf=new Dg(e),r}return Object(Lo.c)(e,t),e.prototype.where=function(t,n,r){try{return new e(this.firestore,ig(this.d_,function(t,e,n){var r=e,i=eg("where",t);return new og(i,r,n)}(t,n,r)))}catch(t){throw Vg(t,/(orderBy|where)\(\)/,"Query.$1()")}},e.prototype.orderBy=function(t,n){try{return new e(this.firestore,ig(this.d_,function(t,e){void 0===e&&(e="asc");var n=e,r=eg("orderBy",t);return new sg(r,n)}(t,n)))}catch(t){throw Vg(t,/(orderBy|where)\(\)/,"Query.$1()")}},e.prototype.limit=function(t){try{return new e(this.firestore,ig(this.d_,function(t){return Wf("limit",t),new ag("limit",t,"F")}(t)))}catch(t){throw Vg(t,"limit()","Query.limit()")}},e.prototype.limitToLast=function(t){try{return new e(this.firestore,ig(this.d_,function(t){return Wf("limitToLast",t),new ag("limitToLast",t,"L")}(t)))}catch(t){throw Vg(t,"limitToLast()","Query.limitToLast()")}},e.prototype.startAt=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return new e(this.firestore,ig(this.d_,(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new ug("startAt",t,!0)}).apply(void 0,t)))}catch(t){throw Vg(t,"startAt()","Query.startAt()")}},e.prototype.startAfter=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return new e(this.firestore,ig(this.d_,(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new ug("startAfter",t,!1)}).apply(void 0,t)))}catch(t){throw Vg(t,"startAfter()","Query.startAfter()")}},e.prototype.endBefore=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return new e(this.firestore,ig(this.d_,(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new cg("endBefore",t,!0)}).apply(void 0,t)))}catch(t){throw Vg(t,"endBefore()","Query.endBefore()")}},e.prototype.endAt=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return new e(this.firestore,ig(this.d_,(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new cg("endAt",t,!1)}).apply(void 0,t)))}catch(t){throw Vg(t,"endAt()","Query.endAt()")}},e.prototype.isEqual=function(t){return rp(this.d_,t.d_)},e.prototype.get=function(t){var e=this;return("cache"===(null==t?void 0:t.source)?function(t){t=Gf(t,Zf);var e=Gf(t.firestore,Wp),n=Yp(e),r=new Cg(e);return function(t,e){var n=this,r=new Sc;return t._s.Ps(function(){return Object(Lo.b)(n,void 0,void 0,function(){var n;return Object(Lo.d)(this,function(i){switch(i.label){case 0:return n=function(t,e,n){return Object(Lo.b)(this,void 0,void 0,function(){var r,i,o,s,a;return Object(Lo.d)(this,function(u){switch(u.label){case 0:return u.trys.push([0,2,,3]),[4,Ih(t,e,!0)];case 1:return a=u.sent(),r=new Kd(e,a.Rc),i=r.fl(a.documents),o=r.wi(i,!1),n.resolve(o.snapshot),[3,3];case 2:return s=u.sent(),a=Uc(s,"Failed to execute query '"+e+" against cache"),n.reject(a),[3,3];case 3:return[2]}})})},[4,Up(t)];case 1:return[2,n.apply(void 0,[i.sent(),e,r])]}})})}),r.promise}(n,t.C_).then(function(n){return new vg(e,r,t,n)})}(this.d_):"server"===(null==t?void 0:t.source)?function(t){t=Gf(t,Zf);var e=Gf(t.firestore,Wp),n=Yp(e),r=new Cg(e);return Bp(n,t.C_,{source:"server"}).then(function(n){return new vg(e,r,t,n)})}(this.d_):function(t){t=Gf(t,Zf);var e=Gf(t.firestore,Wp),n=Yp(e),r=new Cg(e);return ng(t.C_),Bp(n,t.C_).then(function(n){return new vg(e,r,t,n)})}(this.d_)).then(function(t){return new Wg(e.firestore,new vg(e.firestore.d_,e.Xf,e.d_,t._d))})},e.prototype.onSnapshot=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=Qg(e),i=Hg(e,function(e){return new Wg(t.firestore,new vg(t.firestore.d_,t.Xf,t.d_,e._d))});return Eg(this.d_,r,i)},e.prototype.withConverter=function(t){return new e(this.firestore,this.d_.withConverter(Fg.gd(this.firestore,t)))},e}(Uf),Gg=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this).Yf=e,r}return Object(Lo.c)(e,t),Object.defineProperty(e.prototype,"type",{get:function(){return this.d_.type},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"doc",{get:function(){return new Bg(this.Yf,this.d_.doc)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"oldIndex",{get:function(){return this.d_.oldIndex},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"newIndex",{get:function(){return this.d_.newIndex},enumerable:!1,configurable:!0}),e}(Uf),Wg=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this).Yf=e,r}return Object(Lo.c)(e,t),Object.defineProperty(e.prototype,"query",{get:function(){return new zg(this.Yf,this.d_.query)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"metadata",{get:function(){return this.d_.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"size",{get:function(){return this.d_.size},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"empty",{get:function(){return this.d_.empty},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"docs",{get:function(){var t=this;return this.d_.docs.map(function(e){return new Bg(t.Yf,e)})},enumerable:!1,configurable:!0}),e.prototype.docChanges=function(t){var e=this;return this.d_.docChanges(t).map(function(t){return new Gg(e.Yf,t)})},e.prototype.forEach=function(t,e){var n=this;this.d_.forEach(function(r){t.call(e,new Bg(n.Yf,r))})},e.prototype.isEqual=function(t){return wg(this.d_,t.d_)},e}(Uf),Yg=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n)||this).firestore=e,r.d_=n,r}return Object(Lo.c)(e,t),Object.defineProperty(e.prototype,"id",{get:function(){return this.d_.id},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this.d_.path},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){var t=this.d_.parent;return t?new Ug(this.firestore,t):null},enumerable:!1,configurable:!0}),e.prototype.doc=function(t){try{return new Ug(this.firestore,void 0===t?ep(this.d_):ep(this.d_,t))}catch(t){throw Vg(t,"doc()","CollectionReference.doc()")}},e.prototype.add=function(t){var e=this;return function(t,e){var n=Gf(t.firestore,Wp),r=ep(t),i=pg(t.v_,e);return xg(n,[dp(hp(t.firestore),"addDoc",r.S_,i,null!==t.v_,{}).F_(r.S_,Ja.exists(!1))]).then(function(){return r})}(this.d_,t).then(function(t){return new Ug(e.firestore,t)})},e.prototype.isEqual=function(t){return np(this.d_,t.d_)},e.prototype.withConverter=function(t){return new e(this.firestore,this.d_.withConverter(Fg.gd(this.firestore,t)))},e}(zg);function $g(t){return t instanceof Uf&&(t=t.d_),Gf(t,Xf)}var Kg,Xg=function(t){function e(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return t.call(this,new(Lf.bind.apply(Lf,Object(Lo.g)([void 0],e))))||this}return Object(Lo.c)(e,t),e.documentId=function(){return new e(ms.ht().rt())},e.prototype.isEqual=function(t){return t instanceof Uf&&(t=t.d_),t instanceof Lf&&this.d_.f_.isEqual(t.f_)},e}(Uf),Zg=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(Lo.c)(e,t),e.serverTimestamp=function(){var t=new gp("serverTimestamp");return t._methodName="FieldValue.serverTimestamp",new e(t)},e.delete=function(){var t=new fp("deleteField");return t._methodName="FieldValue.delete",new e(t)},e.arrayUnion=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new mp("arrayUnion",t)}).apply(void 0,t);return r._methodName="FieldValue.arrayUnion",new e(r)},e.arrayRemove=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new yp("arrayRemove",t)}).apply(void 0,t);return r._methodName="FieldValue.arrayRemove",new e(r)},e.increment=function(t){var n=function(t){return new bp("increment",t)}(t);return n._methodName="FieldValue.increment",new e(n)},e.prototype.isEqual=function(t){return this.d_.isEqual(t.d_)},e}(Uf),Jg=n("/6Yf"),tm={Firestore:Ng,GeoPoint:ip,Timestamp:hs,Blob:kg,Transaction:Mg,WriteBatch:Lg,DocumentReference:Ug,DocumentSnapshot:qg,Query:zg,QueryDocumentSnapshot:Bg,QuerySnapshot:Wg,CollectionReference:Yg,FieldPath:Xg,FieldValue:Zg,setLogLevel:function(t){Vo.setLogLevel(t)},CACHE_SIZE_UNLIMITED:-1};(function(t,e){t.INTERNAL.registerComponent(new Jg.a("firestore",function(t){return function(t,e){return new Ng(t,new Wp(t,e),new jg)}(t.getProvider("app").getImmediate(),t.getProvider("auth-internal"))},"PUBLIC").setServiceProps(Object.assign({},tm)))})(Kg=Ae.a),Kg.registerVersion("@firebase/firestore","2.1.6");var em=n("VRyK"),nm=n("zx2A");function rm(t,e){return"function"==typeof e?n=>n.pipe(rm((n,r)=>Object(ce.a)(t(n,r)).pipe(Object(ve.a)((t,i)=>e(n,t,r,i))))):e=>e.lift(new im(t))}class im{constructor(t){this.project=t}call(t,e){return e.subscribe(new om(t,this.project))}}class om extends nm.b{constructor(t,e){super(t),this.project=e,this.index=0}_next(t){let e;const n=this.index++;try{e=this.project(t,n)}catch(r){return void this.destination.error(r)}this._innerSub(e)}_innerSub(t){const e=this.innerSubscription;e&&e.unsubscribe();const n=new nm.a(this),r=this.destination;r.add(n),this.innerSubscription=Object(nm.c)(t,n),this.innerSubscription!==n&&r.add(this.innerSubscription)}_complete(){const{innerSubscription:t}=this;t&&!t.closed||super._complete(),this.unsubscribe()}_unsubscribe(){this.innerSubscription=void 0}notifyComplete(){this.innerSubscription=void 0,this.isStopped&&super._complete()}notifyNext(t){this.destination.next(t)}}var sm=n("qgXg"),am=n("quSY"),um=n("9ppp"),cm=n("Ylt2");class lm extends te.a{constructor(t=Number.POSITIVE_INFINITY,e=Number.POSITIVE_INFINITY,n){super(),this.scheduler=n,this._events=[],this._infiniteTimeWindow=!1,this._bufferSize=t<1?1:t,this._windowTime=e<1?1:e,e===Number.POSITIVE_INFINITY?(this._infiniteTimeWindow=!0,this.next=this.nextInfiniteTimeWindow):this.next=this.nextTimeWindow}nextInfiniteTimeWindow(t){if(!this.isStopped){const e=this._events;e.push(t),e.length>this._bufferSize&&e.shift()}super.next(t)}nextTimeWindow(t){this.isStopped||(this._events.push(new hm(this._getNow(),t)),this._trimBufferThenGetEvents()),super.next(t)}_subscribe(t){const e=this._infiniteTimeWindow,n=e?this._events:this._trimBufferThenGetEvents(),r=this.scheduler,i=n.length;let o;if(this.closed)throw new um.a;if(this.isStopped||this.hasError?o=am.a.EMPTY:(this.observers.push(t),o=new cm.a(this,t)),r&&t.add(t=new Pe.a(t,r)),e)for(let s=0;s<i&&!t.closed;s++)t.next(n[s]);else for(let s=0;s<i&&!t.closed;s++)t.next(n[s].value);return this.hasError?t.error(this.thrownError):this.isStopped&&t.complete(),o}_getNow(){return(this.scheduler||sm.a).now()}_trimBufferThenGetEvents(){const t=this._getNow(),e=this._bufferSize,n=this._windowTime,r=this._events,i=r.length;let o=0;for(;o<i&&!(t-r[o].time<n);)o++;return i>e&&(o=Math.max(o,i-e)),o>0&&r.splice(0,o),r}}class hm{constructor(t,e){this.time=t,this.value=e}}function dm(t,e,n){let r;return r=t&&"object"==typeof t?t:{bufferSize:t,windowTime:e,refCount:!1,scheduler:n},t=>t.lift(function({bufferSize:t=Number.POSITIVE_INFINITY,windowTime:e=Number.POSITIVE_INFINITY,refCount:n,scheduler:r}){let i,o,s=0,a=!1,u=!1;return function(c){let l;s++,!i||a?(a=!1,i=new lm(t,e,r),l=i.subscribe(this),o=c.subscribe({next(t){i.next(t)},error(t){a=!0,i.error(t)},complete(){u=!0,o=void 0,i.complete()}})):l=i.subscribe(this),this.add(()=>{s--,l.unsubscribe(),o&&!u&&n&&0===s&&(o.unsubscribe(),o=void 0,i=void 0)})}}(r))}const fm=(()=>{function t(){return Error.call(this),this.message="no elements in sequence",this.name="EmptyError",this}return t.prototype=Object.create(Error.prototype),t})(),pm=(()=>{function t(){return Error.call(this),this.message="argument out of range",this.name="ArgumentOutOfRangeError",this}return t.prototype=Object.create(Error.prototype),t})();var gm=n("EY2u");function mm(t){return e=>0===t?Object(gm.b)():e.lift(new ym(t))}class ym{constructor(t){if(this.total=t,this.total<0)throw new pm}call(t,e){return e.subscribe(new bm(t,this.total))}}class bm extends ge.a{constructor(t,e){super(t),this.total=e,this.count=0}_next(t){const e=this.total,n=++this.count;n<=e&&(this.destination.next(t),n===e&&(this.destination.complete(),this.unsubscribe()))}}function vm(t=null){return e=>e.lift(new _m(t))}class _m{constructor(t){this.defaultValue=t}call(t,e){return e.subscribe(new wm(t,this.defaultValue))}}class wm extends ge.a{constructor(t,e){super(t),this.defaultValue=e,this.isEmpty=!0}_next(t){this.isEmpty=!1,this.destination.next(t)}_complete(){this.isEmpty&&this.destination.next(this.defaultValue),this.destination.complete()}}function Cm(t=xm){return e=>e.lift(new Om(t))}class Om{constructor(t){this.errorFactory=t}call(t,e){return e.subscribe(new Em(t,this.errorFactory))}}class Em extends ge.a{constructor(t,e){super(t),this.errorFactory=e,this.hasValue=!1}_next(t){this.hasValue=!0,this.destination.next(t)}_complete(){if(this.hasValue)return this.destination.complete();{let t;try{t=this.errorFactory()}catch(Kg){t=Kg}this.destination.error(t)}}}function xm(){return new fm}var Im=n("SpAZ");function Sm(t,e){const n=arguments.length>=2;return r=>r.pipe(t?Ie((e,n)=>t(e,n,r)):Im.a,mm(1),n?vm(e):Cm(()=>new fm))}function Tm(t,e){return e?rm(()=>t,e):rm(()=>t)}var Pm=n("tf+s");const Rm=new r.r("angularfire2.auth.use-emulator"),Am=new r.r("angularfire2.auth.settings"),km=new r.r("angularfire2.auth.tenant-id"),jm=new r.r("angularfire2.auth.langugage-code"),Nm=new r.r("angularfire2.auth.use-device-language"),Dm=new r.r("angularfire.auth.persistence");let Mm=(()=>{class t{constructor(t,e,r,i,o,s,a,u,c,l){const h=new se.d(i),d=Object(se.h)(h),f=new te.a,p=Object(le.a)(void 0).pipe(Object(Pe.b)(h.outsideAngular),rm(()=>i.runOutsideAngular(()=>n.e(4).then(n.bind(null,"6nsN")))),Object(ve.a)(()=>Object(se.g)(t,i,e)),Object(ve.a)(t=>i.runOutsideAngular(()=>{const e=o,n=s;return Object(se.f)(`${t.name}.auth`,"AngularFireAuth",t,()=>{const r=i.runOutsideAngular(()=>t.auth());return e&&r.useEmulator(`http://${e.join(":")}`),a&&(r.tenantId=a),r.languageCode=u,c&&r.useDeviceLanguage(),n&&(r.settings=n),l&&r.setPersistence(l),r},[e,a,u,c,n,l])})),dm({bufferSize:1,refCount:!1}));if(wt(r))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=Object(le.a)(null);else{p.pipe(Sm()).subscribe();const t=p.pipe(rm(t=>t.getRedirectResult().then(t=>t,()=>null)),d,dm({bufferSize:1,refCount:!1})),e=t=>new ue.a(e=>({unsubscribe:i.runOutsideAngular(()=>t(e))})),n=p.pipe(rm(t=>e(t.onAuthStateChanged.bind(t)))),r=p.pipe(rm(t=>e(t.onIdTokenChanged.bind(t))));this.authState=t.pipe(Tm(n),Object(Pm.a)(h.outsideAngular),Object(Pe.b)(h.insideAngular)),this.user=t.pipe(Tm(r),Object(Pm.a)(h.outsideAngular),Object(Pe.b)(h.insideAngular)),this.idToken=this.user.pipe(rm(t=>t?Object(ce.a)(t.getIdToken()):Object(le.a)(null))),this.idTokenResult=this.user.pipe(rm(t=>t?Object(ce.a)(t.getIdTokenResult()):Object(le.a)(null))),this.credential=Object(em.a)(t,f,this.authState.pipe(Ie(t=>!t))).pipe(Object(ve.a)(t=>(null==t?void 0:t.user)?t:null),Object(Pm.a)(h.outsideAngular),Object(Pe.b)(h.insideAngular))}return Object(se.i)(this,p,i,{spy:{apply:(t,e,n)=>{(t.startsWith("signIn")||t.startsWith("createUser"))&&n.then(t=>f.next(t))}}})}}return t.\u0275fac=function(e){return new(e||t)(r.Yb(se.c),r.Yb(se.b,8),r.Yb(r.C),r.Yb(r.A),r.Yb(Rm,8),r.Yb(Am,8),r.Yb(km,8),r.Yb(jm,8),r.Yb(Nm,8),r.Yb(Dm,8))},t.\u0275prov=Object(r.Ib)({factory:function(){return new t(Object(r.Yb)(se.c),Object(r.Yb)(se.b,8),Object(r.Yb)(r.C),Object(r.Yb)(r.A),Object(r.Yb)(Rm,8),Object(r.Yb)(Am,8),Object(r.Yb)(km,8),Object(r.Yb)(jm,8),Object(r.Yb)(Nm,8),Object(r.Yb)(Dm,8))},token:t,providedIn:"any"}),t})();Object(se.e)(Mm,[{app:null,applyActionCode:null,checkActionCode:null,confirmPasswordReset:null,createUserWithEmailAndPassword:null,currentUser:null,fetchSignInMethodsForEmail:null,isSignInWithEmailLink:null,getRedirectResult:null,languageCode:null,settings:null,onAuthStateChanged:null,onIdTokenChanged:null,sendSignInLinkToEmail:null,sendPasswordResetEmail:null,setPersistence:null,signInAndRetrieveDataWithCredential:null,signInAnonymously:null,signInWithCredential:null,signInWithCustomToken:null,signInWithEmailAndPassword:null,signInWithPhoneNumber:null,signInWithEmailLink:null,signInWithPopup:null,signInWithRedirect:null,signOut:null,tenantId:null,updateCurrentUser:null,useDeviceLanguage:null,useEmulator:null,verifyPasswordResetCode:null}]);let Lm=(()=>{class t{}return t.\u0275mod=r.Kb({type:t}),t.\u0275inj=r.Jb({factory:function(e){return new(e||t)},providers:[Mm]}),t})();function Fm(t,e){return function(t,e=ae.b){return new ue.a(n=>{let r;return null!=e?e.schedule(()=>{r=t.onSnapshot({includeMetadataChanges:!0},n)}):r=t.onSnapshot({includeMetadataChanges:!0},n),()=>{null!=r&&r()}})}(t,e)}function Um(t,e){return Fm(t,e).pipe(Object(ve.a)(t=>({payload:t,type:"query"})))}function Vm(t,e){return Um(t,e).pipe(pe(void 0),me(),Object(ve.a)(([t,e])=>{const n=e.payload.docChanges(),r=n.map(t=>({type:t.type,payload:t}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(e.payload.metadata)&&e.payload.docs.forEach((e,i)=>{const o=n.find(t=>t.doc.ref.isEqual(e.ref)),s=null==t?void 0:t.payload.docs.find(t=>t.ref.isEqual(e.ref));o&&JSON.stringify(o.doc.metadata)===JSON.stringify(e.metadata)||!o&&s&&JSON.stringify(s.metadata)===JSON.stringify(e.metadata)||r.push({type:"modified",payload:{oldIndex:i,newIndex:i,type:"modified",doc:e}})}),r}))}function Qm(t,e,n){return Vm(t,n).pipe(_e((t,n)=>function(t,e,n){return e.forEach(e=>{n.indexOf(e.type)>-1&&(t=function(t,e){switch(e.type){case"added":if(!t[e.newIndex]||!t[e.newIndex].doc.ref.isEqual(e.doc.ref))return Hm(t,e.newIndex,0,e);break;case"modified":if(null==t[e.oldIndex]||t[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const n=t.slice();return n.splice(e.oldIndex,1),n.splice(e.newIndex,0,e),n}return Hm(t,e.newIndex,1,e)}break;case"removed":if(t[e.oldIndex]&&t[e.oldIndex].doc.ref.isEqual(e.doc.ref))return Hm(t,e.oldIndex,1)}return t}(t,e))}),t}(t,n.map(t=>t.payload),e),[]),Oe(),Object(ve.a)(t=>t.map(t=>({type:t.type,payload:t}))))}function Hm(t,e,n,...r){const i=t.slice();return i.splice(e,n,...r),i}function qm(t){return t&&0!==t.length||(t=["added","removed","modified"]),t}class Bm{constructor(t,e,n){this.ref=t,this.query=e,this.afs=n}stateChanges(t){let e=Vm(this.query,this.afs.schedulers.outsideAngular);return t&&t.length>0&&(e=e.pipe(Object(ve.a)(e=>e.filter(e=>t.indexOf(e.type)>-1)))),e.pipe(pe(void 0),me(),Ie(([t,e])=>e.length>0||!t),Object(ve.a)(([t,e])=>e),this.afs.keepUnstableUntilFirst)}auditTrail(t){return this.stateChanges(t).pipe(_e((t,e)=>[...t,...e],[]))}snapshotChanges(t){const e=qm(t);return Qm(this.query,e,this.afs.schedulers.outsideAngular).pipe(this.afs.keepUnstableUntilFirst)}valueChanges(t={}){return Um(this.query,this.afs.schedulers.outsideAngular).pipe(Object(ve.a)(e=>e.payload.docs.map(e=>t.idField?Object.assign(Object.assign({},e.data()),{[t.idField]:e.id}):e.data())),this.afs.keepUnstableUntilFirst)}get(t){return Object(ce.a)(this.query.get(t)).pipe(Object(Pe.b)(this.afs.schedulers.insideAngular))}add(t){return this.ref.add(t)}doc(t){return new zm(this.ref.doc(t),this.afs)}}class zm{constructor(t,e){this.ref=t,this.afs=e}set(t,e){return this.ref.set(t,e)}update(t){return this.ref.update(t)}delete(){return this.ref.delete()}collection(t,e){const n=this.ref.collection(t),{ref:r,query:i}=Xm(n,e);return new Bm(r,i,this.afs)}snapshotChanges(){return Fm(this.ref,this.afs.schedulers.outsideAngular).pipe(pe(void 0),me(),Object(ve.a)(([t,e])=>e.exists?(null==t?void 0:t.exists)?{payload:e,type:"modified"}:{payload:e,type:"added"}:{payload:e,type:"removed"})).pipe(this.afs.keepUnstableUntilFirst)}valueChanges(t={}){return this.snapshotChanges().pipe(Object(ve.a)(({payload:e})=>t.idField?Object.assign(Object.assign({},e.data()),{[t.idField]:e.id}):e.data()))}get(t){return Object(ce.a)(this.ref.get(t)).pipe(Object(Pe.b)(this.afs.schedulers.insideAngular))}}class Gm{constructor(t,e){this.query=t,this.afs=e}stateChanges(t){return t&&0!==t.length?Vm(this.query,this.afs.schedulers.outsideAngular).pipe(Object(ve.a)(e=>e.filter(e=>t.indexOf(e.type)>-1)),Ie(t=>t.length>0),this.afs.keepUnstableUntilFirst):Vm(this.query,this.afs.schedulers.outsideAngular).pipe(this.afs.keepUnstableUntilFirst)}auditTrail(t){return this.stateChanges(t).pipe(_e((t,e)=>[...t,...e],[]))}snapshotChanges(t){const e=qm(t);return Qm(this.query,e,this.afs.schedulers.outsideAngular).pipe(this.afs.keepUnstableUntilFirst)}valueChanges(t={}){return Um(this.query,this.afs.schedulers.outsideAngular).pipe(Object(ve.a)(e=>e.payload.docs.map(e=>t.idField?Object.assign({[t.idField]:e.id},e.data()):e.data())),this.afs.keepUnstableUntilFirst)}get(t){return Object(ce.a)(this.query.get(t)).pipe(Object(Pe.b)(this.afs.schedulers.insideAngular))}}const Wm=new r.r("angularfire2.enableFirestorePersistence"),Ym=new r.r("angularfire2.firestore.persistenceSettings"),$m=new r.r("angularfire2.firestore.settings"),Km=new r.r("angularfire2.firestore.use-emulator");function Xm(t,e=(t=>t)){return{query:e(t),ref:t}}let Zm=(()=>{class t{constructor(t,e,n,r,i,o,s,a,u){this.schedulers=new se.d(o),this.keepUnstableUntilFirst=Object(se.h)(this.schedulers);const c=Object(se.g)(t,o,e);!Re.a.auth&&u&&Object(se.j)();const l=a;[this.firestore,this.persistenceEnabled$]=Object(se.f)(`${c.name}.firestore`,"AngularFirestore",c,()=>{const t=o.runOutsideAngular(()=>c.firestore());if(r&&t.settings(r),l&&t.useEmulator(...l),n&&!wt(i)){const e=()=>{try{return Object(ce.a)(t.enablePersistence(s||void 0).then(()=>!0,()=>!1))}catch(Kg){return"undefined"!=typeof console&&console.warn(Kg),Object(le.a)(!1)}};return[t,o.runOutsideAngular(e)]}return[t,Object(le.a)(!1)]},[r,l,n])}collection(t,e){let n;n="string"==typeof t?this.firestore.collection(t):t;const{ref:r,query:i}=Xm(n,e),o=this.schedulers.ngZone.run(()=>r);return new Bm(o,i,this)}collectionGroup(t,e){const n=e||(t=>t),r=this.firestore.collectionGroup(t);return new Gm(n(r),this)}doc(t){let e;e="string"==typeof t?this.firestore.doc(t):t;const n=this.schedulers.ngZone.run(()=>e);return new zm(n,this)}createId(){return this.firestore.collection("_").doc().id}}return t.\u0275fac=function(e){return new(e||t)(r.Yb(se.c),r.Yb(se.b,8),r.Yb(Wm,8),r.Yb($m,8),r.Yb(r.C),r.Yb(r.A),r.Yb(Ym,8),r.Yb(Km,8),r.Yb(Rm,8))},t.\u0275prov=Object(r.Ib)({factory:function(){return new t(Object(r.Yb)(se.c),Object(r.Yb)(se.b,8),Object(r.Yb)(Wm,8),Object(r.Yb)($m,8),Object(r.Yb)(r.C),Object(r.Yb)(r.A),Object(r.Yb)(Ym,8),Object(r.Yb)(Km,8),Object(r.Yb)(Rm,8))},token:t,providedIn:"any"}),t})(),Jm=(()=>{class t{static enablePersistence(e){return{ngModule:t,providers:[{provide:Wm,useValue:!0},{provide:Ym,useValue:e}]}}}return t.\u0275mod=r.Kb({type:t}),t.\u0275inj=r.Jb({factory:function(e){return new(e||t)},providers:[Zm]}),t})();class ty{constructor(t,e){this.dueTime=t,this.scheduler=e}call(t,e){return e.subscribe(new ey(t,this.dueTime,this.scheduler))}}class ey extends ge.a{constructor(t,e,n){super(t),this.dueTime=e,this.scheduler=n,this.debouncedSubscription=null,this.lastValue=null,this.hasValue=!1}_next(t){this.clearDebounce(),this.lastValue=t,this.hasValue=!0,this.add(this.debouncedSubscription=this.scheduler.schedule(ny,this.dueTime,this))}_complete(){this.debouncedNext(),this.destination.complete()}debouncedNext(){if(this.clearDebounce(),this.hasValue){const{lastValue:t}=this;this.lastValue=null,this.hasValue=!1,this.destination.next(t)}}clearDebounce(){const t=this.debouncedSubscription;null!==t&&(this.remove(t),t.unsubscribe(),this.debouncedSubscription=null)}}function ny(t){t.debouncedNext()}var ry="firebasestorage.googleapis.com",iy=function(t){function e(n,r){var i=t.call(this,uy(n),"Firebase Storage: "+r+" ("+uy(n)+")")||this;return i.customData={serverResponse:null},Object.setPrototypeOf(i,e.prototype),i}return Object(Lo.c)(e,t),e.prototype.codeEquals=function(t){return uy(t)===this.code},Object.defineProperty(e.prototype,"message",{get:function(){return this.customData.serverResponse?this.message+"\n"+this.customData.serverResponse:this.message},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"serverResponse",{get:function(){return this.customData.serverResponse},set:function(t){this.customData.serverResponse=t},enumerable:!1,configurable:!0}),e}(je.c),oy="canceled",sy="invalid-argument",ay="unsupported-environment";function uy(t){return"storage/"+t}function cy(){return new iy("unknown","An unknown error occurred, please check the error payload for server response.")}function ly(){return new iy(oy,"User canceled the upload/download.")}function hy(){return new iy("cannot-slice-blob","Cannot slice blob for upload. Please retry the upload.")}function dy(t){return new iy(sy,t)}function fy(){return new iy("app-deleted","The Firebase app was deleted.")}function py(t){return new iy("invalid-root-operation","The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function gy(t,e){return new iy("invalid-format","String does not match format '"+t+"': "+e)}function my(t){throw new iy("internal-error","Internal error: "+t)}var yy={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"},by=function(){return function(t,e){this.data=t,this.contentType=e||null}}();function vy(t,e){switch(t){case yy.RAW:return new by(_y(e));case yy.BASE64:case yy.BASE64URL:return new by(wy(t,e));case yy.DATA_URL:return new by((n=new Cy(e)).base64?wy(yy.BASE64,n.rest):function(t){var e;try{e=decodeURIComponent(t)}catch(Kg){throw gy(yy.DATA_URL,"Malformed data URL.")}return _y(e)}(n.rest),new Cy(e).contentType)}var n;throw cy()}function _y(t){for(var e=[],n=0;n<t.length;n++){var r=t.charCodeAt(n);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|63&r);else if(55296==(64512&r))if(n<t.length-1&&56320==(64512&t.charCodeAt(n+1))){var i=r,o=t.charCodeAt(++n);e.push(240|(r=65536|(1023&i)<<10|1023&o)>>18,128|r>>12&63,128|r>>6&63,128|63&r)}else e.push(239,191,189);else 56320==(64512&r)?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(e)}function wy(t,e){switch(t){case yy.BASE64:var n=-1!==e.indexOf("-"),r=-1!==e.indexOf("_");if(n||r)throw gy(t,"Invalid character '"+(n?"-":"_")+"' found: is it base64url encoded?");break;case yy.BASE64URL:var i=-1!==e.indexOf("+"),o=-1!==e.indexOf("/");if(i||o)throw gy(t,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/")}var s;try{s=atob(e)}catch(Kg){throw gy(t,"Invalid character found")}for(var a=new Uint8Array(s.length),u=0;u<s.length;u++)a[u]=s.charCodeAt(u);return a}var Cy=function(){return function(t){this.base64=!1,this.contentType=null;var e=t.match(/^data:([^,]+)?,/);if(null===e)throw gy(yy.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");var n,r,i=e[1]||null;null!=i&&(this.base64=(n=i).length>=(r=";base64").length&&n.substring(n.length-r.length)===r,this.contentType=this.base64?i.substring(0,i.length-";base64".length):i),this.rest=t.substring(t.indexOf(",")+1)}}(),Oy="running",Ey="pausing",xy="paused",Iy="success",Sy="canceling",Ty="canceled",Py="error",Ry={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function Ay(t){switch(t){case Oy:case Ey:case Sy:return Ry.RUNNING;case xy:return Ry.PAUSED;case Iy:return Ry.SUCCESS;case Ty:return Ry.CANCELED;case Py:default:return Ry.ERROR}}var ky=function(t){return t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT",t}({}),jy=function(){function t(){var t=this;this.sent_=!1,this.xhr_=new XMLHttpRequest,this.errorCode_=ky.NO_ERROR,this.sendPromise_=new Promise(function(e){t.xhr_.addEventListener("abort",function(){t.errorCode_=ky.ABORT,e(t)}),t.xhr_.addEventListener("error",function(){t.errorCode_=ky.NETWORK_ERROR,e(t)}),t.xhr_.addEventListener("load",function(){e(t)})})}return t.prototype.send=function(t,e,n,r){if(this.sent_)throw my("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(e,t,!0),void 0!==r)for(var i in r)r.hasOwnProperty(i)&&this.xhr_.setRequestHeader(i,r[i].toString());return void 0!==n?this.xhr_.send(n):this.xhr_.send(),this.sendPromise_},t.prototype.getErrorCode=function(){if(!this.sent_)throw my("cannot .getErrorCode() before sending");return this.errorCode_},t.prototype.getStatus=function(){if(!this.sent_)throw my("cannot .getStatus() before sending");try{return this.xhr_.status}catch(Kg){return-1}},t.prototype.getResponseText=function(){if(!this.sent_)throw my("cannot .getResponseText() before sending");return this.xhr_.responseText},t.prototype.abort=function(){this.xhr_.abort()},t.prototype.getResponseHeader=function(t){return this.xhr_.getResponseHeader(t)},t.prototype.addUploadProgressListener=function(t){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",t)},t.prototype.removeUploadProgressListener=function(t){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",t)},t}(),Ny=function(){function t(){}return t.prototype.createXhrIo=function(){return new jy},t}();function Dy(t){return"string"==typeof t||t instanceof String}function My(t){return Ly()&&t instanceof Blob}function Ly(){return"undefined"!=typeof Blob}function Fy(t,e,n,r){if(r<e)throw new iy(sy,"Invalid value for '"+t+"'. Expected "+e+" or greater.");if(r>n)throw new iy(sy,"Invalid value for '"+t+"'. Expected "+n+" or less.")}function Uy(){return"undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof WebKitBlobBuilder?WebKitBlobBuilder:void 0}function Vy(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=Uy();if(void 0!==n){for(var r=new n,i=0;i<t.length;i++)r.append(t[i]);return r.getBlob()}if(Ly())return new Blob(t);throw new iy(ay,"This browser doesn't seem to support creating Blobs")}var Qy=function(){function t(t,e){var n=0,r="";My(t)?(this.data_=t,n=t.size,r=t.type):t instanceof ArrayBuffer?(e?this.data_=new Uint8Array(t):(this.data_=new Uint8Array(t.byteLength),this.data_.set(new Uint8Array(t))),n=this.data_.length):t instanceof Uint8Array&&(e?this.data_=t:(this.data_=new Uint8Array(t.length),this.data_.set(t)),n=t.length),this.size_=n,this.type_=r}return t.prototype.size=function(){return this.size_},t.prototype.type=function(){return this.type_},t.prototype.slice=function(e,n){if(My(this.data_)){var r=(o=e,s=n,(i=this.data_).webkitSlice?i.webkitSlice(o,s):i.mozSlice?i.mozSlice(o,s):i.slice?i.slice(o,s):null);return null===r?null:new t(r)}var i,o,s;return new t(new Uint8Array(this.data_.buffer,e,n-e),!0)},t.getBlob=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];if(Ly()){var r=e.map(function(e){return e instanceof t?e.data_:e});return new t(Vy.apply(null,r))}var i=e.map(function(t){return Dy(t)?vy(yy.RAW,t).data:t.data_}),o=0;i.forEach(function(t){o+=t.byteLength});var s=new Uint8Array(o),a=0;return i.forEach(function(t){for(var e=0;e<t.length;e++)s[a++]=t[e]}),new t(s,!0)},t.prototype.uploadData=function(){return this.data_},t}(),Hy=function(){function t(t,e){this.bucket=t,this.path_=e}return Object.defineProperty(t.prototype,"path",{get:function(){return this.path_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isRoot",{get:function(){return 0===this.path.length},enumerable:!1,configurable:!0}),t.prototype.fullServerUrl=function(){var t=encodeURIComponent;return"/b/"+t(this.bucket)+"/o/"+t(this.path)},t.prototype.bucketOnlyServerUrl=function(){return"/b/"+encodeURIComponent(this.bucket)+"/o"},t.makeFromBucketSpec=function(e){var n;try{n=t.makeFromUrl(e)}catch(Kg){return new t(e,"")}if(""===n.path)return n;throw new iy("invalid-default-bucket","Invalid default bucket '"+e+"'.")},t.makeFromUrl=function(e){var n=null,r="([A-Za-z0-9.\\-_]+)",i=new RegExp("^gs://"+r+"(/(.*))?$","i");function o(t){t.path_=decodeURIComponent(t.path)}for(var s=ry.replace(/[.]/g,"\\."),a=[{regex:i,indices:{bucket:1,path:3},postModify:function(t){"/"===t.path.charAt(t.path.length-1)&&(t.path_=t.path_.slice(0,-1))}},{regex:new RegExp("^https?://"+s+"/v[A-Za-z0-9_]+/b/"+r+"/o(/([^?#]*).*)?$","i"),indices:{bucket:1,path:3},postModify:o},{regex:new RegExp("^https?://(?:storage.googleapis.com|storage.cloud.google.com)/"+r+"/([^?#]*)","i"),indices:{bucket:1,path:2},postModify:o}],u=0;u<a.length;u++){var c=a[u],l=c.regex.exec(e);if(l){var h=l[c.indices.path];h||(h=""),n=new t(l[c.indices.bucket],h),c.postModify(n);break}}if(null==n)throw function(t){return new iy("invalid-url","Invalid URL '"+t+"'.")}(e);return n},t}();function qy(t){var e,n;try{e=JSON.parse(t)}catch(Kg){return null}return"object"!=typeof(n=e)||Array.isArray(n)?null:e}function By(t){var e=t.lastIndexOf("/",t.length-2);return-1===e?t:t.slice(e+1)}function zy(t){return"https://"+ry+"/v0"+t}function Gy(t){var e=encodeURIComponent,n="?";for(var r in t)t.hasOwnProperty(r)&&(n=n+(e(r)+"=")+e(t[r])+"&");return n.slice(0,-1)}function Wy(t,e){return e}var Yy=function(){return function(t,e,n,r){this.server=t,this.local=e||t,this.writable=!!n,this.xform=r||Wy}}(),$y=null;function Ky(){if($y)return $y;var t=[];t.push(new Yy("bucket")),t.push(new Yy("generation")),t.push(new Yy("metageneration")),t.push(new Yy("name","fullPath",!0));var e=new Yy("name");e.xform=function(t,e){return function(t){return!Dy(t)||t.length<2?t:By(t)}(e)},t.push(e);var n=new Yy("size");return n.xform=function(t,e){return void 0!==e?Number(e):e},t.push(n),t.push(new Yy("timeCreated")),t.push(new Yy("updated")),t.push(new Yy("md5Hash",null,!0)),t.push(new Yy("cacheControl",null,!0)),t.push(new Yy("contentDisposition",null,!0)),t.push(new Yy("contentEncoding",null,!0)),t.push(new Yy("contentLanguage",null,!0)),t.push(new Yy("contentType",null,!0)),t.push(new Yy("metadata","customMetadata",!0)),$y=t}function Xy(t,e,n){var r=qy(e);return null===r?null:function(t,e,n){for(var r={type:"file"},i=n.length,o=0;o<i;o++){var s=n[o];r[s.local]=s.xform(r,e[s.server])}return function(t,e){Object.defineProperty(t,"ref",{get:function(){var n=new Hy(t.bucket,t.fullPath);return e.makeStorageReference(n)}})}(r,t),r}(t,r,n)}function Zy(t,e){for(var n={},r=e.length,i=0;i<r;i++){var o=e[i];o.writable&&(n[o.server]=t[o.local])}return JSON.stringify(n)}var Jy=function(){return function(t,e,n,r){this.url=t,this.method=e,this.handler=n,this.timeout=r,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}();function tb(t){if(!t)throw cy()}function eb(t,e){return function(n,r){var i=Xy(t,r,e);return tb(null!==i),i}}function nb(t){return function(e,n){var r;return(r=401===e.getStatus()?new iy("unauthenticated","User is not authenticated, please authenticate using Firebase Authentication and try again."):402===e.getStatus()?new iy("quota-exceeded","Quota for bucket '"+t.bucket+"' exceeded, please view quota on https://firebase.google.com/pricing/."):403===e.getStatus()?new iy("unauthorized","User does not have permission to access '"+t.path+"'."):n).serverResponse=n.serverResponse,r}}function rb(t){var e=nb(t);return function(n,r){var i=e(n,r);return 404===n.getStatus()&&(i=new iy("object-not-found","Object '"+t.path+"' does not exist.")),i.serverResponse=r.serverResponse,i}}function ib(t,e,n){var r=zy(e.fullServerUrl()),i=t.maxOperationRetryTime,o=new Jy(r,"GET",eb(t,n),i);return o.errorHandler=rb(e),o}function ob(t,e,n){var r=Object.assign({},n);return r.fullPath=t.path,r.size=e.size(),r.contentType||(r.contentType=function(t,e){return e&&e.type()||"application/octet-stream"}(0,e)),r}var sb=function(){return function(t,e,n,r){this.current=t,this.total=e,this.finalized=!!n,this.metadata=r||null}}();function ab(t,e){var n=null;try{n=t.getResponseHeader("X-Goog-Upload-Status")}catch(Kg){tb(!1)}return tb(!!n&&-1!==(e||["active"]).indexOf(n)),n}var ub=262144,cb=function(){return function(t,e,n){if("function"==typeof t||null!=e||null!=n)this.next=t,this.error=e,this.complete=n;else{var r=t;this.next=r.next,this.error=r.error,this.complete=r.complete}}}(),lb=function(){return function(t,e,n,r,i,o){this.bytesTransferred=t,this.totalBytes=e,this.state=n,this.metadata=r,this.task=i,this.ref=o}}();function hb(t){return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];Promise.resolve().then(function(){return t.apply(void 0,e)})}}var db=function(){function t(t,e,n){var r=this;void 0===n&&(n=null),this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=t,this._blob=e,this._metadata=n,this._mappings=Ky(),this._resumable=this._shouldDoResumable(this._blob),this._state=Oy,this._errorHandler=function(t){r._request=void 0,r._chunkMultiplier=1,t.codeEquals(oy)?(r._needToFetchStatus=!0,r.completeTransitions_()):(r._error=t,r._transition(Py))},this._metadataErrorHandler=function(t){r._request=void 0,t.codeEquals(oy)?r.completeTransitions_():(r._error=t,r._transition(Py))},this._promise=new Promise(function(t,e){r._resolve=t,r._reject=e,r._start()}),this._promise.then(null,function(){})}return t.prototype._makeProgressCallback=function(){var t=this,e=this._transferred;return function(n){return t._updateProgress(e+n)}},t.prototype._shouldDoResumable=function(t){return t.size()>262144},t.prototype._start=function(){this._state===Oy&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this._continueUpload():this._oneShotUpload())},t.prototype._resolveToken=function(t){var e=this;this._ref.storage.getAuthToken().then(function(n){switch(e._state){case Oy:t(n);break;case Sy:e._transition(Ty);break;case Ey:e._transition(xy)}})},t.prototype._createResumable=function(){var t=this;this._resolveToken(function(e){var n=function(t,e,n,r,i){var o=e.bucketOnlyServerUrl(),s=ob(e,r,i),a={name:s.fullPath},u=zy(o),c={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":r.size(),"X-Goog-Upload-Header-Content-Type":s.contentType,"Content-Type":"application/json; charset=utf-8"},l=Zy(s,n),h=new Jy(u,"POST",function(t){var e;ab(t);try{e=t.getResponseHeader("X-Goog-Upload-URL")}catch(Kg){tb(!1)}return tb(Dy(e)),e},t.maxUploadRetryTime);return h.urlParams=a,h.headers=c,h.body=l,h.errorHandler=nb(e),h}(t._ref.storage,t._ref._location,t._mappings,t._blob,t._metadata),r=t._ref.storage.makeRequest(n,e);t._request=r,r.getPromise().then(function(e){t._request=void 0,t._uploadUrl=e,t._needToFetchStatus=!1,t.completeTransitions_()},t._errorHandler)})},t.prototype._fetchStatus=function(){var t=this,e=this._uploadUrl;this._resolveToken(function(n){var r=function(t,e,n,r){var i=new Jy(n,"POST",function(t){var e=ab(t,["active","final"]),n=null;try{n=t.getResponseHeader("X-Goog-Upload-Size-Received")}catch(Kg){tb(!1)}n||tb(!1);var i=Number(n);return tb(!isNaN(i)),new sb(i,r.size(),"final"===e)},t.maxUploadRetryTime);return i.headers={"X-Goog-Upload-Command":"query"},i.errorHandler=nb(e),i}(t._ref.storage,t._ref._location,e,t._blob),i=t._ref.storage.makeRequest(r,n);t._request=i,i.getPromise().then(function(e){e=e,t._request=void 0,t._updateProgress(e.current),t._needToFetchStatus=!1,e.finalized&&(t._needToFetchMetadata=!0),t.completeTransitions_()},t._errorHandler)})},t.prototype._continueUpload=function(){var t=this,e=ub*this._chunkMultiplier,n=new sb(this._transferred,this._blob.size()),r=this._uploadUrl;this._resolveToken(function(i){var o;try{o=function(t,e,n,r,i,o,s,a){var u=new sb(0,0);if(s?(u.current=s.current,u.total=s.total):(u.current=0,u.total=r.size()),r.size()!==u.total)throw new iy("server-file-wrong-size","Server recorded incorrect upload file size, please retry the upload.");var c=u.total-u.current,l=c;i>0&&(l=Math.min(l,i));var h=u.current,d={"X-Goog-Upload-Command":l===c?"upload, finalize":"upload","X-Goog-Upload-Offset":u.current},f=r.slice(h,h+l);if(null===f)throw hy();var p=new Jy(n,"POST",function(t,n){var i,s=ab(t,["active","final"]),a=u.current+l,c=r.size();return i="final"===s?eb(e,o)(t,n):null,new sb(a,c,"final"===s,i)},e.maxUploadRetryTime);return p.headers=d,p.body=f.uploadData(),p.progressCallback=a||null,p.errorHandler=nb(t),p}(t._ref._location,t._ref.storage,r,t._blob,e,t._mappings,n,t._makeProgressCallback())}catch(Kg){return t._error=Kg,void t._transition(Py)}var s=t._ref.storage.makeRequest(o,i);t._request=s,s.getPromise().then(function(e){t._increaseMultiplier(),t._request=void 0,t._updateProgress(e.current),e.finalized?(t._metadata=e.metadata,t._transition(Iy)):t.completeTransitions_()},t._errorHandler)})},t.prototype._increaseMultiplier=function(){ub*this._chunkMultiplier<33554432&&(this._chunkMultiplier*=2)},t.prototype._fetchMetadata=function(){var t=this;this._resolveToken(function(e){var n=ib(t._ref.storage,t._ref._location,t._mappings),r=t._ref.storage.makeRequest(n,e);t._request=r,r.getPromise().then(function(e){t._request=void 0,t._metadata=e,t._transition(Iy)},t._metadataErrorHandler)})},t.prototype._oneShotUpload=function(){var t=this;this._resolveToken(function(e){var n=function(t,e,n,r,i){var o=e.bucketOnlyServerUrl(),s={"X-Goog-Upload-Protocol":"multipart"},a=function(){for(var t="",e=0;e<2;e++)t+=Math.random().toString().slice(2);return t}();s["Content-Type"]="multipart/related; boundary="+a;var u=ob(e,r,i),c=Zy(u,n),l=Qy.getBlob("--"+a+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+c+"\r\n--"+a+"\r\nContent-Type: "+u.contentType+"\r\n\r\n",r,"\r\n--"+a+"--");if(null===l)throw hy();var h={name:u.fullPath},d=zy(o),f=t.maxUploadRetryTime,p=new Jy(d,"POST",eb(t,n),f);return p.urlParams=h,p.headers=s,p.body=l.uploadData(),p.errorHandler=nb(e),p}(t._ref.storage,t._ref._location,t._mappings,t._blob,t._metadata),r=t._ref.storage.makeRequest(n,e);t._request=r,r.getPromise().then(function(e){t._request=void 0,t._metadata=e,t._updateProgress(t._blob.size()),t._transition(Iy)},t._errorHandler)})},t.prototype._updateProgress=function(t){var e=this._transferred;this._transferred=t,this._transferred!==e&&this._notifyObservers()},t.prototype._transition=function(t){if(this._state!==t)switch(t){case Sy:case Ey:this._state=t,void 0!==this._request&&this._request.cancel();break;case Oy:var e=this._state===xy;this._state=t,e&&(this._notifyObservers(),this._start());break;case xy:this._state=t,this._notifyObservers();break;case Ty:this._error=ly(),this._state=t,this._notifyObservers();break;case Py:case Iy:this._state=t,this._notifyObservers()}},t.prototype.completeTransitions_=function(){switch(this._state){case Ey:this._transition(xy);break;case Sy:this._transition(Ty);break;case Oy:this._start()}},Object.defineProperty(t.prototype,"snapshot",{get:function(){var t=Ay(this._state);return new lb(this._transferred,this._blob.size(),t,this._metadata,this,this._ref)},enumerable:!1,configurable:!0}),t.prototype.on=function(t,e,n,r){var i=this,o=new cb(e,n,r);return this._addObserver(o),function(){i._removeObserver(o)}},t.prototype.then=function(t,e){return this._promise.then(t,e)},t.prototype.catch=function(t){return this.then(null,t)},t.prototype._addObserver=function(t){this._observers.push(t),this._notifyObserver(t)},t.prototype._removeObserver=function(t){var e=this._observers.indexOf(t);-1!==e&&this._observers.splice(e,1)},t.prototype._notifyObservers=function(){var t=this;this._finishPromise(),this._observers.slice().forEach(function(e){t._notifyObserver(e)})},t.prototype._finishPromise=function(){if(void 0!==this._resolve){var t=!0;switch(Ay(this._state)){case Ry.SUCCESS:hb(this._resolve.bind(null,this.snapshot))();break;case Ry.CANCELED:case Ry.ERROR:hb(this._reject.bind(null,this._error))();break;default:t=!1}t&&(this._resolve=void 0,this._reject=void 0)}},t.prototype._notifyObserver=function(t){switch(Ay(this._state)){case Ry.RUNNING:case Ry.PAUSED:t.next&&hb(t.next.bind(t,this.snapshot))();break;case Ry.SUCCESS:t.complete&&hb(t.complete.bind(t))();break;case Ry.CANCELED:case Ry.ERROR:t.error&&hb(t.error.bind(t,this._error))();break;default:t.error&&hb(t.error.bind(t,this._error))()}},t.prototype.resume=function(){var t=this._state===xy||this._state===Ey;return t&&this._transition(Oy),t},t.prototype.pause=function(){var t=this._state===Oy;return t&&this._transition(Ey),t},t.prototype.cancel=function(){var t=this._state===Oy||this._state===Ey;return t&&this._transition(Sy),t},t}(),fb=function(){function t(t,e){this._service=t,this._location=e instanceof Hy?e:Hy.makeFromUrl(e)}return t.prototype.toString=function(){return"gs://"+this._location.bucket+"/"+this._location.path},t.prototype.newRef=function(e,n){return new t(e,n)},Object.defineProperty(t.prototype,"root",{get:function(){var t=new Hy(this._location.bucket,"");return this.newRef(this._service,t)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"bucket",{get:function(){return this._location.bucket},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fullPath",{get:function(){return this._location.path},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return By(this._location.path)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"storage",{get:function(){return this._service},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){var e=function(t){if(0===t.length)return null;var e=t.lastIndexOf("/");return-1===e?"":t.slice(0,e)}(this._location.path);if(null===e)return null;var n=new Hy(this._location.bucket,e);return new t(this._service,n)},enumerable:!1,configurable:!0}),t.prototype._throwIfRoot=function(t){if(""===this._location.path)throw py(t)},t}();function pb(t){var e={prefixes:[],items:[]};return gb(t,e).then(function(){return e})}function gb(t,e,n){return Object(Lo.b)(this,void 0,void 0,function(){var r,i,o;return Object(Lo.d)(this,function(s){switch(s.label){case 0:return[4,mb(t,{pageToken:n})];case 1:return r=s.sent(),(i=e.prefixes).push.apply(i,r.prefixes),(o=e.items).push.apply(o,r.items),null==r.nextPageToken?[3,3]:[4,gb(t,e,r.nextPageToken)];case 2:s.sent(),s.label=3;case 3:return[2]}})})}function mb(t,e){return Object(Lo.b)(this,void 0,void 0,function(){var n,r,i;return Object(Lo.d)(this,function(o){switch(o.label){case 0:return null!=e&&"number"==typeof e.maxResults&&Fy("options.maxResults",1,1e3,e.maxResults),[4,t.storage.getAuthToken()];case 1:return n=o.sent(),i=function(t,e,n,r,i){var o={};o.prefix=e.isRoot?"":e.path+"/",n&&n.length>0&&(o.delimiter=n),r&&(o.pageToken=r),i&&(o.maxResults=i);var s=zy(e.bucketOnlyServerUrl()),a=t.maxOperationRetryTime,u=new Jy(s,"GET",function(t,e){return function(n,r){var i=function(t,e,n){var r=qy(n);return null===r?null:function(t,e,n){var r={prefixes:[],items:[],nextPageToken:n.nextPageToken};if(n.prefixes)for(var i=0,o=n.prefixes;i<o.length;i++){var s=o[i].replace(/\/$/,""),a=t.makeStorageReference(new Hy(e,s));r.prefixes.push(a)}if(n.items)for(var u=0,c=n.items;u<c.length;u++)a=t.makeStorageReference(new Hy(e,c[u].name)),r.items.push(a);return r}(t,e,r)}(t,e,r);return tb(null!==i),i}}(t,e.bucket),a);return u.urlParams=o,u.errorHandler=nb(e),u}(t.storage,t._location,"/",(r=e||{}).pageToken,r.maxResults),[2,t.storage.makeRequest(i,n).getPromise()]}})})}function yb(t,e){var n=function(t,e){var n=e.split("/").filter(function(t){return t.length>0}).join("/");return 0===t.length?n:t+"/"+n}(t._location.path,e),r=new Hy(t._location.bucket,n);return new fb(t.storage,r)}var bb=function(){function t(t,e,n){this._delegate=t,this.task=e,this.ref=n}return Object.defineProperty(t.prototype,"bytesTransferred",{get:function(){return this._delegate.bytesTransferred},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"metadata",{get:function(){return this._delegate.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"state",{get:function(){return this._delegate.state},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"totalBytes",{get:function(){return this._delegate.totalBytes},enumerable:!1,configurable:!0}),t}(),vb=function(){function t(t,e){this._delegate=t,this._ref=e,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate),this._snapshot=new bb(this._delegate.snapshot,this,this._ref)}return Object.defineProperty(t.prototype,"snapshot",{get:function(){return this._snapshot},enumerable:!1,configurable:!0}),t.prototype.then=function(t,e){var n=this;return this._delegate.then(function(e){if(t)return t(new bb(e,n,n._ref))},e)},t.prototype.on=function(t,e,n,r){var i=this,o=void 0;return e&&(o="function"==typeof e?function(t){return e(new bb(t,i,i._ref))}:{next:e.next?function(t){return e.next(new bb(t,i,i._ref))}:void 0,complete:e.complete||void 0,error:e.error||void 0}),this._delegate.on(t,o,n||void 0,r||void 0)},t}(),_b=function(){function t(t,e){this._delegate=t,this._service=e}return Object.defineProperty(t.prototype,"prefixes",{get:function(){var t=this;return this._delegate.prefixes.map(function(e){return new wb(e,t._service)})},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"items",{get:function(){var t=this;return this._delegate.items.map(function(e){return new wb(e,t._service)})},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"nextPageToken",{get:function(){return this._delegate.nextPageToken||null},enumerable:!1,configurable:!0}),t}(),wb=function(){function t(t,e){this._delegate=t,this.storage=e}return Object.defineProperty(t.prototype,"name",{get:function(){return this._delegate.name},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"bucket",{get:function(){return this._delegate.bucket},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fullPath",{get:function(){return this._delegate.fullPath},enumerable:!1,configurable:!0}),t.prototype.toString=function(){return this._delegate.toString()},t.prototype.child=function(e){return new t(yb(this._delegate,e),this.storage)},Object.defineProperty(t.prototype,"root",{get:function(){return new t(this._delegate.root,this.storage)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){var e=this._delegate.parent;return null==e?null:new t(e,this.storage)},enumerable:!1,configurable:!0}),t.prototype.put=function(t,e){return this._throwIfRoot("put"),new vb(function(t,e,n){return void 0===n&&(n=null),t._throwIfRoot("uploadBytesResumable"),new db(t,new Qy(e),n)}(this._delegate,t,e),this)},t.prototype.putString=function(t,e,n){return void 0===e&&(e=yy.RAW),this._throwIfRoot("putString"),new vb(function(t,e,n,r){void 0===n&&(n=yy.RAW),t._throwIfRoot("putString");var i=vy(n,e),o=Object(Lo.a)({},r);return null==o.contentType&&null!=i.contentType&&(o.contentType=i.contentType),new db(t,new Qy(i.data,!0),o)}(this._delegate,t,e,n),this)},t.prototype.listAll=function(){var t=this;return pb(this._delegate).then(function(e){return new _b(e,t.storage)})},t.prototype.list=function(t){var e=this;return mb(this._delegate,t).then(function(t){return new _b(t,e.storage)})},t.prototype.getMetadata=function(){return function(t){return Object(Lo.b)(this,void 0,void 0,function(){var e,n;return Object(Lo.d)(this,function(r){switch(r.label){case 0:return t._throwIfRoot("getMetadata"),[4,t.storage.getAuthToken()];case 1:return e=r.sent(),n=ib(t.storage,t._location,Ky()),[2,t.storage.makeRequest(n,e).getPromise()]}})})}(this._delegate)},t.prototype.updateMetadata=function(t){return function(t,e){return Object(Lo.b)(this,void 0,void 0,function(){var n,r;return Object(Lo.d)(this,function(i){switch(i.label){case 0:return t._throwIfRoot("updateMetadata"),[4,t.storage.getAuthToken()];case 1:return n=i.sent(),r=function(t,e,n,r){var i=zy(e.fullServerUrl()),o=Zy(n,r),s=t.maxOperationRetryTime,a=new Jy(i,"PATCH",eb(t,r),s);return a.headers={"Content-Type":"application/json; charset=utf-8"},a.body=o,a.errorHandler=rb(e),a}(t.storage,t._location,e,Ky()),[2,t.storage.makeRequest(r,n).getPromise()]}})})}(this._delegate,t)},t.prototype.getDownloadURL=function(){return function(t){return Object(Lo.b)(this,void 0,void 0,function(){var e,n;return Object(Lo.d)(this,function(r){switch(r.label){case 0:return t._throwIfRoot("getDownloadURL"),[4,t.storage.getAuthToken()];case 1:return e=r.sent(),n=function(t,e,n){var r=zy(e.fullServerUrl()),i=t.maxOperationRetryTime,o=new Jy(r,"GET",function(t,e){return function(n,r){var i=Xy(t,r,e);return tb(null!==i),function(t,e){var n=qy(e);if(null===n)return null;if(!Dy(n.downloadTokens))return null;var r=n.downloadTokens;if(0===r.length)return null;var i=encodeURIComponent;return r.split(",").map(function(e){var n=t.fullPath;return zy("/b/"+i(t.bucket)+"/o/"+i(n))+Gy({alt:"media",token:e})})[0]}(i,r)}}(t,n),i);return o.errorHandler=rb(e),o}(t.storage,t._location,Ky()),[2,t.storage.makeRequest(n,e).getPromise().then(function(t){if(null===t)throw new iy("no-download-url","The given file does not have any download URLs.");return t})]}})})}(this._delegate)},t.prototype.delete=function(){return this._throwIfRoot("delete"),function(t){return Object(Lo.b)(this,void 0,void 0,function(){var e,n;return Object(Lo.d)(this,function(r){switch(r.label){case 0:return t._throwIfRoot("deleteObject"),[4,t.storage.getAuthToken()];case 1:return e=r.sent(),n=function(t,e){var n=zy(e.fullServerUrl()),r=new Jy(n,"DELETE",function(t,e){},t.maxOperationRetryTime);return r.successCodes=[200,204],r.errorHandler=rb(e),r}(t.storage,t._location),[2,t.storage.makeRequest(n,e).getPromise()]}})})}(this._delegate)},t.prototype._throwIfRoot=function(t){if(""===this._delegate._location.path)throw py(t)},t}(),Cb=function(){function t(t){this.promise_=Promise.reject(t)}return t.prototype.getPromise=function(){return this.promise_},t.prototype.cancel=function(t){},t}(),Ob=function(){function t(t,e,n,r,i,o,s,a,u,c,l){var h=this;this.pendingXhr_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.url_=t,this.method_=e,this.headers_=n,this.body_=r,this.successCodes_=i.slice(),this.additionalRetryCodes_=o.slice(),this.callback_=s,this.errorCallback_=a,this.progressCallback_=c,this.timeout_=u,this.pool_=l,this.promise_=new Promise(function(t,e){h.resolve_=t,h.reject_=e,h.start_()})}return t.prototype.start_=function(){var t=this;function e(e,n){var r,i=t.resolve_,o=t.reject_,s=n.xhr;if(n.wasSuccessCode)try{var a=t.callback_(s,s.getResponseText());void 0!==a?i(a):i()}catch(Kg){o(Kg)}else null!==s?((r=cy()).serverResponse=s.getResponseText(),o(t.errorCallback_?t.errorCallback_(s,r):r)):o(r=n.canceled?t.appDelete_?fy():ly():new iy("retry-limit-exceeded","Max retry time for operation exceeded, please try again."))}this.canceled_?e(0,new Eb(!1,null,!0)):this.backoffId_=function(e,n,r){var i=1,o=null,s=!1,a=0;function u(){return 2===a}var c=!1;function l(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];c||(c=!0,n.apply(null,t))}function h(e){o=setTimeout(function(){o=null,function(e,n){if(n)e(!1,new Eb(!1,null,!0));else{var r=t.pool_.createXhrIo();t.pendingXhr_=r,null!==t.progressCallback_&&r.addUploadProgressListener(i),r.send(t.url_,t.method_,t.body_,t.headers_).then(function(n){null!==t.progressCallback_&&n.removeUploadProgressListener(i),t.pendingXhr_=null;var r=(n=n).getErrorCode()===ky.NO_ERROR,o=n.getStatus();if(r&&!t.isRetryStatusCode_(o)){var s=-1!==t.successCodes_.indexOf(o);e(!0,new Eb(s,n))}else{var a=n.getErrorCode()===ky.ABORT;e(!1,new Eb(!1,null,a))}})}function i(e){null!==t.progressCallback_&&t.progressCallback_(e.loaded,e.lengthComputable?e.total:-1)}}(d,u())},e)}function d(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(!c)if(t)l.call.apply(l,Object(Lo.g)([null,t],e));else{var r;u()||s?l.call.apply(l,Object(Lo.g)([null,t],e)):(i<64&&(i*=2),1===a?(a=2,r=0):r=1e3*(i+Math.random()),h(r))}}var f=!1;function p(t){f||(f=!0,c||(null!==o?(t||(a=2),clearTimeout(o),h(0)):t||(a=1)))}return h(0),setTimeout(function(){s=!0,p(!0)},r),p}(0,e,this.timeout_)},t.prototype.getPromise=function(){return this.promise_},t.prototype.cancel=function(t){this.canceled_=!0,this.appDelete_=t||!1,null!==this.backoffId_&&(0,this.backoffId_)(!1),null!==this.pendingXhr_&&this.pendingXhr_.abort()},t.prototype.isRetryStatusCode_=function(t){var e=t>=500&&t<600,n=-1!==[408,429].indexOf(t),r=-1!==this.additionalRetryCodes_.indexOf(t);return e||n||r},t}(),Eb=function(){return function(t,e,n){this.wasSuccessCode=t,this.xhr=e,this.canceled=!!n}}();function xb(t){return/^[A-Za-z]+:\/\//.test(t)}function Ib(t,e){if(t instanceof Rb){var n=t;if(null==n._bucket)throw new iy("no-default-bucket","No default bucket found. Did you set the 'storageBucket' property when initializing the app?");var r=new fb(n,n._bucket);return null!=e?Ib(r,e):r}if(void 0!==e){if(e.includes(".."))throw dy('`path` param cannot contain ".."');return yb(t,e)}return t}function Sb(t,e){if(e&&xb(e)){if(t instanceof Rb)return new fb(t,e);throw dy("To use ref(service, url), the first argument must be a Storage instance.")}return Ib(t,e)}var Tb,Pb,Rb=function(){function t(t,e,n,r){var i,o;this.app=t,this._authProvider=e,this._pool=n,this._url=r,this._bucket=null,this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=r?Hy.makeFromBucketSpec(r):null==(o=null==(i=this.app.options)?void 0:i.storageBucket)?null:Hy.makeFromBucketSpec(o)}return Object.defineProperty(t.prototype,"maxUploadRetryTime",{get:function(){return this._maxUploadRetryTime},set:function(t){Fy("time",0,Number.POSITIVE_INFINITY,t),this._maxUploadRetryTime=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"maxOperationRetryTime",{get:function(){return this._maxOperationRetryTime},set:function(t){Fy("time",0,Number.POSITIVE_INFINITY,t),this._maxOperationRetryTime=t},enumerable:!1,configurable:!0}),t.prototype.getAuthToken=function(){return Object(Lo.b)(this,void 0,void 0,function(){var t,e;return Object(Lo.d)(this,function(n){switch(n.label){case 0:return(t=this._authProvider.getImmediate({optional:!0}))?[4,t.getToken()]:[3,2];case 1:if(null!==(e=n.sent()))return[2,e.accessToken];n.label=2;case 2:return[2,null]}})})},t.prototype._delete=function(){return this._deleted=!0,this._requests.forEach(function(t){return t.cancel()}),this._requests.clear(),Promise.resolve()},t.prototype.makeStorageReference=function(t){return new fb(this,t)},t.prototype.makeRequest=function(t,e){var n=this;if(this._deleted)return new Cb(fy());var r=function(t,e,n,r){var i=Gy(t.urlParams),o=t.url+i,s=Object.assign({},t.headers);return function(t,e){e&&(t["X-Firebase-GMPID"]=e)}(s,e),function(t,e){null!==e&&e.length>0&&(t.Authorization="Firebase "+e)}(s,n),function(t){t["X-Firebase-Storage-Version"]="webjs/"+(void 0!==Ae.a?Ae.a.SDK_VERSION:"AppManager")}(s),new Ob(o,t.method,s,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,r)}(t,this._appId,e,this._pool);return this._requests.add(r),r.getPromise().then(function(){return n._requests.delete(r)},function(){return n._requests.delete(r)}),r},t}(),Ab=function(){function t(t,e){var n=this;this.app=t,this._delegate=e,this.INTERNAL={delete:function(){return n._delegate._delete()}}}return Object.defineProperty(t.prototype,"maxOperationRetryTime",{get:function(){return this._delegate.maxOperationRetryTime},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"maxUploadRetryTime",{get:function(){return this._delegate.maxUploadRetryTime},enumerable:!1,configurable:!0}),t.prototype.ref=function(t){if(xb(t))throw dy("ref() expected a child path but got a URL, use refFromURL instead.");return new wb(Sb(this._delegate,t),this)},t.prototype.refFromURL=function(t){if(!xb(t))throw dy("refFromURL() expected a full URL but got a child path, use ref() instead.");try{Hy.makeFromUrl(t)}catch(Kg){throw dy("refFromUrl() expected a valid full URL but got an invalid one.")}return new wb(Sb(this._delegate,t),this)},t.prototype.setMaxUploadRetryTime=function(t){this._delegate.maxUploadRetryTime=t},t.prototype.setMaxOperationRetryTime=function(t){this._delegate.maxOperationRetryTime=t},t}();function kb(t){const e=function(t){return new ue.a(e=>{const n=t=>e.next(t);n(t.snapshot);const r=t.on("state_changed",n);return t.then(t=>{n(t),e.complete()},r=>{n(t.snapshot),(t=>{e.error(t)})(r)}),function(){r()}}).pipe(function(t,e=ae.a){return n=>n.lift(new ty(t,e))}(0))}(t);return{task:t,then:t.then.bind(t),catch:t.catch.bind(t),pause:t.pause.bind(t),cancel:t.cancel.bind(t),resume:t.resume.bind(t),snapshotChanges:()=>e,percentageChanges:()=>e.pipe(Object(ve.a)(t=>t.bytesTransferred/t.totalBytes*100))}}function jb(t,e,n){return{getDownloadURL:()=>Object(le.a)(void 0).pipe(Object(Pe.b)(e.outsideAngular),rm(()=>t.getDownloadURL()),n),getMetadata:()=>Object(le.a)(void 0).pipe(Object(Pe.b)(e.outsideAngular),rm(()=>t.getMetadata()),n),delete:()=>Object(ce.a)(t.delete()),child:r=>jb(t.child(r),e,n),updateMetadata:e=>Object(ce.a)(t.updateMetadata(e)),put:(e,n)=>kb(t.put(e,n)),putString:(e,n,r)=>kb(t.putString(e,n,r)),listAll:()=>Object(ce.a)(t.listAll())}}Pb={TaskState:Ry,TaskEvent:{STATE_CHANGED:"state_changed"},StringFormat:yy,Storage:Rb,Reference:wb},(Tb=Ae.a).INTERNAL.registerComponent(new Jg.a("storage",function(t,e){var n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal");return new Ab(n,new Rb(n,r,new Ny,e))},"PUBLIC").setServiceProps(Pb).setMultipleInstances(!0)),Tb.registerVersion("@firebase/storage","0.4.2");const Nb=new r.r("angularfire2.storageBucket"),Db=new r.r("angularfire2.storage.maxUploadRetryTime"),Mb=new r.r("angularfire2.storage.maxOperationRetryTime");let Lb=(()=>{class t{constructor(t,e,n,r,i,o,s){this.schedulers=new se.d(i),this.keepUnstableUntilFirst=Object(se.h)(this.schedulers);const a=Object(se.g)(t,i,e);this.storage=Object(se.f)(`${a.name}.storage.${n}`,"AngularFireStorage",a,()=>{const t=i.runOutsideAngular(()=>a.storage(n||void 0));return o&&t.setMaxUploadRetryTime(o),s&&t.setMaxOperationRetryTime(s),t},[o,s])}ref(t){return jb(this.storage.ref(t),this.schedulers,this.keepUnstableUntilFirst)}refFromURL(t){return jb(this.storage.refFromURL(t),this.schedulers,this.keepUnstableUntilFirst)}upload(t,e,n){return jb(this.storage.ref(t),this.schedulers,this.keepUnstableUntilFirst).put(e,n)}}return t.\u0275fac=function(e){return new(e||t)(r.Yb(se.c),r.Yb(se.b,8),r.Yb(Nb,8),r.Yb(r.C),r.Yb(r.A),r.Yb(Db,8),r.Yb(Mb,8))},t.\u0275prov=Object(r.Ib)({factory:function(){return new t(Object(r.Yb)(se.c),Object(r.Yb)(se.b,8),Object(r.Yb)(Nb,8),Object(r.Yb)(r.C),Object(r.Yb)(r.A),Object(r.Yb)(Db,8),Object(r.Yb)(Mb,8))},token:t,providedIn:"any"}),t})(),Fb=(()=>{class t{}return t.\u0275mod=r.Kb({type:t}),t.\u0275inj=r.Jb({factory:function(e){return new(e||t)}}),t})(),Ub=(()=>{class t{}return t.\u0275mod=r.Kb({type:t}),t.\u0275inj=r.Jb({factory:function(e){return new(e||t)},providers:[Lb],imports:[Fb]}),t})();const Vb={apiKey:"AIzaSyCrfkzSf12-JRQicCdkTR7a5oKmDOa4GeM",authDomain:"foodcourt-2f1f1.firebaseapp.com",projectId:"foodcourt-2f1f1",storageBucket:"foodcourt-2f1f1.appspot.com",messagingSenderId:"54170456712",appId:"1:54170456712:web:2a25f288a9a298367e853d",measurementId:"G-WN13V6MK6S"};class Qb extends te.a{constructor(t){super(),this._value=t}get value(){return this.getValue()}_subscribe(t){const e=super._subscribe(t);return e&&!e.closed&&t.next(this._value),e}getValue(){if(this.hasError)throw this.thrownError;if(this.closed)throw new um.a;return this._value}next(t){super.next(this._value=t)}}var Hb=n("DH7j");class qb extends ge.a{notifyNext(t,e,n,r,i){this.destination.next(e)}notifyError(t,e){this.destination.error(t)}notifyComplete(t){this.destination.complete()}}class Bb extends ge.a{constructor(t,e,n){super(),this.parent=t,this.outerValue=e,this.outerIndex=n,this.index=0}_next(t){this.parent.notifyNext(this.outerValue,t,this.outerIndex,this.index++,this)}_error(t){this.parent.notifyError(t,this),this.unsubscribe()}_complete(){this.parent.notifyComplete(this),this.unsubscribe()}}var zb=n("SeVD");function Gb(t,e,n,r,i=new Bb(t,n,r)){if(!i.closed)return e instanceof ue.a?e.subscribe(i):Object(zb.a)(e)(i)}var Wb=n("yCtX");const Yb={};class $b{constructor(t){this.resultSelector=t}call(t,e){return e.subscribe(new Kb(t,this.resultSelector))}}class Kb extends qb{constructor(t,e){super(t),this.resultSelector=e,this.active=0,this.values=[],this.observables=[]}_next(t){this.values.push(Yb),this.observables.push(t)}_complete(){const t=this.observables,e=t.length;if(0===e)this.destination.complete();else{this.active=e,this.toRespond=e;for(let n=0;n<e;n++)this.add(Gb(this,t[n],void 0,n))}}notifyComplete(t){0==(this.active-=1)&&this.destination.complete()}notifyNext(t,e,n){const r=this.values,i=this.toRespond?r[n]===Yb?--this.toRespond:this.toRespond:0;r[n]=e,0===i&&(this.resultSelector?this._tryResultSelector(r):this.destination.next(r.slice()))}_tryResultSelector(t){let e;try{e=this.resultSelector.apply(this,t)}catch(n){return void this.destination.error(n)}this.destination.next(e)}}function Xb(t){return new ue.a(e=>{let n;try{n=t()}catch(r){return void e.error(r)}return(n?Object(ce.a)(n):Object(gm.b)()).subscribe(e)})}function Zb(t){return function(e){const n=new Jb(t),r=e.lift(n);return n.caught=r}}class Jb{constructor(t){this.selector=t}call(t,e){return e.subscribe(new tv(t,this.selector,this.caught))}}class tv extends nm.b{constructor(t,e,n){super(t),this.selector=e,this.caught=n}error(t){if(!this.isStopped){let n;try{n=this.selector(t,this.caught)}catch(e){return void super.error(e)}this._unsubscribeAndRecycle();const r=new nm.a(this);this.add(r);const i=Object(nm.c)(n,r);i!==r&&this.add(i)}}}var ev=n("5+tZ");function nv(t,e){return Object(ev.a)(t,e,1)}function rv(t){return function(e){return 0===t?Object(gm.b)():e.lift(new iv(t))}}class iv{constructor(t){if(this.total=t,this.total<0)throw new pm}call(t,e){return e.subscribe(new ov(t,this.total))}}class ov extends ge.a{constructor(t,e){super(t),this.total=e,this.ring=new Array,this.count=0}_next(t){const e=this.ring,n=this.total,r=this.count++;e.length<n?e.push(t):e[r%n]=t}_complete(){const t=this.destination;let e=this.count;if(e>0){const n=this.count>=this.total?this.total:this.count,r=this.ring;for(let i=0;i<n;i++){const i=e++%n;t.next(r[i])}}t.complete()}}var sv=n("vkgz");class av{constructor(t){this.callback=t}call(t,e){return e.subscribe(new uv(t,this.callback))}}class uv extends ge.a{constructor(t,e){super(t),this.add(new am.a(e))}}class cv{constructor(t,e){this.id=t,this.url=e}}class lv extends cv{constructor(t,e,n="imperative",r=null){super(t,e),this.navigationTrigger=n,this.restoredState=r}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class hv extends cv{constructor(t,e,n){super(t,e),this.urlAfterRedirects=n}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class dv extends cv{constructor(t,e,n){super(t,e),this.reason=n}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class fv extends cv{constructor(t,e,n){super(t,e),this.error=n}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class pv extends cv{constructor(t,e,n,r){super(t,e),this.urlAfterRedirects=n,this.state=r}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class gv extends cv{constructor(t,e,n,r){super(t,e),this.urlAfterRedirects=n,this.state=r}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class mv extends cv{constructor(t,e,n,r,i){super(t,e),this.urlAfterRedirects=n,this.state=r,this.shouldActivate=i}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class yv extends cv{constructor(t,e,n,r){super(t,e),this.urlAfterRedirects=n,this.state=r}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class bv extends cv{constructor(t,e,n,r){super(t,e),this.urlAfterRedirects=n,this.state=r}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class vv{constructor(t){this.route=t}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class _v{constructor(t){this.route=t}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class wv{constructor(t){this.snapshot=t}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Cv{constructor(t){this.snapshot=t}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Ov{constructor(t){this.snapshot=t}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Ev{constructor(t){this.snapshot=t}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class xv{constructor(t,e,n){this.routerEvent=t,this.position=e,this.anchor=n}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}const Iv="primary";class Sv{constructor(t){this.params=t||{}}has(t){return Object.prototype.hasOwnProperty.call(this.params,t)}get(t){if(this.has(t)){const e=this.params[t];return Array.isArray(e)?e[0]:e}return null}getAll(t){if(this.has(t)){const e=this.params[t];return Array.isArray(e)?e:[e]}return[]}get keys(){return Object.keys(this.params)}}function Tv(t){return new Sv(t)}function Pv(t){const e=Error("NavigationCancelingError: "+t);return e.ngNavigationCancelingError=!0,e}function Rv(t,e,n){const r=n.path.split("/");if(r.length>t.length)return null;if("full"===n.pathMatch&&(e.hasChildren()||r.length<t.length))return null;const i={};for(let o=0;o<r.length;o++){const e=r[o],n=t[o];if(e.startsWith(":"))i[e.substring(1)]=n;else if(e!==n.path)return null}return{consumed:t.slice(0,r.length),posParams:i}}function Av(t,e){const n=Object.keys(t),r=Object.keys(e);if(!n||!r||n.length!=r.length)return!1;let i;for(let o=0;o<n.length;o++)if(i=n[o],!kv(t[i],e[i]))return!1;return!0}function kv(t,e){if(Array.isArray(t)&&Array.isArray(e)){if(t.length!==e.length)return!1;const n=[...t].sort(),r=[...e].sort();return n.every((t,e)=>r[e]===t)}return t===e}function jv(t){return Array.prototype.concat.apply([],t)}function Nv(t){return t.length>0?t[t.length-1]:null}function Dv(t,e){for(const n in t)t.hasOwnProperty(n)&&e(t[n],n)}function Mv(t){return Object(r.qb)(t)?t:Object(r.rb)(t)?Object(ce.a)(Promise.resolve(t)):Object(le.a)(t)}function Lv(t,e,n){return n?function(t,e){return Av(t,e)}(t.queryParams,e.queryParams)&&Fv(t.root,e.root):function(t,e){return Object.keys(e).length<=Object.keys(t).length&&Object.keys(e).every(n=>kv(t[n],e[n]))}(t.queryParams,e.queryParams)&&Uv(t.root,e.root)}function Fv(t,e){if(!Bv(t.segments,e.segments))return!1;if(t.numberOfChildren!==e.numberOfChildren)return!1;for(const n in e.children){if(!t.children[n])return!1;if(!Fv(t.children[n],e.children[n]))return!1}return!0}function Uv(t,e){return Vv(t,e,e.segments)}function Vv(t,e,n){if(t.segments.length>n.length)return!!Bv(t.segments.slice(0,n.length),n)&&!e.hasChildren();if(t.segments.length===n.length){if(!Bv(t.segments,n))return!1;for(const n in e.children){if(!t.children[n])return!1;if(!Uv(t.children[n],e.children[n]))return!1}return!0}{const r=n.slice(0,t.segments.length),i=n.slice(t.segments.length);return!!Bv(t.segments,r)&&!!t.children.primary&&Vv(t.children.primary,e,i)}}class Qv{constructor(t,e,n){this.root=t,this.queryParams=e,this.fragment=n}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Tv(this.queryParams)),this._queryParamMap}toString(){return Wv.serialize(this)}}class Hv{constructor(t,e){this.segments=t,this.children=e,this.parent=null,Dv(e,(t,e)=>t.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Yv(this)}}class qv{constructor(t,e){this.path=t,this.parameters=e}get parameterMap(){return this._parameterMap||(this._parameterMap=Tv(this.parameters)),this._parameterMap}toString(){return e_(this)}}function Bv(t,e){return t.length===e.length&&t.every((t,n)=>t.path===e[n].path)}class zv{}class Gv{parse(t){const e=new s_(t);return new Qv(e.parseRootSegment(),e.parseQueryParams(),e.parseFragment())}serialize(t){var e;return`/${$v(t.root,!0)}${function(t){const e=Object.keys(t).map(e=>{const n=t[e];return Array.isArray(n)?n.map(t=>`${Xv(e)}=${Xv(t)}`).join("&"):`${Xv(e)}=${Xv(n)}`});return e.length?`?${e.join("&")}`:""}(t.queryParams)}${"string"==typeof t.fragment?`#${e=t.fragment,encodeURI(e)}`:""}`}}const Wv=new Gv;function Yv(t){return t.segments.map(t=>e_(t)).join("/")}function $v(t,e){if(!t.hasChildren())return Yv(t);if(e){const e=t.children.primary?$v(t.children.primary,!1):"",n=[];return Dv(t.children,(t,e)=>{e!==Iv&&n.push(`${e}:${$v(t,!1)}`)}),n.length>0?`${e}(${n.join("//")})`:e}{const e=function(t,e){let n=[];return Dv(t.children,(t,r)=>{r===Iv&&(n=n.concat(e(t,r)))}),Dv(t.children,(t,r)=>{r!==Iv&&(n=n.concat(e(t,r)))}),n}(t,(e,n)=>n===Iv?[$v(t.children.primary,!1)]:[`${n}:${$v(e,!1)}`]);return 1===Object.keys(t.children).length&&null!=t.children.primary?`${Yv(t)}/${e[0]}`:`${Yv(t)}/(${e.join("//")})`}}function Kv(t){return encodeURIComponent(t).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Xv(t){return Kv(t).replace(/%3B/gi,";")}function Zv(t){return Kv(t).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Jv(t){return decodeURIComponent(t)}function t_(t){return Jv(t.replace(/\+/g,"%20"))}function e_(t){return`${Zv(t.path)}${e=t.parameters,Object.keys(e).map(t=>`;${Zv(t)}=${Zv(e[t])}`).join("")}`;var e}const n_=/^[^\/()?;=#]+/;function r_(t){const e=t.match(n_);return e?e[0]:""}const i_=/^[^=?&#]+/,o_=/^[^?&#]+/;class s_{constructor(t){this.url=t,this.remaining=t}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Hv([],{}):new Hv([],this.parseChildren())}parseQueryParams(){const t={};if(this.consumeOptional("?"))do{this.parseQueryParam(t)}while(this.consumeOptional("&"));return t}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const t=[];for(this.peekStartsWith("(")||t.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),t.push(this.parseSegment());let e={};this.peekStartsWith("/(")&&(this.capture("/"),e=this.parseParens(!0));let n={};return this.peekStartsWith("(")&&(n=this.parseParens(!1)),(t.length>0||Object.keys(e).length>0)&&(n.primary=new Hv(t,e)),n}parseSegment(){const t=r_(this.remaining);if(""===t&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(t),new qv(Jv(t),this.parseMatrixParams())}parseMatrixParams(){const t={};for(;this.consumeOptional(";");)this.parseParam(t);return t}parseParam(t){const e=r_(this.remaining);if(!e)return;this.capture(e);let n="";if(this.consumeOptional("=")){const t=r_(this.remaining);t&&(n=t,this.capture(n))}t[Jv(e)]=Jv(n)}parseQueryParam(t){const e=function(t){const e=t.match(i_);return e?e[0]:""}(this.remaining);if(!e)return;this.capture(e);let n="";if(this.consumeOptional("=")){const t=function(t){const e=t.match(o_);return e?e[0]:""}(this.remaining);t&&(n=t,this.capture(n))}const r=t_(e),i=t_(n);if(t.hasOwnProperty(r)){let e=t[r];Array.isArray(e)||(e=[e],t[r]=e),e.push(i)}else t[r]=i}parseParens(t){const e={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const n=r_(this.remaining),r=this.remaining[n.length];if("/"!==r&&")"!==r&&";"!==r)throw new Error(`Cannot parse url '${this.url}'`);let i;n.indexOf(":")>-1?(i=n.substr(0,n.indexOf(":")),this.capture(i),this.capture(":")):t&&(i=Iv);const o=this.parseChildren();e[i]=1===Object.keys(o).length?o.primary:new Hv([],o),this.consumeOptional("//")}return e}peekStartsWith(t){return this.remaining.startsWith(t)}consumeOptional(t){return!!this.peekStartsWith(t)&&(this.remaining=this.remaining.substring(t.length),!0)}capture(t){if(!this.consumeOptional(t))throw new Error(`Expected "${t}".`)}}class a_{constructor(t){this._root=t}get root(){return this._root.value}parent(t){const e=this.pathFromRoot(t);return e.length>1?e[e.length-2]:null}children(t){const e=u_(t,this._root);return e?e.children.map(t=>t.value):[]}firstChild(t){const e=u_(t,this._root);return e&&e.children.length>0?e.children[0].value:null}siblings(t){const e=c_(t,this._root);return e.length<2?[]:e[e.length-2].children.map(t=>t.value).filter(e=>e!==t)}pathFromRoot(t){return c_(t,this._root).map(t=>t.value)}}function u_(t,e){if(t===e.value)return e;for(const n of e.children){const e=u_(t,n);if(e)return e}return null}function c_(t,e){if(t===e.value)return[e];for(const n of e.children){const r=c_(t,n);if(r.length)return r.unshift(e),r}return[]}class l_{constructor(t,e){this.value=t,this.children=e}toString(){return`TreeNode(${this.value})`}}function h_(t){const e={};return t&&t.children.forEach(t=>e[t.value.outlet]=t),e}class d_ extends a_{constructor(t,e){super(t),this.snapshot=e,b_(this,t)}toString(){return this.snapshot.toString()}}function f_(t,e){const n=function(t,e){const n=new m_([],{},{},"",{},Iv,e,null,t.root,-1,{});return new y_("",new l_(n,[]))}(t,e),r=new Qb([new qv("",{})]),i=new Qb({}),o=new Qb({}),s=new Qb({}),a=new Qb(""),u=new p_(r,i,s,a,o,Iv,e,n.root);return u.snapshot=n.root,new d_(new l_(u,[]),n)}class p_{constructor(t,e,n,r,i,o,s,a){this.url=t,this.params=e,this.queryParams=n,this.fragment=r,this.data=i,this.outlet=o,this.component=s,this._futureSnapshot=a}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe(Object(ve.a)(t=>Tv(t)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe(Object(ve.a)(t=>Tv(t)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function g_(t,e="emptyOnly"){const n=t.pathFromRoot;let r=0;if("always"!==e)for(r=n.length-1;r>=1;){const t=n[r],e=n[r-1];if(t.routeConfig&&""===t.routeConfig.path)r--;else{if(e.component)break;r--}}return function(t){return t.reduce((t,e)=>({params:Object.assign(Object.assign({},t.params),e.params),data:Object.assign(Object.assign({},t.data),e.data),resolve:Object.assign(Object.assign({},t.resolve),e._resolvedData)}),{params:{},data:{},resolve:{}})}(n.slice(r))}class m_{constructor(t,e,n,r,i,o,s,a,u,c,l){this.url=t,this.params=e,this.queryParams=n,this.fragment=r,this.data=i,this.outlet=o,this.component=s,this.routeConfig=a,this._urlSegment=u,this._lastPathIndex=c,this._resolve=l}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=Tv(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Tv(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(t=>t.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class y_ extends a_{constructor(t,e){super(e),this.url=t,b_(this,e)}toString(){return v_(this._root)}}function b_(t,e){e.value._routerState=t,e.children.forEach(e=>b_(t,e))}function v_(t){const e=t.children.length>0?` { ${t.children.map(v_).join(", ")} } `:"";return`${t.value}${e}`}function __(t){if(t.snapshot){const e=t.snapshot,n=t._futureSnapshot;t.snapshot=n,Av(e.queryParams,n.queryParams)||t.queryParams.next(n.queryParams),e.fragment!==n.fragment&&t.fragment.next(n.fragment),Av(e.params,n.params)||t.params.next(n.params),function(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;++n)if(!Av(t[n],e[n]))return!1;return!0}(e.url,n.url)||t.url.next(n.url),Av(e.data,n.data)||t.data.next(n.data)}else t.snapshot=t._futureSnapshot,t.data.next(t._futureSnapshot.data)}function w_(t,e){return Av(t.params,e.params)&&function(t,e){return Bv(t,e)&&t.every((t,n)=>Av(t.parameters,e[n].parameters))}(t.url,e.url)&&!(!t.parent!=!e.parent)&&(!t.parent||w_(t.parent,e.parent))}function C_(t,e,n){if(n&&t.shouldReuseRoute(e.value,n.value.snapshot)){const r=n.value;r._futureSnapshot=e.value;const i=function(t,e,n){return e.children.map(e=>{for(const r of n.children)if(t.shouldReuseRoute(e.value,r.value.snapshot))return C_(t,e,r);return C_(t,e)})}(t,e,n);return new l_(r,i)}{const n=t.retrieve(e.value);if(n){const t=n.route;return O_(e,t),t}{const n=new p_(new Qb((r=e.value).url),new Qb(r.params),new Qb(r.queryParams),new Qb(r.fragment),new Qb(r.data),r.outlet,r.component,r),i=e.children.map(e=>C_(t,e));return new l_(n,i)}}var r}function O_(t,e){if(t.value.routeConfig!==e.value.routeConfig)throw new Error("Cannot reattach ActivatedRouteSnapshot created from a different route");if(t.children.length!==e.children.length)throw new Error("Cannot reattach ActivatedRouteSnapshot with a different number of children");e.value._futureSnapshot=t.value;for(let n=0;n<t.children.length;++n)O_(t.children[n],e.children[n])}function E_(t){return"object"==typeof t&&null!=t&&!t.outlets&&!t.segmentPath}function x_(t){return"object"==typeof t&&null!=t&&t.outlets}function I_(t,e,n,r,i){let o={};return r&&Dv(r,(t,e)=>{o[e]=Array.isArray(t)?t.map(t=>`${t}`):`${t}`}),new Qv(n.root===t?e:S_(n.root,t,e),o,i)}function S_(t,e,n){const r={};return Dv(t.children,(t,i)=>{r[i]=t===e?n:S_(t,e,n)}),new Hv(t.segments,r)}class T_{constructor(t,e,n){if(this.isAbsolute=t,this.numberOfDoubleDots=e,this.commands=n,t&&n.length>0&&E_(n[0]))throw new Error("Root segment cannot have matrix parameters");const r=n.find(x_);if(r&&r!==Nv(n))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class P_{constructor(t,e,n){this.segmentGroup=t,this.processChildren=e,this.index=n}}function R_(t,e,n){if(t||(t=new Hv([],{})),0===t.segments.length&&t.hasChildren())return A_(t,e,n);const r=function(t,e,n){let r=0,i=e;const o={match:!1,pathIndex:0,commandIndex:0};for(;i<t.segments.length;){if(r>=n.length)return o;const e=t.segments[i],s=n[r];if(x_(s))break;const a=`${s}`,u=r<n.length-1?n[r+1]:null;if(i>0&&void 0===a)break;if(a&&u&&"object"==typeof u&&void 0===u.outlets){if(!D_(a,u,e))return o;r+=2}else{if(!D_(a,{},e))return o;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(t,e,n),i=n.slice(r.commandIndex);if(r.match&&r.pathIndex<t.segments.length){const e=new Hv(t.segments.slice(0,r.pathIndex),{});return e.children.primary=new Hv(t.segments.slice(r.pathIndex),t.children),A_(e,0,i)}return r.match&&0===i.length?new Hv(t.segments,{}):r.match&&!t.hasChildren()?k_(t,e,n):r.match?A_(t,0,i):k_(t,e,n)}function A_(t,e,n){if(0===n.length)return new Hv(t.segments,{});{const r=function(t){return x_(t[0])?t[0].outlets:{[Iv]:t}}(n),i={};return Dv(r,(n,r)=>{"string"==typeof n&&(n=[n]),null!==n&&(i[r]=R_(t.children[r],e,n))}),Dv(t.children,(t,e)=>{void 0===r[e]&&(i[e]=t)}),new Hv(t.segments,i)}}function k_(t,e,n){const r=t.segments.slice(0,e);let i=0;for(;i<n.length;){const o=n[i];if(x_(o)){const t=j_(o.outlets);return new Hv(r,t)}if(0===i&&E_(n[0])){r.push(new qv(t.segments[e].path,n[0])),i++;continue}const s=x_(o)?o.outlets.primary:`${o}`,a=i<n.length-1?n[i+1]:null;s&&a&&E_(a)?(r.push(new qv(s,N_(a))),i+=2):(r.push(new qv(s,{})),i++)}return new Hv(r,{})}function j_(t){const e={};return Dv(t,(t,n)=>{"string"==typeof t&&(t=[t]),null!==t&&(e[n]=k_(new Hv([],{}),0,t))}),e}function N_(t){const e={};return Dv(t,(t,n)=>e[n]=`${t}`),e}function D_(t,e,n){return t==n.path&&Av(e,n.parameters)}class M_{constructor(t,e,n,r){this.routeReuseStrategy=t,this.futureState=e,this.currState=n,this.forwardEvent=r}activate(t){const e=this.futureState._root,n=this.currState?this.currState._root:null;this.deactivateChildRoutes(e,n,t),__(this.futureState.root),this.activateChildRoutes(e,n,t)}deactivateChildRoutes(t,e,n){const r=h_(e);t.children.forEach(t=>{const e=t.value.outlet;this.deactivateRoutes(t,r[e],n),delete r[e]}),Dv(r,(t,e)=>{this.deactivateRouteAndItsChildren(t,n)})}deactivateRoutes(t,e,n){const r=t.value,i=e?e.value:null;if(r===i)if(r.component){const i=n.getContext(r.outlet);i&&this.deactivateChildRoutes(t,e,i.children)}else this.deactivateChildRoutes(t,e,n);else i&&this.deactivateRouteAndItsChildren(e,n)}deactivateRouteAndItsChildren(t,e){this.routeReuseStrategy.shouldDetach(t.value.snapshot)?this.detachAndStoreRouteSubtree(t,e):this.deactivateRouteAndOutlet(t,e)}detachAndStoreRouteSubtree(t,e){const n=e.getContext(t.value.outlet);if(n&&n.outlet){const e=n.outlet.detach(),r=n.children.onOutletDeactivated();this.routeReuseStrategy.store(t.value.snapshot,{componentRef:e,route:t,contexts:r})}}deactivateRouteAndOutlet(t,e){const n=e.getContext(t.value.outlet),r=n&&t.value.component?n.children:e,i=h_(t);for(const o of Object.keys(i))this.deactivateRouteAndItsChildren(i[o],r);n&&n.outlet&&(n.outlet.deactivate(),n.children.onOutletDeactivated())}activateChildRoutes(t,e,n){const r=h_(e);t.children.forEach(t=>{this.activateRoutes(t,r[t.value.outlet],n),this.forwardEvent(new Ev(t.value.snapshot))}),t.children.length&&this.forwardEvent(new Cv(t.value.snapshot))}activateRoutes(t,e,n){const r=t.value,i=e?e.value:null;if(__(r),r===i)if(r.component){const i=n.getOrCreateContext(r.outlet);this.activateChildRoutes(t,e,i.children)}else this.activateChildRoutes(t,e,n);else if(r.component){const e=n.getOrCreateContext(r.outlet);if(this.routeReuseStrategy.shouldAttach(r.snapshot)){const t=this.routeReuseStrategy.retrieve(r.snapshot);this.routeReuseStrategy.store(r.snapshot,null),e.children.onOutletReAttached(t.contexts),e.attachRef=t.componentRef,e.route=t.route.value,e.outlet&&e.outlet.attach(t.componentRef,t.route.value),L_(t.route)}else{const n=function(t){for(let e=t.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig;if(t&&t.component)return null}return null}(r.snapshot),i=n?n.module.componentFactoryResolver:null;e.attachRef=null,e.route=r,e.resolver=i,e.outlet&&e.outlet.activateWith(r,i),this.activateChildRoutes(t,null,e.children)}}else this.activateChildRoutes(t,null,n)}}function L_(t){__(t.value),t.children.forEach(L_)}class F_{constructor(t,e){this.routes=t,this.module=e}}function U_(t){return"function"==typeof t}function V_(t){return t instanceof Qv}const Q_=Symbol("INITIAL_VALUE");function H_(){return rm(t=>function(...t){let e,n;return Object(fe.a)(t[t.length-1])&&(n=t.pop()),"function"==typeof t[t.length-1]&&(e=t.pop()),1===t.length&&Object(Hb.a)(t[0])&&(t=t[0]),Object(Wb.a)(t,n).lift(new $b(e))}(t.map(t=>t.pipe(mm(1),pe(Q_)))).pipe(_e((t,e)=>{let n=!1;return e.reduce((t,r,i)=>{if(t!==Q_)return t;if(r===Q_&&(n=!0),!n){if(!1===r)return r;if(i===e.length-1||V_(r))return r}return t},t)},Q_),Ie(t=>t!==Q_),Object(ve.a)(t=>V_(t)?t:!0===t),mm(1)))}let q_=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=r.Gb({type:t,selectors:[["ng-component"]],decls:1,vars:0,template:function(t,e){1&t&&r.Nb(0,"router-outlet")},directives:function(){return[Lw]},encapsulation:2}),t})();function B_(t,e=""){for(let n=0;n<t.length;n++){const r=t[n];z_(r,G_(e,r))}}function z_(t,e){t.children&&B_(t.children,e)}function G_(t,e){return e?t||e.path?t&&!e.path?`${t}/`:!t&&e.path?e.path:`${t}/${e.path}`:"":t}function W_(t){const e=t.children&&t.children.map(W_),n=e?Object.assign(Object.assign({},t),{children:e}):Object.assign({},t);return!n.component&&(e||n.loadChildren)&&n.outlet&&n.outlet!==Iv&&(n.component=q_),n}function Y_(t){return t.outlet||Iv}function $_(t,e){const n=t.filter(t=>Y_(t)===e);return n.push(...t.filter(t=>Y_(t)!==e)),n}const K_={matched:!1,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};function X_(t,e,n){var r;if(""===e.path)return"full"===e.pathMatch&&(t.hasChildren()||n.length>0)?Object.assign({},K_):{matched:!0,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};const i=(e.matcher||Rv)(n,t,e);if(!i)return Object.assign({},K_);const o={};Dv(i.posParams,(t,e)=>{o[e]=t.path});const s=i.consumed.length>0?Object.assign(Object.assign({},o),i.consumed[i.consumed.length-1].parameters):o;return{matched:!0,consumedSegments:i.consumed,lastChild:i.consumed.length,parameters:s,positionalParamSegments:null!==(r=i.posParams)&&void 0!==r?r:{}}}function Z_(t,e,n,r,i="corrected"){if(n.length>0&&function(t,e,n){return n.some(n=>J_(t,e,n)&&Y_(n)!==Iv)}(t,n,r)){const i=new Hv(e,function(t,e,n,r){const i={};i.primary=r,r._sourceSegment=t,r._segmentIndexShift=e.length;for(const o of n)if(""===o.path&&Y_(o)!==Iv){const n=new Hv([],{});n._sourceSegment=t,n._segmentIndexShift=e.length,i[Y_(o)]=n}return i}(t,e,r,new Hv(n,t.children)));return i._sourceSegment=t,i._segmentIndexShift=e.length,{segmentGroup:i,slicedSegments:[]}}if(0===n.length&&function(t,e,n){return n.some(n=>J_(t,e,n))}(t,n,r)){const o=new Hv(t.segments,function(t,e,n,r,i,o){const s={};for(const a of r)if(J_(t,n,a)&&!i[Y_(a)]){const n=new Hv([],{});n._sourceSegment=t,n._segmentIndexShift="legacy"===o?t.segments.length:e.length,s[Y_(a)]=n}return Object.assign(Object.assign({},i),s)}(t,e,n,r,t.children,i));return o._sourceSegment=t,o._segmentIndexShift=e.length,{segmentGroup:o,slicedSegments:n}}const o=new Hv(t.segments,t.children);return o._sourceSegment=t,o._segmentIndexShift=e.length,{segmentGroup:o,slicedSegments:n}}function J_(t,e,n){return(!(t.hasChildren()||e.length>0)||"full"!==n.pathMatch)&&""===n.path}function tw(t,e,n,r){return!!(Y_(t)===r||r!==Iv&&J_(e,n,t))&&("**"===t.path||X_(e,t,n).matched)}function ew(t,e,n){return 0===e.length&&!t.children[n]}class nw{constructor(t){this.segmentGroup=t||null}}class rw{constructor(t){this.urlTree=t}}function iw(t){return new ue.a(e=>e.error(new nw(t)))}function ow(t){return new ue.a(e=>e.error(new rw(t)))}function sw(t){return new ue.a(e=>e.error(new Error(`Only absolute redirects can have named outlets. redirectTo: '${t}'`)))}class aw{constructor(t,e,n,i,o){this.configLoader=e,this.urlSerializer=n,this.urlTree=i,this.config=o,this.allowRedirects=!0,this.ngModule=t.get(r.y)}apply(){const t=Z_(this.urlTree.root,[],[],this.config).segmentGroup,e=new Hv(t.segments,t.children);return this.expandSegmentGroup(this.ngModule,this.config,e,Iv).pipe(Object(ve.a)(t=>this.createUrlTree(uw(t),this.urlTree.queryParams,this.urlTree.fragment))).pipe(Zb(t=>{if(t instanceof rw)return this.allowRedirects=!1,this.match(t.urlTree);if(t instanceof nw)throw this.noMatchError(t);throw t}))}match(t){return this.expandSegmentGroup(this.ngModule,this.config,t.root,Iv).pipe(Object(ve.a)(e=>this.createUrlTree(uw(e),t.queryParams,t.fragment))).pipe(Zb(t=>{if(t instanceof nw)throw this.noMatchError(t);throw t}))}noMatchError(t){return new Error(`Cannot match any routes. URL Segment: '${t.segmentGroup}'`)}createUrlTree(t,e,n){const r=t.segments.length>0?new Hv([],{[Iv]:t}):t;return new Qv(r,e,n)}expandSegmentGroup(t,e,n,r){return 0===n.segments.length&&n.hasChildren()?this.expandChildren(t,e,n).pipe(Object(ve.a)(t=>new Hv([],t))):this.expandSegment(t,n,e,n.segments,r,!0)}expandChildren(t,e,n){const r=[];for(const i of Object.keys(n.children))"primary"===i?r.unshift(i):r.push(i);return Object(ce.a)(r).pipe(nv(r=>{const i=n.children[r],o=$_(e,r);return this.expandSegmentGroup(t,o,i,r).pipe(Object(ve.a)(t=>({segment:t,outlet:r})))}),_e((t,e)=>(t[e.outlet]=e.segment,t),{}),function(t,e){const n=arguments.length>=2;return r=>r.pipe(t?Ie((e,n)=>t(e,n,r)):Im.a,rv(1),n?vm(e):Cm(()=>new fm))}())}expandSegment(t,e,n,r,i,o){return Object(ce.a)(n).pipe(nv(s=>this.expandSegmentAgainstRoute(t,e,n,s,r,i,o).pipe(Zb(t=>{if(t instanceof nw)return Object(le.a)(null);throw t}))),Sm(t=>!!t),Zb((t,n)=>{if(t instanceof fm||"EmptyError"===t.name){if(ew(e,r,i))return Object(le.a)(new Hv([],{}));throw new nw(e)}throw t}))}expandSegmentAgainstRoute(t,e,n,r,i,o,s){return tw(r,e,i,o)?void 0===r.redirectTo?this.matchSegmentAgainstRoute(t,e,r,i,o):s&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(t,e,n,r,i,o):iw(e):iw(e)}expandSegmentAgainstRouteUsingRedirect(t,e,n,r,i,o){return"**"===r.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(t,n,r,o):this.expandRegularSegmentAgainstRouteUsingRedirect(t,e,n,r,i,o)}expandWildCardWithParamsAgainstRouteUsingRedirect(t,e,n,r){const i=this.applyRedirectCommands([],n.redirectTo,{});return n.redirectTo.startsWith("/")?ow(i):this.lineralizeSegments(n,i).pipe(Object(ev.a)(n=>{const i=new Hv(n,{});return this.expandSegment(t,i,e,n,r,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(t,e,n,r,i,o){const{matched:s,consumedSegments:a,lastChild:u,positionalParamSegments:c}=X_(e,r,i);if(!s)return iw(e);const l=this.applyRedirectCommands(a,r.redirectTo,c);return r.redirectTo.startsWith("/")?ow(l):this.lineralizeSegments(r,l).pipe(Object(ev.a)(r=>this.expandSegment(t,e,n,r.concat(i.slice(u)),o,!1)))}matchSegmentAgainstRoute(t,e,n,r,i){if("**"===n.path)return n.loadChildren?this.configLoader.load(t.injector,n).pipe(Object(ve.a)(t=>(n._loadedConfig=t,new Hv(r,{})))):Object(le.a)(new Hv(r,{}));const{matched:o,consumedSegments:s,lastChild:a}=X_(e,n,r);if(!o)return iw(e);const u=r.slice(a);return this.getChildConfig(t,n,r).pipe(Object(ev.a)(t=>{const r=t.module,o=t.routes,{segmentGroup:a,slicedSegments:c}=Z_(e,s,u,o),l=new Hv(a.segments,a.children);if(0===c.length&&l.hasChildren())return this.expandChildren(r,o,l).pipe(Object(ve.a)(t=>new Hv(s,t)));if(0===o.length&&0===c.length)return Object(le.a)(new Hv(s,{}));const h=Y_(n)===i;return this.expandSegment(r,l,o,c,h?Iv:i,!0).pipe(Object(ve.a)(t=>new Hv(s.concat(t.segments),t.children)))}))}getChildConfig(t,e,n){return e.children?Object(le.a)(new F_(e.children,t)):e.loadChildren?void 0!==e._loadedConfig?Object(le.a)(e._loadedConfig):this.runCanLoadGuards(t.injector,e,n).pipe(Object(ev.a)(n=>n?this.configLoader.load(t.injector,e).pipe(Object(ve.a)(t=>(e._loadedConfig=t,t))):function(t){return new ue.a(e=>e.error(Pv(`Cannot load children because the guard of the route "path: '${t.path}'" returned false`)))}(e))):Object(le.a)(new F_([],t))}runCanLoadGuards(t,e,n){const r=e.canLoad;if(!r||0===r.length)return Object(le.a)(!0);const i=r.map(r=>{const i=t.get(r);let o;if(function(t){return t&&U_(t.canLoad)}(i))o=i.canLoad(e,n);else{if(!U_(i))throw new Error("Invalid CanLoad guard");o=i(e,n)}return Mv(o)});return Object(le.a)(i).pipe(H_(),Object(sv.a)(t=>{if(!V_(t))return;const e=Pv(`Redirecting to "${this.urlSerializer.serialize(t)}"`);throw e.url=t,e}),Object(ve.a)(t=>!0===t))}lineralizeSegments(t,e){let n=[],r=e.root;for(;;){if(n=n.concat(r.segments),0===r.numberOfChildren)return Object(le.a)(n);if(r.numberOfChildren>1||!r.children.primary)return sw(t.redirectTo);r=r.children.primary}}applyRedirectCommands(t,e,n){return this.applyRedirectCreatreUrlTree(e,this.urlSerializer.parse(e),t,n)}applyRedirectCreatreUrlTree(t,e,n,r){const i=this.createSegmentGroup(t,e.root,n,r);return new Qv(i,this.createQueryParams(e.queryParams,this.urlTree.queryParams),e.fragment)}createQueryParams(t,e){const n={};return Dv(t,(t,r)=>{if("string"==typeof t&&t.startsWith(":")){const i=t.substring(1);n[r]=e[i]}else n[r]=t}),n}createSegmentGroup(t,e,n,r){const i=this.createSegments(t,e.segments,n,r);let o={};return Dv(e.children,(e,i)=>{o[i]=this.createSegmentGroup(t,e,n,r)}),new Hv(i,o)}createSegments(t,e,n,r){return e.map(e=>e.path.startsWith(":")?this.findPosParam(t,e,r):this.findOrReturn(e,n))}findPosParam(t,e,n){const r=n[e.path.substring(1)];if(!r)throw new Error(`Cannot redirect to '${t}'. Cannot find '${e.path}'.`);return r}findOrReturn(t,e){let n=0;for(const r of e){if(r.path===t.path)return e.splice(n),r;n++}return t}}function uw(t){const e={};for(const n of Object.keys(t.children)){const r=uw(t.children[n]);(r.segments.length>0||r.hasChildren())&&(e[n]=r)}return function(t){if(1===t.numberOfChildren&&t.children.primary){const e=t.children.primary;return new Hv(t.segments.concat(e.segments),e.children)}return t}(new Hv(t.segments,e))}class cw{constructor(t){this.path=t,this.route=this.path[this.path.length-1]}}class lw{constructor(t,e){this.component=t,this.route=e}}function hw(t,e,n){const r=t._root;return fw(r,e?e._root:null,n,[r.value])}function dw(t,e,n){const r=function(t){if(!t)return null;for(let e=t.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig}return null}(e);return(r?r.module.injector:n).get(t)}function fw(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const o=h_(e);return t.children.forEach(t=>{!function(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const o=t.value,s=e?e.value:null,a=n?n.getContext(t.value.outlet):null;if(s&&o.routeConfig===s.routeConfig){const u=function(t,e,n){if("function"==typeof n)return n(t,e);switch(n){case"pathParamsChange":return!Bv(t.url,e.url);case"pathParamsOrQueryParamsChange":return!Bv(t.url,e.url)||!Av(t.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!w_(t,e)||!Av(t.queryParams,e.queryParams);case"paramsChange":default:return!w_(t,e)}}(s,o,o.routeConfig.runGuardsAndResolvers);u?i.canActivateChecks.push(new cw(r)):(o.data=s.data,o._resolvedData=s._resolvedData),fw(t,e,o.component?a?a.children:null:n,r,i),u&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new lw(a.outlet.component,s))}else s&&pw(e,a,i),i.canActivateChecks.push(new cw(r)),fw(t,null,o.component?a?a.children:null:n,r,i)}(t,o[t.value.outlet],n,r.concat([t.value]),i),delete o[t.value.outlet]}),Dv(o,(t,e)=>pw(t,n.getContext(e),i)),i}function pw(t,e,n){const r=h_(t),i=t.value;Dv(r,(t,r)=>{pw(t,i.component?e?e.children.getContext(r):null:e,n)}),n.canDeactivateChecks.push(new lw(i.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,i))}class gw{}function mw(t){return new ue.a(e=>e.error(t))}class yw{constructor(t,e,n,r,i,o){this.rootComponentType=t,this.config=e,this.urlTree=n,this.url=r,this.paramsInheritanceStrategy=i,this.relativeLinkResolution=o}recognize(){const t=Z_(this.urlTree.root,[],[],this.config.filter(t=>void 0===t.redirectTo),this.relativeLinkResolution).segmentGroup,e=this.processSegmentGroup(this.config,t,Iv);if(null===e)return null;const n=new m_([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},Iv,this.rootComponentType,null,this.urlTree.root,-1,{}),r=new l_(n,e),i=new y_(this.url,r);return this.inheritParamsAndData(i._root),i}inheritParamsAndData(t){const e=t.value,n=g_(e,this.paramsInheritanceStrategy);e.params=Object.freeze(n.params),e.data=Object.freeze(n.data),t.children.forEach(t=>this.inheritParamsAndData(t))}processSegmentGroup(t,e,n){return 0===e.segments.length&&e.hasChildren()?this.processChildren(t,e):this.processSegment(t,e,e.segments,n)}processChildren(t,e){const n=[];for(const i of Object.keys(e.children)){const r=e.children[i],o=$_(t,i),s=this.processSegmentGroup(o,r,i);if(null===s)return null;n.push(...s)}const r=function(t){const e=[];for(const n of t){if(!bw(n)){e.push(n);continue}const t=e.find(t=>n.value.routeConfig===t.value.routeConfig);void 0!==t?t.children.push(...n.children):e.push(n)}return e}(n);return r.sort((t,e)=>t.value.outlet===Iv?-1:e.value.outlet===Iv?1:t.value.outlet.localeCompare(e.value.outlet)),r}processSegment(t,e,n,r){for(const i of t){const t=this.processSegmentAgainstRoute(i,e,n,r);if(null!==t)return t}return ew(e,n,r)?[]:null}processSegmentAgainstRoute(t,e,n,r){if(t.redirectTo||!tw(t,e,n,r))return null;let i,o=[],s=[];if("**"===t.path){const r=n.length>0?Nv(n).parameters:{};i=new m_(n,r,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,ww(t),Y_(t),t.component,t,vw(e),_w(e)+n.length,Cw(t))}else{const r=X_(e,t,n);if(!r.matched)return null;o=r.consumedSegments,s=n.slice(r.lastChild),i=new m_(o,r.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,ww(t),Y_(t),t.component,t,vw(e),_w(e)+o.length,Cw(t))}const a=function(t){return t.children?t.children:t.loadChildren?t._loadedConfig.routes:[]}(t),{segmentGroup:u,slicedSegments:c}=Z_(e,o,s,a.filter(t=>void 0===t.redirectTo),this.relativeLinkResolution);if(0===c.length&&u.hasChildren()){const t=this.processChildren(a,u);return null===t?null:[new l_(i,t)]}if(0===a.length&&0===c.length)return[new l_(i,[])];const l=Y_(t)===r,h=this.processSegment(a,u,c,l?Iv:r);return null===h?null:[new l_(i,h)]}}function bw(t){const e=t.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}function vw(t){let e=t;for(;e._sourceSegment;)e=e._sourceSegment;return e}function _w(t){let e=t,n=e._segmentIndexShift?e._segmentIndexShift:0;for(;e._sourceSegment;)e=e._sourceSegment,n+=e._segmentIndexShift?e._segmentIndexShift:0;return n-1}function ww(t){return t.data||{}}function Cw(t){return t.resolve||{}}function Ow(t){return rm(e=>{const n=t(e);return n?Object(ce.a)(n).pipe(Object(ve.a)(()=>e)):Object(le.a)(e)})}class Ew extends class{shouldDetach(t){return!1}store(t,e){}shouldAttach(t){return!1}retrieve(t){return null}shouldReuseRoute(t,e){return t.routeConfig===e.routeConfig}}{}const xw=new r.r("ROUTES");class Iw{constructor(t,e,n,r){this.loader=t,this.compiler=e,this.onLoadStartListener=n,this.onLoadEndListener=r}load(t,e){return this.onLoadStartListener&&this.onLoadStartListener(e),this.loadModuleFactory(e.loadChildren).pipe(Object(ve.a)(n=>{this.onLoadEndListener&&this.onLoadEndListener(e);const i=n.create(t);return new F_(jv(i.injector.get(xw,void 0,r.q.Self|r.q.Optional)).map(W_),i)}))}loadModuleFactory(t){return"string"==typeof t?Object(ce.a)(this.loader.load(t)):Mv(t()).pipe(Object(ev.a)(t=>t instanceof r.w?Object(le.a)(t):Object(ce.a)(this.compiler.compileModuleAsync(t))))}}class Sw{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new Tw,this.attachRef=null}}class Tw{constructor(){this.contexts=new Map}onChildOutletCreated(t,e){const n=this.getOrCreateContext(t);n.outlet=e,this.contexts.set(t,n)}onChildOutletDestroyed(t){const e=this.getContext(t);e&&(e.outlet=null)}onOutletDeactivated(){const t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let e=this.getContext(t);return e||(e=new Sw,this.contexts.set(t,e)),e}getContext(t){return this.contexts.get(t)||null}}class Pw{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,e){return t}}function Rw(t){throw t}function Aw(t,e,n){return e.parse("/")}function kw(t,e){return Object(le.a)(null)}let jw=(()=>{class t{constructor(t,e,n,i,o,s,a,u){this.rootComponentType=t,this.urlSerializer=e,this.rootContexts=n,this.location=i,this.config=u,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.lastLocationChangeInfo=null,this.navigationId=0,this.isNgZoneEnabled=!1,this.events=new te.a,this.errorHandler=Rw,this.malformedUriErrorHandler=Aw,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:kw,afterPreactivation:kw},this.urlHandlingStrategy=new Pw,this.routeReuseStrategy=new Ew,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.ngModule=o.get(r.y),this.console=o.get(r.Y);const c=o.get(r.A);this.isNgZoneEnabled=c instanceof r.A&&r.A.isInAngularZone(),this.resetConfig(u),this.currentUrlTree=new Qv(new Hv([],{}),{},null),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new Iw(s,a,t=>this.triggerEvent(new vv(t)),t=>this.triggerEvent(new _v(t))),this.routerState=f_(this.currentUrlTree,this.rootComponentType),this.transitions=new Qb({id:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}setupNavigations(t){const e=this.events;return t.pipe(Ie(t=>0!==t.id),Object(ve.a)(t=>Object.assign(Object.assign({},t),{extractedUrl:this.urlHandlingStrategy.extract(t.rawUrl)})),rm(t=>{let n=!1,r=!1;return Object(le.a)(t).pipe(Object(sv.a)(t=>{this.currentNavigation={id:t.id,initialUrl:t.currentRawUrl,extractedUrl:t.extractedUrl,trigger:t.source,extras:t.extras,previousNavigation:this.lastSuccessfulNavigation?Object.assign(Object.assign({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),rm(t=>{const n=!this.navigated||t.extractedUrl.toString()!==this.browserUrlTree.toString();if(("reload"===this.onSameUrlNavigation||n)&&this.urlHandlingStrategy.shouldProcessUrl(t.rawUrl))return Object(le.a)(t).pipe(rm(t=>{const n=this.transitions.getValue();return e.next(new lv(t.id,this.serializeUrl(t.extractedUrl),t.source,t.restoredState)),n!==this.transitions.getValue()?gm.a:Promise.resolve(t)}),(r=this.ngModule.injector,i=this.configLoader,o=this.urlSerializer,s=this.config,rm(t=>function(t,e,n,r,i){return new aw(t,e,n,r,i).apply()}(r,i,o,t.extractedUrl,s).pipe(Object(ve.a)(e=>Object.assign(Object.assign({},t),{urlAfterRedirects:e}))))),Object(sv.a)(t=>{this.currentNavigation=Object.assign(Object.assign({},this.currentNavigation),{finalUrl:t.urlAfterRedirects})}),function(t,e,n,r,i){return Object(ev.a)(o=>function(t,e,n,r,i="emptyOnly",o="legacy"){try{const s=new yw(t,e,n,r,i,o).recognize();return null===s?mw(new gw):Object(le.a)(s)}catch(Kg){return mw(Kg)}}(t,e,o.urlAfterRedirects,n(o.urlAfterRedirects),r,i).pipe(Object(ve.a)(t=>Object.assign(Object.assign({},o),{targetSnapshot:t}))))}(this.rootComponentType,this.config,t=>this.serializeUrl(t),this.paramsInheritanceStrategy,this.relativeLinkResolution),Object(sv.a)(t=>{"eager"===this.urlUpdateStrategy&&(t.extras.skipLocationChange||this.setBrowserUrl(t.urlAfterRedirects,!!t.extras.replaceUrl,t.id,t.extras.state),this.browserUrlTree=t.urlAfterRedirects);const n=new pv(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);e.next(n)}));var r,i,o,s;if(n&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:n,extractedUrl:r,source:i,restoredState:o,extras:s}=t,a=new lv(n,this.serializeUrl(r),i,o);e.next(a);const u=f_(r,this.rootComponentType).snapshot;return Object(le.a)(Object.assign(Object.assign({},t),{targetSnapshot:u,urlAfterRedirects:r,extras:Object.assign(Object.assign({},s),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=t.rawUrl,this.browserUrlTree=t.urlAfterRedirects,t.resolve(null),gm.a}),Ow(t=>{const{targetSnapshot:e,id:n,extractedUrl:r,rawUrl:i,extras:{skipLocationChange:o,replaceUrl:s}}=t;return this.hooks.beforePreactivation(e,{navigationId:n,appliedUrlTree:r,rawUrlTree:i,skipLocationChange:!!o,replaceUrl:!!s})}),Object(sv.a)(t=>{const e=new gv(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);this.triggerEvent(e)}),Object(ve.a)(t=>Object.assign(Object.assign({},t),{guards:hw(t.targetSnapshot,t.currentSnapshot,this.rootContexts)})),function(t,e){return Object(ev.a)(n=>{const{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:o,canDeactivateChecks:s}}=n;return 0===s.length&&0===o.length?Object(le.a)(Object.assign(Object.assign({},n),{guardsResult:!0})):function(t,e,n,r){return Object(ce.a)(t).pipe(Object(ev.a)(t=>function(t,e,n,r,i){const o=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!o||0===o.length)return Object(le.a)(!0);const s=o.map(o=>{const s=dw(o,e,i);let a;if(function(t){return t&&U_(t.canDeactivate)}(s))a=Mv(s.canDeactivate(t,e,n,r));else{if(!U_(s))throw new Error("Invalid CanDeactivate guard");a=Mv(s(t,e,n,r))}return a.pipe(Sm())});return Object(le.a)(s).pipe(H_())}(t.component,t.route,n,e,r)),Sm(t=>!0!==t,!0))}(s,r,i,t).pipe(Object(ev.a)(n=>n&&"boolean"==typeof n?function(t,e,n,r){return Object(ce.a)(e).pipe(nv(e=>de(function(t,e){return null!==t&&e&&e(new wv(t)),Object(le.a)(!0)}(e.route.parent,r),function(t,e){return null!==t&&e&&e(new Ov(t)),Object(le.a)(!0)}(e.route,r),function(t,e,n){const r=e[e.length-1],i=e.slice(0,e.length-1).reverse().map(t=>function(t){const e=t.routeConfig?t.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:t,guards:e}:null}(t)).filter(t=>null!==t).map(e=>Xb(()=>{const i=e.guards.map(i=>{const o=dw(i,e.node,n);let s;if(function(t){return t&&U_(t.canActivateChild)}(o))s=Mv(o.canActivateChild(r,t));else{if(!U_(o))throw new Error("Invalid CanActivateChild guard");s=Mv(o(r,t))}return s.pipe(Sm())});return Object(le.a)(i).pipe(H_())}));return Object(le.a)(i).pipe(H_())}(t,e.path,n),function(t,e,n){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return Object(le.a)(!0);const i=r.map(r=>Xb(()=>{const i=dw(r,e,n);let o;if(function(t){return t&&U_(t.canActivate)}(i))o=Mv(i.canActivate(e,t));else{if(!U_(i))throw new Error("Invalid CanActivate guard");o=Mv(i(e,t))}return o.pipe(Sm())}));return Object(le.a)(i).pipe(H_())}(t,e.route,n))),Sm(t=>!0!==t,!0))}(r,o,t,e):Object(le.a)(n)),Object(ve.a)(t=>Object.assign(Object.assign({},n),{guardsResult:t})))})}(this.ngModule.injector,t=>this.triggerEvent(t)),Object(sv.a)(t=>{if(V_(t.guardsResult)){const e=Pv(`Redirecting to "${this.serializeUrl(t.guardsResult)}"`);throw e.url=t.guardsResult,e}const e=new mv(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot,!!t.guardsResult);this.triggerEvent(e)}),Ie(t=>{if(!t.guardsResult){this.resetUrlToCurrentUrlTree();const n=new dv(t.id,this.serializeUrl(t.extractedUrl),"");return e.next(n),t.resolve(!1),!1}return!0}),Ow(t=>{if(t.guards.canActivateChecks.length)return Object(le.a)(t).pipe(Object(sv.a)(t=>{const e=new yv(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);this.triggerEvent(e)}),rm(t=>{let n=!1;return Object(le.a)(t).pipe((r=this.paramsInheritanceStrategy,i=this.ngModule.injector,Object(ev.a)(t=>{const{targetSnapshot:e,guards:{canActivateChecks:n}}=t;if(!n.length)return Object(le.a)(t);let o=0;return Object(ce.a)(n).pipe(nv(t=>function(t,e,n,r){return function(t,e,n,r){const i=Object.keys(t);if(0===i.length)return Object(le.a)({});const o={};return Object(ce.a)(i).pipe(Object(ev.a)(i=>function(t,e,n,r){const i=dw(t,e,r);return Mv(i.resolve?i.resolve(e,n):i(e,n))}(t[i],e,n,r).pipe(Object(sv.a)(t=>{o[i]=t}))),rv(1),Object(ev.a)(()=>Object.keys(o).length===i.length?Object(le.a)(o):gm.a))}(t._resolve,t,e,r).pipe(Object(ve.a)(e=>(t._resolvedData=e,t.data=Object.assign(Object.assign({},t.data),g_(t,n).resolve),null)))}(t.route,e,r,i)),Object(sv.a)(()=>o++),rv(1),Object(ev.a)(e=>o===n.length?Object(le.a)(t):gm.a))})),Object(sv.a)({next:()=>n=!0,complete:()=>{if(!n){const n=new dv(t.id,this.serializeUrl(t.extractedUrl),"At least one route resolver didn't emit any value.");e.next(n),t.resolve(!1)}}}));var r,i}),Object(sv.a)(t=>{const e=new bv(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);this.triggerEvent(e)}))}),Ow(t=>{const{targetSnapshot:e,id:n,extractedUrl:r,rawUrl:i,extras:{skipLocationChange:o,replaceUrl:s}}=t;return this.hooks.afterPreactivation(e,{navigationId:n,appliedUrlTree:r,rawUrlTree:i,skipLocationChange:!!o,replaceUrl:!!s})}),Object(ve.a)(t=>{const e=function(t,e,n){const r=C_(t,e._root,n?n._root:void 0);return new d_(r,e)}(this.routeReuseStrategy,t.targetSnapshot,t.currentRouterState);return Object.assign(Object.assign({},t),{targetRouterState:e})}),Object(sv.a)(t=>{this.currentUrlTree=t.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl),this.routerState=t.targetRouterState,"deferred"===this.urlUpdateStrategy&&(t.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,!!t.extras.replaceUrl,t.id,t.extras.state),this.browserUrlTree=t.urlAfterRedirects)}),(o=this.rootContexts,s=this.routeReuseStrategy,a=t=>this.triggerEvent(t),Object(ve.a)(t=>(new M_(s,t.targetRouterState,t.currentRouterState,a).activate(o),t))),Object(sv.a)({next(){n=!0},complete(){n=!0}}),(i=()=>{if(!n&&!r){this.resetUrlToCurrentUrlTree();const n=new dv(t.id,this.serializeUrl(t.extractedUrl),`Navigation ID ${t.id} is not equal to the current navigation id ${this.navigationId}`);e.next(n),t.resolve(!1)}this.currentNavigation=null},t=>t.lift(new av(i))),Zb(n=>{if(r=!0,(i=n)&&i.ngNavigationCancelingError){const r=V_(n.url);r||(this.navigated=!0,this.resetStateAndUrl(t.currentRouterState,t.currentUrlTree,t.rawUrl));const i=new dv(t.id,this.serializeUrl(t.extractedUrl),n.message);e.next(i),r?setTimeout(()=>{const e=this.urlHandlingStrategy.merge(n.url,this.rawUrlTree);this.scheduleNavigation(e,"imperative",null,{skipLocationChange:t.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy},{resolve:t.resolve,reject:t.reject,promise:t.promise})},0):t.resolve(!1)}else{this.resetStateAndUrl(t.currentRouterState,t.currentUrlTree,t.rawUrl);const r=new fv(t.id,this.serializeUrl(t.extractedUrl),n);e.next(r);try{t.resolve(this.errorHandler(n))}catch(ba){t.reject(ba)}}var i;return gm.a}));var i,o,s,a}))}resetRootComponentType(t){this.rootComponentType=t,this.routerState.root.component=this.rootComponentType}getTransition(){const t=this.transitions.value;return t.urlAfterRedirects=this.browserUrlTree,t}setTransition(t){this.transitions.next(Object.assign(Object.assign({},this.getTransition()),t))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const e=this.extractLocationChangeInfoFromEvent(t);this.shouldScheduleNavigation(this.lastLocationChangeInfo,e)&&setTimeout(()=>{const{source:t,state:n,urlTree:r}=e,i={replaceUrl:!0};if(n){const t=Object.assign({},n);delete t.navigationId,0!==Object.keys(t).length&&(i.state=t)}this.scheduleNavigation(r,t,n,i)},0),this.lastLocationChangeInfo=e}))}extractLocationChangeInfoFromEvent(t){var e;return{source:"popstate"===t.type?"popstate":"hashchange",urlTree:this.parseUrl(t.url),state:(null===(e=t.state)||void 0===e?void 0:e.navigationId)?t.state:null,transitionId:this.getTransition().id}}shouldScheduleNavigation(t,e){if(!t)return!0;const n=e.urlTree.toString()===t.urlTree.toString();return!(e.transitionId===t.transitionId&&n&&("hashchange"===e.source&&"popstate"===t.source||"popstate"===e.source&&"hashchange"===t.source))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(t){this.events.next(t)}resetConfig(t){B_(t),this.config=t.map(W_),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0)}createUrlTree(t,e={}){const{relativeTo:n,queryParams:r,fragment:i,queryParamsHandling:o,preserveFragment:s}=e,a=n||this.routerState.root,u=s?this.currentUrlTree.fragment:i;let c=null;switch(o){case"merge":c=Object.assign(Object.assign({},this.currentUrlTree.queryParams),r);break;case"preserve":c=this.currentUrlTree.queryParams;break;default:c=r||null}return null!==c&&(c=this.removeEmptyProps(c)),function(t,e,n,r,i){if(0===n.length)return I_(e.root,e.root,e,r,i);const o=function(t){if("string"==typeof t[0]&&1===t.length&&"/"===t[0])return new T_(!0,0,t);let e=0,n=!1;const r=t.reduce((t,r,i)=>{if("object"==typeof r&&null!=r){if(r.outlets){const e={};return Dv(r.outlets,(t,n)=>{e[n]="string"==typeof t?t.split("/"):t}),[...t,{outlets:e}]}if(r.segmentPath)return[...t,r.segmentPath]}return"string"!=typeof r?[...t,r]:0===i?(r.split("/").forEach((r,i)=>{0==i&&"."===r||(0==i&&""===r?n=!0:".."===r?e++:""!=r&&t.push(r))}),t):[...t,r]},[]);return new T_(n,e,r)}(n);if(o.toRoot())return I_(e.root,new Hv([],{}),e,r,i);const s=function(t,e,n){if(t.isAbsolute)return new P_(e.root,!0,0);if(-1===n.snapshot._lastPathIndex){const t=n.snapshot._urlSegment;return new P_(t,t===e.root,0)}const r=E_(t.commands[0])?0:1;return function(t,e,n){let r=t,i=e,o=n;for(;o>i;){if(o-=i,r=r.parent,!r)throw new Error("Invalid number of '../'");i=r.segments.length}return new P_(r,!1,i-o)}(n.snapshot._urlSegment,n.snapshot._lastPathIndex+r,t.numberOfDoubleDots)}(o,e,t),a=s.processChildren?A_(s.segmentGroup,s.index,o.commands):R_(s.segmentGroup,s.index,o.commands);return I_(s.segmentGroup,a,e,r,i)}(a,this.currentUrlTree,t,c,u)}navigateByUrl(t,e={skipLocationChange:!1}){const n=V_(t)?t:this.parseUrl(t),r=this.urlHandlingStrategy.merge(n,this.rawUrlTree);return this.scheduleNavigation(r,"imperative",null,e)}navigate(t,e={skipLocationChange:!1}){return function(t){for(let e=0;e<t.length;e++){const n=t[e];if(null==n)throw new Error(`The requested path contains ${n} segment at index ${e}`)}}(t),this.navigateByUrl(this.createUrlTree(t,e),e)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let e;try{e=this.urlSerializer.parse(t)}catch(Kg){e=this.malformedUriErrorHandler(Kg,this.urlSerializer,t)}return e}isActive(t,e){if(V_(t))return Lv(this.currentUrlTree,t,e);const n=this.parseUrl(t);return Lv(this.currentUrlTree,n,e)}removeEmptyProps(t){return Object.keys(t).reduce((e,n)=>{const r=t[n];return null!=r&&(e[n]=r),e},{})}processNavigations(){this.navigations.subscribe(t=>{this.navigated=!0,this.lastSuccessfulId=t.id,this.events.next(new hv(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,this.currentNavigation=null,t.resolve(!0)},t=>{this.console.warn("Unhandled Navigation Error: ")})}scheduleNavigation(t,e,n,r,i){const o=this.getTransition(),s="imperative"!==e&&"imperative"===(null==o?void 0:o.source),a=(this.lastSuccessfulId===o.id||this.currentNavigation?o.rawUrl:o.urlAfterRedirects).toString()===t.toString();if(s&&a)return Promise.resolve(!0);let u,c,l;i?(u=i.resolve,c=i.reject,l=i.promise):l=new Promise((t,e)=>{u=t,c=e});const h=++this.navigationId;return this.setTransition({id:h,source:e,restoredState:n,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:t,extras:r,resolve:u,reject:c,promise:l,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),l.catch(t=>Promise.reject(t))}setBrowserUrl(t,e,n,r){const i=this.urlSerializer.serialize(t);r=r||{},this.location.isCurrentPathEqualTo(i)||e?this.location.replaceState(i,"",Object.assign(Object.assign({},r),{navigationId:n})):this.location.go(i,"",Object.assign(Object.assign({},r),{navigationId:n}))}resetStateAndUrl(t,e,n){this.routerState=t,this.currentUrlTree=e,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,n),this.resetUrlToCurrentUrlTree()}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",{navigationId:this.lastSuccessfulId})}}return t.\u0275fac=function(e){return new(e||t)(r.Yb(r.N),r.Yb(zv),r.Yb(Tw),r.Yb(w),r.Yb(r.s),r.Yb(r.x),r.Yb(r.i),r.Yb(void 0))},t.\u0275prov=r.Ib({token:t,factory:t.\u0275fac}),t})(),Nw=(()=>{class t{constructor(t,e,n,r,i){this.router=t,this.route=e,this.commands=[],this.onChanges=new te.a,null==n&&r.setAttribute(i.nativeElement,"tabindex","0")}ngOnChanges(t){this.onChanges.next(this)}set routerLink(t){this.commands=null!=t?Array.isArray(t)?t:[t]:[]}onClick(){const t={skipLocationChange:Mw(this.skipLocationChange),replaceUrl:Mw(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,t),!0}get urlTree(){return this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:Mw(this.preserveFragment)})}}return t.\u0275fac=function(e){return new(e||t)(r.Mb(jw),r.Mb(p_),r.Zb("tabindex"),r.Mb(r.E),r.Mb(r.l))},t.\u0275dir=r.Hb({type:t,selectors:[["","routerLink","",5,"a",5,"area"]],hostBindings:function(t,e){1&t&&r.bc("click",function(){return e.onClick()})},inputs:{routerLink:"routerLink",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo"},features:[r.yb]}),t})(),Dw=(()=>{class t{constructor(t,e,n){this.router=t,this.route=e,this.locationStrategy=n,this.commands=[],this.onChanges=new te.a,this.subscription=t.events.subscribe(t=>{t instanceof hv&&this.updateTargetUrlAndHref()})}set routerLink(t){this.commands=null!=t?Array.isArray(t)?t:[t]:[]}ngOnChanges(t){this.updateTargetUrlAndHref(),this.onChanges.next(this)}ngOnDestroy(){this.subscription.unsubscribe()}onClick(t,e,n,r,i){if(0!==t||e||n||r||i)return!0;if("string"==typeof this.target&&"_self"!=this.target)return!0;const o={skipLocationChange:Mw(this.skipLocationChange),replaceUrl:Mw(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,o),!1}updateTargetUrlAndHref(){this.href=this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.urlTree))}get urlTree(){return this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:Mw(this.preserveFragment)})}}return t.\u0275fac=function(e){return new(e||t)(r.Mb(jw),r.Mb(p_),r.Mb(m))},t.\u0275dir=r.Hb({type:t,selectors:[["a","routerLink",""],["area","routerLink",""]],hostVars:2,hostBindings:function(t,e){1&t&&r.bc("click",function(t){return e.onClick(t.button,t.ctrlKey,t.shiftKey,t.altKey,t.metaKey)}),2&t&&(r.Ub("href",e.href,r.sc),r.Bb("target",e.target))},inputs:{routerLink:"routerLink",target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo"},features:[r.yb]}),t})();function Mw(t){return""===t||!!t}let Lw=(()=>{class t{constructor(t,e,n,i,o){this.parentContexts=t,this.location=e,this.resolver=n,this.changeDetector=o,this.activated=null,this._activatedRoute=null,this.activateEvents=new r.n,this.deactivateEvents=new r.n,this.name=i||Iv,t.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const t=this.parentContexts.getContext(this.name);t&&t.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,t}attach(t,e){this.activated=t,this._activatedRoute=e,this.location.insert(t.hostView)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,e){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=t;const n=(e=e||this.resolver).resolveComponentFactory(t._futureSnapshot.routeConfig.component),r=this.parentContexts.getOrCreateContext(this.name).children,i=new Fw(t,r,this.location.injector);this.activated=this.location.createComponent(n,this.location.length,i),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return t.\u0275fac=function(e){return new(e||t)(r.Mb(Tw),r.Mb(r.Q),r.Mb(r.j),r.Zb("name"),r.Mb(r.h))},t.\u0275dir=r.Hb({type:t,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate"},exportAs:["outlet"]}),t})();class Fw{constructor(t,e,n){this.route=t,this.childContexts=e,this.parent=n}get(t,e){return t===p_?this.route:t===Tw?this.childContexts:this.parent.get(t,e)}}class Uw{}class Vw{preload(t,e){return Object(le.a)(null)}}let Qw=(()=>{class t{constructor(t,e,n,r,i){this.router=t,this.injector=r,this.preloadingStrategy=i,this.loader=new Iw(e,n,e=>t.triggerEvent(new vv(e)),e=>t.triggerEvent(new _v(e)))}setUpPreloading(){this.subscription=this.router.events.pipe(Ie(t=>t instanceof hv),nv(()=>this.preload())).subscribe(()=>{})}preload(){const t=this.injector.get(r.y);return this.processRoutes(t,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,e){const n=[];for(const r of e)if(r.loadChildren&&!r.canLoad&&r._loadedConfig){const t=r._loadedConfig;n.push(this.processRoutes(t.module,t.routes))}else r.loadChildren&&!r.canLoad?n.push(this.preloadConfig(t,r)):r.children&&n.push(this.processRoutes(t,r.children));return Object(ce.a)(n).pipe(Object(he.a)(),Object(ve.a)(t=>{}))}preloadConfig(t,e){return this.preloadingStrategy.preload(e,()=>this.loader.load(t.injector,e).pipe(Object(ev.a)(t=>(e._loadedConfig=t,this.processRoutes(t.module,t.routes)))))}}return t.\u0275fac=function(e){return new(e||t)(r.Yb(jw),r.Yb(r.x),r.Yb(r.i),r.Yb(r.s),r.Yb(Uw))},t.\u0275prov=r.Ib({token:t,factory:t.\u0275fac}),t})(),Hw=(()=>{class t{constructor(t,e,n={}){this.router=t,this.viewportScroller=e,this.options=n,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},n.scrollPositionRestoration=n.scrollPositionRestoration||"disabled",n.anchorScrolling=n.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(t=>{t instanceof lv?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof hv&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.router.parseUrl(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(t=>{t instanceof xv&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,e){this.router.triggerEvent(new xv(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,e))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(r.Yb(jw),r.Yb(Ct),r.Yb(void 0))},t.\u0275prov=r.Ib({token:t,factory:t.\u0275fac}),t})();const qw=new r.r("ROUTER_CONFIGURATION"),Bw=new r.r("ROUTER_FORROOT_GUARD"),zw=[w,{provide:zv,useClass:Gv},{provide:jw,useFactory:function(t,e,n,r,i,s,a,u={},c,l){const h=new jw(null,t,e,n,r,i,s,jv(a));if(c&&(h.urlHandlingStrategy=c),l&&(h.routeReuseStrategy=l),function(t,e){t.errorHandler&&(e.errorHandler=t.errorHandler),t.malformedUriErrorHandler&&(e.malformedUriErrorHandler=t.malformedUriErrorHandler),t.onSameUrlNavigation&&(e.onSameUrlNavigation=t.onSameUrlNavigation),t.paramsInheritanceStrategy&&(e.paramsInheritanceStrategy=t.paramsInheritanceStrategy),t.relativeLinkResolution&&(e.relativeLinkResolution=t.relativeLinkResolution),t.urlUpdateStrategy&&(e.urlUpdateStrategy=t.urlUpdateStrategy)}(u,h),u.enableTracing){const t=o();h.events.subscribe(e=>{t.logGroup(`Router Event: ${e.constructor.name}`),t.log(e.toString()),t.log(e),t.logGroupEnd()})}return h},deps:[zv,Tw,w,r.s,r.x,r.i,xw,qw,[class{},new r.B],[class{},new r.B]]},Tw,{provide:p_,useFactory:function(t){return t.routerState.root},deps:[jw]},{provide:r.x,useClass:r.K},Qw,Vw,class{preload(t,e){return e().pipe(Zb(()=>Object(le.a)(null)))}},{provide:qw,useValue:{enableTracing:!1}}];function Gw(){return new r.z("Router",jw)}let Ww=(()=>{class t{constructor(t,e){}static forRoot(e,n){return{ngModule:t,providers:[zw,Xw(e),{provide:Bw,useFactory:Kw,deps:[[jw,new r.B,new r.J]]},{provide:qw,useValue:n||{}},{provide:m,useFactory:$w,deps:[a,[new r.p(b),new r.B],qw]},{provide:Hw,useFactory:Yw,deps:[jw,Ct,qw]},{provide:Uw,useExisting:n&&n.preloadingStrategy?n.preloadingStrategy:Vw},{provide:r.z,multi:!0,useFactory:Gw},[Zw,{provide:r.d,multi:!0,useFactory:Jw,deps:[Zw]},{provide:eC,useFactory:tC,deps:[Zw]},{provide:r.b,multi:!0,useExisting:eC}]]}}static forChild(e){return{ngModule:t,providers:[Xw(e)]}}}return t.\u0275mod=r.Kb({type:t}),t.\u0275inj=r.Jb({factory:function(e){return new(e||t)(r.Yb(Bw,8),r.Yb(jw,8))}}),t})();function Yw(t,e,n){return n.scrollOffset&&e.setOffset(n.scrollOffset),new Hw(t,e,n)}function $w(t,e,n={}){return n.useHash?new _(t,e):new v(t,e)}function Kw(t){return"guarded"}function Xw(t){return[{provide:r.a,multi:!0,useValue:t},{provide:xw,multi:!0,useValue:t}]}let Zw=(()=>{class t{constructor(t){this.injector=t,this.initNavigation=!1,this.resultOfPreactivationDone=new te.a}appInitializer(){return this.injector.get(c,Promise.resolve(null)).then(()=>{let t=null;const e=new Promise(e=>t=e),n=this.injector.get(jw),r=this.injector.get(qw);return"disabled"===r.initialNavigation?(n.setUpLocationChangeListener(),t(!0)):"enabled"===r.initialNavigation||"enabledBlocking"===r.initialNavigation?(n.hooks.afterPreactivation=()=>this.initNavigation?Object(le.a)(null):(this.initNavigation=!0,t(!0),this.resultOfPreactivationDone),n.initialNavigation()):t(!0),e})}bootstrapListener(t){const e=this.injector.get(qw),n=this.injector.get(Qw),i=this.injector.get(Hw),o=this.injector.get(jw),s=this.injector.get(r.g);t===s.components[0]&&("enabledNonBlocking"!==e.initialNavigation&&void 0!==e.initialNavigation||o.initialNavigation(),n.setUpPreloading(),i.init(),o.resetRootComponentType(s.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}}return t.\u0275fac=function(e){return new(e||t)(r.Yb(r.s))},t.\u0275prov=r.Ib({token:t,factory:t.\u0275fac}),t})();function Jw(t){return t.appInitializer.bind(t)}function tC(t){return t.bootstrapListener.bind(t)}const eC=new r.r("Router Initializer");let nC=(()=>{class t{constructor(t){this.router=t}ngOnInit(){location.replace("http://localhost:4500/")}}return t.\u0275fac=function(e){return new(e||t)(r.Mb(jw))},t.\u0275cmp=r.Gb({type:t,selectors:[["app-admin"]],decls:3,vars:0,consts:[[1,"loader"]],template:function(t,e){1&t&&(r.Rb(0,"h1"),r.xc(1,"Please Wait"),r.Qb(),r.Nb(2,"div",0))},styles:["h1[_ngcontent-%COMP%]{margin-top:100px;text-align:center;font-family:Roboto,sans-serif}.loader[_ngcontent-%COMP%]{margin-top:50px;margin-left:auto;margin-right:auto;border-radius:50%;border:16px solid #f3f3f3;border-top-color:#fd5602;width:120px;height:120px;animation:spin 2s linear infinite}@keyframes spin{0%{transform:rotate(0deg)}to{transform:rotate(1turn)}}"]}),t})();var rC=n("XoHu");function iC(t,e){return new ue.a(n=>{const r=t.length;if(0===r)return void n.complete();const i=new Array(r);let o=0,s=0;for(let a=0;a<r;a++){const u=Object(ce.a)(t[a]);let c=!1;n.add(u.subscribe({next:t=>{c||(c=!0,s++),i[a]=t},error:t=>n.error(t),complete:()=>{o++,o!==r&&c||(s===r&&n.next(e?e.reduce((t,e,n)=>(t[e]=i[n],t),{}):i),n.complete())}}))}})}const oC=new r.r("NgValueAccessor"),sC={provide:oC,useExisting:Object(r.U)(()=>aC),multi:!0};let aC=(()=>{class t{constructor(t,e){this._renderer=t,this._elementRef=e,this.onChange=t=>{},this.onTouched=()=>{}}writeValue(t){this._renderer.setProperty(this._elementRef.nativeElement,"checked",t)}registerOnChange(t){this.onChange=t}registerOnTouched(t){this.onTouched=t}setDisabledState(t){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",t)}}return t.\u0275fac=function(e){return new(e||t)(r.Mb(r.E),r.Mb(r.l))},t.\u0275dir=r.Hb({type:t,selectors:[["input","type","checkbox","formControlName",""],["input","type","checkbox","formControl",""],["input","type","checkbox","ngModel",""]],hostBindings:function(t,e){1&t&&r.bc("change",function(t){return e.onChange(t.target.checked)})("blur",function(){return e.onTouched()})},features:[r.zb([sC])]}),t})();const uC={provide:oC,useExisting:Object(r.U)(()=>lC),multi:!0},cC=new r.r("CompositionEventMode");let lC=(()=>{class t{constructor(t,e,n){this._renderer=t,this._elementRef=e,this._compositionMode=n,this.onChange=t=>{},this.onTouched=()=>{},this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function(){const t=o()?o().getUserAgent():"";return/android (\d+)/.test(t.toLowerCase())}())}writeValue(t){this._renderer.setProperty(this._elementRef.nativeElement,"value",null==t?"":t)}registerOnChange(t){this.onChange=t}registerOnTouched(t){this.onTouched=t}setDisabledState(t){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",t)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}}return t.\u0275fac=function(e){return new(e||t)(r.Mb(r.E),r.Mb(r.l),r.Mb(cC,8))},t.\u0275dir=r.Hb({type:t,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(t,e){1&t&&r.bc("input",function(t){return e._handleInput(t.target.value)})("blur",function(){return e.onTouched()})("compositionstart",function(){return e._compositionStart()})("compositionend",function(t){return e._compositionEnd(t.target.value)})},features:[r.zb([uC])]}),t})();function hC(t){return null==t||0===t.length}function dC(t){return null!=t&&"number"==typeof t.length}const fC=new r.r("NgValidators"),pC=new r.r("NgAsyncValidators"),gC=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class mC{static min(t){return e=>{if(hC(e.value)||hC(t))return null;const n=parseFloat(e.value);return!isNaN(n)&&n<t?{min:{min:t,actual:e.value}}:null}}static max(t){return e=>{if(hC(e.value)||hC(t))return null;const n=parseFloat(e.value);return!isNaN(n)&&n>t?{max:{max:t,actual:e.value}}:null}}static required(t){return hC(t.value)?{required:!0}:null}static requiredTrue(t){return!0===t.value?null:{required:!0}}static email(t){return hC(t.value)||gC.test(t.value)?null:{email:!0}}static minLength(t){return e=>hC(e.value)||!dC(e.value)?null:e.value.length<t?{minlength:{requiredLength:t,actualLength:e.value.length}}:null}static maxLength(t){return e=>dC(e.value)&&e.value.length>t?{maxlength:{requiredLength:t,actualLength:e.value.length}}:null}static pattern(t){if(!t)return mC.nullValidator;let e,n;return"string"==typeof t?(n="","^"!==t.charAt(0)&&(n+="^"),n+=t,"$"!==t.charAt(t.length-1)&&(n+="$"),e=new RegExp(n)):(n=t.toString(),e=t),t=>{if(hC(t.value))return null;const r=t.value;return e.test(r)?null:{pattern:{requiredPattern:n,actualValue:r}}}}static nullValidator(t){return null}static compose(t){if(!t)return null;const e=t.filter(yC);return 0==e.length?null:function(t){return vC(_C(t,e))}}static composeAsync(t){if(!t)return null;const e=t.filter(yC);return 0==e.length?null:function(t){return function(...t){if(1===t.length){const e=t[0];if(Object(Hb.a)(e))return iC(e,null);if(Object(rC.a)(e)&&Object.getPrototypeOf(e)===Object.prototype){const t=Object.keys(e);return iC(t.map(t=>e[t]),t)}}if("function"==typeof t[t.length-1]){const e=t.pop();return iC(t=1===t.length&&Object(Hb.a)(t[0])?t[0]:t,null).pipe(Object(ve.a)(t=>e(...t)))}return iC(t,null)}(_C(t,e).map(bC)).pipe(Object(ve.a)(vC))}}}function yC(t){return null!=t}function bC(t){const e=Object(r.rb)(t)?Object(ce.a)(t):t;return Object(r.qb)(e),e}function vC(t){let e={};return t.forEach(t=>{e=null!=t?Object.assign(Object.assign({},e),t):e}),0===Object.keys(e).length?null:e}function _C(t,e){return e.map(e=>e(t))}function wC(t){return t.map(t=>function(t){return!t.validate}(t)?t:e=>t.validate(e))}function CC(t){return null!=t?mC.compose(wC(t)):null}function OC(t){return null!=t?mC.composeAsync(wC(t)):null}function EC(t,e){return null===t?[e]:Array.isArray(t)?[...t,e]:[t,e]}function xC(t){return t._rawValidators}function IC(t){return t._rawAsyncValidators}let SC=(()=>{class t{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(t){this._rawValidators=t||[],this._composedValidatorFn=CC(this._rawValidators)}_setAsyncValidators(t){this._rawAsyncValidators=t||[],this._composedAsyncValidatorFn=OC(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(t){this._onDestroyCallbacks.push(t)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(t=>t()),this._onDestroyCallbacks=[]}reset(t){this.control&&this.control.reset(t)}hasError(t,e){return!!this.control&&this.control.hasError(t,e)}getError(t,e){return this.control?this.control.getError(t,e):null}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=r.Hb({type:t}),t})(),TC=(()=>{class t extends SC{get formDirective(){return null}get path(){return null}}return t.\u0275fac=function(e){return PC(e||t)},t.\u0275dir=r.Hb({type:t,features:[r.xb]}),t})();const PC=r.Tb(TC);class RC extends SC{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class AC{constructor(t){this._cd=t}get ngClassUntouched(){var t,e,n;return null!==(n=null===(e=null===(t=this._cd)||void 0===t?void 0:t.control)||void 0===e?void 0:e.untouched)&&void 0!==n&&n}get ngClassTouched(){var t,e,n;return null!==(n=null===(e=null===(t=this._cd)||void 0===t?void 0:t.control)||void 0===e?void 0:e.touched)&&void 0!==n&&n}get ngClassPristine(){var t,e,n;return null!==(n=null===(e=null===(t=this._cd)||void 0===t?void 0:t.control)||void 0===e?void 0:e.pristine)&&void 0!==n&&n}get ngClassDirty(){var t,e,n;return null!==(n=null===(e=null===(t=this._cd)||void 0===t?void 0:t.control)||void 0===e?void 0:e.dirty)&&void 0!==n&&n}get ngClassValid(){var t,e,n;return null!==(n=null===(e=null===(t=this._cd)||void 0===t?void 0:t.control)||void 0===e?void 0:e.valid)&&void 0!==n&&n}get ngClassInvalid(){var t,e,n;return null!==(n=null===(e=null===(t=this._cd)||void 0===t?void 0:t.control)||void 0===e?void 0:e.invalid)&&void 0!==n&&n}get ngClassPending(){var t,e,n;return null!==(n=null===(e=null===(t=this._cd)||void 0===t?void 0:t.control)||void 0===e?void 0:e.pending)&&void 0!==n&&n}}let kC=(()=>{class t extends AC{constructor(t){super(t)}}return t.\u0275fac=function(e){return new(e||t)(r.Mb(RC,2))},t.\u0275dir=r.Hb({type:t,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(t,e){2&t&&r.Eb("ng-untouched",e.ngClassUntouched)("ng-touched",e.ngClassTouched)("ng-pristine",e.ngClassPristine)("ng-dirty",e.ngClassDirty)("ng-valid",e.ngClassValid)("ng-invalid",e.ngClassInvalid)("ng-pending",e.ngClassPending)},features:[r.xb]}),t})(),jC=(()=>{class t extends AC{constructor(t){super(t)}}return t.\u0275fac=function(e){return new(e||t)(r.Mb(TC,10))},t.\u0275dir=r.Hb({type:t,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:14,hostBindings:function(t,e){2&t&&r.Eb("ng-untouched",e.ngClassUntouched)("ng-touched",e.ngClassTouched)("ng-pristine",e.ngClassPristine)("ng-dirty",e.ngClassDirty)("ng-valid",e.ngClassValid)("ng-invalid",e.ngClassInvalid)("ng-pending",e.ngClassPending)},features:[r.xb]}),t})();const NC={provide:oC,useExisting:Object(r.U)(()=>DC),multi:!0};let DC=(()=>{class t{constructor(t,e){this._renderer=t,this._elementRef=e,this.onChange=t=>{},this.onTouched=()=>{}}writeValue(t){this._renderer.setProperty(this._elementRef.nativeElement,"value",null==t?"":t)}registerOnChange(t){this.onChange=e=>{t(""==e?null:parseFloat(e))}}registerOnTouched(t){this.onTouched=t}setDisabledState(t){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",t)}}return t.\u0275fac=function(e){return new(e||t)(r.Mb(r.E),r.Mb(r.l))},t.\u0275dir=r.Hb({type:t,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(t,e){1&t&&r.bc("input",function(t){return e.onChange(t.target.value)})("blur",function(){return e.onTouched()})},features:[r.zb([NC])]}),t})();const MC={provide:oC,useExisting:Object(r.U)(()=>FC),multi:!0};let LC=(()=>{class t{constructor(){this._accessors=[]}add(t,e){this._accessors.push([t,e])}remove(t){for(let e=this._accessors.length-1;e>=0;--e)if(this._accessors[e][1]===t)return void this._accessors.splice(e,1)}select(t){this._accessors.forEach(e=>{this._isSameGroup(e,t)&&e[1]!==t&&e[1].fireUncheck(t.value)})}_isSameGroup(t,e){return!!t[0].control&&t[0]._parent===e._control._parent&&t[1].name===e.name}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=r.Ib({token:t,factory:t.\u0275fac}),t})(),FC=(()=>{class t{constructor(t,e,n,r){this._renderer=t,this._elementRef=e,this._registry=n,this._injector=r,this.onChange=()=>{},this.onTouched=()=>{}}ngOnInit(){this._control=this._injector.get(RC),this._checkName(),this._registry.add(this._control,this)}ngOnDestroy(){this._registry.remove(this)}writeValue(t){this._state=t===this.value,this._renderer.setProperty(this._elementRef.nativeElement,"checked",this._state)}registerOnChange(t){this._fn=t,this.onChange=()=>{t(this.value),this._registry.select(this)}}fireUncheck(t){this.writeValue(t)}registerOnTouched(t){this.onTouched=t}setDisabledState(t){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",t)}_checkName(){!this.name&&this.formControlName&&(this.name=this.formControlName)}}return t.\u0275fac=function(e){return new(e||t)(r.Mb(r.E),r.Mb(r.l),r.Mb(LC),r.Mb(r.s))},t.\u0275dir=r.Hb({type:t,selectors:[["input","type","radio","formControlName",""],["input","type","radio","formControl",""],["input","type","radio","ngModel",""]],hostBindings:function(t,e){1&t&&r.bc("change",function(){return e.onChange()})("blur",function(){return e.onTouched()})},inputs:{name:"name",formControlName:"formControlName",value:"value"},features:[r.zb([MC])]}),t})();const UC={provide:oC,useExisting:Object(r.U)(()=>VC),multi:!0};let VC=(()=>{class t{constructor(t,e){this._renderer=t,this._elementRef=e,this.onChange=t=>{},this.onTouched=()=>{}}writeValue(t){this._renderer.setProperty(this._elementRef.nativeElement,"value",parseFloat(t))}registerOnChange(t){this.onChange=e=>{t(""==e?null:parseFloat(e))}}registerOnTouched(t){this.onTouched=t}setDisabledState(t){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",t)}}return t.\u0275fac=function(e){return new(e||t)(r.Mb(r.E),r.Mb(r.l))},t.\u0275dir=r.Hb({type:t,selectors:[["input","type","range","formControlName",""],["input","type","range","formControl",""],["input","type","range","ngModel",""]],hostBindings:function(t,e){1&t&&r.bc("change",function(t){return e.onChange(t.target.value)})("input",function(t){return e.onChange(t.target.value)})("blur",function(){return e.onTouched()})},features:[r.zb([UC])]}),t})();const QC={provide:oC,useExisting:Object(r.U)(()=>HC),multi:!0};let HC=(()=>{class t{constructor(t,e){this._renderer=t,this._elementRef=e,this._optionMap=new Map,this._idCounter=0,this.onChange=t=>{},this.onTouched=()=>{},this._compareWith=Object.is}set compareWith(t){this._compareWith=t}writeValue(t){this.value=t;const e=this._getOptionId(t);null==e&&this._renderer.setProperty(this._elementRef.nativeElement,"selectedIndex",-1);const n=function(t,e){return null==t?`${e}`:(e&&"object"==typeof e&&(e="Object"),`${t}: ${e}`.slice(0,50))}(e,t);this._renderer.setProperty(this._elementRef.nativeElement,"value",n)}registerOnChange(t){this.onChange=e=>{this.value=this._getOptionValue(e),t(this.value)}}registerOnTouched(t){this.onTouched=t}setDisabledState(t){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",t)}_registerOption(){return(this._idCounter++).toString()}_getOptionId(t){for(const e of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(e),t))return e;return null}_getOptionValue(t){const e=function(t){return t.split(":")[0]}(t);return this._optionMap.has(e)?this._optionMap.get(e):t}}return t.\u0275fac=function(e){return new(e||t)(r.Mb(r.E),r.Mb(r.l))},t.\u0275dir=r.Hb({type:t,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(t,e){1&t&&r.bc("change",function(t){return e.onChange(t.target.value)})("blur",function(){return e.onTouched()})},inputs:{compareWith:"compareWith"},features:[r.zb([QC])]}),t})();const qC={provide:oC,useExisting:Object(r.U)(()=>BC),multi:!0};let BC=(()=>{class t{constructor(t,e){this._renderer=t,this._elementRef=e,this._optionMap=new Map,this._idCounter=0,this.onChange=t=>{},this.onTouched=()=>{},this._compareWith=Object.is}set compareWith(t){this._compareWith=t}writeValue(t){let e;if(this.value=t,Array.isArray(t)){const n=t.map(t=>this._getOptionId(t));e=(t,e)=>{t._setSelected(n.indexOf(e.toString())>-1)}}else e=(t,e)=>{t._setSelected(!1)};this._optionMap.forEach(e)}registerOnChange(t){this.onChange=e=>{const n=[];if(void 0!==e.selectedOptions){const t=e.selectedOptions;for(let e=0;e<t.length;e++){const r=t.item(e),i=this._getOptionValue(r.value);n.push(i)}}else{const t=e.options;for(let e=0;e<t.length;e++){const r=t.item(e);if(r.selected){const t=this._getOptionValue(r.value);n.push(t)}}}this.value=n,t(n)}}registerOnTouched(t){this.onTouched=t}setDisabledState(t){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",t)}_registerOption(t){const e=(this._idCounter++).toString();return this._optionMap.set(e,t),e}_getOptionId(t){for(const e of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(e)._value,t))return e;return null}_getOptionValue(t){const e=function(t){return t.split(":")[0]}(t);return this._optionMap.has(e)?this._optionMap.get(e)._value:t}}return t.\u0275fac=function(e){return new(e||t)(r.Mb(r.E),r.Mb(r.l))},t.\u0275dir=r.Hb({type:t,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(t,e){1&t&&r.bc("change",function(t){return e.onChange(t.target)})("blur",function(){return e.onTouched()})},inputs:{compareWith:"compareWith"},features:[r.zb([qC])]}),t})();function zC(t,e){return[...e.path,t]}function GC(t,e){$C(t,e,!0),e.valueAccessor.writeValue(t.value),function(t,e){e.valueAccessor.registerOnChange(n=>{t._pendingValue=n,t._pendingChange=!0,t._pendingDirty=!0,"change"===t.updateOn&&XC(t,e)})}(t,e),function(t,e){const n=(t,n)=>{e.valueAccessor.writeValue(t),n&&e.viewToModelUpdate(t)};t.registerOnChange(n),e._registerOnDestroy(()=>{t._unregisterOnChange(n)})}(t,e),function(t,e){e.valueAccessor.registerOnTouched(()=>{t._pendingTouched=!0,"blur"===t.updateOn&&t._pendingChange&&XC(t,e),"submit"!==t.updateOn&&t.markAsTouched()})}(t,e),function(t,e){if(e.valueAccessor.setDisabledState){const n=t=>{e.valueAccessor.setDisabledState(t)};t.registerOnDisabledChange(n),e._registerOnDestroy(()=>{t._unregisterOnDisabledChange(n)})}}(t,e)}function WC(t,e,n=!0){const r=()=>{};e.valueAccessor.registerOnChange(r),e.valueAccessor.registerOnTouched(r),KC(t,e,!0),t&&(e._invokeOnDestroyCallbacks(),t._registerOnCollectionChange(()=>{}))}function YC(t,e){t.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function $C(t,e,n){const r=xC(t);null!==e.validator?t.setValidators(EC(r,e.validator)):"function"==typeof r&&t.setValidators([r]);const i=IC(t);if(null!==e.asyncValidator?t.setAsyncValidators(EC(i,e.asyncValidator)):"function"==typeof i&&t.setAsyncValidators([i]),n){const n=()=>t.updateValueAndValidity();YC(e._rawValidators,n),YC(e._rawAsyncValidators,n)}}function KC(t,e,n){let r=!1;if(null!==t){if(null!==e.validator){const n=xC(t);if(Array.isArray(n)&&n.length>0){const i=n.filter(t=>t!==e.validator);i.length!==n.length&&(r=!0,t.setValidators(i))}}if(null!==e.asyncValidator){const n=IC(t);if(Array.isArray(n)&&n.length>0){const i=n.filter(t=>t!==e.asyncValidator);i.length!==n.length&&(r=!0,t.setAsyncValidators(i))}}}if(n){const t=()=>{};YC(e._rawValidators,t),YC(e._rawAsyncValidators,t)}return r}function XC(t,e){t._pendingDirty&&t.markAsDirty(),t.setValue(t._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(t._pendingValue),t._pendingChange=!1}function ZC(t,e){$C(t,e,!1)}function JC(t,e){if(!t.hasOwnProperty("model"))return!1;const n=t.model;return!!n.isFirstChange()||!Object.is(e,n.currentValue)}const tO=[aC,VC,DC,HC,BC,FC];function eO(t,e){t._syncPendingControls(),e.forEach(t=>{const e=t.control;"submit"===e.updateOn&&e._pendingChange&&(t.viewToModelUpdate(e._pendingValue),e._pendingChange=!1)})}function nO(t,e){if(!e)return null;let n,r,i;return Array.isArray(e),e.forEach(t=>{var e;t.constructor===lC?n=t:(e=t,tO.some(t=>e.constructor===t)?r=t:i=t)}),i||r||n||null}function rO(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}const iO="VALID",oO="INVALID",sO="PENDING",aO="DISABLED";function uO(t){return(dO(t)?t.validators:t)||null}function cO(t){return Array.isArray(t)?CC(t):t||null}function lO(t,e){return(dO(e)?e.asyncValidators:t)||null}function hO(t){return Array.isArray(t)?OC(t):t||null}function dO(t){return null!=t&&!Array.isArray(t)&&"object"==typeof t}class fO{constructor(t,e){this._hasOwnPendingAsyncValidator=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=t,this._rawAsyncValidators=e,this._composedValidatorFn=cO(this._rawValidators),this._composedAsyncValidatorFn=hO(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(t){this._rawValidators=this._composedValidatorFn=t}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(t){this._rawAsyncValidators=this._composedAsyncValidatorFn=t}get parent(){return this._parent}get valid(){return this.status===iO}get invalid(){return this.status===oO}get pending(){return this.status==sO}get disabled(){return this.status===aO}get enabled(){return this.status!==aO}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(t){this._rawValidators=t,this._composedValidatorFn=cO(t)}setAsyncValidators(t){this._rawAsyncValidators=t,this._composedAsyncValidatorFn=hO(t)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(t={}){this.touched=!0,this._parent&&!t.onlySelf&&this._parent.markAsTouched(t)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(t=>t.markAllAsTouched())}markAsUntouched(t={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}markAsDirty(t={}){this.pristine=!1,this._parent&&!t.onlySelf&&this._parent.markAsDirty(t)}markAsPristine(t={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}markAsPending(t={}){this.status=sO,!1!==t.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!t.onlySelf&&this._parent.markAsPending(t)}disable(t={}){const e=this._parentMarkedDirty(t.onlySelf);this.status=aO,this.errors=null,this._forEachChild(e=>{e.disable(Object.assign(Object.assign({},t),{onlySelf:!0}))}),this._updateValue(),!1!==t.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Object.assign(Object.assign({},t),{skipPristineCheck:e})),this._onDisabledChange.forEach(t=>t(!0))}enable(t={}){const e=this._parentMarkedDirty(t.onlySelf);this.status=iO,this._forEachChild(e=>{e.enable(Object.assign(Object.assign({},t),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent}),this._updateAncestors(Object.assign(Object.assign({},t),{skipPristineCheck:e})),this._onDisabledChange.forEach(t=>t(!1))}_updateAncestors(t){this._parent&&!t.onlySelf&&(this._parent.updateValueAndValidity(t),t.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(t){this._parent=t}updateValueAndValidity(t={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),this.status!==iO&&this.status!==sO||this._runAsyncValidator(t.emitEvent)),!1!==t.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!t.onlySelf&&this._parent.updateValueAndValidity(t)}_updateTreeValidity(t={emitEvent:!0}){this._forEachChild(e=>e._updateTreeValidity(t)),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?aO:iO}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(t){if(this.asyncValidator){this.status=sO,this._hasOwnPendingAsyncValidator=!0;const e=bC(this.asyncValidator(this));this._asyncValidationSubscription=e.subscribe(e=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(e,{emitEvent:t})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(t,e={}){this.errors=t,this._updateControlsErrors(!1!==e.emitEvent)}get(t){return function(t,e,n){if(null==e)return null;if(Array.isArray(e)||(e=e.split(".")),Array.isArray(e)&&0===e.length)return null;let r=t;return e.forEach(t=>{r=r instanceof gO?r.controls.hasOwnProperty(t)?r.controls[t]:null:r instanceof mO&&r.at(t)||null}),r}(this,t)}getError(t,e){const n=e?this.get(e):this;return n&&n.errors?n.errors[t]:null}hasError(t,e){return!!this.getError(t,e)}get root(){let t=this;for(;t._parent;)t=t._parent;return t}_updateControlsErrors(t){this.status=this._calculateStatus(),t&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(t)}_initObservables(){this.valueChanges=new r.n,this.statusChanges=new r.n}_calculateStatus(){return this._allControlsDisabled()?aO:this.errors?oO:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(sO)?sO:this._anyControlsHaveStatus(oO)?oO:iO}_anyControlsHaveStatus(t){return this._anyControls(e=>e.status===t)}_anyControlsDirty(){return this._anyControls(t=>t.dirty)}_anyControlsTouched(){return this._anyControls(t=>t.touched)}_updatePristine(t={}){this.pristine=!this._anyControlsDirty(),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}_updateTouched(t={}){this.touched=this._anyControlsTouched(),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}_isBoxedValue(t){return"object"==typeof t&&null!==t&&2===Object.keys(t).length&&"value"in t&&"disabled"in t}_registerOnCollectionChange(t){this._onCollectionChange=t}_setUpdateStrategy(t){dO(t)&&null!=t.updateOn&&(this._updateOn=t.updateOn)}_parentMarkedDirty(t){return!t&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}}class pO extends fO{constructor(t=null,e,n){super(uO(e),lO(n,e)),this._onChange=[],this._applyFormState(t),this._setUpdateStrategy(e),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!n})}setValue(t,e={}){this.value=this._pendingValue=t,this._onChange.length&&!1!==e.emitModelToViewChange&&this._onChange.forEach(t=>t(this.value,!1!==e.emitViewToModelChange)),this.updateValueAndValidity(e)}patchValue(t,e={}){this.setValue(t,e)}reset(t=null,e={}){this._applyFormState(t),this.markAsPristine(e),this.markAsUntouched(e),this.setValue(this.value,e),this._pendingChange=!1}_updateValue(){}_anyControls(t){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(t){this._onChange.push(t)}_unregisterOnChange(t){rO(this._onChange,t)}registerOnDisabledChange(t){this._onDisabledChange.push(t)}_unregisterOnDisabledChange(t){rO(this._onDisabledChange,t)}_forEachChild(t){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(t){this._isBoxedValue(t)?(this.value=this._pendingValue=t.value,t.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=t}}class gO extends fO{constructor(t,e,n){super(uO(e),lO(n,e)),this.controls=t,this._initObservables(),this._setUpdateStrategy(e),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!n})}registerControl(t,e){return this.controls[t]?this.controls[t]:(this.controls[t]=e,e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange),e)}addControl(t,e){this.registerControl(t,e),this.updateValueAndValidity(),this._onCollectionChange()}removeControl(t){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],this.updateValueAndValidity(),this._onCollectionChange()}setControl(t,e){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],e&&this.registerControl(t,e),this.updateValueAndValidity(),this._onCollectionChange()}contains(t){return this.controls.hasOwnProperty(t)&&this.controls[t].enabled}setValue(t,e={}){this._checkAllValuesPresent(t),Object.keys(t).forEach(n=>{this._throwIfControlMissing(n),this.controls[n].setValue(t[n],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}patchValue(t,e={}){Object.keys(t).forEach(n=>{this.controls[n]&&this.controls[n].patchValue(t[n],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}reset(t={},e={}){this._forEachChild((n,r)=>{n.reset(t[r],{onlySelf:!0,emitEvent:e.emitEvent})}),this._updatePristine(e),this._updateTouched(e),this.updateValueAndValidity(e)}getRawValue(){return this._reduceChildren({},(t,e,n)=>(t[n]=e instanceof pO?e.value:e.getRawValue(),t))}_syncPendingControls(){let t=this._reduceChildren(!1,(t,e)=>!!e._syncPendingControls()||t);return t&&this.updateValueAndValidity({onlySelf:!0}),t}_throwIfControlMissing(t){if(!Object.keys(this.controls).length)throw new Error("\n        There are no form controls registered with this group yet. If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.controls[t])throw new Error(`Cannot find form control with name: ${t}.`)}_forEachChild(t){Object.keys(this.controls).forEach(e=>{const n=this.controls[e];n&&t(n,e)})}_setUpControls(){this._forEachChild(t=>{t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(t){for(const e of Object.keys(this.controls)){const n=this.controls[e];if(this.contains(e)&&t(n))return!0}return!1}_reduceValue(){return this._reduceChildren({},(t,e,n)=>((e.enabled||this.disabled)&&(t[n]=e.value),t))}_reduceChildren(t,e){let n=t;return this._forEachChild((t,r)=>{n=e(n,t,r)}),n}_allControlsDisabled(){for(const t of Object.keys(this.controls))if(this.controls[t].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_checkAllValuesPresent(t){this._forEachChild((e,n)=>{if(void 0===t[n])throw new Error(`Must supply a value for form control with name: '${n}'.`)})}}class mO extends fO{constructor(t,e,n){super(uO(e),lO(n,e)),this.controls=t,this._initObservables(),this._setUpdateStrategy(e),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!n})}at(t){return this.controls[t]}push(t){this.controls.push(t),this._registerControl(t),this.updateValueAndValidity(),this._onCollectionChange()}insert(t,e){this.controls.splice(t,0,e),this._registerControl(e),this.updateValueAndValidity()}removeAt(t){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),this.controls.splice(t,1),this.updateValueAndValidity()}setControl(t,e){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),this.controls.splice(t,1),e&&(this.controls.splice(t,0,e),this._registerControl(e)),this.updateValueAndValidity(),this._onCollectionChange()}get length(){return this.controls.length}setValue(t,e={}){this._checkAllValuesPresent(t),t.forEach((t,n)=>{this._throwIfControlMissing(n),this.at(n).setValue(t,{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}patchValue(t,e={}){t.forEach((t,n)=>{this.at(n)&&this.at(n).patchValue(t,{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}reset(t=[],e={}){this._forEachChild((n,r)=>{n.reset(t[r],{onlySelf:!0,emitEvent:e.emitEvent})}),this._updatePristine(e),this._updateTouched(e),this.updateValueAndValidity(e)}getRawValue(){return this.controls.map(t=>t instanceof pO?t.value:t.getRawValue())}clear(){this.controls.length<1||(this._forEachChild(t=>t._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity())}_syncPendingControls(){let t=this.controls.reduce((t,e)=>!!e._syncPendingControls()||t,!1);return t&&this.updateValueAndValidity({onlySelf:!0}),t}_throwIfControlMissing(t){if(!this.controls.length)throw new Error("\n        There are no form controls registered with this array yet. If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.at(t))throw new Error(`Cannot find form control at index ${t}`)}_forEachChild(t){this.controls.forEach((e,n)=>{t(e,n)})}_updateValue(){this.value=this.controls.filter(t=>t.enabled||this.disabled).map(t=>t.value)}_anyControls(t){return this.controls.some(e=>e.enabled&&t(e))}_setUpControls(){this._forEachChild(t=>this._registerControl(t))}_checkAllValuesPresent(t){this._forEachChild((e,n)=>{if(void 0===t[n])throw new Error(`Must supply a value for form control at index: ${n}.`)})}_allControlsDisabled(){for(const t of this.controls)if(t.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(t){t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange)}}const yO={provide:TC,useExisting:Object(r.U)(()=>vO)},bO=(()=>Promise.resolve(null))();let vO=(()=>{class t extends TC{constructor(t,e){super(),this.submitted=!1,this._directives=[],this.ngSubmit=new r.n,this.form=new gO({},CC(t),OC(e))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(t){bO.then(()=>{const e=this._findContainer(t.path);t.control=e.registerControl(t.name,t.control),GC(t.control,t),t.control.updateValueAndValidity({emitEvent:!1}),this._directives.push(t)})}getControl(t){return this.form.get(t.path)}removeControl(t){bO.then(()=>{const e=this._findContainer(t.path);e&&e.removeControl(t.name),rO(this._directives,t)})}addFormGroup(t){bO.then(()=>{const e=this._findContainer(t.path),n=new gO({});ZC(n,t),e.registerControl(t.name,n),n.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(t){bO.then(()=>{const e=this._findContainer(t.path);e&&e.removeControl(t.name)})}getFormGroup(t){return this.form.get(t.path)}updateModel(t,e){bO.then(()=>{this.form.get(t.path).setValue(e)})}setValue(t){this.control.setValue(t)}onSubmit(t){return this.submitted=!0,eO(this.form,this._directives),this.ngSubmit.emit(t),!1}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(t){return t.pop(),t.length?this.form.get(t):this.form}}return t.\u0275fac=function(e){return new(e||t)(r.Mb(fC,10),r.Mb(pC,10))},t.\u0275dir=r.Hb({type:t,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(t,e){1&t&&r.bc("submit",function(t){return e.onSubmit(t)})("reset",function(){return e.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[r.zb([yO]),r.xb]}),t})(),_O=(()=>{class t extends TC{ngOnInit(){this._checkParentType(),this.formDirective.addFormGroup(this)}ngOnDestroy(){this.formDirective&&this.formDirective.removeFormGroup(this)}get control(){return this.formDirective.getFormGroup(this)}get path(){return zC(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}}return t.\u0275fac=function(e){return wO(e||t)},t.\u0275dir=r.Hb({type:t,features:[r.xb]}),t})();const wO=r.Tb(_O),CO={provide:RC,useExisting:Object(r.U)(()=>EO)},OO=(()=>Promise.resolve(null))();let EO=(()=>{class t extends RC{constructor(t,e,n,i){super(),this.control=new pO,this._registered=!1,this.update=new r.n,this._parent=t,this._setValidators(e),this._setAsyncValidators(n),this.valueAccessor=nO(0,i)}ngOnChanges(t){this._checkForErrors(),this._registered||this._setUpControl(),"isDisabled"in t&&this._updateDisabled(t),JC(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._parent?zC(this.name,this._parent):[this.name]}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){GC(this.control,this),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(t){OO.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1})})}_updateDisabled(t){const e=t.isDisabled.currentValue,n=""===e||e&&"false"!==e;OO.then(()=>{n&&!this.control.disabled?this.control.disable():!n&&this.control.disabled&&this.control.enable()})}}return t.\u0275fac=function(e){return new(e||t)(r.Mb(TC,9),r.Mb(fC,10),r.Mb(pC,10),r.Mb(oC,10))},t.\u0275dir=r.Hb({type:t,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[r.zb([CO]),r.xb,r.yb]}),t})(),xO=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=r.Hb({type:t,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),t})();const IO=new r.r("NgModelWithFormControlWarning"),SO={provide:TC,useExisting:Object(r.U)(()=>TO)};let TO=(()=>{class t extends TC{constructor(t,e){super(),this.validators=t,this.asyncValidators=e,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new r.n,this._setValidators(t),this._setAsyncValidators(e)}ngOnChanges(t){this._checkFormPresent(),t.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(KC(this.form,this,!1),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(t){const e=this.form.get(t.path);return GC(e,t),e.updateValueAndValidity({emitEvent:!1}),this.directives.push(t),e}getControl(t){return this.form.get(t.path)}removeControl(t){WC(t.control||null,t,!1),rO(this.directives,t)}addFormGroup(t){this._setUpFormContainer(t)}removeFormGroup(t){this._cleanUpFormContainer(t)}getFormGroup(t){return this.form.get(t.path)}addFormArray(t){this._setUpFormContainer(t)}removeFormArray(t){this._cleanUpFormContainer(t)}getFormArray(t){return this.form.get(t.path)}updateModel(t,e){this.form.get(t.path).setValue(e)}onSubmit(t){return this.submitted=!0,eO(this.form,this.directives),this.ngSubmit.emit(t),!1}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_updateDomValue(){this.directives.forEach(t=>{const e=this.form.get(t.path);t.control!==e&&(WC(t.control||null,t),e&&GC(e,t),t.control=e)}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(t){const e=this.form.get(t.path);ZC(e,t),e.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(t){if(this.form){const e=this.form.get(t.path);e&&function(t,e){return KC(t,e,!1)}(e,t)&&e.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){$C(this.form,this,!1),this._oldForm&&KC(this._oldForm,this,!1)}_checkFormPresent(){}}return t.\u0275fac=function(e){return new(e||t)(r.Mb(fC,10),r.Mb(pC,10))},t.\u0275dir=r.Hb({type:t,selectors:[["","formGroup",""]],hostBindings:function(t,e){1&t&&r.bc("submit",function(t){return e.onSubmit(t)})("reset",function(){return e.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[r.zb([SO]),r.xb,r.yb]}),t})();const PO={provide:TC,useExisting:Object(r.U)(()=>RO)};let RO=(()=>{class t extends _O{constructor(t,e,n){super(),this._parent=t,this._setValidators(e),this._setAsyncValidators(n)}_checkParentType(){jO(this._parent)}}return t.\u0275fac=function(e){return new(e||t)(r.Mb(TC,13),r.Mb(fC,10),r.Mb(pC,10))},t.\u0275dir=r.Hb({type:t,selectors:[["","formGroupName",""]],inputs:{name:["formGroupName","name"]},features:[r.zb([PO]),r.xb]}),t})();const AO={provide:TC,useExisting:Object(r.U)(()=>kO)};let kO=(()=>{class t extends TC{constructor(t,e,n){super(),this._parent=t,this._setValidators(e),this._setAsyncValidators(n)}ngOnInit(){this._checkParentType(),this.formDirective.addFormArray(this)}ngOnDestroy(){this.formDirective&&this.formDirective.removeFormArray(this)}get control(){return this.formDirective.getFormArray(this)}get formDirective(){return this._parent?this._parent.formDirective:null}get path(){return zC(null==this.name?this.name:this.name.toString(),this._parent)}_checkParentType(){jO(this._parent)}}return t.\u0275fac=function(e){return new(e||t)(r.Mb(TC,13),r.Mb(fC,10),r.Mb(pC,10))},t.\u0275dir=r.Hb({type:t,selectors:[["","formArrayName",""]],inputs:{name:["formArrayName","name"]},features:[r.zb([AO]),r.xb]}),t})();function jO(t){return!(t instanceof RO||t instanceof TO||t instanceof kO)}const NO={provide:RC,useExisting:Object(r.U)(()=>DO)};let DO=(()=>{class t extends RC{constructor(t,e,n,i,o){super(),this._ngModelWarningConfig=o,this._added=!1,this.update=new r.n,this._ngModelWarningSent=!1,this._parent=t,this._setValidators(e),this._setAsyncValidators(n),this.valueAccessor=nO(0,i)}set isDisabled(t){}ngOnChanges(t){this._added||this._setUpControl(),JC(t,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}get path(){return zC(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this.control.disabled&&this.valueAccessor.setDisabledState&&this.valueAccessor.setDisabledState(!0),this._added=!0}}return t.\u0275fac=function(e){return new(e||t)(r.Mb(TC,13),r.Mb(fC,10),r.Mb(pC,10),r.Mb(oC,10),r.Mb(IO,8))},t.\u0275dir=r.Hb({type:t,selectors:[["","formControlName",""]],inputs:{isDisabled:["disabled","isDisabled"],name:["formControlName","name"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},features:[r.zb([NO]),r.xb,r.yb]}),t._ngModelWarningSentOnce=!1,t})();const MO={provide:fC,useExisting:Object(r.U)(()=>LO),multi:!0};let LO=(()=>{class t{constructor(){this._required=!1}get required(){return this._required}set required(t){this._required=null!=t&&!1!==t&&"false"!=`${t}`,this._onChange&&this._onChange()}validate(t){return this.required?mC.required(t):null}registerOnValidatorChange(t){this._onChange=t}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=r.Hb({type:t,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(t,e){2&t&&r.Bb("required",e.required?"":null)},inputs:{required:"required"},features:[r.zb([MO])]}),t})(),FO=(()=>{class t{}return t.\u0275mod=r.Kb({type:t}),t.\u0275inj=r.Jb({factory:function(e){return new(e||t)}}),t})(),UO=(()=>{class t{group(t,e=null){const n=this._reduceControls(t);let r,i=null,o=null;return null!=e&&(function(t){return void 0!==t.asyncValidators||void 0!==t.validators||void 0!==t.updateOn}(e)?(i=null!=e.validators?e.validators:null,o=null!=e.asyncValidators?e.asyncValidators:null,r=null!=e.updateOn?e.updateOn:void 0):(i=null!=e.validator?e.validator:null,o=null!=e.asyncValidator?e.asyncValidator:null)),new gO(n,{asyncValidators:o,updateOn:r,validators:i})}control(t,e,n){return new pO(t,e,n)}array(t,e,n){const r=t.map(t=>this._createControl(t));return new mO(r,e,n)}_reduceControls(t){const e={};return Object.keys(t).forEach(n=>{e[n]=this._createControl(t[n])}),e}_createControl(t){return t instanceof pO||t instanceof gO||t instanceof mO?t:Array.isArray(t)?this.control(t[0],t.length>1?t[1]:null,t.length>2?t[2]:null):this.control(t)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=r.Ib({token:t,factory:t.\u0275fac}),t})(),VO=(()=>{class t{}return t.\u0275mod=r.Kb({type:t}),t.\u0275inj=r.Jb({factory:function(e){return new(e||t)},providers:[LC],imports:[FO]}),t})(),QO=(()=>{class t{static withConfig(e){return{ngModule:t,providers:[{provide:IO,useValue:e.warnOnNgModelWithFormControl}]}}}return t.\u0275mod=r.Kb({type:t}),t.\u0275inj=r.Jb({factory:function(e){return new(e||t)},providers:[UO,LC],imports:[FO]}),t})();class HO{}class qO{}class BO{constructor(t){this.normalizedNames=new Map,this.lazyUpdate=null,t?this.lazyInit="string"==typeof t?()=>{this.headers=new Map,t.split("\n").forEach(t=>{const e=t.indexOf(":");if(e>0){const n=t.slice(0,e),r=n.toLowerCase(),i=t.slice(e+1).trim();this.maybeSetNormalizedName(n,r),this.headers.has(r)?this.headers.get(r).push(i):this.headers.set(r,[i])}})}:()=>{this.headers=new Map,Object.keys(t).forEach(e=>{let n=t[e];const r=e.toLowerCase();"string"==typeof n&&(n=[n]),n.length>0&&(this.headers.set(r,n),this.maybeSetNormalizedName(e,r))})}:this.headers=new Map}has(t){return this.init(),this.headers.has(t.toLowerCase())}get(t){this.init();const e=this.headers.get(t.toLowerCase());return e&&e.length>0?e[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(t){return this.init(),this.headers.get(t.toLowerCase())||null}append(t,e){return this.clone({name:t,value:e,op:"a"})}set(t,e){return this.clone({name:t,value:e,op:"s"})}delete(t,e){return this.clone({name:t,value:e,op:"d"})}maybeSetNormalizedName(t,e){this.normalizedNames.has(e)||this.normalizedNames.set(e,t)}init(){this.lazyInit&&(this.lazyInit instanceof BO?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(t=>this.applyUpdate(t)),this.lazyUpdate=null))}copyFrom(t){t.init(),Array.from(t.headers.keys()).forEach(e=>{this.headers.set(e,t.headers.get(e)),this.normalizedNames.set(e,t.normalizedNames.get(e))})}clone(t){const e=new BO;return e.lazyInit=this.lazyInit&&this.lazyInit instanceof BO?this.lazyInit:this,e.lazyUpdate=(this.lazyUpdate||[]).concat([t]),e}applyUpdate(t){const e=t.name.toLowerCase();switch(t.op){case"a":case"s":let n=t.value;if("string"==typeof n&&(n=[n]),0===n.length)return;this.maybeSetNormalizedName(t.name,e);const r=("a"===t.op?this.headers.get(e):void 0)||[];r.push(...n),this.headers.set(e,r);break;case"d":const i=t.value;if(i){let t=this.headers.get(e);if(!t)return;t=t.filter(t=>-1===i.indexOf(t)),0===t.length?(this.headers.delete(e),this.normalizedNames.delete(e)):this.headers.set(e,t)}else this.headers.delete(e),this.normalizedNames.delete(e)}}forEach(t){this.init(),Array.from(this.normalizedNames.keys()).forEach(e=>t(this.normalizedNames.get(e),this.headers.get(e)))}}class zO{encodeKey(t){return GO(t)}encodeValue(t){return GO(t)}decodeKey(t){return decodeURIComponent(t)}decodeValue(t){return decodeURIComponent(t)}}function GO(t){return encodeURIComponent(t).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/gi,"$").replace(/%2C/gi,",").replace(/%3B/gi,";").replace(/%2B/gi,"+").replace(/%3D/gi,"=").replace(/%3F/gi,"?").replace(/%2F/gi,"/")}class WO{constructor(t={}){if(this.updates=null,this.cloneFrom=null,this.encoder=t.encoder||new zO,t.fromString){if(t.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function(t,e){const n=new Map;return t.length>0&&t.split("&").forEach(t=>{const r=t.indexOf("="),[i,o]=-1==r?[e.decodeKey(t),""]:[e.decodeKey(t.slice(0,r)),e.decodeValue(t.slice(r+1))],s=n.get(i)||[];s.push(o),n.set(i,s)}),n}(t.fromString,this.encoder)}else t.fromObject?(this.map=new Map,Object.keys(t.fromObject).forEach(e=>{const n=t.fromObject[e];this.map.set(e,Array.isArray(n)?n:[n])})):this.map=null}has(t){return this.init(),this.map.has(t)}get(t){this.init();const e=this.map.get(t);return e?e[0]:null}getAll(t){return this.init(),this.map.get(t)||null}keys(){return this.init(),Array.from(this.map.keys())}append(t,e){return this.clone({param:t,value:e,op:"a"})}set(t,e){return this.clone({param:t,value:e,op:"s"})}delete(t,e){return this.clone({param:t,value:e,op:"d"})}toString(){return this.init(),this.keys().map(t=>{const e=this.encoder.encodeKey(t);return this.map.get(t).map(t=>e+"="+this.encoder.encodeValue(t)).join("&")}).filter(t=>""!==t).join("&")}clone(t){const e=new WO({encoder:this.encoder});return e.cloneFrom=this.cloneFrom||this,e.updates=(this.updates||[]).concat([t]),e}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(t=>this.map.set(t,this.cloneFrom.map.get(t))),this.updates.forEach(t=>{switch(t.op){case"a":case"s":const e=("a"===t.op?this.map.get(t.param):void 0)||[];e.push(t.value),this.map.set(t.param,e);break;case"d":if(void 0===t.value){this.map.delete(t.param);break}{let e=this.map.get(t.param)||[];const n=e.indexOf(t.value);-1!==n&&e.splice(n,1),e.length>0?this.map.set(t.param,e):this.map.delete(t.param)}}}),this.cloneFrom=this.updates=null)}}function YO(t){return"undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer}function $O(t){return"undefined"!=typeof Blob&&t instanceof Blob}function KO(t){return"undefined"!=typeof FormData&&t instanceof FormData}class XO{constructor(t,e,n,r){let i;if(this.url=e,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=t.toUpperCase(),function(t){switch(t){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||r?(this.body=void 0!==n?n:null,i=r):i=n,i&&(this.reportProgress=!!i.reportProgress,this.withCredentials=!!i.withCredentials,i.responseType&&(this.responseType=i.responseType),i.headers&&(this.headers=i.headers),i.params&&(this.params=i.params)),this.headers||(this.headers=new BO),this.params){const t=this.params.toString();if(0===t.length)this.urlWithParams=e;else{const n=e.indexOf("?");this.urlWithParams=e+(-1===n?"?":n<e.length-1?"&":"")+t}}else this.params=new WO,this.urlWithParams=e}serializeBody(){return null===this.body?null:YO(this.body)||$O(this.body)||KO(this.body)||"string"==typeof this.body?this.body:this.body instanceof WO?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||KO(this.body)?null:$O(this.body)?this.body.type||null:YO(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof WO?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||Array.isArray(this.body)?"application/json":null}clone(t={}){const e=t.method||this.method,n=t.url||this.url,r=t.responseType||this.responseType,i=void 0!==t.body?t.body:this.body,o=void 0!==t.withCredentials?t.withCredentials:this.withCredentials,s=void 0!==t.reportProgress?t.reportProgress:this.reportProgress;let a=t.headers||this.headers,u=t.params||this.params;return void 0!==t.setHeaders&&(a=Object.keys(t.setHeaders).reduce((e,n)=>e.set(n,t.setHeaders[n]),a)),t.setParams&&(u=Object.keys(t.setParams).reduce((e,n)=>e.set(n,t.setParams[n]),u)),new XO(e,n,i,{params:u,headers:a,reportProgress:s,responseType:r,withCredentials:o})}}var ZO=function(t){return t[t.Sent=0]="Sent",t[t.UploadProgress=1]="UploadProgress",t[t.ResponseHeader=2]="ResponseHeader",t[t.DownloadProgress=3]="DownloadProgress",t[t.Response=4]="Response",t[t.User=5]="User",t}({});class JO{constructor(t,e=200,n="OK"){this.headers=t.headers||new BO,this.status=void 0!==t.status?t.status:e,this.statusText=t.statusText||n,this.url=t.url||null,this.ok=this.status>=200&&this.status<300}}class tE extends JO{constructor(t={}){super(t),this.type=ZO.ResponseHeader}clone(t={}){return new tE({headers:t.headers||this.headers,status:void 0!==t.status?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0})}}class eE extends JO{constructor(t={}){super(t),this.type=ZO.Response,this.body=void 0!==t.body?t.body:null}clone(t={}){return new eE({body:void 0!==t.body?t.body:this.body,headers:t.headers||this.headers,status:void 0!==t.status?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0})}}class nE extends JO{constructor(t){super(t,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${t.url||"(unknown url)"}`:`Http failure response for ${t.url||"(unknown url)"}: ${t.status} ${t.statusText}`,this.error=t.error||null}}function rE(t,e){return{body:e,headers:t.headers,observe:t.observe,params:t.params,reportProgress:t.reportProgress,responseType:t.responseType,withCredentials:t.withCredentials}}let iE=(()=>{class t{constructor(t){this.handler=t}request(t,e,n={}){let r;if(t instanceof XO)r=t;else{let i,o;i=n.headers instanceof BO?n.headers:new BO(n.headers),n.params&&(o=n.params instanceof WO?n.params:new WO({fromObject:n.params})),r=new XO(t,e,void 0!==n.body?n.body:null,{headers:i,params:o,reportProgress:n.reportProgress,responseType:n.responseType||"json",withCredentials:n.withCredentials})}const i=Object(le.a)(r).pipe(nv(t=>this.handler.handle(t)));if(t instanceof XO||"events"===n.observe)return i;const o=i.pipe(Ie(t=>t instanceof eE));switch(n.observe||"body"){case"body":switch(r.responseType){case"arraybuffer":return o.pipe(Object(ve.a)(t=>{if(null!==t.body&&!(t.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return t.body}));case"blob":return o.pipe(Object(ve.a)(t=>{if(null!==t.body&&!(t.body instanceof Blob))throw new Error("Response is not a Blob.");return t.body}));case"text":return o.pipe(Object(ve.a)(t=>{if(null!==t.body&&"string"!=typeof t.body)throw new Error("Response is not a string.");return t.body}));case"json":default:return o.pipe(Object(ve.a)(t=>t.body))}case"response":return o;default:throw new Error(`Unreachable: unhandled observe type ${n.observe}}`)}}delete(t,e={}){return this.request("DELETE",t,e)}get(t,e={}){return this.request("GET",t,e)}head(t,e={}){return this.request("HEAD",t,e)}jsonp(t,e){return this.request("JSONP",t,{params:(new WO).append(e,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(t,e={}){return this.request("OPTIONS",t,e)}patch(t,e,n={}){return this.request("PATCH",t,rE(n,e))}post(t,e,n={}){return this.request("POST",t,rE(n,e))}put(t,e,n={}){return this.request("PUT",t,rE(n,e))}}return t.\u0275fac=function(e){return new(e||t)(r.Yb(HO))},t.\u0275prov=r.Ib({token:t,factory:t.\u0275fac}),t})();class oE{constructor(t,e){this.next=t,this.interceptor=e}handle(t){return this.interceptor.intercept(t,this.next)}}const sE=new r.r("HTTP_INTERCEPTORS");let aE=(()=>{class t{intercept(t,e){return e.handle(t)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=r.Ib({token:t,factory:t.\u0275fac}),t})();const uE=/^\)\]\}',?\n/;class cE{}let lE=(()=>{class t{constructor(){}build(){return new XMLHttpRequest}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=r.Ib({token:t,factory:t.\u0275fac}),t})(),hE=(()=>{class t{constructor(t){this.xhrFactory=t}handle(t){if("JSONP"===t.method)throw new Error("Attempted to construct Jsonp request without HttpClientJsonpModule installed.");return new ue.a(e=>{const n=this.xhrFactory.build();if(n.open(t.method,t.urlWithParams),t.withCredentials&&(n.withCredentials=!0),t.headers.forEach((t,e)=>n.setRequestHeader(t,e.join(","))),t.headers.has("Accept")||n.setRequestHeader("Accept","application/json, text/plain, */*"),!t.headers.has("Content-Type")){const e=t.detectContentTypeHeader();null!==e&&n.setRequestHeader("Content-Type",e)}if(t.responseType){const e=t.responseType.toLowerCase();n.responseType="json"!==e?e:"text"}const r=t.serializeBody();let i=null;const o=()=>{if(null!==i)return i;const e=1223===n.status?204:n.status,r=n.statusText||"OK",o=new BO(n.getAllResponseHeaders()),s=function(t){return"responseURL"in t&&t.responseURL?t.responseURL:/^X-Request-URL:/m.test(t.getAllResponseHeaders())?t.getResponseHeader("X-Request-URL"):null}(n)||t.url;return i=new tE({headers:o,status:e,statusText:r,url:s}),i},s=()=>{let{headers:r,status:i,statusText:s,url:a}=o(),u=null;204!==i&&(u=void 0===n.response?n.responseText:n.response),0===i&&(i=u?200:0);let c=i>=200&&i<300;if("json"===t.responseType&&"string"==typeof u){const t=u;u=u.replace(uE,"");try{u=""!==u?JSON.parse(u):null}catch(l){u=t,c&&(c=!1,u={error:l,text:u})}}c?(e.next(new eE({body:u,headers:r,status:i,statusText:s,url:a||void 0})),e.complete()):e.error(new nE({error:u,headers:r,status:i,statusText:s,url:a||void 0}))},a=t=>{const{url:r}=o(),i=new nE({error:t,status:n.status||0,statusText:n.statusText||"Unknown Error",url:r||void 0});e.error(i)};let u=!1;const c=r=>{u||(e.next(o()),u=!0);let i={type:ZO.DownloadProgress,loaded:r.loaded};r.lengthComputable&&(i.total=r.total),"text"===t.responseType&&n.responseText&&(i.partialText=n.responseText),e.next(i)},l=t=>{let n={type:ZO.UploadProgress,loaded:t.loaded};t.lengthComputable&&(n.total=t.total),e.next(n)};return n.addEventListener("load",s),n.addEventListener("error",a),t.reportProgress&&(n.addEventListener("progress",c),null!==r&&n.upload&&n.upload.addEventListener("progress",l)),n.send(r),e.next({type:ZO.Sent}),()=>{n.removeEventListener("error",a),n.removeEventListener("load",s),t.reportProgress&&(n.removeEventListener("progress",c),null!==r&&n.upload&&n.upload.removeEventListener("progress",l)),n.readyState!==n.DONE&&n.abort()}})}}return t.\u0275fac=function(e){return new(e||t)(r.Yb(cE))},t.\u0275prov=r.Ib({token:t,factory:t.\u0275fac}),t})();const dE=new r.r("XSRF_COOKIE_NAME"),fE=new r.r("XSRF_HEADER_NAME");class pE{}let gE=(()=>{class t{constructor(t,e,n){this.doc=t,this.platform=e,this.cookieName=n,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const t=this.doc.cookie||"";return t!==this.lastCookieString&&(this.parseCount++,this.lastToken=lt(t,this.cookieName),this.lastCookieString=t),this.lastToken}}return t.\u0275fac=function(e){return new(e||t)(r.Yb(s),r.Yb(r.C),r.Yb(dE))},t.\u0275prov=r.Ib({token:t,factory:t.\u0275fac}),t})(),mE=(()=>{class t{constructor(t,e){this.tokenService=t,this.headerName=e}intercept(t,e){const n=t.url.toLowerCase();if("GET"===t.method||"HEAD"===t.method||n.startsWith("http://")||n.startsWith("https://"))return e.handle(t);const r=this.tokenService.getToken();return null===r||t.headers.has(this.headerName)||(t=t.clone({headers:t.headers.set(this.headerName,r)})),e.handle(t)}}return t.\u0275fac=function(e){return new(e||t)(r.Yb(pE),r.Yb(fE))},t.\u0275prov=r.Ib({token:t,factory:t.\u0275fac}),t})(),yE=(()=>{class t{constructor(t,e){this.backend=t,this.injector=e,this.chain=null}handle(t){if(null===this.chain){const t=this.injector.get(sE,[]);this.chain=t.reduceRight((t,e)=>new oE(t,e),this.backend)}return this.chain.handle(t)}}return t.\u0275fac=function(e){return new(e||t)(r.Yb(qO),r.Yb(r.s))},t.\u0275prov=r.Ib({token:t,factory:t.\u0275fac}),t})(),bE=(()=>{class t{static disable(){return{ngModule:t,providers:[{provide:mE,useClass:aE}]}}static withOptions(e={}){return{ngModule:t,providers:[e.cookieName?{provide:dE,useValue:e.cookieName}:[],e.headerName?{provide:fE,useValue:e.headerName}:[]]}}}return t.\u0275mod=r.Kb({type:t}),t.\u0275inj=r.Jb({factory:function(e){return new(e||t)},providers:[mE,{provide:sE,useExisting:mE,multi:!0},{provide:pE,useClass:gE},{provide:dE,useValue:"XSRF-TOKEN"},{provide:fE,useValue:"X-XSRF-TOKEN"}]}),t})(),vE=(()=>{class t{}return t.\u0275mod=r.Kb({type:t}),t.\u0275inj=r.Jb({factory:function(e){return new(e||t)},providers:[iE,{provide:HO,useClass:yE},hE,{provide:qO,useExisting:hE},lE,{provide:cE,useExisting:lE}],imports:[[bE.withOptions({cookieName:"XSRF-TOKEN",headerName:"X-XSRF-TOKEN"})]]}),t})();var _E=n("w1tV");function wE(...t){return e=>{let n;return"function"==typeof t[t.length-1]&&(n=t.pop()),e.lift(new CE(t,n))}}class CE{constructor(t,e){this.observables=t,this.project=e}call(t,e){return e.subscribe(new OE(t,this.observables,this.project))}}class OE extends qb{constructor(t,e,n){super(t),this.observables=e,this.project=n,this.toRespond=[];const r=e.length;this.values=new Array(r);for(let i=0;i<r;i++)this.toRespond.push(i);for(let i=0;i<r;i++)this.add(Gb(this,e[i],void 0,i))}notifyNext(t,e,n){this.values[n]=e;const r=this.toRespond;if(r.length>0){const t=r.indexOf(n);-1!==t&&r.splice(t,1)}}notifyComplete(){}_next(t){if(0===this.toRespond.length){const e=[t,...this.values];this.project?this._tryProject(e):this.destination.next(e)}}_tryProject(t){let e;try{e=this.project.apply(this,t)}catch(n){return void this.destination.error(n)}this.destination.next(e)}}class EE{constructor(t){this.predicate=t}call(t,e){return e.subscribe(new xE(t,this.predicate))}}class xE extends ge.a{constructor(t,e){super(t),this.predicate=e,this.skipping=!0,this.index=0}_next(t){const e=this.destination;this.skipping&&this.tryCallPredicate(t),this.skipping||e.next(t)}tryCallPredicate(t){try{const e=this.predicate(t,this.index++);this.skipping=Boolean(e)}catch(e){this.destination.error(e)}}}function IE(t){return null==t}function SE(t){return"function"==typeof t.set}function TE(t,e){return SE(e)?e:t.ref(e)}function PE(t,e){if("string"==typeof t)return e.stringCase();if(SE(t))return e.firebaseCase();if("function"==typeof t.exportVal)return e.snapshotCase();throw new Error("Expects a string, snapshot, or reference. Got: "+typeof t)}function RE(t,e,n="on",r=ae.b){return new ue.a(i=>{let o=null;return o=t[n](e,(t,e)=>{r.schedule(()=>{i.next({snapshot:t,prevKey:e})}),"once"===n&&r.schedule(()=>i.complete())},t=>{r.schedule(()=>i.error(t))}),"on"===n?{unsubscribe(){null!=o&&t.off(e,o)}}:{unsubscribe(){}}}).pipe(Object(ve.a)(t=>{const{snapshot:n,prevKey:r}=t;let i=null;return n.exists()&&(i=n.key),{type:e,payload:n,prevKey:r,key:i}}),Object(_E.a)())}function AE(t,e){const n=t.length;for(let r=0;r<n;r++)if(t[r].payload.key===e)return r;return-1}function kE(t,e){const{payload:n,prevKey:r,key:i}=e,o=AE(t,i),s=function(t,e){if(IE(e))return 0;{const n=AE(t,e);return-1===n?t.length:n+1}}(t,r);switch(e.type){case"value":if(e.payload&&e.payload.exists()){let n=null;e.payload.forEach(e=>{const r={payload:e,type:"value",prevKey:n,key:e.key};return n=e.key,t=[...t,r],!1})}return t;case"child_added":if(o>-1){const i=t[o-1];(i&&i.key||null)!==r&&(t=t.filter(t=>t.payload.key!==n.key)).splice(s,0,e)}else{if(null==r)return[e,...t];(t=t.slice()).splice(s,0,e)}return t;case"child_removed":return t.filter(t=>t.payload.key!==n.key);case"child_changed":return t.map(t=>t.payload.key===i?e:t);case"child_moved":if(o>-1){const e=t.splice(o,1)[0];return(t=t.slice()).splice(s,0,e),t}return t;default:return t}}function jE(t){return(IE(t)||0===t.length)&&(t=["child_added","child_removed","child_changed","child_moved"]),t}function NE(t,e,n){return function(t,e,n){return RE(t,"value","once",n).pipe(rm(r=>{const i=[Object(le.a)(r)];return e.forEach(e=>i.push(RE(t,e,"on",n))),Object(em.a)(...i).pipe(_e(kE,[]))}),Oe())}(t,e=jE(e),n)}function DE(t,e,n){const r=(e=jE(e)).map(e=>RE(t,e,"on",n));return Object(em.a)(...r)}function ME(t,e){return function(n,r){return PE(n,{stringCase:()=>t.child(n)[e](r),firebaseCase:()=>n[e](r),snapshotCase:()=>n.ref[e](r)})}}function LE(t,e){return function(){return RE(t,"value","on",e)}}n("6Uf2");const FE=new r.r("angularfire2.realtimeDatabaseURL"),UE=new r.r("angularfire2.database.use-emulator");let VE=(()=>{class t{constructor(t,e,n,r,i,o,s){this.schedulers=new se.d(i),this.keepUnstableUntilFirst=Object(se.h)(this.schedulers);const a=o,u=Object(se.g)(t,i,e);!Re.a.auth&&s&&Object(se.j)(),this.database=Object(se.f)(`${u.name}.database.${n}`,"AngularFireDatabase",u,()=>{const t=i.runOutsideAngular(()=>u.database(n||void 0));return a&&t.useEmulator(...a),t},[a])}list(t,e){const n=this.schedulers.ngZone.runOutsideAngular(()=>TE(this.database,t));let r=n;return e&&(r=e(n)),function(t,e){const n=e.schedulers.outsideAngular,r=e.schedulers.ngZone.run(()=>t.ref);return{query:t,update:ME(r,"update"),set:ME(r,"set"),push:t=>r.push(t),remove:(i=r,function(t){return t?PE(t,{stringCase:()=>i.child(t).remove(),firebaseCase:()=>t.remove(),snapshotCase:()=>t.ref.remove()}):i.remove()}),snapshotChanges:r=>NE(t,r,n).pipe(e.keepUnstableUntilFirst),stateChanges:r=>DE(t,r,n).pipe(e.keepUnstableUntilFirst),auditTrail:r=>function(t,e,n){return function(t,e,n){return function(t,e){return RE(t,"value","on",e).pipe(Object(ve.a)(t=>{let e;return t.payload.forEach(t=>(e=t.key,!1)),{data:t,lastKeyToLoad:e}}))}(t,n).pipe(wE(e),Object(ve.a)(([t,e])=>{const n=t.lastKeyToLoad,r=e.map(t=>t.key);return{actions:e,lastKeyToLoad:n,loadedKeys:r}}),(r=t=>-1===t.loadedKeys.indexOf(t.lastKeyToLoad),t=>t.lift(new EE(r))),Object(ve.a)(t=>t.actions));var r}(t,DE(t,e).pipe(_e((t,e)=>[...t,e],[])),n)}(t,r,n).pipe(e.keepUnstableUntilFirst),valueChanges:(r,i)=>NE(t,r,n).pipe(Object(ve.a)(t=>t.map(t=>i&&i.idField?Object.assign(Object.assign({},t.payload.val()),{[i.idField]:t.key}):t.payload.val())),e.keepUnstableUntilFirst)};var i}(r,this)}object(t){const e=this.schedulers.ngZone.runOutsideAngular(()=>TE(this.database,t));return r=this,{query:n=e,snapshotChanges:()=>LE(n,r.schedulers.outsideAngular)().pipe(r.keepUnstableUntilFirst),update:t=>n.ref.update(t),set:t=>n.ref.set(t),remove:()=>n.ref.remove(),valueChanges:()=>LE(n,r.schedulers.outsideAngular)().pipe(r.keepUnstableUntilFirst,Object(ve.a)(t=>t.payload.exists()?t.payload.val():null))};var n,r}createPushId(){return this.schedulers.ngZone.runOutsideAngular(()=>this.database.ref()).push().key}}return t.\u0275fac=function(e){return new(e||t)(r.Yb(se.c),r.Yb(se.b,8),r.Yb(FE,8),r.Yb(r.C),r.Yb(r.A),r.Yb(UE,8),r.Yb(Rm,8))},t.\u0275prov=Object(r.Ib)({factory:function(){return new t(Object(r.Yb)(se.c),Object(r.Yb)(se.b,8),Object(r.Yb)(FE,8),Object(r.Yb)(r.C),Object(r.Yb)(r.A),Object(r.Yb)(UE,8),Object(r.Yb)(Rm,8))},token:t,providedIn:"any"}),t})(),QE=(()=>{class t{constructor(t,e,n){this.http=t,this.db=e,this.afs=n,this.userRef=[],this.userRed=[]}getBlogItems(){return this.afs.collection("static").doc("blog").collection(localStorage.getItem("lang")||"en").doc(localStorage.getItem("lang")||"en").snapshotChanges()}getAllPosts(){return this.afs.collection("posts").doc(localStorage.getItem("lang")||"en").collection(localStorage.getItem("lang")||"en").snapshotChanges()}getAllComments(){return this.afs.collection("comments").snapshotChanges()}addComment(t){this.afs.collection("comments").add(t)}}return t.\u0275fac=function(e){return new(e||t)(r.Yb(iE),r.Yb(VE),r.Yb(Zm))},t.\u0275prov=r.Ib({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();function HE(t,e){if(1&t&&(r.Rb(0,"div",18),r.Nb(1,"img",19),r.Rb(2,"div",20),r.Rb(3,"h5",21),r.xc(4),r.Qb(),r.Rb(5,"p"),r.xc(6),r.ec(7,"date"),r.Qb(),r.Rb(8,"p"),r.xc(9),r.Qb(),r.Qb(),r.Qb()),2&t){const t=e.$implicit;r.Ab(1),r.jc("src",t.image,r.sc),r.Ab(3),r.yc(t.title),r.Ab(2),r.yc(r.gc(7,4,t.date.toDate(),"dd/MM/yyyy h:mm:ss a")),r.Ab(3),r.yc(t.postBody)}}function qE(t,e){if(1&t&&(r.Rb(0,"div",22),r.Nb(1,"hr"),r.Rb(2,"p",23),r.Nb(3,"i",24),r.xc(4),r.Qb(),r.Rb(5,"p",25),r.xc(6),r.ec(7,"date"),r.Qb(),r.Qb()),2&t){const t=e.$implicit;r.Ab(4),r.zc("",t.comment," "),r.Ab(2),r.zc(" ",r.gc(7,2,t.date.toDate(),"dd/MM/yyyy h:mm:ss a")," ")}}let BE=(()=>{class t{constructor(t,e,n){this.router=e,this.blog=n,this.addComment={date:new Date,comment:""},this.AllPosts=[],this.AllComments=[]}onSubmit(){this.blog.addComment(this.addComment),this.addComment.comment=""}ngOnInit(){this.getBlogItems(),this.getAllPosts(),this.getAllComments()}getBlogItems(){this.blog.getBlogItems().subscribe(t=>{this.BlogItems=t.payload.data()},t=>{console.log(t)})}getAllPosts(){this.blog.getAllPosts().subscribe(t=>{t.forEach(t=>{this.AllPosts.push(t.payload.doc.data())}),this.AllPosts.forEach(t=>{console.log(t)})},t=>{console.log(t)})}getAllComments(){this.blog.getAllComments().subscribe(t=>{t.forEach(t=>{this.AllComments.push(t.payload.doc.data())}),this.AllComments.forEach(t=>{console.log(t)})},t=>{console.log(t)})}}return t.\u0275fac=function(e){return new(e||t)(r.Mb(UO),r.Mb(jw),r.Mb(QE))},t.\u0275cmp=r.Gb({type:t,selectors:[["app-blog"]],decls:26,vars:7,consts:[[1,"bg-image","align-items-center","justify-content-center"],[1,"text-center"],[1,"container"],[1,"row"],[1,"col-lg-8","col-md-12","col-sm-12"],["class","container-fluid d-flex flex-lg-nowrap flex-column flex-md-nowrap flex-wrap justify-content-center m-4",4,"ngFor","ngForOf"],[1,"col-lg-4","col-md-12","col-sm-12"],[1,"rightSide"],["src","https://firebasestorage.googleapis.com/v0/b/foodcourt-2f1f1.appspot.com/o/blog%2Fpizza.jpg?alt=media&token=a40a3773-ccd8-4d35-909a-97cb9e8a4966","alt","food",1,"mt-4",2,"width","400px","border-radius","5%"],[1,"mt-2"],["class","container-fluid d-flex flex-lg-nowrap flex-column flex-md-nowrap flex-wrap justify-content-start",4,"ngFor","ngForOf"],[1,"container-fluid","d-flex","flex-row"],[1,"form_title"],[1,"col-12",3,"ngSubmit"],[1,"d-flex","flex-wrap","flex-lg-nowrap","flex-md-nowrap",2,"margin-left","8%"],["name","Comment",1,"col-12",2,"height","95px",3,"ngModel","ngModelChange"],["type","submit",1,"btn","btn-primary","food_btn",3,"value"],["src","https://firebasestorage.googleapis.com/v0/b/foodcourt-2f1f1.appspot.com/o/blog%2Fworkplace-1245776_1920.jpg?alt=media&token=63825c47-4e51-407a-95bf-782aa40940ca","alt","food",1,"col-lg-4","img-fluid","d-none","recommended","d-sm-block",2,"height","300px","padding","15px","border-radius","10%"],[1,"container-fluid","d-flex","flex-lg-nowrap","flex-column","flex-md-nowrap","flex-wrap","justify-content-center","m-4"],[2,"width","80%",3,"src"],[1,"postDetails","p-3"],[1,"postTitle"],[1,"container-fluid","d-flex","flex-lg-nowrap","flex-column","flex-md-nowrap","flex-wrap","justify-content-start"],[1,"commentBody"],[1,"far","fa-comments","p-2"],[1,"p-2","commentDate"]],template:function(t,e){1&t&&(r.Rb(0,"div",0),r.Rb(1,"h2",1),r.xc(2),r.Qb(),r.Qb(),r.Nb(3,"br"),r.Rb(4,"div",2),r.Rb(5,"div",3),r.Rb(6,"div",4),r.vc(7,HE,10,7,"div",5),r.Qb(),r.Rb(8,"div",6),r.Rb(9,"div",7),r.Nb(10,"img",8),r.Qb(),r.Rb(11,"div"),r.Rb(12,"div",9),r.Rb(13,"h2"),r.xc(14),r.Qb(),r.Qb(),r.vc(15,qE,8,5,"div",10),r.Qb(),r.Qb(),r.Qb(),r.Qb(),r.Rb(16,"div",11),r.Rb(17,"div",4),r.Rb(18,"h2",12),r.xc(19),r.Qb(),r.Rb(20,"form",13),r.bc("ngSubmit",function(){return e.onSubmit()}),r.Rb(21,"div",14),r.Rb(22,"textarea",15),r.bc("ngModelChange",function(t){return e.addComment.comment=t}),r.Qb(),r.Qb(),r.Nb(23,"br"),r.Nb(24,"input",16),r.Qb(),r.Qb(),r.Nb(25,"img",17),r.Qb()),2&t&&(r.Ab(2),r.yc(e.BlogItems.header),r.Ab(5),r.jc("ngForOf",e.AllPosts),r.Ab(7),r.yc(e.BlogItems.recentCom),r.Ab(1),r.jc("ngForOf",e.AllComments),r.Ab(4),r.yc(e.BlogItems.leaveCom),r.Ab(3),r.jc("ngModel",e.addComment.comment),r.Ab(2),r.kc("value",e.BlogItems.button))},directives:[dt,xO,jC,vO,lC,kC,EO],pipes:[bt],styles:[".bg-image[_ngcontent-%COMP%]{background-image:url(https://firebasestorage.googleapis.com/v0/b/foodcourt-2f1f1.appspot.com/o/blog%2F1.jpg?alt=media&token=4f39814b-5802-44fa-b856-6e1d944d56b3);background-repeat:no-repeat;height:300px;width:100%;margin-top:5%;padding:8%;background-position:50%}.container[_ngcontent-%COMP%]{font-family:Roboto,sans-serif}.innerItem[_ngcontent-%COMP%]{text-decoration:none;color:#000;font-weight:700}h2[_ngcontent-%COMP%]{color:#fd5602}.commentBody[_ngcontent-%COMP%]{font-size:20px}.commentDate[_ngcontent-%COMP%]{font-size:12px;color:#b1adad}.postDetails[_ngcontent-%COMP%]{background-color:#f0eaea;width:80%}.postTitle[_ngcontent-%COMP%], hr[_ngcontent-%COMP%]{font-weight:bolder}.postTitle[_ngcontent-%COMP%]{color:#fd5602;font-size:25px}.alert[_ngcontent-%COMP%]{width:41.5%;height:40px}.leftList[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:80%}.form_title[_ngcontent-%COMP%]{margin-bottom:50px;margin-left:11%;text-transform:uppercase}.food_btn[_ngcontent-%COMP%]{font-size:18px;font-weight:400;height:45px;line-height:45px;padding:0 32px;background:#ffaf42;border-radius:5px;color:#fff;display:inline-block;text-transform:capitalize;text-decoration:none;position:relative;transform:translateZ(0);transition-duration:.5s;margin-left:8%}"]}),t})(),zE=(()=>{class t{constructor(t){this.afs=t,this.id=1,this.items=[],this.orders=[],this.purchasedItems=[],this.method="",this.totalPrice=0}addTocart(t,e,n,r,i,o,s){this.items.push({mealImage:t,mealID:e,mealName:n,mealPrice:r,mealShow:i,mealDiscount:o,mealCount:s})}moveToCheckOut(t,e,n,r){this.purchasedItems.push({mealName:t,mealCount:e,mealPrice:n,mealDiscount:r})}getCartItems(){return this.afs.collection("static").doc("cart").collection(localStorage.getItem("lang")||"en").doc(localStorage.getItem("lang")||"en").snapshotChanges()}getCheckOutItems(){return this.afs.collection("static").doc("checkout").collection(localStorage.getItem("lang")||"en").doc(localStorage.getItem("lang")||"en").snapshotChanges()}setTotal(t){this.totalPrice=t}getTotal(){return this.totalPrice}getItems(){return this.items}getPurchasedItems(){return this.purchasedItems}postOrders(t,e,n){this.orders.push({purchasedMeals:t,userID:e,option:n});for(var r=0;r<this.orders.length;r++)for(var i=0;i<this.purchasedItems.length;i++)this.method=n?"Credit Card":"Cash on Delivery",this.afs.collection("orders").add({id:this.orders[r].userID,mealName:this.purchasedItems[i].mealName,mealCount:this.purchasedItems[i].mealCount,mealPrice:this.purchasedItems[i].mealPrice,userID:this.orders[r].userID,option:this.method,date:new Date})}getOrders(){return this.orders}clearCart(){return this.items=[],this.items}}return t.\u0275fac=function(e){return new(e||t)(r.Yb(Zm))},t.\u0275prov=r.Ib({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();function GE(t,e){if(1&t&&(r.Rb(0,"p",32),r.xc(1),r.Rb(2,"span",33),r.xc(3),r.ec(4,"currency"),r.Qb(),r.Qb()),2&t){const t=r.dc().$implicit,e=r.dc();r.Ab(1),r.Ac(" ",e.CartItems.discount," ",t.mealDiscount," Price was: "),r.Ab(2),r.zc(" ",r.gc(4,3,t.mealPrice,"EGP"),"")}}function WE(t,e){if(1&t){const t=r.Sb();r.Rb(0,"div",23),r.Rb(1,"li",24),r.Rb(2,"div",25),r.Nb(3,"img",26),r.Qb(),r.Rb(4,"div",27),r.Rb(5,"h4",28),r.xc(6),r.Qb(),r.vc(7,GE,5,6,"p",29),r.Nb(8,"br"),r.Rb(9,"div",30),r.xc(10),r.ec(11,"currency"),r.Qb(),r.Qb(),r.Rb(12,"button",31),r.bc("click",function(){r.rc(t);const n=e.index;return r.dc().remove(n)}),r.Rb(13,"span",18),r.xc(14,"\xd7"),r.Qb(),r.Qb(),r.Qb(),r.Qb()}if(2&t){const t=e.$implicit,n=e.index,i=r.dc();r.Ab(3),r.jc("src",t.mealImage,r.sc),r.Ab(3),r.Ac(" ",t.mealName," x",t.mealCount," "),r.Ab(1),r.jc("ngIf",1==t.mealShow),r.Ab(3),r.zc(" ",r.gc(11,5,i.totalPrice[n],"EGP")," ")}}function YE(t,e){if(1&t&&(r.Rb(0,"div",34),r.Rb(1,"button",35),r.xc(2),r.Qb(),r.Rb(3,"button",36),r.xc(4),r.Qb(),r.Qb()),2&t){const t=r.dc();r.Ab(2),r.zc(" ",t.CartItems.firstButton," "),r.Ab(1),r.jc("disabled",0==t.total),r.Ab(1),r.zc(" ",t.CartItems.secButton," ")}}function $E(t,e){if(1&t&&(r.Rb(0,"button",35),r.xc(1),r.Qb(),r.Rb(2,"button",37),r.xc(3),r.Qb()),2&t){const t=r.dc();r.Ab(1),r.zc(" ",t.CartItems.firstButton," "),r.Ab(2),r.zc(" ",t.CartItems.login," ")}}let KE=(()=>{class t{constructor(t){this.cartService=t,this.totalPrice=[],this.subTotal=0,this.taxes=0,this.total=0,this.shipping=0,this.priceAfterDiscount=0,this.items=this.cartService.getItems(),this.isUserlogged=localStorage.getItem("user")}ngOnChanges(t){for(var e=0;e<this.items.length;e++)this.subTotal+=this.totalPrice[e];this.taxes=Number((14*this.subTotal/100).toFixed(2)),this.total=this.taxes+this.subTotal+20}getCartItems(){this.cartService.getCartItems().subscribe(t=>{this.CartItems=t.payload.data()},t=>{console.log(t)})}moveToCheckout(){this.cartService.setTotal(this.total),this.items.forEach(t=>{this.cartService.moveToCheckOut(t.mealName,t.mealCount,t.mealPrice,t.mealDiscount)})}ngOnInit(){this.getCartItems();for(var t=0;t<this.items.length;t++){if(this.items[t].mealShow){let e=this.items[t].mealDiscount.substring(0,2);this.priceAfterDiscount=this.items[t].mealPrice-parseInt(e)*this.items[t].mealPrice/100,this.totalPrice.push(this.items[t].mealCount*this.priceAfterDiscount),this.subTotal+=this.totalPrice[t]}else this.totalPrice.push(this.items[t].mealCount*this.items[t].mealPrice),this.subTotal+=this.totalPrice[t];this.shipping=10}this.taxes=Number((14*this.subTotal/100).toFixed(2)),this.total=this.taxes+this.subTotal+this.shipping,this.total.toFixed(2)}remove(t){this.items.splice(t,1),this.subTotal-=this.totalPrice[t],0==this.subTotal?(this.total=0,this.taxes=0,this.shipping=0):(this.taxes=Number((14*this.subTotal/100).toFixed(2)),this.total=this.taxes+this.subTotal+10,this.totalPrice.splice(t,1),this.total.toFixed(2))}}return t.\u0275fac=function(e){return new(e||t)(r.Mb(zE))},t.\u0275cmp=r.Gb({type:t,selectors:[["app-cart"]],features:[r.yb],decls:44,vars:15,consts:[[1,"row","shopping-cart",2,"margin-top","100px"],["id","shopping-cart--list",1,"ui-list","shopping-cart--list","col-sm-9"],["id","shopping-cart--list-item-template","type","text/template",4,"ngFor","ngForOf"],[1,"_grid","cart-totals","col-sm-3","card"],["id","subtotalCtr",1,"_column","subtotal"],[1,"cart-totals-key"],[1,"cart-totals-value"],["id","shippingCtr",1,"_column","shipping"],["id","taxesCtr",1,"_column","taxes"],["id","totalCtr",1,"_column","total"],["class","_column checkout",4,"ngIf","ngIfElse"],["login",""],["id","myModal","tabindex","-1","role","dialog","aria-labelledby","exampleModalCenterTitle","aria-hidden","true",1,"modal","fade"],["role","document",1,"modal-dialog","modal-dialog-centered"],[1,"modal-content"],[1,"modal-header"],["id","exampleModalLongTitle",1,"modal-title"],["type","button","data-dismiss","modal","aria-label","Close",1,"close"],["aria-hidden","true"],[1,"modal-body"],[1,"modal-footer","justify-content-center"],["type","button","data-dismiss","modal",1,"btn","btnDone","cont","col-5"],["type","button","data-dismiss","modal","routerLink","/Checkout",1,"btn","btnDone","add","col-5",3,"click"],["id","shopping-cart--list-item-template","type","text/template"],[1,"_grid","shopping-cart--list-item"],[1,"_column","product-image"],["width","300px","alt","Item image",1,"product-image--img","img-fluid",3,"src"],[1,"_column","product-info"],[1,"product-name"],["id","discount",4,"ngIf"],[1,"price","product-single-price"],["type","button","aria-label","Close",1,"close",2,"margin-right","0px",3,"click"],["id","discount"],[1,"price"],[1,"_column","checkout"],["routerLink","/MenuParent",1,"btn","_btn","checkout-btn"],["data-toggle","modal","data-target","#myModal",1,"btn","_btn","checkout-btn","entypo-forward",3,"disabled"],["type","button","routerLink","/LogIn",1,"btn","_btn","checkout-btn","entypo-forward"]],template:function(t,e){if(1&t&&(r.Rb(0,"div",0),r.Rb(1,"ol",1),r.vc(2,WE,15,8,"div",2),r.Qb(),r.Rb(3,"div",3),r.Rb(4,"div",4),r.Rb(5,"div",5),r.xc(6),r.Qb(),r.Rb(7,"div",6),r.xc(8),r.Qb(),r.Nb(9,"br"),r.Qb(),r.Rb(10,"div",7),r.Rb(11,"div",5),r.xc(12),r.Qb(),r.Rb(13,"div",6),r.xc(14),r.Qb(),r.Qb(),r.Rb(15,"div",8),r.Rb(16,"div",5),r.xc(17),r.Qb(),r.Rb(18,"div",6),r.xc(19),r.Qb(),r.Qb(),r.Rb(20,"div",9),r.Rb(21,"div",5),r.xc(22),r.Qb(),r.Rb(23,"div",6),r.xc(24),r.Qb(),r.Qb(),r.vc(25,YE,5,3,"div",10),r.vc(26,$E,4,2,"ng-template",null,11,r.wc),r.Qb(),r.Qb(),r.Rb(28,"div",12),r.Rb(29,"div",13),r.Rb(30,"div",14),r.Rb(31,"div",15),r.Rb(32,"h5",16),r.xc(33),r.Qb(),r.Rb(34,"button",17),r.Rb(35,"span",18),r.xc(36,"\xd7"),r.Qb(),r.Qb(),r.Qb(),r.Rb(37,"div",19),r.xc(38),r.Qb(),r.Rb(39,"div",20),r.Rb(40,"button",21),r.xc(41),r.Qb(),r.Rb(42,"button",22),r.bc("click",function(){return e.moveToCheckout()}),r.xc(43),r.Qb(),r.Qb(),r.Qb(),r.Qb(),r.Qb()),2&t){const t=r.qc(27);r.Ab(2),r.jc("ngForOf",e.items),r.Ab(4),r.yc(e.CartItems.subtotal),r.Ab(2),r.zc("L.E ",e.subTotal,""),r.Ab(4),r.yc(e.CartItems.delivery),r.Ab(2),r.zc("L.E ",e.shipping,""),r.Ab(3),r.yc(e.CartItems.taxes),r.Ab(2),r.zc("L.E ",e.taxes,""),r.Ab(3),r.yc(e.CartItems.total),r.Ab(2),r.zc("L.E ",e.total,""),r.Ab(1),r.jc("ngIf",e.isUserlogged)("ngIfElse",t),r.Ab(8),r.zc(" ",e.CartItems.popupText," "),r.Ab(5),r.yc(e.CartItems.popupMessage),r.Ab(3),r.zc(" ",e.CartItems.popupRespond1," "),r.Ab(2),r.zc(" ",e.CartItems.secButton," ")}},directives:[dt,pt,Nw],pipes:[vt],styles:['.shopping-cart[_ngcontent-%COMP%]{background-color:#fff;font-family:Quicksand,sans-serif;color:#ffaf42}h1[_ngcontent-%COMP%], h2[_ngcontent-%COMP%], h3[_ngcontent-%COMP%], h4[_ngcontent-%COMP%], h5[_ngcontent-%COMP%], h6[_ngcontent-%COMP%]{font-weight:300}.sub-heading[_ngcontent-%COMP%], h1[_ngcontent-%COMP%]{text-align:center;margin:.5rem 0 1rem}.sub-heading[_ngcontent-%COMP%]{font-size:.75em;font-weight:300}._grid[_ngcontent-%COMP%]{text-align:justify!important;text-justify:distribute-all-lines;font-size:0!important;text-rendering:optimizespeed}._grid[_ngcontent-%COMP%]:after{content:"";display:inline-block;width:100%}._column[_ngcontent-%COMP%]{display:inline-block;vertical-align:top;font-size:medium;text-align:left;text-rendering:optimizeLegibility}.shopping-cart[_ngcontent-%COMP%]{width:80%;max-width:60rem;margin:0 auto}.shopping-cart--list-item[_ngcontent-%COMP%]{border:1px solid #bdc3c7;margin-bottom:2rem;height:10rem;overflow:hidden}.shopping-cart--list-item[_ngcontent-%COMP%]:hover, .shopping-cart--list-item[_ngcontent-%COMP%]:hover   *[_ngcontent-%COMP%]{border-color:#fd5602}.shopping-cart--list-item[_ngcontent-%COMP%] > ._column[_ngcontent-%COMP%]{height:100%}.product-image[_ngcontent-%COMP%]{padding:1%;width:30%}.product-info[_ngcontent-%COMP%]{width:50%;padding:.5rem}.product-name[_ngcontent-%COMP%]{font:300 2em/1 Quicksand,sans-serif;letter-spacing:-.025em;margin:0 0 .5em}.price[_ngcontent-%COMP%]{line-height:1;text-align:right}.product-single-price[_ngcontent-%COMP%]{margin-top:-1rem;font-size:2em;text-align:start}.product-qty[_ngcontent-%COMP%]{width:100%;text-align:center}.product-total-price[_ngcontent-%COMP%]{border-top:1px solid #bdc3c7;color:#95a5a6;font-size:1.25em;padding:.5rem}.shopping-cart--list-item[_ngcontent-%COMP%]:hover   .product-total-price[_ngcontent-%COMP%]{background-color:rgba(58,214,53,.8549019607843137);color:#ecf0f1}.close[_ngcontent-%COMP%]{margin-left:0;width:40px;height:40px}.close[_ngcontent-%COMP%]:hover{background-color:#c0392b}.cart-totals[_ngcontent-%COMP%]{margin-bottom:3rem}.cart-totals[_ngcontent-%COMP%]   ._column[_ngcontent-%COMP%]:not(:last-of-type){border-bottom:1px solid #bdc3c7}.cart-totals[_ngcontent-%COMP%]   ._column[_ngcontent-%COMP%]:first-of-type{padding-left:0}.cart-totals-key[_ngcontent-%COMP%]{font-size:1.125em;color:#bdc3c7}.cart-totals[_ngcontent-%COMP%]   ._column[_ngcontent-%COMP%]:hover   .cart-totals-key[_ngcontent-%COMP%], .cart-totals[_ngcontent-%COMP%]   ._column[_ngcontent-%COMP%]:hover   .cart-totals-value[_ngcontent-%COMP%]{color:#333}.cart-totals-value[_ngcontent-%COMP%]{font-size:2em}._column.checkout[_ngcontent-%COMP%]{text-align:center;padding:0;margin-top:1.5em;vertical-align:middle}._btn.checkout-btn[_ngcontent-%COMP%]{margin:.2em;width:100%;background-color:#bdc3c7}._btn.checkout-btn[_ngcontent-%COMP%]:hover, .btnDone[_ngcontent-%COMP%]{background-color:#fd5602;color:#fff}.btnDone[_ngcontent-%COMP%]{height:40px;width:100px;font-size:large;transition:.3s}.btnDone[_ngcontent-%COMP%]:hover{background:#fd8709;color:#fff}p[_ngcontent-%COMP%] > .price[_ngcontent-%COMP%]{text-decoration:line-through}#discount[_ngcontent-%COMP%]{color:#000}']}),t})();function XE(t,e){if(1&t&&(r.Rb(0,"div",18),r.Rb(1,"div",19),r.Rb(2,"p"),r.xc(3),r.Qb(),r.Rb(4,"p"),r.xc(5),r.Qb(),r.Qb(),r.Qb()),2&t){const t=e.$implicit;r.Ab(3),r.zc("",null==t?null:t.mealName," x"),r.Ab(2),r.yc(null==t?null:t.mealCount)}}function ZE(t,e){if(1&t&&(r.Rb(0,"div"),r.Rb(1,"div"),r.Nb(2,"ngx-paypal",20),r.Qb(),r.Qb()),2&t){const t=r.dc();r.Ab(2),r.jc("config",t.payPalConfig)}}let JE=(()=>{class t{constructor(t){this.cartService=t,this.purchasedMeals=this.cartService.getPurchasedItems(),this.userID=localStorage.getItem("user"),this.totalPrice=this.cartService.getTotal(),this.options="",this.orders=[]}ngOnInit(){this.getCheckOutItems(),console.log(localStorage.getItem("user")),this.initConfig()}getCheckOutItems(){this.cartService.getCheckOutItems().subscribe(t=>{this.CheckOutItems=t.payload.data()},t=>{console.log(t)})}initConfig(){this.payPalConfig={currency:"EUR",clientId:"ARVegu43K5qlI65PGDVdA87ehCyaUTpVXxnB1F68RZAWMfyTrfel2COGW_h2DMVffreZfaAIxmwjIhuJ",createOrderOnClient:t=>({intent:"CAPTURE",purchase_units:[{amount:{currency_code:"EUR",value:"9.99",breakdown:{item_total:{currency_code:"EUR",value:"9.99"}}},items:[{name:"Food Court",quantity:"1",category:"DIGITAL_GOODS",unit_amount:{currency_code:"EUR",value:"9.99"}}]}]}),advanced:{commit:"true"},style:{label:"paypal",layout:"vertical",size:"small",color:"blue",shape:"rect"},onApprove:(t,e)=>{console.log("onApprove - transaction was approved, but not authorized",t,e),e.order.get().then(t=>{console.log("onApprove - you can get full order details inside onApprove: ",t)})},onClientAuthorization:t=>{console.log("onClientAuthorization - you should probably inform your server about completed transaction at this point",t)},onCancel:(t,e)=>{console.log("OnCancel",t,e)},onError:t=>{console.log("OnError",t)},onClick:(t,e)=>{console.log("onClick",t,e)}}}sendOrder(){null!==localStorage.getItem("user")&&(this.cartService.postOrders(this.purchasedMeals,localStorage.getItem("user"),this.options),console.log(this.options)),console.log(this.cartService.getOrders())}}return t.\u0275fac=function(e){return new(e||t)(r.Mb(zE))},t.\u0275cmp=r.Gb({type:t,selectors:[["app-check-out"]],decls:27,vars:15,consts:[[1,"container"],[1,"py-5","text-center"],["src","logoBlack.png","alt","","width","100px",1,"d-block","mx-auto","mb-4"],[2,"font-weight","bold"],["class","d-flex flex-column justify-content-start",4,"ngFor","ngForOf"],[1,"container","row"],[1,"col-md-8","order-md-1"],["novalidate","",1,"needs-validation",3,"ngSubmit"],[1,"mb-4"],[1,"mb-3",2,"font-weight","bold"],[1,"d-block","my-3",2,"color","rgb(122, 122, 122)"],[1,"form-check"],["type","radio","name","exampleRadios","id","exampleRadios1",1,"form-check-input",3,"value","checked","ngModel","ngModelChange"],["for","exampleRadios1",1,"form-check-label"],["type","radio","name","exampleRadios","id","exampleRadios3",1,"form-check-input",3,"value","checked","ngModel","ngModelChange"],["for","exampleRadios3",1,"form-check-label"],[4,"ngIf"],["type","submit ","routerLink","/Lastpage",1,"btn","btn-lg","btn-block",2,"background-color","#fd5602","color","white",3,"click"],[1,"d-flex","flex-column","justify-content-start"],[1,"d-flex","flex-row","justify-content-center"],[3,"config"]],template:function(t,e){1&t&&(r.Rb(0,"div",0),r.Rb(1,"div",1),r.Nb(2,"img",2),r.Rb(3,"h2",3),r.xc(4),r.Qb(),r.vc(5,XE,6,2,"div",4),r.Rb(6,"p"),r.xc(7),r.Qb(),r.Qb(),r.Rb(8,"div",5),r.Rb(9,"div",6),r.Rb(10,"form",7),r.bc("ngSubmit",function(){return e.sendOrder()}),r.Nb(11,"hr",8),r.Rb(12,"h4",9),r.xc(13),r.Qb(),r.Rb(14,"div",10),r.Rb(15,"div",11),r.Rb(16,"input",12),r.bc("ngModelChange",function(t){return e.options=t}),r.Qb(),r.Rb(17,"label",13),r.xc(18),r.Qb(),r.Qb(),r.Rb(19,"div",11),r.Rb(20,"input",14),r.bc("ngModelChange",function(t){return e.options=t}),r.Qb(),r.Rb(21,"label",15),r.xc(22),r.Qb(),r.Qb(),r.Qb(),r.vc(23,ZE,3,1,"div",16),r.Nb(24,"hr",8),r.Rb(25,"a",17),r.bc("click",function(){return e.sendOrder()}),r.xc(26),r.Qb(),r.Qb(),r.Qb(),r.Qb(),r.Qb()),2&t&&(r.Ab(4),r.yc(e.CheckOutItems.header),r.Ab(1),r.jc("ngForOf",e.purchasedMeals),r.Ab(2),r.Ac("",e.CheckOutItems.totalPrice," ",e.totalPrice,""),r.Ab(6),r.zc(" ",e.CheckOutItems.payment," "),r.Ab(3),r.jc("value",!0)("checked",e.options)("ngModel",e.options),r.Ab(2),r.zc(" ",e.CheckOutItems.credit," "),r.Ab(2),r.jc("value",!1)("checked",!e.options)("ngModel",e.options),r.Ab(2),r.zc(" ",e.CheckOutItems.cod," "),r.Ab(1),r.jc("ngIf",e.options),r.Ab(3),r.yc(e.CheckOutItems.button))},directives:[dt,xO,jC,vO,FC,lC,kC,EO,pt,Dw,ie],styles:[".container[_ngcontent-%COMP%]{max-width:960px}.lh-condensed[_ngcontent-%COMP%]{line-height:1.25}",'.bd-placeholder-img[_ngcontent-%COMP%] {\n    font-size: 1.125rem;\n    text-anchor: middle;\n    -webkit-user-select: none;\n    -moz-user-select: none;\n    -ms-user-select: none;\n    user-select: none;\n  }\n\n  @media (min-width: 768px) {\n    .bd-placeholder-img-lg[_ngcontent-%COMP%] {\n      font-size: 3.5rem;\n    }\n  }\n\n  .container[_ngcontent-%COMP%] {\n    background-color: white;\n    font-family: "Roboto", sans-serif;\n    color: #ff8303;\n    justify-content: center;\n  }']}),t})(),tx=(()=>{class t{constructor(t,e,n){this.http=t,this.db=e,this.afs=n,this.userRef=[],this.userRed=[]}getMenuItems(){return this.afs.collection("static").doc("menu").collection(localStorage.getItem("lang")||"en").doc(localStorage.getItem("lang")||"en").snapshotChanges()}getAllMeals(){return this.afs.collection("meals").doc(localStorage.getItem("lang")||"en").collection(localStorage.getItem("lang")||"en").snapshotChanges()}getMealByCategoryID(t,e){return this.afs.collection("meals").doc(localStorage.getItem("lang")||"en").collection(localStorage.getItem("lang")||"en",n=>n.where("categoryID","==",t).limit(e)).snapshotChanges()}getMealByCategoryIDOrderByName(t,e){return this.afs.collection("meals").doc(localStorage.getItem("lang")||"en").collection(localStorage.getItem("lang")||"en",n=>n.where("categoryID","==",t).limit(e).orderBy("name")).snapshotChanges()}getMealByCategoryIDOrderByPrice(t,e){return this.afs.collection("meals").doc(localStorage.getItem("lang")||"en").collection(localStorage.getItem("lang")||"en",n=>n.where("categoryID","==",t).limit(e).orderBy("price")).snapshotChanges()}getMealByCategoryIDOrderByPriceDesc(t,e){return this.afs.collection("meals").doc(localStorage.getItem("lang")||"en").collection(localStorage.getItem("lang")||"en",n=>n.where("categoryID","==",t).limit(e).orderBy("price","desc")).snapshotChanges()}getMealByID(t){return this.afs.collection("meals").doc(localStorage.getItem("lang")||"en").collection(localStorage.getItem("lang")||"en",e=>e.where("id","==",t)).snapshotChanges()}getMealByChefID(t){return this.afs.collection("meals").doc(localStorage.getItem("lang")||"en").collection(localStorage.getItem("lang")||"en",e=>e.where("chefID","==",t)).snapshotChanges()}}return t.\u0275fac=function(e){return new(e||t)(r.Yb(iE),r.Yb(VE),r.Yb(Zm))},t.\u0275prov=r.Ib({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();function ex(t,e){if(1&t){const t=r.Sb();r.Rb(0,"div",3),r.Rb(1,"div",4),r.Nb(2,"img",5),r.Rb(3,"div",6),r.Rb(4,"button",7),r.bc("click",function(){r.rc(t);const n=e.$implicit;return r.dc().viewDetails(n.id)}),r.xc(5,"Get this meal"),r.Qb(),r.Qb(),r.Qb(),r.Rb(6,"div",8),r.Rb(7,"h4",9),r.xc(8),r.Qb(),r.Rb(9,"p",10),r.xc(10),r.Qb(),r.Qb(),r.Qb()}if(2&t){const t=e.$implicit;r.Ab(2),r.jc("src",null==t?null:t.image,r.sc),r.Ab(6),r.yc(t.name),r.Ab(2),r.zc(" ",t.description," ")}}let nx=(()=>{class t{constructor(t,e,n,r){this.activatedRoute=t,this.mService=e,this.location=n,this.router=r,this.subscriptionList=[],this.meals=[],this.cID=0,this.InputChefID=1}ngOnInit(){}ngOnChanges(){this.getMealByChefID()}getMealByChefID(){this.mService.getMealByChefID(this.InputChefID).subscribe(t=>{this.meals=[],t.forEach(t=>{this.meals.push(t.payload.doc.data())}),this.meals.forEach(t=>{console.log(t)})},t=>{console.log(t)})}viewDetails(t){this.router.navigate(["/MealDetails",t])}}return t.\u0275fac=function(e){return new(e||t)(r.Mb(p_),r.Mb(tx),r.Mb(w),r.Mb(jw))},t.\u0275cmp=r.Gb({type:t,selectors:[["app-chef-dishes"]],inputs:{InputChefID:"InputChefID"},features:[r.yb],decls:3,vars:1,consts:[[1,"container-fluid","justify-content-center"],[1,"row","justify-content-center"],["class","col-sm-10 col-xs-12 col-xl-3 col-lg-4 col-md-4 rounded card text-center card-light","style","margin:20px; border-color: white;",4,"ngFor","ngForOf"],[1,"col-sm-10","col-xs-12","col-xl-3","col-lg-4","col-md-4","rounded","card","text-center","card-light",2,"margin","20px","border-color","white"],[1,"img__wrap"],[1,"rounded-corners","card-img-top","img__img",3,"src"],[1,"img__description"],[1,"btn","btn-link","text-center","img__description",3,"click"],[1,"card-body"],[1,"card-title"],[1,"description"]],template:function(t,e){1&t&&(r.Rb(0,"div",0),r.Rb(1,"div",1),r.vc(2,ex,11,3,"div",2),r.Qb(),r.Qb()),2&t&&(r.Ab(2),r.jc("ngForOf",e.meals))},directives:[dt],styles:[".container[_ngcontent-%COMP%], img[_ngcontent-%COMP%]{font-family:Roboto,sans-serif}img[_ngcontent-%COMP%]{width:100%;height:300px;border-radius:30px}.card-title[_ngcontent-%COMP%]{font-weight:700;color:#fd5602}.card-body[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;font-family:Roboto,sans-serif}a[_ngcontent-%COMP%]:hover{cursor:pointer}.img__wrap[_ngcontent-%COMP%]{position:relative;font-size:large;text-align:center;text-justify:center;margin:auto}.img__description[_ngcontent-%COMP%]{position:absolute;border-radius:30px;top:0;bottom:0;left:0;right:0;padding:30% 5% 20%;background:rgba(217,205,189,.6);color:#852600;visibility:hidden;opacity:0;font-size:20px;font-weight:700;text-decoration:none;transition:opacity .2s,visibility .2s}.img__wrap[_ngcontent-%COMP%]:hover   .img__description[_ngcontent-%COMP%]{visibility:visible;opacity:1;width:100%}"]}),t})(),rx=(()=>{class t{constructor(t,e,n){this.http=t,this.db=e,this.afs=n,this.userRef=[],this.userRed=[]}getChefItems(){return this.afs.collection("static").doc("chefs").collection(localStorage.getItem("lang")||"en").doc(localStorage.getItem("lang")||"en").snapshotChanges()}getAllChefs(t){return this.afs.collection("chefs").doc(localStorage.getItem("lang")||"en").collection(localStorage.getItem("lang")||"en",e=>e.limit(t)).snapshotChanges()}getChefsByID(t){return this.afs.collection("chefs").doc(localStorage.getItem("lang")||"en").collection(localStorage.getItem("lang")||"en",e=>e.where("id","==",t)).snapshotChanges()}}return t.\u0275fac=function(e){return new(e||t)(r.Yb(iE),r.Yb(VE),r.Yb(Zm))},t.\u0275prov=r.Ib({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),ix=(()=>{class t{constructor(t,e,n,r){this.router=t,this.location=e,this.chefService=n,this.activatedRout=r,this.chefID=0,this.starRating=0,this.subscriptionList=[]}ngOnInit(){this.getChefsByID()}setChefID(t){this.chefID=t}getChefsByID(){let t=null,e=this.activatedRout.paramMap.subscribe(e=>{let n=e.get("cID");this.chefID=n?parseInt(n):0,t=this.chefService.getChefsByID(this.chefID).subscribe(t=>{t.forEach(t=>{this.chef=t.payload.doc.data()})},t=>{console.log(t)}),this.subscriptionList.push(t),console.log(this.chefID),console.log(this.chef)});this.subscriptionList.push(e)}}return t.\u0275fac=function(e){return new(e||t)(r.Mb(jw),r.Mb(w),r.Mb(rx),r.Mb(p_))},t.\u0275cmp=r.Gb({type:t,selectors:[["app-chef-profile"]],viewQuery:function(t,e){if(1&t&&r.Bc(nx,1),2&t){let t;r.pc(t=r.cc())&&(e.DetailsRef=t.first)}},decls:16,vars:4,consts:[[1,"container",2,"margin-top","100px"],[1,"d-flex","flex-row","flex-wrap"],["alt","Card image cap",1,"col-lg-3","col-md-4","col-sm-6",3,"src"],[1,"col-7","mt-5"],[1,"card-title"],["routerLink","/Chefs",1,"nav-link","p-0"],[3,"InputChefID"]],template:function(t,e){1&t&&(r.Rb(0,"body"),r.Rb(1,"div",0),r.Rb(2,"div",1),r.Nb(3,"img",2),r.Rb(4,"div",3),r.Nb(5,"br"),r.Rb(6,"h2",4),r.xc(7),r.Qb(),r.Rb(8,"p",4),r.xc(9),r.Qb(),r.Rb(10,"a",5),r.xc(11,"See Other Chefs"),r.Qb(),r.Nb(12,"br"),r.Qb(),r.Qb(),r.Nb(13,"hr"),r.Nb(14,"br"),r.Nb(15,"app-chef-dishes",6),r.Qb(),r.Qb()),2&t&&(r.Ab(3),r.jc("src",null==e.chef?null:e.chef.image,r.sc),r.Ab(4),r.yc(null==e.chef?null:e.chef.name),r.Ab(2),r.yc(null==e.chef?null:e.chef.description),r.Ab(6),r.jc("InputChefID",e.chef.id))},directives:[Dw,nx],styles:["body[_ngcontent-%COMP%]{font-family:Roboto,sans-serif}img[_ngcontent-%COMP%]{border-radius:50%}h1[_ngcontent-%COMP%], h2[_ngcontent-%COMP%]{font-weight:700;color:#fd5602}h2[_ngcontent-%COMP%]{font-display:3}.nav-link[_ngcontent-%COMP%]{color:#fe6e00}"]}),t})();function ox(t,e){if(1&t){const t=r.Sb();r.Rb(0,"div",7),r.Rb(1,"div",8),r.Nb(2,"img",9),r.Rb(3,"button",10),r.bc("click",function(){r.rc(t);const n=e.$implicit;return r.dc().viewChef(n.id)}),r.xc(4),r.Qb(),r.Qb(),r.Rb(5,"div",11),r.Rb(6,"h3",12),r.xc(7),r.Qb(),r.Rb(8,"p"),r.xc(9),r.Qb(),r.Qb(),r.Qb()}if(2&t){const t=e.$implicit,n=r.dc();r.Ab(2),r.jc("src",null==t?null:t.image,r.sc),r.Ab(2),r.zc(" ",n.ChefItems.knowThem," "),r.Ab(3),r.yc(null==t?null:t.name),r.Ab(2),r.yc(null==t?null:t.description)}}let sx=(()=>{class t{constructor(t,e){this.router=t,this.chefServiceApi=e,this.ChefList=[],this.subscription=null,this.chefID=0,this.chefIndex=6}ngOnInit(){this.getAllChefs(),this.getChefItems()}getChefItems(){this.chefServiceApi.getChefItems().subscribe(t=>{this.ChefItems=t.payload.data()},t=>{console.log(t)})}getAllChefs(){this.chefServiceApi.getAllChefs(this.chefIndex).subscribe(t=>{this.ChefList=[],console.log(t),t.forEach(t=>{this.ChefList.push(t.payload.doc.data())}),this.ChefList.forEach(t=>{console.log(t)})},t=>{console.log(t)})}nextIndex(){this.chefIndex+=6,this.getAllChefs()}viewChef(t){this.router.navigate(["/Profile",t])}ngOnDestroy(){var t;null===(t=this.subscription)||void 0===t||t.unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(r.Mb(jw),r.Mb(rx))},t.\u0275cmp=r.Gb({type:t,selectors:[["app-chefs"]],decls:11,vars:3,consts:[[1,"container-fluid"],[1,"row","d-flex","justify-content-center"],["id","ourChefs",1,"text-center","col-12"],["class","shadow rounded card text-left col-sm-10 col-xs-12 col-xl-3 col-lg-4 col-md-4 card-light p-0","style","margin-right: 20px; margin-bottom: 20px",4,"ngFor","ngForOf"],[1,"d-flex","flex-column","mx-auto","align-items-center"],["role","button",1,"btn","btn-link","seemore",3,"click"],[1,"fas","fa-chevron-down","seemore",3,"click"],[1,"shadow","rounded","card","text-left","col-sm-10","col-xs-12","col-xl-3","col-lg-4","col-md-4","card-light","p-0",2,"margin-right","20px","margin-bottom","20px"],[1,"img__wrap"],[3,"src"],["type","button",1,"btn","btn-link","img__description",3,"click"],[1,"card-body","text-center"],[1,"chefN"]],template:function(t,e){1&t&&(r.Rb(0,"div",0),r.Rb(1,"div",1),r.Rb(2,"div",2),r.xc(3),r.Qb(),r.Nb(4,"br"),r.Nb(5,"br"),r.vc(6,ox,10,4,"div",3),r.Qb(),r.Rb(7,"div",4),r.Rb(8,"a",5),r.bc("click",function(){return e.nextIndex()}),r.xc(9),r.Qb(),r.Rb(10,"i",6),r.bc("click",function(){return e.nextIndex()}),r.Qb(),r.Qb(),r.Qb()),2&t&&(r.Ab(3),r.yc(e.ChefItems.header),r.Ab(3),r.jc("ngForOf",e.ChefList),r.Ab(3),r.yc(e.ChefItems.button))},directives:[dt],styles:["img[_ngcontent-%COMP%]{width:100%}#ourChefs[_ngcontent-%COMP%]{font-size:50px;font-weight:700;margin-top:95px;font-family:Roboto,sans-serif}#ourChefs[_ngcontent-%COMP%], h3[_ngcontent-%COMP%]{color:#fd5602}h3[_ngcontent-%COMP%]{font-weight:600}.chefN[_ngcontent-%COMP%]{color:#fd5602;display:flex;justify-content:center}.img__wrap[_ngcontent-%COMP%]{position:relative}.buttonColor[_ngcontent-%COMP%]{background-color:#ffaf42;color:#fff;display:flex;justify-content:center;align-items:center;height:50px;font-size:x-large}.img__description[_ngcontent-%COMP%]{position:absolute;top:0;bottom:0;left:0;right:0;padding:30% 5% 20%;background:rgba(217,205,189,.6);color:#852600;visibility:hidden;opacity:0;font-size:25px;font-weight:600;text-decoration:none;transition:opacity .2s,visibility .2s}.img__wrap[_ngcontent-%COMP%]:hover   .img__description[_ngcontent-%COMP%]{visibility:visible;opacity:1;width:100%}.seemore[_ngcontent-%COMP%]{font-size:22px;color:#fd8709}.seemore[_ngcontent-%COMP%]:hover{text-decoration:none;color:#fd5602}"]}),t})(),ax=(()=>{class t{constructor(t,e,n){this.http=t,this.db=e,this.afs=n,this.userRef=[],this.userRed=[]}getHomeItems(){return this.afs.collection("static").doc("home").collection(localStorage.getItem("lang")||"en").doc(localStorage.getItem("lang")||"en").snapshotChanges()}getHomeMealByID(t){return this.afs.collection("meals").doc(localStorage.getItem("lang")||"en").collection(localStorage.getItem("lang")||"en",e=>e.where("id","==",t)).snapshotChanges()}getHomeOffer(){return this.afs.collection("meals").doc(localStorage.getItem("lang")||"en").collection(localStorage.getItem("lang")||"en",t=>t.where("show","==",!0).limit(3)).snapshotChanges()}getHomeRecommended(){return this.afs.collection("meals").doc(localStorage.getItem("lang")||"en").collection(localStorage.getItem("lang")||"en",t=>t.limit(6)).snapshotChanges()}}return t.\u0275fac=function(e){return new(e||t)(r.Yb(iE),r.Yb(VE),r.Yb(Zm))},t.\u0275prov=r.Ib({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();function ux(t,e){if(1&t&&(r.Rb(0,"h4",18),r.xc(1),r.Qb()),2&t){const t=r.dc();r.Ab(1),r.yc(t.HomeItems.loggedin)}}function cx(t,e){if(1&t&&(r.Rb(0,"h4",18),r.xc(1),r.Qb()),2&t){const t=r.dc();r.Ab(1),r.yc(t.HomeItems.loggedout)}}function lx(t,e){if(1&t){const t=r.Sb();r.Rb(0,"div",19),r.Rb(1,"div",20),r.Rb(2,"p",21),r.xc(3),r.Qb(),r.Nb(4,"img",22),r.Rb(5,"div",23),r.Rb(6,"h2"),r.xc(7),r.Qb(),r.Rb(8,"h5"),r.xc(9),r.Qb(),r.Rb(10,"p"),r.Rb(11,"a",24),r.bc("click",function(){r.rc(t);const n=e.$implicit;return r.dc().viewDetails(null==n?null:n.id)}),r.xc(12),r.Qb(),r.Qb(),r.Qb(),r.Qb(),r.Qb()}if(2&t){const t=e.$implicit,n=r.dc();r.Ab(3),r.Ac("",n.HomeItems.discount," : ",null==t?null:t.discount,""),r.Ab(1),r.jc("src",null==t?null:t.image,r.sc),r.Ab(3),r.yc(null==t?null:t.name),r.Ab(2),r.zc("",null==t?null:t.price," L.E."),r.Ab(3),r.zc("",n.HomeItems.viewDetails," \xbb")}}function hx(t,e){if(1&t){const t=r.Sb();r.Rb(0,"div",19),r.Rb(1,"div",20),r.Nb(2,"img",22),r.Rb(3,"div",23),r.Rb(4,"h2"),r.xc(5),r.Qb(),r.Rb(6,"h5"),r.xc(7),r.Qb(),r.Rb(8,"p"),r.Rb(9,"a",24),r.bc("click",function(){r.rc(t);const n=e.$implicit;return r.dc().viewDetails(null==n?null:n.id)}),r.xc(10),r.Qb(),r.Qb(),r.Qb(),r.Qb(),r.Qb()}if(2&t){const t=e.$implicit,n=r.dc();r.Ab(2),r.jc("src",null==t?null:t.image,r.sc),r.Ab(3),r.yc(null==t?null:t.name),r.Ab(2),r.zc("",null==t?null:t.price," L.E."),r.Ab(3),r.zc("",n.HomeItems.viewDetails," \xbb")}}let dx=(()=>{class t{constructor(t,e){this.homeService=t,this.router=e,this.subscription=null,this.ListOffers=[],this.ListRecommended=[],this.mID=0,this.userID=localStorage.getItem("user")}ngOnInit(){this.getHomeGeneralProduct(),this.getHomeOffers(),this.getHomeRecommended()}getHomeGeneralProduct(){this.homeService.getHomeItems().subscribe(t=>{this.HomeItems=t.payload.data()},t=>{console.log(t)})}getHomeOffers(){this.homeService.getHomeOffer().subscribe(t=>{t.forEach(t=>{this.ListOffers.push(t.payload.doc.data())})},t=>{console.log(t)})}getHomeRecommended(){this.homeService.getHomeRecommended().subscribe(t=>{t.forEach(t=>{this.ListRecommended.push(t.payload.doc.data())})},t=>{console.log(t)})}viewDetails(t){this.router.navigate(["/MealDetails",t])}}return t.\u0275fac=function(e){return new(e||t)(r.Mb(ax),r.Mb(jw))},t.\u0275cmp=r.Gb({type:t,selectors:[["app-home"]],decls:47,vars:16,consts:[["id","welcome",4,"ngIf"],[1,"container-fluid","d-flex","flex-column","align-items-center"],[1,"container-fluid","d-flex","flex-row","flex-wrap","justify-content-center"],[1,"col-xl-4","col-lg-4","col-md-4","col-sm-12","col-xs-12","align-items-center","d-inline","content"],[1,"secondHeader"],[1,"col-md-1","d-none","d-sm-block"],[1,"col-lg-5","col-md-5","col-sm-12","col-xs-12","img-fluid","firstImage",3,"src"],[1,"featurette-divider"],[1,"col-lg-5","col-md-5","col-sm-12","col-xs-12","img-fluid","secondImage",3,"src"],[1,"container-fluid","mx-auto",2,"width","80%"],[1,"container-fluid","d-inline-flex"],[1,"offers"],[1,"container","text-right","mt-4"],["routerLink","/Offers","role","button",1,"btn","btn-sm","buttonColor"],[1,"row","d-flex","col-lg-12","mx-auto"],["class","col-lg-4 col-md-6 col-sm-6 col-xs-12",4,"ngFor","ngForOf"],[1,"d-none","recommended","d-sm-block"],["routerLink","/MenuParent","role","button",1,"btn","btn-sm","buttonColor"],["id","welcome"],[1,"col-lg-4","col-md-6","col-sm-6","col-xs-12"],[1,"card","shadow","card-light","m-2"],[1,"ribbon"],[1,"card-img-top",3,"src"],[1,"card-body","text-center"],["role","button",1,"btn","buttonColor",3,"click"]],template:function(t,e){1&t&&(r.Rb(0,"body"),r.vc(1,ux,2,1,"h4",0),r.vc(2,cx,2,1,"h4",0),r.Rb(3,"div",1),r.Rb(4,"div",2),r.Rb(5,"div",3),r.Rb(6,"h1"),r.xc(7),r.Qb(),r.Rb(8,"h2",4),r.xc(9),r.Qb(),r.Rb(10,"h4"),r.xc(11),r.Qb(),r.Qb(),r.Nb(12,"div",5),r.Nb(13,"img",6),r.Qb(),r.Nb(14,"hr",7),r.Rb(15,"div",2),r.Nb(16,"img",8),r.Nb(17,"div",5),r.Rb(18,"div",3),r.Rb(19,"h1"),r.xc(20),r.Qb(),r.Rb(21,"h2",4),r.xc(22),r.Qb(),r.Rb(23,"h4"),r.xc(24),r.Qb(),r.Qb(),r.Qb(),r.Qb(),r.Nb(25,"hr",7),r.Rb(26,"div",9),r.Rb(27,"div",10),r.Rb(28,"h1",11),r.xc(29),r.Qb(),r.Rb(30,"div",12),r.Rb(31,"p"),r.Rb(32,"a",13),r.xc(33),r.Qb(),r.Qb(),r.Qb(),r.Qb(),r.Rb(34,"div",14),r.vc(35,lx,13,6,"div",15),r.Qb(),r.Qb(),r.Nb(36,"hr",7),r.Rb(37,"div",9),r.Rb(38,"div",10),r.Rb(39,"h1",16),r.xc(40),r.Qb(),r.Rb(41,"div",12),r.Rb(42,"p"),r.Rb(43,"a",17),r.xc(44),r.Qb(),r.Qb(),r.Qb(),r.Qb(),r.Rb(45,"div",14),r.vc(46,hx,11,4,"div",15),r.Qb(),r.Qb(),r.Qb()),2&t&&(r.Ab(1),r.jc("ngIf",e.userID),r.Ab(1),r.jc("ngIf",!e.userID),r.Ab(5),r.yc(e.HomeItems.firstGeneralTextHeader1),r.Ab(2),r.yc(e.HomeItems.firstGeneralTextHeader2),r.Ab(2),r.yc(e.HomeItems.firstGeneralTextFooter),r.Ab(2),r.kc("src",e.HomeItems.firstGeneralImage,r.sc),r.Ab(3),r.kc("src",e.HomeItems.secondGeneralImage,r.sc),r.Ab(4),r.yc(e.HomeItems.secondGeneralTextHeader1),r.Ab(2),r.yc(e.HomeItems.secondGeneralTextHeader2),r.Ab(2),r.yc(e.HomeItems.secondGeneralTextFooter),r.Ab(5),r.yc(e.HomeItems.offers),r.Ab(4),r.yc(e.HomeItems.dicoverMore),r.Ab(2),r.jc("ngForOf",e.ListOffers),r.Ab(5),r.yc(e.HomeItems.recommended),r.Ab(4),r.yc(e.HomeItems.dicoverMore),r.Ab(2),r.jc("ngForOf",e.ListRecommended))},directives:[pt,Dw,dt],styles:["body[_ngcontent-%COMP%]{padding-top:6rem;font-family:Roboto,sans-serif}.card[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:300px;padding:0}.offer[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{width:80px}.col-lg-2[_ngcontent-%COMP%], .col-lg-3[_ngcontent-%COMP%], .col-lg-4[_ngcontent-%COMP%]{padding:0}.ribbon[_ngcontent-%COMP%]{position:absolute;top:0;right:-7px;padding:.5rem;width:10rem;background:#dc6600;color:#fff;text-align:center;font-family:Roboto,sans-serif;box-shadow:4px 4px 15px rgba(26,35,126,.2)}.secondHeader[_ngcontent-%COMP%]{font-weight:700;color:#acacac}a[_ngcontent-%COMP%], h1[_ngcontent-%COMP%], h5[_ngcontent-%COMP%]{color:#fd5602}.dropdown-menu[_ngcontent-%COMP%]{text-align:center}.dropdown-toggle[_ngcontent-%COMP%]:hover{color:#ffaf42}.add[_ngcontent-%COMP%]{background-color:#ffaf42;color:#fff}#nav-offers[_ngcontent-%COMP%]{height:250px;overflow-y:scroll}#nav-new-tab.active[_ngcontent-%COMP%], #nav-offers-tab.active[_ngcontent-%COMP%], #nav-popular-tab.active[_ngcontent-%COMP%]{background-color:#ffaf42;color:#fff;font-weight:700}.buttonColor[_ngcontent-%COMP%]{background-color:#ffaf42;color:#fff}h1[_ngcontent-%COMP%]{font-family:sans-serif}h2[_ngcontent-%COMP%]{font-weight:700;color:grey;font-family:Roboto,sans-serif}.firstImage[_ngcontent-%COMP%], .secondImage[_ngcontent-%COMP%]{border-radius:60px}.offers[_ngcontent-%COMP%], .recommended[_ngcontent-%COMP%]{font-size:300%}.featurette-divider[_ngcontent-%COMP%]{margin:5rem 0}.content[_ngcontent-%COMP%]{margin-top:5%}#welcome[_ngcontent-%COMP%]{margin-left:10%;color:#2f4f4f}"]}),t})();function fx(t,e,n,r){return new(n||(n=Promise))(function(i,o){function s(t){try{u(r.next(t))}catch(Kg){o(Kg)}}function a(t){try{u(r.throw(t))}catch(Kg){o(Kg)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(s,a)}u((r=r.apply(t,e||[])).next())})}let px=(()=>{class t{constructor(t,e){this.firebaseAuth=t,this.firebaseFirestore=e,this.isLoggedIn=!1,this.userID="",this.user=""}signIn(t,e){return fx(this,void 0,void 0,function*(){yield this.firebaseAuth.signInWithEmailAndPassword(t,e).then(t=>{var e;t&&(this.isLoggedIn=!0,localStorage.setItem("user",JSON.stringify(null===(e=t.user)||void 0===e?void 0:e.uid)))})})}signUpAuthentication(t,e){return fx(this,void 0,void 0,function*(){yield this.firebaseAuth.createUserWithEmailAndPassword(t,e).then(t=>{var e,n;this.isLoggedIn=!0,localStorage.setItem("user",JSON.stringify(null===(e=t.user)||void 0===e?void 0:e.uid)),this.userID=null===(n=t.user)||void 0===n?void 0:n.uid})})}logout(){this.firebaseAuth.signOut(),localStorage.removeItem("user"),localStorage.removeItem("username")}signUpFireStore(t,e){return fx(this,void 0,void 0,function*(){this.user=localStorage.getItem("user"),this.user&&(this.userID=this.user),yield this.firebaseFirestore.collection("users").doc(this.userID).set({userID:this.userID,email:e,username:t})})}profile(t){return fx(this,void 0,void 0,function*(){this.user=localStorage.getItem("user"),this.user&&(this.userID=this.user),yield this.firebaseFirestore.collection("users").doc(this.userID).set(t,{merge:!0})})}}return t.\u0275fac=function(e){return new(e||t)(r.Yb(Mm),r.Yb(Zm))},t.\u0275prov=r.Ib({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();function gx(t,e){1&t&&(r.Rb(0,"div"),r.xc(1," E-mail is required. "),r.Qb())}function mx(t,e){1&t&&(r.Rb(0,"div"),r.xc(1," Please enter a valid email address. "),r.Qb())}function yx(t,e){if(1&t&&(r.Rb(0,"div",14),r.vc(1,gx,2,0,"div",15),r.vc(2,mx,2,0,"div",15),r.Qb()),2&t){const t=r.dc();r.Ab(1),r.jc("ngIf",t.userEmail.errors.required),r.Ab(1),r.jc("ngIf",t.userEmail.errors.email)}}function bx(t,e){1&t&&(r.Rb(0,"div"),r.xc(1," Password is required. "),r.Qb())}function vx(t,e){1&t&&(r.Rb(0,"div"),r.xc(1," Password must be at least 6 characters long. "),r.Qb())}function _x(t,e){if(1&t&&(r.Rb(0,"div",14),r.vc(1,bx,2,0,"div",15),r.vc(2,vx,2,0,"div",15),r.Qb()),2&t){const t=r.dc();r.Ab(1),r.jc("ngIf",t.userPassword.errors.required),r.Ab(1),r.jc("ngIf",t.userPassword.errors.minlength)}}let wx=(()=>{class t{constructor(t,e){this.firebaseSignIn=t,this.route=e,this.isSignedIn=!1,this.user="{}"}ngOnInit(){null!==localStorage.getItem("user")?(this.isSignedIn=!0,this.route.navigate(["/Home"])):this.isSignedIn=!1,this.loginForm=new gO({userEmail:new pO("",[mC.email,mC.required]),userPassword:new pO("",[mC.required,mC.minLength(6)])})}get userEmail(){return this.loginForm.get("userEmail")}get userPassword(){return this.loginForm.get("userPassword")}onSignIn(t,e){return fx(this,void 0,void 0,function*(){yield this.firebaseSignIn.signIn(t,e).then(t=>{console.log(t),this.firebaseSignIn.isLoggedIn&&(this.isSignedIn=!0,window.location.reload())},t=>{console.log(t),alert("Email or password is incorrect")})})}}return t.\u0275fac=function(e){return new(e||t)(r.Mb(px),r.Mb(jw))},t.\u0275cmp=r.Gb({type:t,selectors:[["app-login"]],decls:25,vars:3,consts:[[1,"text-center","raw"],[1,"form-signin","col-3",3,"formGroup"],["src","./assets/3.png","alt","","width","100px","height","100px",1,"mb-4","img-fluid"],[1,"h3","mb-3","font-weight-normal"],["for","username",1,"sr-only"],["type","email","id","inputEmail","formControlName","userEmail","placeholder","E-mail","required","","autofocus","",1,"form-control"],["email",""],["class","alert alert-danger",4,"ngIf"],["for","inputPassword",1,"sr-only"],["type","password","id","inputPassword","formControlName","userPassword","placeholder","Password","required","",1,"form-control"],["password",""],["type","submit",1,"btn","btn-lg","btn-block",3,"click"],["value","Sign up","routerLink","/Signup"],[1,"mt-5","mb-3","text-muted"],[1,"alert","alert-danger"],[4,"ngIf"]],template:function(t,e){if(1&t){const t=r.Sb();r.Rb(0,"div",0),r.Rb(1,"form",1),r.Nb(2,"img",2),r.Rb(3,"h1",3),r.xc(4,"Please Log in"),r.Qb(),r.Rb(5,"label",4),r.xc(6,"User Email"),r.Qb(),r.Nb(7,"input",5,6),r.vc(9,yx,3,2,"div",7),r.Rb(10,"label",8),r.xc(11,"Password"),r.Qb(),r.Nb(12,"input",9,10),r.vc(14,_x,3,2,"div",7),r.Rb(15,"a",11),r.bc("click",function(){r.rc(t);const n=r.qc(8),i=r.qc(13);return e.onSignIn(n.value,i.value)}),r.xc(16,"Login"),r.Qb(),r.Nb(17,"br"),r.Rb(18,"h6"),r.xc(19," Don't have an account? Then "),r.Rb(20,"a",12),r.xc(21,"Sign up"),r.Qb(),r.xc(22," now! "),r.Qb(),r.Rb(23,"p",13),r.xc(24,"\xa9 2020"),r.Qb(),r.Qb(),r.Qb()}2&t&&(r.Ab(1),r.jc("formGroup",e.loginForm),r.Ab(8),r.jc("ngIf",e.userEmail.invalid&&(e.userEmail.dirty||e.userEmail.touched)),r.Ab(5),r.jc("ngIf",e.userPassword.invalid&&(e.userPassword.dirty||e.userPassword.touched)))},directives:[xO,jC,TO,lC,kC,DO,LO,pt,Dw],styles:[".text-center[_ngcontent-%COMP%]{height:100%;margin-top:100px;display:flex;align-items:center;justify-content:center;padding-top:40px;padding-bottom:40px;background-color:#fff;font-family:Roboto,sans-serif}form-signin[_ngcontent-%COMP%]{width:100%;max-width:500px;padding:15px;margin:auto}.form-signin[_ngcontent-%COMP%]   .checkbox[_ngcontent-%COMP%]{font-weight:400}.form-signin[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]{position:relative;box-sizing:border-box;height:auto;padding:10px;font-size:16px}.form-signin[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]:focus{z-index:2}.form-signin[_ngcontent-%COMP%]   input[type=text][_ngcontent-%COMP%]{margin-bottom:10px;border-bottom-right-radius:0;border-bottom-left-radius:0}.form-signin[_ngcontent-%COMP%]   input[type=password][_ngcontent-%COMP%]{margin-bottom:10px;border-top-left-radius:0;border-top-right-radius:0}.btn[_ngcontent-%COMP%]{background-color:#fd5602;color:#fff}"]}),t})();function Cx(t,e){if(1&t&&(r.Rb(0,"h5",22),r.xc(1),r.Qb()),2&t){const t=r.dc();r.Ab(1),r.zc("",null==t.meals?null:t.meals.discount," OFF")}}let Ox=(()=>{class t{constructor(t,e,n,r,i,o){this.activatedRoute=t,this.mService=e,this.location=n,this.cartService=r,this.router=i,this.route=o,this.subscriptionList=[],this.mID=0,this.starRating=0,this.count=1}ngOnInit(){this.getMealByID()}getMealByID(){let t=null,e=this.activatedRoute.paramMap.subscribe(e=>{let n=e.get("mID");this.mID=n?parseInt(n):0,t=this.mService.getMealByID(this.mID).subscribe(t=>{t.forEach(t=>{console.log(t.payload.doc.data()),this.meals=t.payload.doc.data()})},t=>{console.log(t)}),this.subscriptionList.push(t)});this.subscriptionList.push(e)}addToCart(t){this.meals&&this.cartService.addTocart(this.meals.image,this.meals.id,this.meals.name,this.meals.price,this.meals.show,this.meals.discount,parseInt(t))}back(){this.location.back()}}return t.\u0275fac=function(e){return new(e||t)(r.Mb(p_),r.Mb(tx),r.Mb(w),r.Mb(zE),r.Mb(jw),r.Mb(p_))},t.\u0275cmp=r.Gb({type:t,selectors:[["app-meal-details"]],decls:38,vars:8,consts:[[1,"container","d-flex","flex-row",2,"margin-top","70px"],["width","50%",1,"align-self-center","shadow-lg","mb-5","d-inline",2,"margin-top","20px",3,"src"],[1,"d-flex","flex-column","justify-content-center","text-left",2,"margin-left","50px","margin-right","60px"],[1,"display-4"],["style","color: gray;",4,"ngIf"],[1,"mb-3"],[1,"d-flex","flex-row","justify-content-between"],[1,"btn","btn-lg","rounded-pill",3,"click"],["type","number","min","1","value","1",1,"_column","product-qty","rounded-pill","col-lg-3"],["itemsCount",""],["data-toggle","modal","data-target","#myModal",1,"btn","add","rounded-pill","sm-btn-sm",3,"click"],["id","myModal","tabindex","-1","role","dialog","aria-labelledby","exampleModalCenterTitle","aria-hidden","true",1,"modal","fade"],["role","document",1,"modal-dialog","modal-dialog-centered"],[1,"modal-content"],[1,"modal-header"],["id","exampleModalLongTitle",1,"modal-title"],["type","button","data-dismiss","modal","aria-label","Close",1,"close"],["aria-hidden","true"],[1,"modal-body"],[1,"modal-footer","justify-content-center"],["type","button","routerLink","/MenuParent","data-dismiss","modal",1,"btn","cont","col-5"],["type","button","routerLink","/Cart","data-dismiss","modal",1,"btn","add","col-5"],[2,"color","gray"]],template:function(t,e){if(1&t){const t=r.Sb();r.Rb(0,"body"),r.Rb(1,"div",0),r.Nb(2,"img",1),r.Rb(3,"div",2),r.Rb(4,"h1",3),r.xc(5),r.Qb(),r.Rb(6,"h4"),r.xc(7),r.ec(8,"currency"),r.Qb(),r.vc(9,Cx,2,1,"h5",4),r.Nb(10,"br"),r.Nb(11,"br"),r.Rb(12,"h5",5),r.xc(13),r.Qb(),r.Nb(14,"br"),r.Rb(15,"div",6),r.Rb(16,"button",7),r.bc("click",function(){return e.back()}),r.xc(17,"Back"),r.Qb(),r.Nb(18,"input",8,9),r.Rb(20,"button",10),r.bc("click",function(){r.rc(t);const n=r.qc(19);return e.addToCart(n.value)}),r.xc(21,"Get"),r.Qb(),r.Qb(),r.Rb(22,"div",11),r.Rb(23,"div",12),r.Rb(24,"div",13),r.Rb(25,"div",14),r.Rb(26,"h5",15),r.xc(27,"Oh Hello There! "),r.Qb(),r.Rb(28,"button",16),r.Rb(29,"span",17),r.xc(30,"\xd7"),r.Qb(),r.Qb(),r.Qb(),r.Rb(31,"div",18),r.xc(32," Your meal has successfully been added to cart. "),r.Qb(),r.Rb(33,"div",19),r.Rb(34,"button",20),r.xc(35,"Back to menu"),r.Qb(),r.Rb(36,"button",21),r.xc(37,"View Cart"),r.Qb(),r.Qb(),r.Qb(),r.Qb(),r.Qb(),r.Qb(),r.Qb(),r.Qb()}2&t&&(r.Ab(2),r.jc("src",null==e.meals?null:e.meals.image,r.sc),r.Ab(3),r.zc(" ",null==e.meals?null:e.meals.name," "),r.Ab(2),r.zc(" ",r.gc(8,5,null==e.meals?null:e.meals.price,"EGP"),""),r.Ab(2),r.jc("ngIf",1==(null==e.meals?null:e.meals.show)),r.Ab(4),r.zc(" ",null==e.meals?null:e.meals.description,""))},directives:[pt,Nw],pipes:[vt],styles:["body[_ngcontent-%COMP%]{font-family:Roboto,sans-serif}h1[_ngcontent-%COMP%]{color:#fd5602;font-weight:700}h4[_ngcontent-%COMP%]{color:#000}h5[_ngcontent-%COMP%]{color:#797979}img[_ngcontent-%COMP%]{border-radius:30px}.btn[_ngcontent-%COMP%]{background-color:#fd5602;color:#fff;height:40px;width:100px;font-size:large;transition:.3s}.btn[_ngcontent-%COMP%]:hover{background:#fd8709;color:#fff}"]}),t})();function Ex(t,e){if(1&t&&(r.Rb(0,"h4",39),r.xc(1),r.Qb()),2&t){const t=r.dc().$implicit,e=r.dc();r.Ab(1),r.Ac(" ",e.MenuItems.discount," ",null==t?null:t.discount," ")}}function xx(t,e){if(1&t){const t=r.Sb();r.Rb(0,"div",13),r.Rb(1,"div",14),r.bc("click",function(){r.rc(t);const n=e.$implicit;return r.dc().viewDetails(n.id)}),r.Nb(2,"img",15),r.Rb(3,"div",16),r.xc(4),r.Nb(5,"br"),r.vc(6,Ex,2,2,"h4",17),r.Rb(7,"button",18),r.bc("click",function(){r.rc(t);const n=e.$implicit;return r.dc().viewDetails(n.id)}),r.xc(8),r.Qb(),r.Qb(),r.Qb(),r.Rb(9,"div",19),r.Rb(10,"h2",20),r.xc(11),r.Qb(),r.Rb(12,"div",21),r.Rb(13,"h5",22),r.xc(14),r.ec(15,"currency"),r.Qb(),r.Rb(16,"i",23),r.bc("click",function(){r.rc(t);const n=e.$implicit;return r.dc().add(n)}),r.Qb(),r.Qb(),r.Rb(17,"div",24),r.Rb(18,"div",25),r.Rb(19,"div",26),r.Rb(20,"div",27),r.Rb(21,"button",28),r.xc(22," \xd7 "),r.Qb(),r.Qb(),r.Rb(23,"div",29),r.Rb(24,"div",30),r.Nb(25,"img",31),r.Qb(),r.Rb(26,"div",32),r.Rb(27,"h2",33),r.xc(28),r.Qb(),r.Rb(29,"h5",34),r.xc(30),r.Qb(),r.Rb(31,"h3",33),r.xc(32),r.ec(33,"currency"),r.Qb(),r.Rb(34,"div",35),r.Nb(35,"input",36,37),r.Rb(37,"button",38),r.bc("click",function(){r.rc(t);const e=r.qc(36);return r.dc().addToCart(e.value)}),r.xc(38," Add "),r.Qb(),r.Qb(),r.Qb(),r.Qb(),r.Qb(),r.Qb(),r.Qb(),r.Qb(),r.Qb()}if(2&t){const t=e.$implicit,n=r.dc();r.Ab(2),r.jc("src",null==t?null:t.image,r.sc),r.Ab(2),r.zc(" ",null==t?null:t.description," "),r.Ab(2),r.jc("ngIf",1==(null==t?null:t.show)),r.Ab(2),r.zc(" ",n.MenuItems.moreDetails," "),r.Ab(3),r.yc(null==t?null:t.name),r.Ab(3),r.zc(" ",r.gc(15,10,null==t?null:t.price,"EGP")," "),r.Ab(11),r.jc("src",null==n.selectedMeal?null:n.selectedMeal.image,r.sc),r.Ab(3),r.yc(null==n.selectedMeal?null:n.selectedMeal.name),r.Ab(2),r.zc(" ",null==n.selectedMeal?null:n.selectedMeal.description," "),r.Ab(2),r.zc(" ",r.gc(33,13,null==n.selectedMeal?null:n.selectedMeal.price,"EGP")," ")}}let Ix=(()=>{class t{constructor(t,e,n){this.mealService=t,this.cartService=e,this.router=n,this.name="",this.subscription=null,this.MealsList=[],this.CategoryList=[],this.AllMeals=[],this.catIndex=6,this.mID=0,this.selectedMeal={id:0,name:"",image:"",chefID:0,categoryID:0,price:0,description:"",discount:"",show:!1},this.InputCategoryID=1}ngOnInit(){this.getMenuGeneralProduct()}addToCart(t){this.cartService.addTocart(this.selectedMeal.image,this.selectedMeal.id,this.selectedMeal.name,this.selectedMeal.price,this.selectedMeal.show,this.selectedMeal.discount,parseInt(t))}ngOnChanges(){this.getMealbyCatID(),this.catIndex=6}getMenuGeneralProduct(){this.mealService.getMenuItems().subscribe(t=>{this.MenuItems=t.payload.data(),console.log(t.payload.data())},t=>{console.log(t)})}getMealbyCatID(){this.mealService.getMealByCategoryID(this.InputCategoryID,this.catIndex).subscribe(t=>{this.MealsList=[],t.forEach(t=>{this.MealsList.push(t.payload.doc.data())}),this.MealsList.forEach(t=>{console.log(t)})},t=>{console.log(t)})}getMealbyCatIDOrderByName(){localStorage.setItem("filterMenu","name"),this.mealService.getMealByCategoryIDOrderByName(this.InputCategoryID,this.catIndex).subscribe(t=>{this.MealsList=[],t.forEach(t=>{this.MealsList.push(t.payload.doc.data())}),this.MealsList.forEach(t=>{console.log(t)})},t=>{console.log(t)})}getMealbyCatIDOrderByPrice(){localStorage.setItem("filterMenu","price"),this.mealService.getMealByCategoryIDOrderByPrice(this.InputCategoryID,this.catIndex).subscribe(t=>{this.MealsList=[],t.forEach(t=>{this.MealsList.push(t.payload.doc.data())}),this.MealsList.forEach(t=>{console.log(t)})},t=>{console.log(t)})}getMealbyCatIDOrderByPriceDesc(){localStorage.setItem("filterMenu","priceDesc"),this.mealService.getMealByCategoryIDOrderByPriceDesc(this.InputCategoryID,this.catIndex).subscribe(t=>{this.MealsList=[],t.forEach(t=>{this.MealsList.push(t.payload.doc.data())}),this.MealsList.forEach(t=>{console.log(t)})},t=>{console.log(t)})}nextIndex(){this.catIndex+=6,"name"===localStorage.getItem("filterMenu")?this.getMealbyCatIDOrderByName():"price"===localStorage.getItem("filterMenu")?this.getMealbyCatIDOrderByPrice():"priceDesc"===localStorage.getItem("filterMenu")?this.getMealbyCatIDOrderByPriceDesc():this.getMealbyCatID()}ngOnDestroy(){var t;null===(t=this.subscription)||void 0===t||t.unsubscribe()}viewDetails(t){this.router.navigate(["/MealDetails",t])}add(t){this.selectedMeal&&(this.selectedMeal=t)}Search(){""!=this.name?this.MealsList=this.MealsList.filter(t=>t.name.toLowerCase().match(this.name.toLowerCase())):""===this.name&&this.ngOnChanges()}}return t.\u0275fac=function(e){return new(e||t)(r.Mb(tx),r.Mb(zE),r.Mb(jw))},t.\u0275cmp=r.Gb({type:t,selectors:[["app-menu"]],inputs:{InputCategoryID:"InputCategoryID"},features:[r.yb],decls:21,vars:7,consts:[[1,"container","d-flex","flex-row","justify-content-between"],[1,"btn-group","col-4"],["type","button","data-toggle","dropdown","aria-haspopup","true","aria-expanded","false",1,"btn","filters","dropdown-toggle"],[1,"dropdown-menu","dropdown-menu-right","col-11","text-center"],["type","button",1,"dropdown-item",3,"click"],[1,"col-5"],["type","text","placeholder","search",1,"search","form-control","rounded-pill",3,"ngModel","ngModelChange","input"],[1,"container-fluid","justify-content-center"],[1,"row","justify-content-center"],["class","col-sm-6 col-xs-12 col-xl-3 col-lg-4 col-md-4 rounded card text-center card-light","style","margin: 20px; border-color: white",4,"ngFor","ngForOf"],[1,"d-flex","flex-column","mx-auto","align-items-center"],["role","button",1,"btn","btn-link","seemore",3,"click"],[1,"fas","fa-chevron-down","seemore",3,"click"],[1,"col-sm-6","col-xs-12","col-xl-3","col-lg-4","col-md-4","rounded","card","text-center","card-light",2,"margin","20px","border-color","white"],[1,"img__wrap",3,"click"],[1,"rounded-corners","card-img-top","img__img",3,"src"],[1,"img__description"],["class","ribbon",4,"ngIf"],["type","button",1,"btn","btn-link",2,"color","white","text-align","center",3,"click"],[1,"card-body"],[1,"card-title","text-center"],[1,"container","d-flex","flex-row","justify-content-between","col-6"],[1,"card-text","text-center","prices"],["data-toggle","modal","data-target","#myModal",1,"fas","fa-shopping-cart",3,"click"],["id","myModal","role","dialog",1,"modal","fade"],[1,"modal-dialog","modal-lg"],[1,"modal-content"],[1,"modal-header"],["type","button","data-dismiss","modal",1,"close"],[1,"modal-body","d-flex","flex-row"],[1,"column"],[1,"img-fluid",3,"src"],[1,"column","d-flex","flex-column","col-lg-5"],[2,"margin-top","15px"],[2,"margin-top","25px"],[1,"d-flex","flex-row","justify-content-center",2,"margin-top","15px"],["type","number","min","1","value","1",1,"_column","product-qty","rounded-pill","col-lg-3"],["itemsCount",""],["routerLink","/Cart","data-dismiss","modal",1,"btn","add","rounded-pill","col-lg-3","btn-sm",3,"click"],[1,"ribbon"]],template:function(t,e){1&t&&(r.Nb(0,"br"),r.Rb(1,"div",0),r.Rb(2,"div",1),r.Rb(3,"button",2),r.xc(4),r.Qb(),r.Rb(5,"div",3),r.Rb(6,"button",4),r.bc("click",function(){return e.getMealbyCatIDOrderByName()}),r.xc(7),r.Qb(),r.Rb(8,"button",4),r.bc("click",function(){return e.getMealbyCatIDOrderByPrice()}),r.xc(9),r.Qb(),r.Rb(10,"button",4),r.bc("click",function(){return e.getMealbyCatIDOrderByPriceDesc()}),r.xc(11),r.Qb(),r.Qb(),r.Qb(),r.Rb(12,"div",5),r.Rb(13,"input",6),r.bc("ngModelChange",function(t){return e.name=t})("input",function(){return e.Search()}),r.Qb(),r.Qb(),r.Qb(),r.Rb(14,"div",7),r.Rb(15,"div",8),r.vc(16,xx,39,16,"div",9),r.Qb(),r.Rb(17,"div",10),r.Rb(18,"a",11),r.bc("click",function(){return e.nextIndex()}),r.xc(19),r.Qb(),r.Rb(20,"i",12),r.bc("click",function(){return e.nextIndex()}),r.Qb(),r.Qb(),r.Qb()),2&t&&(r.Ab(4),r.zc(" ",e.MenuItems.filterBy," "),r.Ab(3),r.yc(e.MenuItems.filter1),r.Ab(2),r.yc(e.MenuItems.filter2),r.Ab(2),r.yc(e.MenuItems.filter3),r.Ab(2),r.jc("ngModel",e.name),r.Ab(3),r.jc("ngForOf",e.MealsList),r.Ab(3),r.yc(e.MenuItems.button))},directives:[lC,kC,EO,dt,pt,Nw],pipes:[vt],styles:["body[_ngcontent-%COMP%]{font-family:Roboto,sans-serif}.fa-shopping-cart[_ngcontent-%COMP%]{margin-left:10px;font-size:25px;color:#fd5602;transition:.3s}.fa-shopping-cart[_ngcontent-%COMP%]:hover{cursor:pointer;color:#fd8709}.ribbon[_ngcontent-%COMP%]{position:absolute;top:0;right:0;padding:.5rem;width:100%;background:rgba(245,194,93,.7411764705882353);border-radius:30px 30px 0 0;color:#852600;text-align:center;font-family:Roboto,sans-serif;box-shadow:4px 4px 15px rgba(26,35,126,.2)}.card-title[_ngcontent-%COMP%]{color:#fd5602}.buttonColor[_ngcontent-%COMP%]{background-color:#ffaf42;color:#fff;align-items:center;height:50px;font-size:x-large}.buttonColor[_ngcontent-%COMP%], .card-body[_ngcontent-%COMP%]{display:flex;justify-content:center}.card-body[_ngcontent-%COMP%]{flex-direction:column}.card-body[_ngcontent-%COMP%], img[_ngcontent-%COMP%]{font-family:Roboto,sans-serif}img[_ngcontent-%COMP%]{width:100%;height:300px;border-radius:30px}h2[_ngcontent-%COMP%]{font-weight:700;color:#fd5602}h2[_ngcontent-%COMP%], h5[_ngcontent-%COMP%]{font-family:Roboto,sans-serif}h5[_ngcontent-%COMP%]{color:#797979;font-weight:600}.add[_ngcontent-%COMP%]{background-color:#fd5602;height:35px;margin-left:10px}.add[_ngcontent-%COMP%], .cont[_ngcontent-%COMP%]{color:#fff;transition:.3s}.cont[_ngcontent-%COMP%]{background:#fd5602}.add[_ngcontent-%COMP%]:hover, .cont[_ngcontent-%COMP%]:hover{background:#fd8709;color:#fff}button[_ngcontent-%COMP%]:hover, img[_ngcontent-%COMP%]{cursor:pointer}.img__wrap[_ngcontent-%COMP%]{position:relative;font-size:large;text-align:center;text-justify:center}.img__description[_ngcontent-%COMP%]{border-radius:30px;position:absolute;padding:20% 5%;top:0;bottom:0;left:0;right:0;background:rgba(217,205,189,.6);color:#852600;visibility:hidden;opacity:0;font-size:larger;font-weight:500;transition:opacity .2s,visibility .2s}.img__wrap[_ngcontent-%COMP%]:hover   .img__description[_ngcontent-%COMP%]{visibility:visible;opacity:1;cursor:pointer}.seemore[_ngcontent-%COMP%]{font-size:22px;color:#fd8709}.seemore[_ngcontent-%COMP%]:hover{text-decoration:none;color:#fd5602}.filter[_ngcontent-%COMP%]{color:#a9a9a9;font-size:18px}.filter[_ngcontent-%COMP%]:hover{text-decoration:none}.filter[_ngcontent-%COMP%]:focus{text-decoration:underline;line-height:1.5;border:1px solid #a9a9a9}.filters[_ngcontent-%COMP%]{font-size:x-large}.filters[_ngcontent-%COMP%], .search[_ngcontent-%COMP%]{font-family:Roboto,sans-serif;color:#000}.search[_ngcontent-%COMP%]{height:40px;font-size:large}"]}),t})(),Sx=(()=>{class t{constructor(t,e,n){this.http=t,this.db=e,this.afs=n,this.userRef=[],this.userRed=[]}getAllCategories(){return this.afs.collection("categories").doc(localStorage.getItem("lang")||"en").collection(localStorage.getItem("lang")||"en").snapshotChanges()}}return t.\u0275fac=function(e){return new(e||t)(r.Yb(iE),r.Yb(VE),r.Yb(Zm))},t.\u0275prov=r.Ib({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();function Tx(t,e){if(1&t){const t=r.Sb();r.Rb(0,"button",6),r.bc("click",function(){r.rc(t);const n=e.$implicit;return r.dc().setCatID(n.id)}),r.xc(1),r.Qb()}if(2&t){const t=e.$implicit;r.Ab(1),r.zc(" ",t.name," ")}}let Px=(()=>{class t{constructor(t,e){this.mealService=t,this.catService=e,this.CategoryList=[],this.SelectedCategory=1,this.subscription=null}setCatID(t){this.SelectedCategory=t}ngOnInit(){this.getMenuGeneralProduct(),this.getAllCategories()}getMenuGeneralProduct(){this.mealService.getMenuItems().subscribe(t=>{this.ParentMenuItems=t.payload.data()},t=>{console.log(t)})}getAllCategories(){this.CategoryList.forEach(()=>{var t=this.CategoryList.pop();console.log(t)}),this.subscription=this.catService.getAllCategories().subscribe(t=>{console.log(t.length);for(let e=0;e<t.length;e++)console.log(t[e].payload.doc.data().id),this.CategoryList.includes(t[e].payload.doc.data().id)||console.log(this.CategoryList.includes(t[e].payload.doc.data().id)),this.CategoryList.push(t[e].payload.doc.data());console.log(this.CategoryList)},t=>{console.log(t)})}}return t.\u0275fac=function(e){return new(e||t)(r.Mb(tx),r.Mb(Sx))},t.\u0275cmp=r.Gb({type:t,selectors:[["app-menu-parent"]],viewQuery:function(t,e){if(1&t&&r.Bc(Ix,1),2&t){let t;r.pc(t=r.cc())&&(e.DetailsRef=t.first)}},decls:9,vars:4,consts:[[1,"d-flex","flex-column","justify-content-center","align-items-center",2,"margin-top","100px","text-align","center"],[1,"headerElement"],["id","subTitle",1,"col-lg-6","col-md-12","col-sm-12"],[1,"d-flex","flex-row","flex-wrap","container","justify-content-between",2,"margin-top","50px"],["class","btn CatBtn rounded-pill active",3,"click",4,"ngFor","ngForOf"],[3,"InputCategoryID"],[1,"btn","CatBtn","rounded-pill","active",3,"click"]],template:function(t,e){1&t&&(r.Rb(0,"header",0),r.Rb(1,"h1"),r.Rb(2,"span",1),r.xc(3),r.Qb(),r.Qb(),r.Rb(4,"h4",2),r.xc(5),r.Qb(),r.Qb(),r.Rb(6,"div",3),r.vc(7,Tx,2,1,"button",4),r.Qb(),r.Nb(8,"app-menu",5)),2&t&&(r.Ab(3),r.yc(e.ParentMenuItems.firstHeader),r.Ab(2),r.yc(e.ParentMenuItems.secondHeader),r.Ab(2),r.jc("ngForOf",e.CategoryList),r.Ab(1),r.jc("InputCategoryID",e.SelectedCategory))},directives:[dt,Ix],styles:["h3[_ngcontent-%COMP%]{margin-right:15px;color:#3a3d3b}.container[_ngcontent-%COMP%], h3[_ngcontent-%COMP%]{font-family:Roboto,sans-serif}option[_ngcontent-%COMP%]{color:#3a3d3b}.CatBtn[_ngcontent-%COMP%]{font-family:Roboto,sans-serif;background-color:#fff;color:#fd8709;border:2px solid #fd8709;outline:none;width:140px;font-size:larger;font-weight:700;transition:.3s}.CatBtn[_ngcontent-%COMP%]:hover{cursor:pointer;box-shadow:0 12px 12px 0 rgba(0,0,0,.24),0 17px 50px 0 rgba(0,0,0,.19)}.CatBtn[_ngcontent-%COMP%]:focus, .CatBtn[_ngcontent-%COMP%]:hover{background-color:#fd8709;color:#fff;font-weight:700}.CatBtn[_ngcontent-%COMP%]:focus{outline:none}.headerElement[_ngcontent-%COMP%]{font-family:Roboto,sans-serif;color:#fd8709;font-weight:700}#subTitle[_ngcontent-%COMP%]{color:#3a3d3b;margin-top:20px}"]}),t})(),Rx=(()=>{class t{constructor(){}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=r.Gb({type:t,selectors:[["app-notfound"]],decls:2,vars:0,consts:[[1,"alert","alert-danger"]],template:function(t,e){1&t&&(r.Rb(0,"h1",0),r.xc(1,"404 not found"),r.Qb())},styles:["h1[_ngcontent-%COMP%]{margin-top:100px;text-align:center}"]}),t})(),Ax=(()=>{class t{constructor(t,e,n){this.http=t,this.db=e,this.afs=n,this.userRef=[],this.userRed=[]}getOfferItems(){return this.afs.collection("static").doc("offers").collection(localStorage.getItem("lang")||"en").doc(localStorage.getItem("lang")||"en").snapshotChanges()}getOffers(t){return this.afs.collection("meals").doc(localStorage.getItem("lang")||"en").collection(localStorage.getItem("lang")||"en",e=>e.limit(t).where("show","==",!0)).snapshotChanges()}getOffersOrderByName(t){return this.afs.collection("meals").doc(localStorage.getItem("lang")||"en").collection(localStorage.getItem("lang")||"en",e=>e.limit(t).where("show","==",!0).orderBy("name")).snapshotChanges()}getOffersOrderByPrice(t){return this.afs.collection("meals").doc(localStorage.getItem("lang")||"en").collection(localStorage.getItem("lang")||"en",e=>e.limit(t).where("show","==",!0).orderBy("price")).snapshotChanges()}getOffersOrderByPriceDesc(t){return this.afs.collection("meals").doc(localStorage.getItem("lang")||"en").collection(localStorage.getItem("lang")||"en",e=>e.limit(t).where("show","==",!0).orderBy("price","desc")).snapshotChanges()}getOffersOrderByDiscount(t){return this.afs.collection("meals").doc(localStorage.getItem("lang")||"en").collection(localStorage.getItem("lang")||"en",e=>e.limit(t).where("show","==",!0).orderBy("discount")).snapshotChanges()}getOffersOrderByDiscountDesc(t){return this.afs.collection("meals").doc(localStorage.getItem("lang")||"en").collection(localStorage.getItem("lang")||"en",e=>e.limit(t).where("show","==",!0).orderBy("discount","desc")).snapshotChanges()}}return t.\u0275fac=function(e){return new(e||t)(r.Yb(iE),r.Yb(VE),r.Yb(Zm))},t.\u0275prov=r.Ib({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();function kx(t,e){if(1&t){const t=r.Sb();r.Rb(0,"div",10),r.Rb(1,"div",11),r.Rb(2,"p",12),r.xc(3),r.Qb(),r.Rb(4,"a",13),r.Nb(5,"img",14),r.Qb(),r.Rb(6,"div",15),r.Rb(7,"h2"),r.xc(8),r.Qb(),r.Rb(9,"h5"),r.xc(10),r.Qb(),r.Rb(11,"p"),r.Rb(12,"a",16),r.bc("click",function(){r.rc(t);const n=e.$implicit;return r.dc().viewDetails(n.id)}),r.xc(13),r.Qb(),r.Qb(),r.Qb(),r.Qb(),r.Qb()}if(2&t){const t=e.$implicit,n=r.dc();r.Ab(3),r.Ac("",n.OfferItems.discount," ",null==t?null:t.discount,""),r.Ab(2),r.jc("src",null==t?null:t.image,r.sc),r.Ab(3),r.yc(null==t?null:t.name),r.Ab(2),r.zc("",null==t?null:t.price," L.E."),r.Ab(3),r.zc(" ",n.OfferItems.moreDetails," \xbb")}}function jx(t,e){1&t&&(r.Rb(0,"div"),r.xc(1," User Name is required. "),r.Qb())}function Nx(t,e){1&t&&(r.Rb(0,"div"),r.xc(1," User name must be at least 4 characters long. "),r.Qb())}function Dx(t,e){if(1&t&&(r.Rb(0,"div",19),r.vc(1,jx,2,0,"div",20),r.vc(2,Nx,2,0,"div",20),r.Qb()),2&t){const t=r.dc();r.Ab(1),r.jc("ngIf",t.userName.errors.required),r.Ab(1),r.jc("ngIf",t.userName.errors.minlength)}}function Mx(t,e){1&t&&(r.Rb(0,"div"),r.xc(1," E-mail is required. "),r.Qb())}function Lx(t,e){1&t&&(r.Rb(0,"div"),r.xc(1," Please enter a valid email address. "),r.Qb())}function Fx(t,e){if(1&t&&(r.Rb(0,"div",19),r.vc(1,Mx,2,0,"div",20),r.vc(2,Lx,2,0,"div",20),r.Qb()),2&t){const t=r.dc();r.Ab(1),r.jc("ngIf",t.email.errors.required),r.Ab(1),r.jc("ngIf",t.email.errors.email)}}function Ux(t,e){1&t&&(r.Rb(0,"div"),r.xc(1," Password is required. "),r.Qb())}function Vx(t,e){1&t&&(r.Rb(0,"div"),r.xc(1," Password must be at least 6 characters long. "),r.Qb())}function Qx(t,e){if(1&t&&(r.Rb(0,"div",19),r.vc(1,Ux,2,0,"div",20),r.vc(2,Vx,2,0,"div",20),r.Qb()),2&t){const t=r.dc();r.Ab(1),r.jc("ngIf",t.password.errors.required),r.Ab(1),r.jc("ngIf",t.password.errors.minlength)}}function Hx(t,e){1&t&&(r.Rb(0,"div"),r.xc(1," Re-enter Password is required. "),r.Qb())}function qx(t,e){if(1&t&&(r.Rb(0,"div",19),r.vc(1,Hx,2,0,"div",20),r.Qb()),2&t){const t=r.dc();r.Ab(1),r.jc("ngIf",t.rewritePass.errors.required)}}function Bx(t,e){1&t&&(r.Rb(0,"div",19),r.xc(1," Passwords didn't match. "),r.Qb())}function zx(t,e){1&t&&(r.Rb(0,"div"),r.xc(1,"First Name is required."),r.Qb())}function Gx(t,e){1&t&&(r.Rb(0,"div"),r.xc(1," Name must be at least 4 characters long. "),r.Qb())}function Wx(t,e){if(1&t&&(r.Rb(0,"div",28),r.vc(1,zx,2,0,"div",29),r.vc(2,Gx,2,0,"div",29),r.Qb()),2&t){const t=r.dc();r.Ab(1),r.jc("ngIf",t.firstName.errors.required),r.Ab(1),r.jc("ngIf",t.firstName.errors.minlength)}}function Yx(t,e){1&t&&(r.Rb(0,"div"),r.xc(1,"Last Name is required."),r.Qb())}function $x(t,e){1&t&&(r.Rb(0,"div"),r.xc(1," Name must be at least 4 characters long. "),r.Qb())}function Kx(t,e){if(1&t&&(r.Rb(0,"div",28),r.vc(1,Yx,2,0,"div",29),r.vc(2,$x,2,0,"div",29),r.Qb()),2&t){const t=r.dc();r.Ab(1),r.jc("ngIf",t.lastName.errors.required),r.Ab(1),r.jc("ngIf",t.lastName.errors.minlength)}}function Xx(t,e){1&t&&(r.Rb(0,"div"),r.xc(1," Phone number is required. "),r.Qb())}function Zx(t,e){1&t&&(r.Rb(0,"div"),r.xc(1," Please enter a valid phone number. "),r.Qb())}function Jx(t,e){if(1&t&&(r.Rb(0,"div",28),r.vc(1,Xx,2,0,"div",29),r.vc(2,Zx,2,0,"div",29),r.Qb()),2&t){const t=r.dc();r.Ab(1),r.jc("ngIf",t.phoneNumber.errors.required),r.Ab(1),r.jc("ngIf",t.phoneNumber.errors.pattern)}}const tI=[{path:"Home",component:dx},{path:"MenuParent",component:Px},{path:"Menu",component:Ix},{path:"Chefs",component:sx},{path:"Offers",component:(()=>{class t{constructor(t,e){this.offerService=t,this.router=e,this.subscription=null,this.ListOffers=[],this.offerIndex=6}ngOnInit(){this.getOffers(),this.getOfferItems()}getOfferItems(){this.offerService.getOfferItems().subscribe(t=>{this.OfferItems=t.payload.data()},t=>{console.log(t)})}getOffers(){localStorage.setItem("filter",""),this.offerService.getOffers(this.offerIndex).subscribe(t=>{this.ListOffers=[],t.forEach(t=>{this.ListOffers.push(t.payload.doc.data())})},t=>{console.log(t)})}getOffersOrderByName(){localStorage.setItem("filter","name"),this.offerService.getOffersOrderByName(this.offerIndex).subscribe(t=>{this.ListOffers=[],t.forEach(t=>{this.ListOffers.push(t.payload.doc.data())})},t=>{console.log(t)})}getOffersOrderByPrice(){localStorage.setItem("filter","price"),this.offerService.getOffersOrderByPrice(this.offerIndex).subscribe(t=>{this.ListOffers=[],t.forEach(t=>{this.ListOffers.push(t.payload.doc.data())})},t=>{console.log(t)})}getOffersOrderByPriceDesc(){localStorage.setItem("filter","priceDesc"),this.offerService.getOffersOrderByPriceDesc(this.offerIndex).subscribe(t=>{this.ListOffers=[],t.forEach(t=>{this.ListOffers.push(t.payload.doc.data())})},t=>{console.log(t)})}getOffersOrderByDiscount(){localStorage.setItem("filter","discount"),this.offerService.getOffersOrderByDiscount(this.offerIndex).subscribe(t=>{this.ListOffers=[],t.forEach(t=>{this.ListOffers.push(t.payload.doc.data())})},t=>{console.log(t)})}getOffersOrderByDiscountDesc(){localStorage.setItem("filter","discountDesc"),this.offerService.getOffersOrderByDiscountDesc(this.offerIndex).subscribe(t=>{this.ListOffers=[],t.forEach(t=>{this.ListOffers.push(t.payload.doc.data())})},t=>{console.log(t)})}nextIndex(){this.offerIndex+=6,"name"===localStorage.getItem("filter")?this.getOffersOrderByName():"price"===localStorage.getItem("filter")?this.getOffersOrderByPrice():"priceDesc"===localStorage.getItem("filter")?this.getOffersOrderByPriceDesc():"discount"===localStorage.getItem("filter")?this.getOffersOrderByDiscount():"discountDesc"===localStorage.getItem("filter")?this.getOffersOrderByDiscountDesc():this.getOffers()}ngOnDestroy(){var t;null===(t=this.subscription)||void 0===t||t.unsubscribe(),localStorage.removeItem("filter")}viewDetails(t){this.router.navigate(["/MealDetails",t])}}return t.\u0275fac=function(e){return new(e||t)(r.Mb(Ax),r.Mb(jw))},t.\u0275cmp=r.Gb({type:t,selectors:[["app-offers"]],decls:21,vars:8,consts:[[1,"mx-auto",2,"margin-top","35px"],[1,"d-flex","flex-row","justify-content-center","ml-4","mb-4","flex-wrap"],[1,"d-flex","flex-row","flex-wrap"],[1,"btn","btn-link","mr-2","ml-2","filter",3,"click"],[1,"btn","btn-link","filter",3,"click"],[1,"row","d-flex","col-lg-12","mx-auto"],["class","col-lg-4 col-md-6 col-sm-6 col-xs-12",4,"ngFor","ngForOf"],[1,"d-flex","flex-column","mx-auto","align-items-center"],["role","button",1,"btn","btn-link","seemore",3,"click"],[1,"fas","fa-chevron-down","seemore",3,"click"],[1,"col-lg-4","col-md-6","col-sm-6","col-xs-12"],[1,"card","shadow","card-light","m-2"],[1,"ribbon"],["href","#"],[1,"card-img-top",3,"src"],[1,"card-body","text-center"],["type","button",1,"btn","btn-link",2,"color","#ff8303",3,"click"]],template:function(t,e){1&t&&(r.Rb(0,"body",0),r.Rb(1,"div",1),r.Rb(2,"h3"),r.xc(3),r.Qb(),r.Rb(4,"div",2),r.Rb(5,"button",3),r.bc("click",function(){return e.getOffersOrderByName()}),r.xc(6),r.Qb(),r.Rb(7,"button",4),r.bc("click",function(){return e.getOffersOrderByPrice()}),r.xc(8),r.Qb(),r.Rb(9,"button",4),r.bc("click",function(){return e.getOffersOrderByPriceDesc()}),r.xc(10),r.Qb(),r.Rb(11,"button",4),r.bc("click",function(){return e.getOffersOrderByDiscount()}),r.xc(12),r.Qb(),r.Rb(13,"button",4),r.bc("click",function(){return e.getOffersOrderByDiscountDesc()}),r.xc(14),r.Qb(),r.Qb(),r.Qb(),r.Rb(15,"div",5),r.vc(16,kx,14,6,"div",6),r.Qb(),r.Rb(17,"div",7),r.Rb(18,"a",8),r.bc("click",function(){return e.nextIndex()}),r.xc(19),r.Qb(),r.Rb(20,"i",9),r.bc("click",function(){return e.nextIndex()}),r.Qb(),r.Qb(),r.Qb()),2&t&&(r.Ab(3),r.yc(e.OfferItems.filterBy),r.Ab(3),r.zc(" ",e.OfferItems.filter1," "),r.Ab(2),r.zc(" ",e.OfferItems.filter2," "),r.Ab(2),r.zc(" ",e.OfferItems.filter3," "),r.Ab(2),r.zc(" ",e.OfferItems.filter4," "),r.Ab(2),r.zc(" ",e.OfferItems.filter5," "),r.Ab(2),r.jc("ngForOf",e.ListOffers),r.Ab(3),r.yc(e.OfferItems.button))},directives:[dt],styles:["body[_ngcontent-%COMP%]{padding-top:3rem;color:#5a5a5a;font-family:Roboto,sans-serif;width:80%}a[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:300px;padding:0}.offer[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{width:80px}.col-lg-2[_ngcontent-%COMP%], .col-lg-3[_ngcontent-%COMP%], .col-lg-4[_ngcontent-%COMP%]{padding:0}.buttonColor[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;height:50px;font-size:x-large}.ribbon[_ngcontent-%COMP%]{position:absolute;top:0;right:-7px;padding:.5rem;width:10rem;background:#dc6600;color:#fff;text-align:center;font-family:Roboto,sans-serif;box-shadow:4px 4px 15px rgba(26,35,126,.2)}h2[_ngcontent-%COMP%]{font-weight:700}a[_ngcontent-%COMP%], h1[_ngcontent-%COMP%], h2[_ngcontent-%COMP%]{color:#fd5602}h5[_ngcontent-%COMP%]{color:#5a5a5a;font-weight:700}.dropdown-menu[_ngcontent-%COMP%]{text-align:center}.dropdown-toggle[_ngcontent-%COMP%]:hover{color:#ffaf42}.add[_ngcontent-%COMP%]{background-color:#ffaf42;color:#fff}#nav-offers[_ngcontent-%COMP%]{height:250px;overflow-y:scroll}#nav-new-tab.active[_ngcontent-%COMP%], #nav-offers-tab.active[_ngcontent-%COMP%], #nav-popular-tab.active[_ngcontent-%COMP%]{background-color:#ffaf42;color:#fff;font-weight:700}.buttonColor[_ngcontent-%COMP%]{background-color:#ffaf42;color:#fff}h1[_ngcontent-%COMP%]{font-family:sans-serif}h2[_ngcontent-%COMP%]{font-family:Roboto,sans-serif}@media (min-width:40em){.carousel-caption[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-bottom:1.25rem;font-size:1.25rem;line-height:1.4}.featurette-heading[_ngcontent-%COMP%]{font-size:50px}}@media (min-width:62em){.featurette-heading[_ngcontent-%COMP%]{margin-top:7rem}}.bd-placeholder-img[_ngcontent-%COMP%]{font-size:1.125rem;text-anchor:middle;-webkit-user-select:none;user-select:none}@media (min-width:768px){.bd-placeholder-img-lg[_ngcontent-%COMP%]{font-size:3.5rem}}.seemore[_ngcontent-%COMP%]{font-size:22px;color:#fd8709}.seemore[_ngcontent-%COMP%]:hover{text-decoration:none;color:#fd5602}.filter[_ngcontent-%COMP%]{color:#a9a9a9;font-size:18px}.filter[_ngcontent-%COMP%]:hover{text-decoration:none}.filter[_ngcontent-%COMP%]:focus{text-decoration:underline;line-height:1.5;border:1px solid #a9a9a9}"]}),t})()},{path:"Cart",component:KE},{path:"LogIn",component:wx},{path:"Signup",component:(()=>{class t{constructor(t,e){this.firebaseSignUp=t,this.route=e,this.isSignUp=!1}ngOnInit(){null!==localStorage.getItem("user")?(this.isSignUp=!0,this.route.navigate(["/CreateProfile"])):this.isSignUp=!1,this.signUpForm=new gO({userName:new pO("",[mC.required,mC.minLength(4)]),email:new pO("",[mC.email,mC.required]),password:new pO("",[mC.required,mC.minLength(6)]),rewritePass:new pO("",mC.required)})}get userName(){return this.signUpForm.get("userName")}get email(){return this.signUpForm.get("email")}get password(){return this.signUpForm.get("password")}get rewritePass(){return this.signUpForm.get("rewritePass")}onSignUp(t,e,n){return fx(this,void 0,void 0,function*(){yield this.firebaseSignUp.signUpAuthentication(e,n).then(()=>fx(this,void 0,void 0,function*(){yield this.firebaseSignUp.signUpFireStore(t,e),localStorage.setItem("username",t),this.firebaseSignUp.isLoggedIn&&(this.isSignUp=!0,window.location.reload())}))})}}return t.\u0275fac=function(e){return new(e||t)(r.Mb(px),r.Mb(jw))},t.\u0275cmp=r.Gb({type:t,selectors:[["app-signup"]],decls:32,vars:6,consts:[[1,"text-center"],[1,"form-signin",3,"formGroup"],["src","./assets/3.png","alt","","width","100px","height","75px",1,"mb-4","img-fluid"],[1,"h3","mb-3","font-weight-normal"],["for","username",1,"sr-only"],["type","text","id","inputUserName","formControlName","userName","placeholder","User Name","required","","autofocus","",1,"form-control"],["usernameSignup",""],["class","alert alert-danger",4,"ngIf"],["for","email",1,"sr-only"],["type","email","id","inputEmail","formControlName","email","placeholder","Email","required","","autofocus","",1,"form-control"],["emailSignup",""],["for","inputPassword",1,"sr-only"],["type","password","id","inputPassword","formControlName","password","placeholder","Password","required","",1,"form-control"],["passwordSignup",""],["type","password","id","RewritePassword","formControlName","rewritePass","placeholder"," Re-enter Password","required","",1,"form-control"],[1,"mb-3"],["routerLink","/LogIn"],[1,"btn","btn-lg","btn-block",3,"click"],[1,"mt-5","mb-3","text-muted"],[1,"alert","alert-danger"],[4,"ngIf"]],template:function(t,e){if(1&t){const t=r.Sb();r.Rb(0,"div",0),r.Rb(1,"form",1),r.Nb(2,"img",2),r.Rb(3,"h1",3),r.xc(4,"Please Sign up"),r.Qb(),r.Rb(5,"label",4),r.xc(6,"User Name"),r.Qb(),r.Nb(7,"input",5,6),r.vc(9,Dx,3,2,"div",7),r.Rb(10,"label",8),r.xc(11,"Email"),r.Qb(),r.Nb(12,"input",9,10),r.vc(14,Fx,3,2,"div",7),r.Rb(15,"label",11),r.xc(16,"Password"),r.Qb(),r.Nb(17,"input",12,13),r.vc(19,Qx,3,2,"div",7),r.Rb(20,"label",11),r.xc(21," Re-enter Password"),r.Qb(),r.Nb(22,"input",14),r.vc(23,qx,2,1,"div",7),r.vc(24,Bx,2,0,"div",7),r.Rb(25,"div",15),r.Rb(26,"a",16),r.xc(27,"Already have an accoount? Sign In"),r.Qb(),r.Qb(),r.Rb(28,"a",17),r.bc("click",function(){r.rc(t);const n=r.qc(8),i=r.qc(13),o=r.qc(18);return e.onSignUp(n.value,i.value,o.value)}),r.xc(29,"Sign up"),r.Qb(),r.Rb(30,"p",18),r.xc(31,"\xa9 2020"),r.Qb(),r.Qb(),r.Qb()}2&t&&(r.Ab(1),r.jc("formGroup",e.signUpForm),r.Ab(8),r.jc("ngIf",e.userName.invalid&&(e.userName.dirty||e.userName.touched)),r.Ab(5),r.jc("ngIf",e.email.invalid&&(e.email.dirty||e.email.touched)),r.Ab(5),r.jc("ngIf",e.password.invalid&&(e.password.dirty||e.password.touched)),r.Ab(4),r.jc("ngIf",e.rewritePass.invalid&&(e.rewritePass.dirty||e.rewritePass.touched)),r.Ab(1),r.jc("ngIf",e.signUpForm.value.password!==e.signUpForm.value.rewritePass))},directives:[xO,jC,TO,lC,kC,DO,LO,pt,Dw],styles:[".text-center[_ngcontent-%COMP%]{height:100%;margin-top:100px;display:flex;align-items:center;padding-top:40px;padding-bottom:40px;background-color:#fff;font-family:Roboto,sans-serif}.form-signin[_ngcontent-%COMP%]{width:100%;max-width:330px;padding:15px;margin:auto}.form-signin[_ngcontent-%COMP%]   .checkbox[_ngcontent-%COMP%]{font-weight:400}.form-signin[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]{position:relative;box-sizing:border-box;height:auto;padding:10px;font-size:16px}.form-signin[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]:focus{z-index:2}.form-signin[_ngcontent-%COMP%]   input[type=email][_ngcontent-%COMP%], .form-signin[_ngcontent-%COMP%]   input[type=text][_ngcontent-%COMP%]{margin-bottom:10px;border-bottom-right-radius:0;border-bottom-left-radius:0}.form-signin[_ngcontent-%COMP%]   input[type=password][_ngcontent-%COMP%]{margin-bottom:10px;border-top-left-radius:0;border-top-right-radius:0}.btn[_ngcontent-%COMP%]{background-color:#fd5602;color:#fff}"]}),t})()},{path:"Blog",component:BE},{path:"Checkout",component:JE},{path:"Admin",component:nC},{path:"CreateProfile",component:(()=>{class t{constructor(t,e){this.firebaseProfile=t,this.route=e,this.mobilePattern="^((\\+20-?)|0)?[0-9]{10}$",this.Username="user1"}ngOnInit(){this.Username=localStorage.getItem("username"),this.profileForm=new gO({firstName:new pO("",[mC.required,mC.minLength(4)]),lastName:new pO("",[mC.required,mC.minLength(4)]),phoneNumber:new pO("",[mC.required,mC.pattern(this.mobilePattern)]),address:new gO({street:new pO("",mC.required),governate:new pO("",mC.required),country:new pO("",mC.required)})})}get firstName(){return this.profileForm.get("firstName")}get lastName(){return this.profileForm.get("lastName")}get phoneNumber(){return this.profileForm.get("phoneNumber")}get street(){return this.profileForm.get("street")}onSubmit(){return fx(this,void 0,void 0,function*(){console.log(this.profileForm.value),yield this.firebaseProfile.profile(this.profileForm.value).then(()=>{this.route.navigate(["/Home"])}).catch(t=>{console.log(t)})})}}return t.\u0275fac=function(e){return new(e||t)(r.Mb(px),r.Mb(jw))},t.\u0275cmp=r.Gb({type:t,selectors:[["app-create-profile"]],decls:50,vars:5,consts:[[1,"container"],[2,"margin-top","100px"],[1,"col-md-8","order-md-1","secondContainer"],[1,"col-md-8","order-md-1"],[1,"form-group",3,"formGroup","ngSubmit"],[1,"mb-3"],["for","firstName "],["type","text ","formControlName","firstName","id","firstName","required","",1,"form-control"],["class","alert alert-danger",4,"ngIf"],["for","lastName "],["type","text ","formControlName","lastName","id","address ","required","",1,"form-control"],["for","mobile "],[1,"text-muted"],["type","number ","formControlName","phoneNumber","id","mobile ","placeholder","+20 ","required","",1,"form-control"],["formGroupName","address"],["for","address "],["type","text ","formControlName","street","id","address ","placeholder","1234 Main St ","required","",1,"form-control"],["for","address2 "],["type","text ","id","address2 ","placeholder","Apartment or suite ",1,"form-control"],[1,"row"],[1,"col-md-6","mb-3"],["for","country "],["formControlName","country","id","country ","required","",1,"form-control"],[1,"invalid-feedback"],["for","state "],["formControlName","governate","id","Governate ","required","",1,"form-control"],[1,"mb-4"],["type","submit ",1,"btn","btn-lg","btn-block",2,"background-color","#fd5602","color","white",3,"disabled"],[1,"alert","alert-danger"],[4,"ngIf"]],template:function(t,e){1&t&&(r.Rb(0,"div",0),r.Rb(1,"h2",1),r.xc(2,"Welcome! Please complete your profile details :)"),r.Qb(),r.Rb(3,"div",2),r.Rb(4,"div",3),r.Rb(5,"form",4),r.bc("ngSubmit",function(){return e.onSubmit()}),r.Rb(6,"div",5),r.Rb(7,"label",6),r.xc(8,"First Name"),r.Qb(),r.Nb(9,"input",7),r.vc(10,Wx,3,2,"div",8),r.Qb(),r.Rb(11,"div",5),r.Rb(12,"label",9),r.xc(13,"Last Name"),r.Qb(),r.Nb(14,"input",10),r.vc(15,Kx,3,2,"div",8),r.Qb(),r.Rb(16,"div",5),r.Rb(17,"label",11),r.xc(18,"Mobile Number "),r.Rb(19,"span",12),r.xc(20,"Please Enter your phone number"),r.Qb(),r.Qb(),r.Nb(21,"input",13),r.vc(22,Jx,3,2,"div",8),r.Qb(),r.Rb(23,"form",14),r.Rb(24,"div",5),r.Rb(25,"label",15),r.xc(26,"Address"),r.Qb(),r.Nb(27,"input",16),r.Qb(),r.Rb(28,"div",5),r.Rb(29,"label",17),r.xc(30,"Address 2 "),r.Rb(31,"span",12),r.xc(32,"(Optional)"),r.Qb(),r.Qb(),r.Nb(33,"input",18),r.Qb(),r.Rb(34,"div",19),r.Rb(35,"div",20),r.Rb(36,"label",21),r.xc(37,"Country"),r.Qb(),r.Nb(38,"input",22),r.Rb(39,"div",23),r.xc(40,"Please select a valid country."),r.Qb(),r.Qb(),r.Rb(41,"div",20),r.Rb(42,"label",24),r.xc(43,"Governate"),r.Qb(),r.Nb(44,"input",25),r.Rb(45,"div",23),r.xc(46," Please provide a valid governate. "),r.Qb(),r.Qb(),r.Qb(),r.Qb(),r.Nb(47,"hr",26),r.Rb(48,"button",27),r.xc(49," Continue to FoodCourt "),r.Qb(),r.Qb(),r.Qb(),r.Qb(),r.Qb()),2&t&&(r.Ab(5),r.jc("formGroup",e.profileForm),r.Ab(5),r.jc("ngIf",e.firstName.invalid&&(e.firstName.dirty||e.firstName.touched)),r.Ab(5),r.jc("ngIf",e.lastName.invalid&&(e.lastName.dirty||e.lastName.touched)),r.Ab(7),r.jc("ngIf",e.phoneNumber.invalid&&(e.phoneNumber.dirty||e.phoneNumber.touched)),r.Ab(26),r.jc("disabled",!e.profileForm.valid))},directives:[xO,jC,TO,lC,kC,DO,LO,pt,vO,RO],styles:[".bd-placeholder-img[_ngcontent-%COMP%]{font-size:1.125rem;text-anchor:middle;-webkit-user-select:none;user-select:none}@media (min-width:768px){.bd-placeholder-img-lg[_ngcontent-%COMP%]{font-size:3.5rem}}.container[_ngcontent-%COMP%], .secondContainer[_ngcontent-%COMP%]{background-color:#fff;display:flex;flex-direction:column;font-family:Roboto,sans-serif;color:#ff8303;justify-content:center;align-items:center;text-align:cenetr}"]}),t})()},{path:"Lastpage",component:(()=>{class t{constructor(t){this.router=t}ngOnInit(){}refresh(){this.router.navigate(["/Home"])}}return t.\u0275fac=function(e){return new(e||t)(r.Mb(jw))},t.\u0275cmp=r.Gb({type:t,selectors:[["app-lastpage"]],decls:10,vars:0,consts:[[1,"container","row"],[1,"mb-4"],[1,"contanier-fluid","justify-content-center","text-center"],[2,"margin-top","100px"],["src","/assets/giphy.gif","alt","",1,"img-fluid",2,"margin-bottom","10px"],["type","submit",1,"btn","col-6","btn-lg","btn-block",2,"background-color","#fd5602","color","white","margin-right","auto","margin-left","auto",3,"click"]],template:function(t,e){1&t&&(r.Rb(0,"div",0),r.Nb(1,"hr",1),r.Rb(2,"div",2),r.Rb(3,"h3",3),r.xc(4,"Thank you for ordering!"),r.Nb(5,"br"),r.xc(6,"Our chefs are preparing your order now happily :)"),r.Qb(),r.Nb(7,"img",4),r.Rb(8,"a",5),r.bc("click",function(){return e.refresh()}),r.xc(9,"Back to Home"),r.Qb(),r.Qb(),r.Qb())},styles:[""]}),t})()},{path:"Profile/:cID",component:ix},{path:"Dishes/:cID",component:nx},{path:"MealDetails/:mID",component:Ox},{path:"",redirectTo:"/Home",pathMatch:"full"},{path:"**",component:Rx}];let eI=(()=>{class t{}return t.\u0275mod=r.Kb({type:t}),t.\u0275inj=r.Jb({factory:function(e){return new(e||t)},imports:[[Ww.forRoot(tI)],Ww]}),t})(),nI=(()=>{class t{constructor(t){this.afs=t,this.userRef=[],this.userRed=[]}getHeaderLang(){return this.afs.collection("static").doc("header").collection(localStorage.getItem("lang")||"en").doc(localStorage.getItem("lang")||"en").snapshotChanges()}}return t.\u0275fac=function(e){return new(e||t)(r.Yb(Zm))},t.\u0275prov=r.Ib({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var rI=n("n6bG");function iI(t,e,n,r){return Object(rI.a)(n)&&(r=n,n=void 0),r?iI(t,e,n).pipe(Object(ve.a)(t=>Object(Hb.a)(t)?r(...t):r(t))):new ue.a(r=>{oI(t,e,function(t){r.next(arguments.length>1?Array.prototype.slice.call(arguments):t)},r,n)})}function oI(t,e,n,r,i){let o;if(function(t){return t&&"function"==typeof t.addEventListener&&"function"==typeof t.removeEventListener}(t)){const r=t;t.addEventListener(e,n,i),o=()=>r.removeEventListener(e,n,i)}else if(function(t){return t&&"function"==typeof t.on&&"function"==typeof t.off}(t)){const r=t;t.on(e,n),o=()=>r.off(e,n)}else if(function(t){return t&&"function"==typeof t.addListener&&"function"==typeof t.removeListener}(t)){const r=t;t.addListener(e,n),o=()=>r.removeListener(e,n)}else{if(!t||!t.length)throw new TypeError("Invalid event target");for(let o=0,s=t.length;o<s;o++)oI(t[o],e,n,r,i)}r.add(o)}var sI=n("Y7HM");function aI(t){const{index:e,period:n,subscriber:r}=t;if(r.next(e),!r.closed){if(-1===n)return r.complete();t.index=e+1,this.schedule(t,n)}}class uI{call(t,e){return e.subscribe(new cI(t))}}class cI extends qb{constructor(t){super(t),this.hasFirst=!1,this.observables=[],this.subscriptions=[]}_next(t){this.observables.push(t)}_complete(){const t=this.observables,e=t.length;if(0===e)this.destination.complete();else{for(let n=0;n<e&&!this.hasFirst;n++){const e=Gb(this,t[n],void 0,n);this.subscriptions&&this.subscriptions.push(e),this.add(e)}this.observables=null}}notifyNext(t,e,n){if(!this.hasFirst){this.hasFirst=!0;for(let t=0;t<this.subscriptions.length;t++)if(t!==n){let e=this.subscriptions[t];e.unsubscribe(),this.remove(e)}this.subscriptions=null}this.destination.next(e)}}n("KqfI");var lI=n("Lhse");function hI(...t){const e=t[t.length-1];return"function"==typeof e&&t.pop(),Object(Wb.a)(t,void 0).lift(new dI(e))}class dI{constructor(t){this.resultSelector=t}call(t,e){return e.subscribe(new fI(t,this.resultSelector))}}class fI extends ge.a{constructor(t,e,n=Object.create(null)){super(t),this.resultSelector=e,this.iterators=[],this.active=0,this.resultSelector="function"==typeof e?e:void 0}_next(t){const e=this.iterators;Object(Hb.a)(t)?e.push(new gI(t)):e.push("function"==typeof t[lI.a]?new pI(t[lI.a]()):new mI(this.destination,this,t))}_complete(){const t=this.iterators,e=t.length;if(this.unsubscribe(),0!==e){this.active=e;for(let n=0;n<e;n++){let e=t[n];e.stillUnsubscribed?this.destination.add(e.subscribe()):this.active--}}else this.destination.complete()}notifyInactive(){this.active--,0===this.active&&this.destination.complete()}checkIterators(){const t=this.iterators,e=t.length,n=this.destination;for(let o=0;o<e;o++){let e=t[o];if("function"==typeof e.hasValue&&!e.hasValue())return}let r=!1;const i=[];for(let o=0;o<e;o++){let e=t[o],s=e.next();if(e.hasCompleted()&&(r=!0),s.done)return void n.complete();i.push(s.value)}this.resultSelector?this._tryresultSelector(i):n.next(i),r&&n.complete()}_tryresultSelector(t){let e;try{e=this.resultSelector.apply(this,t)}catch(n){return void this.destination.error(n)}this.destination.next(e)}}class pI{constructor(t){this.iterator=t,this.nextResult=t.next()}hasValue(){return!0}next(){const t=this.nextResult;return this.nextResult=this.iterator.next(),t}hasCompleted(){const t=this.nextResult;return Boolean(t&&t.done)}}class gI{constructor(t){this.array=t,this.index=0,this.length=0,this.length=t.length}[lI.a](){return this}next(t){const e=this.index++;return e<this.length?{value:this.array[e],done:!1}:{value:null,done:!0}}hasValue(){return this.array.length>this.index}hasCompleted(){return this.array.length===this.index}}class mI extends nm.b{constructor(t,e,n){super(t),this.parent=e,this.observable=n,this.stillUnsubscribed=!0,this.buffer=[],this.isComplete=!1}[lI.a](){return this}next(){const t=this.buffer;return 0===t.length&&this.isComplete?{value:null,done:!0}:{value:t.shift(),done:!1}}hasValue(){return this.buffer.length>0}hasCompleted(){return 0===this.buffer.length&&this.isComplete}notifyComplete(){this.buffer.length>0?(this.isComplete=!0,this.parent.notifyInactive()):this.destination.complete()}notifyNext(t){this.buffer.push(t),this.parent.checkIterators()}subscribe(){return Object(nm.c)(this.observable,new nm.a(this))}}function yI(t){return e=>e.lift(new bI(t))}class bI{constructor(t){this.notifier=t}call(t,e){const n=new vI(t),r=Object(nm.c)(this.notifier,new nm.a(n));return r&&!n.seenValue?(n.add(r),e.subscribe(n)):n}}class vI extends nm.b{constructor(t){super(t),this.seenValue=!1}notifyNext(){this.seenValue=!0,this.complete()}notifyComplete(){}}n("WMd4");const _I=["*"],wI=["dialog"];function CI(t){return null!=t}function OI(t){return(t||document.body).offsetHeight}"undefined"==typeof Element||Element.prototype.closest||(Element.prototype.matches||(Element.prototype.matches=Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector),Element.prototype.closest=function(t){let e=this;if(!document.documentElement.contains(e))return null;do{if(e.matches(t))return e;e=e.parentElement||e.parentNode}while(null!==e&&1===e.nodeType);return null});const EI={animation:!0,transitionTimerDelayMs:5};let xI=(()=>{class t{constructor(){this.animation=EI.animation}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=Object(r.Ib)({factory:function(){return new t},token:t,providedIn:"root"}),t})();const II=()=>{},{transitionTimerDelayMs:SI}=EI,TI=new Map,PI=(t,e,n,r)=>{let i=r.context||{};const o=TI.get(e);if(o)switch(r.runningTransition){case"continue":return gm.a;case"stop":t.run(()=>o.transition$.complete()),i=Object.assign(o.context,i),TI.delete(e)}const s=n(e,r.animation,i)||II;if(!r.animation||"none"===window.getComputedStyle(e).transitionProperty)return t.run(()=>s()),Object(le.a)(void 0).pipe(function(t){return e=>new ue.a(n=>e.subscribe(e=>t.run(()=>n.next(e)),e=>t.run(()=>n.error(e)),()=>t.run(()=>n.complete())))}(t));const a=new te.a,u=new te.a,c=a.pipe(function(...t){return e=>de(e,Object(le.a)(...t))}(!0));TI.set(e,{transition$:a,complete:()=>{u.next(),u.complete()},context:i});const l=function(t){const{transitionDelay:e,transitionDuration:n}=window.getComputedStyle(t);return 1e3*(parseFloat(e)+parseFloat(n))}(e);return t.runOutsideAngular(()=>{const n=iI(e,"transitionend").pipe(yI(c),Ie(({target:t})=>t===e));(function(...t){if(1===t.length){if(!Object(Hb.a)(t[0]))return t[0];t=t[0]}return Object(Wb.a)(t,void 0).lift(new uI)})(function(t=0,e,n){let r=-1;return Object(sI.a)(e)?r=Number(e)<1?1:Number(e):Object(fe.a)(e)&&(n=e),Object(fe.a)(n)||(n=ae.a),new ue.a(e=>{const i=Object(sI.a)(t)?t:+t-n.now();return n.schedule(aI,i,{index:0,period:r,subscriber:e})})}(l+SI).pipe(yI(c)),n,u).pipe(yI(c)).subscribe(()=>{TI.delete(e),t.run(()=>{s(),a.next(),a.complete()})})}),a.asObservable()};let RI=(()=>{class t{}return t.\u0275mod=r.Kb({type:t}),t.\u0275inj=r.Jb({factory:function(e){return new(e||t)},imports:[[_t]]}),t})(),AI=(()=>{class t{}return t.\u0275mod=r.Kb({type:t}),t.\u0275inj=r.Jb({factory:function(e){return new(e||t)},imports:[[_t]]}),t})(),kI=(()=>{class t{}return t.\u0275mod=r.Kb({type:t}),t.\u0275inj=r.Jb({factory:function(e){return new(e||t)}}),t})(),jI=(()=>{class t{}return t.\u0275mod=r.Kb({type:t}),t.\u0275inj=r.Jb({factory:function(e){return new(e||t)},imports:[[_t]]}),t})(),NI=(()=>{class t{}return t.\u0275mod=r.Kb({type:t}),t.\u0275inj=r.Jb({factory:function(e){return new(e||t)}}),t})();var DI=function(t){return t[t.Tab=9]="Tab",t[t.Enter=13]="Enter",t[t.Escape=27]="Escape",t[t.Space=32]="Space",t[t.PageUp=33]="PageUp",t[t.PageDown=34]="PageDown",t[t.End=35]="End",t[t.Home=36]="Home",t[t.ArrowLeft=37]="ArrowLeft",t[t.ArrowUp=38]="ArrowUp",t[t.ArrowRight=39]="ArrowRight",t[t.ArrowDown=40]="ArrowDown",t}({});"undefined"!=typeof navigator&&navigator.userAgent&&(/iPad|iPhone|iPod/.test(navigator.userAgent)||/Macintosh/.test(navigator.userAgent)&&navigator.maxTouchPoints&&navigator.maxTouchPoints>2||/Android/.test(navigator.userAgent));const MI=["a[href]","button:not([disabled])",'input:not([disabled]):not([type="hidden"])',"select:not([disabled])","textarea:not([disabled])","[contenteditable]",'[tabindex]:not([tabindex="-1"])'].join(", ");function LI(t){const e=Array.from(t.querySelectorAll(MI)).filter(t=>-1!==t.tabIndex);return[e[0],e[e.length-1]]}new class{getAllStyles(t){return window.getComputedStyle(t)}getStyle(t,e){return this.getAllStyles(t)[e]}isStaticPositioned(t){return"static"===(this.getStyle(t,"position")||"static")}offsetParent(t){let e=t.offsetParent||document.documentElement;for(;e&&e!==document.documentElement&&this.isStaticPositioned(e);)e=e.offsetParent;return e||document.documentElement}position(t,e=!0){let n,r={width:0,height:0,top:0,bottom:0,left:0,right:0};if("fixed"===this.getStyle(t,"position"))n=t.getBoundingClientRect(),n={top:n.top,bottom:n.bottom,left:n.left,right:n.right,height:n.height,width:n.width};else{const e=this.offsetParent(t);n=this.offset(t,!1),e!==document.documentElement&&(r=this.offset(e,!1)),r.top+=e.clientTop,r.left+=e.clientLeft}return n.top-=r.top,n.bottom-=r.top,n.left-=r.left,n.right-=r.left,e&&(n.top=Math.round(n.top),n.bottom=Math.round(n.bottom),n.left=Math.round(n.left),n.right=Math.round(n.right)),n}offset(t,e=!0){const n=t.getBoundingClientRect(),r=window.pageYOffset-document.documentElement.clientTop,i=window.pageXOffset-document.documentElement.clientLeft;let o={height:n.height||t.offsetHeight,width:n.width||t.offsetWidth,top:n.top+r,bottom:n.bottom+r,left:n.left+i,right:n.right+i};return e&&(o.height=Math.round(o.height),o.width=Math.round(o.width),o.top=Math.round(o.top),o.bottom=Math.round(o.bottom),o.left=Math.round(o.left),o.right=Math.round(o.right)),o}positionElements(t,e,n,r){const[i="top",o="center"]=n.split("-"),s=r?this.offset(t,!1):this.position(t,!1),a=this.getAllStyles(e),u=parseFloat(a.marginTop),c=parseFloat(a.marginBottom),l=parseFloat(a.marginLeft),h=parseFloat(a.marginRight);let d=0,f=0;switch(i){case"top":d=s.top-(e.offsetHeight+u+c);break;case"bottom":d=s.top+s.height;break;case"left":f=s.left-(e.offsetWidth+l+h);break;case"right":f=s.left+s.width}switch(o){case"top":d=s.top;break;case"bottom":d=s.top+s.height-e.offsetHeight;break;case"left":f=s.left;break;case"right":f=s.left+s.width-e.offsetWidth;break;case"center":"top"===i||"bottom"===i?f=s.left+s.width/2-e.offsetWidth/2:d=s.top+s.height/2-e.offsetHeight/2}e.style.transform=`translate(${Math.round(f)}px, ${Math.round(d)}px)`;const p=e.getBoundingClientRect(),g=document.documentElement,m=window.innerHeight||g.clientHeight,y=window.innerWidth||g.clientWidth;return p.left>=0&&p.top>=0&&p.right<=y&&p.bottom<=m}},new Date(1882,10,12),new Date(2174,10,25);let FI=(()=>{class t{}return t.\u0275mod=r.Kb({type:t}),t.\u0275inj=r.Jb({factory:function(e){return new(e||t)},imports:[[_t,VO]]}),t})(),UI=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=r.Hb({type:t,selectors:[["",8,"navbar"]]}),t})(),VI=(()=>{class t{}return t.\u0275mod=r.Kb({type:t}),t.\u0275inj=r.Jb({factory:function(e){return new(e||t)}}),t})(),QI=(()=>{class t{constructor(t){this._ngbConfig=t,this.backdrop=!0,this.keyboard=!0}get animation(){return void 0===this._animation?this._ngbConfig.animation:this._animation}set animation(t){this._animation=t}}return t.\u0275fac=function(e){return new(e||t)(r.Yb(xI))},t.\u0275prov=Object(r.Ib)({factory:function(){return new t(Object(r.Yb)(xI))},token:t,providedIn:"root"}),t})();class HI{constructor(t,e,n){this.nodes=t,this.viewRef=e,this.componentRef=n}}const qI=()=>{};let BI=(()=>{class t{constructor(t){this._document=t}compensate(){const t=this._getWidth();return this._isPresent(t)?this._adjustBody(t):qI}_adjustBody(t){const e=this._document.body,n=e.style.paddingRight,r=parseFloat(window.getComputedStyle(e)["padding-right"]);return e.style["padding-right"]=`${r+t}px`,()=>e.style["padding-right"]=n}_isPresent(t){const e=this._document.body.getBoundingClientRect();return window.innerWidth-(e.left+e.right)>=t-.1*t}_getWidth(){const t=this._document.createElement("div");t.className="modal-scrollbar-measure";const e=this._document.body;e.appendChild(t);const n=t.getBoundingClientRect().width-t.clientWidth;return e.removeChild(t),n}}return t.\u0275fac=function(e){return new(e||t)(r.Yb(s))},t.\u0275prov=Object(r.Ib)({factory:function(){return new t(Object(r.Yb)(s))},token:t,providedIn:"root"}),t})(),zI=(()=>{class t{constructor(t,e){this._el=t,this._zone=e}ngOnInit(){this._zone.onStable.asObservable().pipe(mm(1)).subscribe(()=>{PI(this._zone,this._el.nativeElement,(t,e)=>{e&&OI(t),t.classList.add("show")},{animation:this.animation,runningTransition:"continue"})})}hide(){return PI(this._zone,this._el.nativeElement,({classList:t})=>t.remove("show"),{animation:this.animation,runningTransition:"stop"})}}return t.\u0275fac=function(e){return new(e||t)(r.Mb(r.l),r.Mb(r.A))},t.\u0275cmp=r.Gb({type:t,selectors:[["ngb-modal-backdrop"]],hostAttrs:[2,"z-index","1050"],hostVars:6,hostBindings:function(t,e){2&t&&(r.Cb("modal-backdrop"+(e.backdropClass?" "+e.backdropClass:"")),r.Eb("show",!e.animation)("fade",e.animation))},inputs:{animation:"animation",backdropClass:"backdropClass"},decls:0,vars:0,template:function(t,e){},encapsulation:2}),t})();class GI{close(t){}dismiss(t){}}class WI{constructor(t,e,n,r){this._windowCmptRef=t,this._contentRef=e,this._backdropCmptRef=n,this._beforeDismiss=r,this._closed=new te.a,this._dismissed=new te.a,this._hidden=new te.a,t.instance.dismissEvent.subscribe(t=>{this.dismiss(t)}),this.result=new Promise((t,e)=>{this._resolve=t,this._reject=e}),this.result.then(null,()=>{})}get componentInstance(){if(this._contentRef&&this._contentRef.componentRef)return this._contentRef.componentRef.instance}get closed(){return this._closed.asObservable().pipe(yI(this._hidden))}get dismissed(){return this._dismissed.asObservable().pipe(yI(this._hidden))}get hidden(){return this._hidden.asObservable()}get shown(){return this._windowCmptRef.instance.shown.asObservable()}close(t){this._windowCmptRef&&(this._closed.next(t),this._resolve(t),this._removeModalElements())}_dismiss(t){this._dismissed.next(t),this._reject(t),this._removeModalElements()}dismiss(t){if(this._windowCmptRef)if(this._beforeDismiss){const e=this._beforeDismiss();e&&e.then?e.then(e=>{!1!==e&&this._dismiss(t)},()=>{}):!1!==e&&this._dismiss(t)}else this._dismiss(t)}_removeModalElements(){const t=this._windowCmptRef.instance.hide(),e=this._backdropCmptRef?this._backdropCmptRef.instance.hide():Object(le.a)(void 0);t.subscribe(()=>{const{nativeElement:t}=this._windowCmptRef.location;t.parentNode.removeChild(t),this._windowCmptRef.destroy(),this._contentRef&&this._contentRef.viewRef&&this._contentRef.viewRef.destroy(),this._windowCmptRef=null,this._contentRef=null}),e.subscribe(()=>{if(this._backdropCmptRef){const{nativeElement:t}=this._backdropCmptRef.location;t.parentNode.removeChild(t),this._backdropCmptRef.destroy(),this._backdropCmptRef=null}}),hI(t,e).subscribe(()=>{this._hidden.next(),this._hidden.complete()})}}var YI=function(t){return t[t.BACKDROP_CLICK=0]="BACKDROP_CLICK",t[t.ESC=1]="ESC",t}({});let $I=(()=>{class t{constructor(t,e,n){this._document=t,this._elRef=e,this._zone=n,this._closed$=new te.a,this._elWithFocus=null,this.backdrop=!0,this.keyboard=!0,this.dismissEvent=new r.n,this.shown=new te.a,this.hidden=new te.a}dismiss(t){this.dismissEvent.emit(t)}ngOnInit(){this._elWithFocus=this._document.activeElement}ngAfterViewInit(){this._show()}ngOnDestroy(){this._disableEventHandling()}hide(){const{nativeElement:t}=this._elRef,e={animation:this.animation,runningTransition:"stop"},n=hI(PI(this._zone,t,()=>t.classList.remove("show"),e),PI(this._zone,this._dialogEl.nativeElement,()=>{},e));return n.subscribe(()=>{this.hidden.next(),this.hidden.complete()}),this._disableEventHandling(),this._restoreFocus(),n}_show(){const t={animation:this.animation,runningTransition:"continue"};hI(PI(this._zone,this._elRef.nativeElement,(t,e)=>{e&&OI(t),t.classList.add("show")},t),PI(this._zone,this._dialogEl.nativeElement,()=>{},t)).subscribe(()=>{this.shown.next(),this.shown.complete()}),this._enableEventHandling(),this._setFocus()}_enableEventHandling(){const{nativeElement:t}=this._elRef;this._zone.runOutsideAngular(()=>{iI(t,"keydown").pipe(yI(this._closed$),Ie(t=>t.which===DI.Escape)).subscribe(t=>{this.keyboard?requestAnimationFrame(()=>{t.defaultPrevented||this._zone.run(()=>this.dismiss(YI.ESC))}):"static"===this.backdrop&&this._bumpBackdrop()});let e=!1;iI(this._dialogEl.nativeElement,"mousedown").pipe(yI(this._closed$),Object(sv.a)(()=>e=!1),rm(()=>iI(t,"mouseup").pipe(yI(this._closed$),mm(1))),Ie(({target:e})=>t===e)).subscribe(()=>{e=!0}),iI(t,"click").pipe(yI(this._closed$)).subscribe(({target:n})=>{t===n&&("static"===this.backdrop?this._bumpBackdrop():!0!==this.backdrop||e||this._zone.run(()=>this.dismiss(YI.BACKDROP_CLICK))),e=!1})})}_disableEventHandling(){this._closed$.next()}_setFocus(){const{nativeElement:t}=this._elRef;if(!t.contains(document.activeElement)){const e=t.querySelector("[ngbAutofocus]"),n=LI(t)[0];(e||n||t).focus()}}_restoreFocus(){const t=this._document.body,e=this._elWithFocus;let n;n=e&&e.focus&&t.contains(e)?e:t,this._zone.runOutsideAngular(()=>{setTimeout(()=>n.focus()),this._elWithFocus=null})}_bumpBackdrop(){"static"===this.backdrop&&PI(this._zone,this._elRef.nativeElement,({classList:t})=>(t.add("modal-static"),()=>t.remove("modal-static")),{animation:this.animation,runningTransition:"continue"})}}return t.\u0275fac=function(e){return new(e||t)(r.Mb(s),r.Mb(r.l),r.Mb(r.A))},t.\u0275cmp=r.Gb({type:t,selectors:[["ngb-modal-window"]],viewQuery:function(t,e){if(1&t&&r.Bc(wI,3),2&t){let t;r.pc(t=r.cc())&&(e._dialogEl=t.first)}},hostAttrs:["role","dialog","tabindex","-1"],hostVars:7,hostBindings:function(t,e){2&t&&(r.Bb("aria-modal",!0)("aria-labelledby",e.ariaLabelledBy)("aria-describedby",e.ariaDescribedBy),r.Cb("modal d-block"+(e.windowClass?" "+e.windowClass:"")),r.Eb("fade",e.animation))},inputs:{backdrop:"backdrop",keyboard:"keyboard",animation:"animation",ariaLabelledBy:"ariaLabelledBy",ariaDescribedBy:"ariaDescribedBy",centered:"centered",scrollable:"scrollable",size:"size",windowClass:"windowClass"},outputs:{dismissEvent:"dismiss"},ngContentSelectors:_I,decls:4,vars:2,consts:[["role","document"],["dialog",""],[1,"modal-content"]],template:function(t,e){1&t&&(r.ic(),r.Rb(0,"div",0,1),r.Rb(2,"div",2),r.hc(3),r.Qb(),r.Qb()),2&t&&r.Cb("modal-dialog"+(e.size?" modal-"+e.size:"")+(e.centered?" modal-dialog-centered":"")+(e.scrollable?" modal-dialog-scrollable":""))},styles:["ngb-modal-window .component-host-scrollable{display:flex;flex-direction:column;overflow:hidden}"],encapsulation:2}),t})(),KI=(()=>{class t{constructor(t,e,n,i,o,s){this._applicationRef=t,this._injector=e,this._document=n,this._scrollBar=i,this._rendererFactory=o,this._ngZone=s,this._activeWindowCmptHasChanged=new te.a,this._ariaHiddenValues=new Map,this._backdropAttributes=["animation","backdropClass"],this._modalRefs=[],this._windowAttributes=["animation","ariaLabelledBy","ariaDescribedBy","backdrop","centered","keyboard","scrollable","size","windowClass"],this._windowCmpts=[],this._activeInstances=new r.n,this._activeWindowCmptHasChanged.subscribe(()=>{if(this._windowCmpts.length){const t=this._windowCmpts[this._windowCmpts.length-1];((t,e,n,r=!1)=>{this._ngZone.runOutsideAngular(()=>{const t=iI(e,"focusin").pipe(yI(n),Object(ve.a)(t=>t.target));iI(e,"keydown").pipe(yI(n),Ie(t=>t.which===DI.Tab),wE(t)).subscribe(([t,n])=>{const[r,i]=LI(e);n!==r&&n!==e||!t.shiftKey||(i.focus(),t.preventDefault()),n!==i||t.shiftKey||(r.focus(),t.preventDefault())}),r&&iI(e,"click").pipe(yI(n),wE(t),Object(ve.a)(t=>t[1])).subscribe(t=>t.focus())})})(0,t.location.nativeElement,this._activeWindowCmptHasChanged),this._revertAriaHidden(),this._setAriaHidden(t.location.nativeElement)}})}open(t,e,n,r){const i=r.container instanceof HTMLElement?r.container:CI(r.container)?this._document.querySelector(r.container):this._document.body,o=this._rendererFactory.createRenderer(null,null),s=this._scrollBar.compensate(),a=()=>{this._modalRefs.length||(o.removeClass(this._document.body,"modal-open"),this._revertAriaHidden())};if(!i)throw new Error(`The specified modal container "${r.container||"body"}" was not found in the DOM.`);const u=new GI,c=this._getContentRef(t,r.injector||e,n,u,r);let l=!1!==r.backdrop?this._attachBackdrop(t,i):void 0,h=this._attachWindowComponent(t,i,c),d=new WI(h,c,l,r.beforeDismiss);return this._registerModalRef(d),this._registerWindowCmpt(h),d.result.then(s,s),d.result.then(a,a),u.close=t=>{d.close(t)},u.dismiss=t=>{d.dismiss(t)},this._applyWindowOptions(h.instance,r),1===this._modalRefs.length&&o.addClass(this._document.body,"modal-open"),l&&l.instance&&this._applyBackdropOptions(l.instance,r),d}get activeInstances(){return this._activeInstances}dismissAll(t){this._modalRefs.forEach(e=>e.dismiss(t))}hasOpenModals(){return this._modalRefs.length>0}_attachBackdrop(t,e){let n=t.resolveComponentFactory(zI).create(this._injector);return this._applicationRef.attachView(n.hostView),e.appendChild(n.location.nativeElement),n}_attachWindowComponent(t,e,n){let r=t.resolveComponentFactory($I).create(this._injector,n.nodes);return this._applicationRef.attachView(r.hostView),e.appendChild(r.location.nativeElement),r}_applyWindowOptions(t,e){this._windowAttributes.forEach(n=>{CI(e[n])&&(t[n]=e[n])})}_applyBackdropOptions(t,e){this._backdropAttributes.forEach(n=>{CI(e[n])&&(t[n]=e[n])})}_getContentRef(t,e,n,i,o){return n?n instanceof r.L?this._createFromTemplateRef(n,i):"string"==typeof n?this._createFromString(n):this._createFromComponent(t,e,n,i,o):new HI([])}_createFromTemplateRef(t,e){const n=t.createEmbeddedView({$implicit:e,close(t){e.close(t)},dismiss(t){e.dismiss(t)}});return this._applicationRef.attachView(n),new HI([n.rootNodes],n)}_createFromString(t){const e=this._document.createTextNode(`${t}`);return new HI([[e]])}_createFromComponent(t,e,n,i,o){const s=t.resolveComponentFactory(n),a=r.s.create({providers:[{provide:GI,useValue:i}],parent:e}),u=s.create(a),c=u.location.nativeElement;return o.scrollable&&c.classList.add("component-host-scrollable"),this._applicationRef.attachView(u.hostView),new HI([[c]],u.hostView,u)}_setAriaHidden(t){const e=t.parentElement;e&&t!==this._document.body&&(Array.from(e.children).forEach(e=>{e!==t&&"SCRIPT"!==e.nodeName&&(this._ariaHiddenValues.set(e,e.getAttribute("aria-hidden")),e.setAttribute("aria-hidden","true"))}),this._setAriaHidden(e))}_revertAriaHidden(){this._ariaHiddenValues.forEach((t,e)=>{t?e.setAttribute("aria-hidden",t):e.removeAttribute("aria-hidden")}),this._ariaHiddenValues.clear()}_registerModalRef(t){const e=()=>{const e=this._modalRefs.indexOf(t);e>-1&&(this._modalRefs.splice(e,1),this._activeInstances.emit(this._modalRefs))};this._modalRefs.push(t),this._activeInstances.emit(this._modalRefs),t.result.then(e,e)}_registerWindowCmpt(t){this._windowCmpts.push(t),this._activeWindowCmptHasChanged.next(),t.onDestroy(()=>{const e=this._windowCmpts.indexOf(t);e>-1&&(this._windowCmpts.splice(e,1),this._activeWindowCmptHasChanged.next())})}}return t.\u0275fac=function(e){return new(e||t)(r.Yb(r.g),r.Yb(r.s),r.Yb(s),r.Yb(BI),r.Yb(r.F),r.Yb(r.A))},t.\u0275prov=Object(r.Ib)({factory:function(){return new t(Object(r.Yb)(r.g),Object(r.Yb)(r.o),Object(r.Yb)(s),Object(r.Yb)(BI),Object(r.Yb)(r.F),Object(r.Yb)(r.A))},token:t,providedIn:"root"}),t})(),XI=(()=>{class t{constructor(t,e,n,r){this._moduleCFR=t,this._injector=e,this._modalStack=n,this._config=r}open(t,e={}){const n=Object.assign(Object.assign(Object.assign({},this._config),{animation:this._config.animation}),e);return this._modalStack.open(this._moduleCFR,this._injector,t,n)}get activeInstances(){return this._modalStack.activeInstances}dismissAll(t){this._modalStack.dismissAll(t)}hasOpenModals(){return this._modalStack.hasOpenModals()}}return t.\u0275fac=function(e){return new(e||t)(r.Yb(r.j),r.Yb(r.s),r.Yb(KI),r.Yb(QI))},t.\u0275prov=Object(r.Ib)({factory:function(){return new t(Object(r.Yb)(r.j),Object(r.Yb)(r.o),Object(r.Yb)(KI),Object(r.Yb)(QI))},token:t,providedIn:"root"}),t})(),ZI=(()=>{class t{}return t.\u0275mod=r.Kb({type:t}),t.\u0275inj=r.Jb({factory:function(e){return new(e||t)},providers:[XI]}),t})(),JI=(()=>{class t{}return t.\u0275mod=r.Kb({type:t}),t.\u0275inj=r.Jb({factory:function(e){return new(e||t)},imports:[[_t]]}),t})(),tS=(()=>{class t{}return t.\u0275mod=r.Kb({type:t}),t.\u0275inj=r.Jb({factory:function(e){return new(e||t)},imports:[[_t]]}),t})(),eS=(()=>{class t{}return t.\u0275mod=r.Kb({type:t}),t.\u0275inj=r.Jb({factory:function(e){return new(e||t)},imports:[[_t]]}),t})(),nS=(()=>{class t{}return t.\u0275mod=r.Kb({type:t}),t.\u0275inj=r.Jb({factory:function(e){return new(e||t)},imports:[[_t]]}),t})(),rS=(()=>{class t{}return t.\u0275mod=r.Kb({type:t}),t.\u0275inj=r.Jb({factory:function(e){return new(e||t)},imports:[[_t]]}),t})(),iS=(()=>{class t{}return t.\u0275mod=r.Kb({type:t}),t.\u0275inj=r.Jb({factory:function(e){return new(e||t)},imports:[[_t]]}),t})(),oS=(()=>{class t{}return t.\u0275mod=r.Kb({type:t}),t.\u0275inj=r.Jb({factory:function(e){return new(e||t)},imports:[[_t]]}),t})(),sS=(()=>{class t{}return t.\u0275mod=r.Kb({type:t}),t.\u0275inj=r.Jb({factory:function(e){return new(e||t)}}),t})();new r.r("live announcer delay",{providedIn:"root",factory:function(){return 100}});let aS=(()=>{class t{}return t.\u0275mod=r.Kb({type:t}),t.\u0275inj=r.Jb({factory:function(e){return new(e||t)},imports:[[_t]]}),t})();const uS=[RI,AI,kI,jI,NI,FI,VI,ZI,JI,tS,eS,nS,rS,iS,oS,sS,aS];let cS=(()=>{class t{}return t.\u0275mod=r.Kb({type:t}),t.\u0275inj=r.Jb({factory:function(e){return new(e||t)},imports:[uS,RI,AI,kI,jI,NI,FI,VI,ZI,JI,tS,eS,nS,rS,iS,oS,sS,aS]}),t})();function lS(t,e){if(1&t){const t=r.Sb();r.Rb(0,"div",22),r.Rb(1,"a",27),r.bc("click",function(){return r.rc(t),r.dc().logout()}),r.xc(2),r.Qb(),r.Qb()}if(2&t){const t=r.dc();r.Ab(2),r.yc(t.HeaderItems.logout)}}function hS(t,e){if(1&t&&(r.Rb(0,"div",22),r.Rb(1,"a",28),r.xc(2),r.Qb(),r.Rb(3,"a",29),r.xc(4),r.Qb(),r.Qb()),2&t){const t=r.dc();r.Ab(2),r.yc(t.HeaderItems.login),r.Ab(2),r.yc(t.HeaderItems.register)}}let dS=(()=>{class t{constructor(t,e,n){this.firebaselogout=t,this.headerLang=e,this.route=n,this.isUserlogged=localStorage.getItem("user"),this.isLogout=new r.n}ngOnInit(){this.getHeaderLang()}changeLang(t){localStorage.setItem("lang",t),window.location.reload()}getHeaderLang(){this.headerLang.getHeaderLang().subscribe(t=>{this.HeaderItems=t.payload.data()},t=>{console.log(t)})}logout(){localStorage.removeItem("user"),this.firebaselogout.logout(),this.isLogout.emit(),this.route.navigate(["/Home"]),window.location.reload()}}return t.\u0275fac=function(e){return new(e||t)(r.Mb(px),r.Mb(nI),r.Mb(jw))},t.\u0275cmp=r.Gb({type:t,selectors:[["app-header"]],outputs:{isLogout:"isLogout"},decls:46,vars:8,consts:[[1,"navbar","navbar-expand-md","fixed-top",2,"background-color","white","box-shadow","4px 4px 10px rgba(165, 166, 175, 0.2)"],[1,"container-fluid","d-flex"],["type","button","data-toggle","collapse","data-target","#collapsibleNavbar",1,"navbar-toggler",2,"color","#ffaf42"],[1,"navbar-toggler-icon"],[1,"fa","fa-bars"],["routerLink","/Home",1,"navbar-brand","mr-auto","pl-3"],["src","assets/3.png",2,"height","40px","width","70px"],["id","collapsibleNavbar",1,"collapse","navbar-collapse"],[1,"navbar-nav","nav-pills","nav-fill","d-flex","col-lg-12"],[1,"nav-item","col-lg-3"],["aria-current","page","routerLink","/Home",1,"nav-link"],["routerLink","/MenuParent",1,"nav-link"],["routerLink","/Chefs",1,"nav-link"],["routerLink","/Offers",1,"nav-link"],["routerLink","/Blog",1,"nav-link"],["routerLink","/Cart",1,"nav-link"],[1,"fa","fa-shopping-cart",2,"font-size","25px"],["href","#","id","navbarDropdownMenuLink","role","button","data-toggle","dropdown","aria-haspopup","true","aria-expanded","false",1,"nav-link","dropdown-toggle"],[1,"fa","fa-user",2,"font-size","x-large"],["class","dropdown-menu","aria-labelledby","navbarDropdownMenuLink",4,"ngIf","ngIfElse"],["login",""],[1,"nav-item","col-lg-2"],["aria-labelledby","navbarDropdownMenuLink",1,"dropdown-menu"],[1,"d-flex","flex-row",3,"click"],[1,"dropdown-item","col-6",3,"click"],["src","https://firebasestorage.googleapis.com/v0/b/foodcourt-2f1f1.appspot.com/o/flags%2FUK.png?alt=media&token=43b55e79-b581-4fe6-be3a-d8f281dd6ea0","width","40px","height","25px",2,"padding-top","10px","padding-left","15px"],["src","https://firebasestorage.googleapis.com/v0/b/foodcourt-2f1f1.appspot.com/o/flags%2Fegypt.png?alt=media&token=944f679e-17dd-406c-942a-142d9cf6662a","width","40px","height","25px",2,"padding-top","10px","padding-left","15px"],[1,"dropdown-item",3,"click"],["routerLink","/LogIn",1,"dropdown-item"],["routerLink","/Signup",1,"dropdown-item"]],template:function(t,e){if(1&t&&(r.Rb(0,"header"),r.Rb(1,"nav",0),r.Rb(2,"div",1),r.Rb(3,"button",2),r.Rb(4,"span",3),r.Nb(5,"i",4),r.Qb(),r.Qb(),r.Rb(6,"a",5),r.Nb(7,"img",6),r.Qb(),r.Rb(8,"div",7),r.Rb(9,"ul",8),r.Rb(10,"li",9),r.Rb(11,"a",10),r.xc(12),r.Qb(),r.Qb(),r.Rb(13,"li",9),r.Rb(14,"a",11),r.xc(15),r.Qb(),r.Qb(),r.Rb(16,"li",9),r.Rb(17,"a",12),r.xc(18),r.Qb(),r.Qb(),r.Rb(19,"li",9),r.Rb(20,"a",13),r.xc(21),r.Qb(),r.Qb(),r.Rb(22,"li",9),r.Rb(23,"a",14),r.xc(24),r.Qb(),r.Qb(),r.Rb(25,"li",9),r.Rb(26,"a",15),r.Nb(27,"i",16),r.Qb(),r.Qb(),r.Rb(28,"li",9),r.Rb(29,"a",17),r.Nb(30,"i",18),r.Qb(),r.vc(31,lS,3,1,"div",19),r.vc(32,hS,5,2,"ng-template",null,20,r.wc),r.Qb(),r.Rb(34,"li",21),r.Rb(35,"a",17),r.xc(36),r.Qb(),r.Rb(37,"div",22),r.Rb(38,"div",23),r.bc("click",function(){return e.changeLang("en")}),r.Rb(39,"a",24),r.bc("click",function(){return e.changeLang("en")}),r.xc(40,"English"),r.Qb(),r.Nb(41,"img",25),r.Qb(),r.Rb(42,"div",23),r.bc("click",function(){return e.changeLang("ar")}),r.Rb(43,"a",24),r.bc("click",function(){return e.changeLang("ar")}),r.xc(44,"\u0639\u0631\u0628\u0649"),r.Qb(),r.Nb(45,"img",26),r.Qb(),r.Qb(),r.Qb(),r.Qb(),r.Qb(),r.Qb(),r.Qb(),r.Qb()),2&t){const t=r.qc(33);r.Ab(12),r.zc(" ",e.HeaderItems.home," "),r.Ab(3),r.yc(e.HeaderItems.menu),r.Ab(3),r.yc(e.HeaderItems.chefs),r.Ab(3),r.yc(e.HeaderItems.offers),r.Ab(3),r.yc(e.HeaderItems.blog),r.Ab(7),r.jc("ngIf",e.isUserlogged)("ngIfElse",t),r.Ab(5),r.zc(" ",e.HeaderItems.lang," ")}},directives:[UI,Dw,pt],styles:[".dropdown-menu[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{text-align:center}.dropdown-menu[_ngcontent-%COMP%]   a[_ngcontent-%COMP%], nav[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{font-family:Roboto,sans-serif}nav[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#ffaf42;transition:.5s;transition-property:all}nav[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{color:#fd8709}nav[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:focus{color:#fd5602;font-weight:700}.nav-pills[_ngcontent-%COMP%]   .show[_ngcontent-%COMP%] > .nav-link[_ngcontent-%COMP%]{background-color:#fff}.nav-pills[_ngcontent-%COMP%]   .show[_ngcontent-%COMP%] > .nav-link[_ngcontent-%COMP%], a[_ngcontent-%COMP%]{font-family:Roboto,sans-serif}a[_ngcontent-%COMP%]{font-size:18px}"]}),t})(),fS=(()=>{class t{constructor(t){this.afs=t,this.userRef=[],this.userRed=[]}getFooterLang(){return this.afs.collection("static").doc("footer").collection(localStorage.getItem("lang")||"en").doc(localStorage.getItem("lang")||"en").snapshotChanges()}}return t.\u0275fac=function(e){return new(e||t)(r.Yb(Zm))},t.\u0275prov=r.Ib({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),pS=(()=>{class t{constructor(t,e){this.headerLang=t,this.footerLang=e}ngOnInit(){this.lang=localStorage.getItem("lang")||"en",this.getHeaderLang(),this.getFooterLang()}getHeaderLang(){this.headerLang.getHeaderLang().subscribe(t=>{this.HeaderItems=t.payload.data()},t=>{console.log(t)})}getFooterLang(){this.footerLang.getFooterLang().subscribe(t=>{this.FooterItems=t.payload.data()},t=>{console.log(t)})}}return t.\u0275fac=function(e){return new(e||t)(r.Mb(nI),r.Mb(fS))},t.\u0275cmp=r.Gb({type:t,selectors:[["app-footer"]],decls:56,vars:14,consts:[["role","contentinfo",1,"mainfooter"],[1,"footer-middle"],[1,"container"],[1,"row"],[1,"col-md-3","col-sm-6"],[1,"footer-pad"],[1,"list-unstyled"],["href","#"],["routerLink","/Home"],["routerLink","/MenuParent"],["routerLink","/Chefs"],["routerLink","/LogIn"],["routerLink","/Signup"],[1,"col-md-3"],[1,"social-network","social-circle"],["href","#",1,"icoFacebook",3,"title"],[1,"fa","fa-facebook"],["href","#",1,"icoLinkedin",3,"title"],[1,"fa","fa-instagram"],[1,"col-md-12","copy"],[1,"text-center"]],template:function(t,e){1&t&&(r.Rb(0,"footer",0),r.Rb(1,"div",1),r.Rb(2,"div",2),r.Rb(3,"div",3),r.Rb(4,"div",4),r.Rb(5,"div",5),r.Rb(6,"ul",6),r.Rb(7,"li"),r.Nb(8,"a",7),r.Qb(),r.Rb(9,"li"),r.Rb(10,"a",7),r.xc(11),r.Qb(),r.Qb(),r.Rb(12,"li"),r.Rb(13,"a",7),r.xc(14),r.Qb(),r.Qb(),r.Rb(15,"li"),r.Rb(16,"a",7),r.xc(17),r.Qb(),r.Qb(),r.Rb(18,"li"),r.Rb(19,"a",7),r.xc(20),r.Qb(),r.Qb(),r.Rb(21,"li"),r.Rb(22,"a",7),r.xc(23),r.Qb(),r.Qb(),r.Qb(),r.Qb(),r.Qb(),r.Rb(24,"div",4),r.Rb(25,"div",5),r.Rb(26,"ul",6),r.Rb(27,"li"),r.Rb(28,"a",8),r.xc(29),r.Qb(),r.Qb(),r.Rb(30,"li"),r.Rb(31,"a",9),r.xc(32),r.Qb(),r.Qb(),r.Rb(33,"li"),r.Rb(34,"a",10),r.xc(35),r.Qb(),r.Qb(),r.Rb(36,"li"),r.Rb(37,"a",11),r.xc(38),r.Qb(),r.Qb(),r.Rb(39,"li"),r.Rb(40,"a",12),r.xc(41),r.Qb(),r.Qb(),r.Qb(),r.Qb(),r.Qb(),r.Rb(42,"div",13),r.Rb(43,"h4"),r.xc(44),r.Qb(),r.Rb(45,"ul",14),r.Rb(46,"li"),r.Rb(47,"a",15),r.Nb(48,"i",16),r.Qb(),r.Qb(),r.Rb(49,"li"),r.Rb(50,"a",17),r.Nb(51,"i",18),r.Qb(),r.Qb(),r.Qb(),r.Qb(),r.Qb(),r.Rb(52,"div",3),r.Rb(53,"div",19),r.Rb(54,"p",20),r.xc(55),r.Qb(),r.Qb(),r.Qb(),r.Qb(),r.Qb(),r.Qb()),2&t&&(r.Ab(11),r.yc(e.FooterItems.paymentCenter),r.Ab(3),r.yc(e.FooterItems.contactDirectory),r.Ab(3),r.yc(e.FooterItems.forms),r.Ab(3),r.yc(e.FooterItems.newsAndUpdates),r.Ab(3),r.yc(e.FooterItems.faqs),r.Ab(6),r.yc(e.HeaderItems.home),r.Ab(3),r.yc(e.HeaderItems.menu),r.Ab(3),r.yc(e.HeaderItems.chefs),r.Ab(3),r.yc(e.HeaderItems.login),r.Ab(3),r.yc(e.HeaderItems.register),r.Ab(3),r.yc(e.FooterItems.followUs),r.Ab(3),r.kc("title",e.FooterItems.facebook),r.Ab(3),r.kc("title",e.FooterItems.instagram),r.Ab(5),r.zc("\xa9 ",e.FooterItems.copyRight,""))},directives:[Dw],styles:["footer[_ngcontent-%COMP%]{position:relative;background:#fff;background:linear-gradient(59deg,#ffaf42,#dd8203);color:#ffaf42;margin-bottom:0;padding-bottom:0;width:100%;bottom:0;margin-top:50px}footer[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#fff;font-size:14px;transition-duration:.2s}footer[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{color:#000;text-decoration:none}.copy[_ngcontent-%COMP%]{font-size:12px;padding:10px;border-top:1px solid #fff}.footer-middle[_ngcontent-%COMP%]{padding-top:2em;color:#fff}ul.social-network[_ngcontent-%COMP%]{list-style:none;display:inline;margin-left:0!important;padding:0}ul.social-network[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{display:inline;margin:0 5px}.social-network[_ngcontent-%COMP%]   a.icoFacebook[_ngcontent-%COMP%]:hover{background-color:#3b5998}.social-network[_ngcontent-%COMP%]   a.icoLinkedin[_ngcontent-%COMP%]:hover{background-color:#dc117d}.social-network[_ngcontent-%COMP%]   a.icoFacebook[_ngcontent-%COMP%]:hover   i[_ngcontent-%COMP%], .social-network[_ngcontent-%COMP%]   a.icoLinkedin[_ngcontent-%COMP%]:hover   i[_ngcontent-%COMP%]{color:#fff}.social-network[_ngcontent-%COMP%]   a.socialIcon[_ngcontent-%COMP%]:hover, .socialHoverClass[_ngcontent-%COMP%]{color:#44bcdd}.social-circle[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{display:inline-block;position:relative;margin:0 auto;border-radius:50%;text-align:center;width:30px;height:30px;font-size:15px}.social-circle[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{margin:0;line-height:30px;text-align:center}.social-circle[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover   i[_ngcontent-%COMP%], .triggeredHover[_ngcontent-%COMP%]{-moz-transform:rotate(1turn);-webkit-transform:rotate(1turn);-ms--transform:rotate(1turn);transform:rotate(1turn);transition:all .2s}.social-circle[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#595959;transition:all .8s}.social-network[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{background-color:#f9f9f9}"]}),t})(),gS=(()=>{class t{constructor(){this.title="FoodCourt"}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=r.Gb({type:t,selectors:[["app-root"]],decls:4,vars:0,template:function(t,e){1&t&&(r.Rb(0,"div"),r.Nb(1,"app-header"),r.Nb(2,"router-outlet"),r.Nb(3,"app-footer"),r.Qb())},directives:[dS,Lw,pS],styles:[""]}),t})(),mS=(()=>{class t{}return t.\u0275mod=r.Kb({type:t,bootstrap:[gS]}),t.\u0275inj=r.Jb({factory:function(e){return new(e||t)},providers:[],imports:[[Jt,eI,VO,QO,vE,cS,se.a.initializeApp(Vb),Jm,Ub,Lm,oe]]}),t})();Object(r.T)(),Xt().bootstrapModule(mS).catch(t=>console.error(t))},zn8P:function(t,e){function n(t){return Promise.resolve().then(function(){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e})}n.keys=function(){return[]},n.resolve=n,t.exports=n,n.id="zn8P"},zx2A:function(t,e,n){"use strict";n.d(e,"a",function(){return s}),n.d(e,"b",function(){return a}),n.d(e,"c",function(){return u});var r=n("7o/Q"),i=n("HDdC"),o=n("SeVD");class s extends r.a{constructor(t){super(),this.parent=t}_next(t){this.parent.notifyNext(t)}_error(t){this.parent.notifyError(t),this.unsubscribe()}_complete(){this.parent.notifyComplete(),this.unsubscribe()}}class a extends r.a{notifyNext(t){this.destination.next(t)}notifyError(t){this.destination.error(t)}notifyComplete(){this.destination.complete()}}function u(t,e){if(!e.closed)return t instanceof i.a?t.subscribe(e):Object(o.a)(t)(e)}}},[[0,0]]]);